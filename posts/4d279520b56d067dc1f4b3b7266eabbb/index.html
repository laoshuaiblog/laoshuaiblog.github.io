<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>「MySQL」深入理解MySQL中常用的SQL函数 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/4d279520b56d067dc1f4b3b7266eabbb/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="「MySQL」深入理解MySQL中常用的SQL函数">
  <meta property="og:description" content="「MySQL」深入理解MySQL中常用的SQL函数 窗口函数参考文章1. COALESCE 函数2. USING 函数3. LEAD 函数4. interval 函数5. INSTR 函数6. substring_index 函数7. LENGTH 函数和 CHAR_LENGTH 函数 窗口函数参考文章 SQL窗口函数
1. COALESCE 函数 COALESCE 函数的作用是从一组值中返回第一个非空（NULL）的值。如果所有的值都是 NULL，那么 COALESCE 函数会返回 NULL。
举个例子，如果我们有一个表格包含了学生的姓名和昵称，但有些学生没有昵称，我们可以使用 COALESCE 函数来选择一个非空的名字作为显示的名称：
SELECT COALESCE(nickname, name) AS display_name FROM students; 在这个例子中，如果 nickname 字段不为空，那么 display_name 将会使用昵称；如果 nickname 字段为空，那么 display_name 将会使用姓名。
2. USING 函数 在 SQL 中，可以使用 USING 关键字来指定连接操作的列。当使用 JOIN 操作连接两个表时，如果这两个表中的连接列具有相同的名称，可以使用 USING 关键字来简化连接条件的书写。
以下是使用 USING 关键字进行连接操作的示例：
SELECT * FROM table1 JOIN table2 USING (common_column); 在上面的示例中，table1 和 table2 是要连接的两个表，它们都具有一个名为 common_column 的列。使用 USING 关键字，可以省略连接条件的重复列名，系统会自动匹配这两个表中具有相同名称的列进行连接，不能指定多个列。">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-28T13:53:29+08:00">
    <meta property="article:modified_time" content="2024-02-28T13:53:29+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">「MySQL」深入理解MySQL中常用的SQL函数</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>「MySQL」深入理解MySQL中常用的SQL函数</h4> 
 <ul><li><a href="#_2" rel="nofollow">窗口函数参考文章</a></li><li><a href="#1__COALESCE__5" rel="nofollow">1. COALESCE 函数</a></li><li><a href="#2__USING__14" rel="nofollow">2. USING 函数</a></li><li><a href="#3__LEAD__26" rel="nofollow">3. LEAD 函数</a></li><li><a href="#4_interval__43" rel="nofollow">4. interval 函数</a></li><li><a href="#5_INSTR__55" rel="nofollow">5. INSTR 函数</a></li><li><a href="#6_substring_index__74" rel="nofollow">6. substring_index 函数</a></li><li><a href="#7_LENGTH__CHAR_LENGTH__93" rel="nofollow">7. LENGTH 函数和 CHAR_LENGTH 函数</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>窗口函数参考文章</h2> 
<p><a href="https://blog.csdn.net/liangmengbk/article/details/124253806">SQL窗口函数<br> </a></p> 
<h2><a id="1__COALESCE__5"></a>1. COALESCE 函数</h2> 
<p><code>COALESCE</code> 函数的作用是从一组值中返回第一个非空（NULL）的值。如果所有的值都是 NULL，那么 <code>COALESCE</code> 函数会返回 NULL。</p> 
<p>举个例子，如果我们有一个表格包含了学生的姓名和昵称，但有些学生没有昵称，我们可以使用 <code>COALESCE</code> 函数来选择一个非空的名字作为显示的名称：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">COALESCE</span><span class="token punctuation">(</span>nickname<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token keyword">AS</span> display_name
<span class="token keyword">FROM</span> students<span class="token punctuation">;</span>
</code></pre> 
<p>在这个例子中，如果 <code>nickname</code> 字段不为空，那么 <code>display_name</code> 将会使用昵称；如果 <code>nickname</code> 字段为空，那么 <code>display_name</code> 将会使用姓名。</p> 
<h2><a id="2__USING__14"></a>2. USING 函数</h2> 
<p>在 SQL 中，可以使用 <code>USING</code> 关键字来指定连接操作的列。当使用 <code>JOIN</code> 操作连接两个表时，如果这两个表中的连接列具有相同的名称，可以使用 <code>USING</code> 关键字来简化连接条件的书写。<br> 以下是使用 <code>USING</code> 关键字进行连接操作的示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> table1
<span class="token keyword">JOIN</span> table2 <span class="token keyword">USING</span> <span class="token punctuation">(</span>common_column<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在上面的示例中，<code>table1</code> 和 <code>table2</code> 是要连接的两个表，它们都具有一个名为 <code>common_column</code> 的列。使用 <code>USING</code> 关键字，可以省略连接条件的重复列名，系统会自动匹配这两个表中具有相同名称的列进行连接，不能指定多个列。</p> 
<h2><a id="3__LEAD__26"></a>3. LEAD 函数</h2> 
<p><code>LEAD()</code> 是一种窗口函数，用于获取当前行之后的行的值。它可以帮助你在查询中访问结果集中下一个行的数据，而无需实际改变结果集的顺序。</p> 
<p>以下是 <code>LEAD()</code> 函数的基本语法：</p> 
<pre><code>LEAD(expression, offset, default) OVER (PARTITION BY partition_column ORDER BY order_column)
</code></pre> 
<ul><li><code>expression</code>: 要获取的值的列或表达式。</li><li><code>offset</code>: 指定要获取的后续行的偏移量（默认为 1，表示下一行）。</li><li><code>default</code>: 可选参数，指定当没有后续行时要返回的默认值（如果不提供，则默认为 <code>NULL</code>）。</li><li><code>PARTITION BY partition_column</code>: 可选子句，用于对结果集进行分区。</li><li><code>ORDER BY order_column</code>: 指定确定行之间顺序的列。</li></ul> 
<p>通过使用 <code>LEAD()</code> 函数，你可以轻松地访问结果集中当前行之后的行的数据，从而执行各种分析和计算操作。在之前的示例中，我展示了如何在查询中使用 <code>LEAD()</code> 函数来获取用户的下一个刷题日期。</p> 
<h2><a id="4_interval__43"></a>4. interval 函数</h2> 
<p>在SQL中，<code>INTERVAL 5 MINUTE</code>表示一个时间间隔，具体意思是“5分钟”。这个用法通常用于在SQL语句中对时间进行加减操作，比如计算时间差、增加时间等。</p> 
<p>例如，在MySQL中，你可以使用<code>INTERVAL</code>关键字来对时间进行加减操作。下面是一个示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">current_time</span><span class="token punctuation">,</span>
       <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token number">5</span> <span class="token keyword">MINUTE</span> <span class="token keyword">AS</span> after_5_minutes<span class="token punctuation">;</span>
</code></pre> 
<p>这个查询会返回当前时间以及加上5分钟后的时间。<code>INTERVAL 5 MINUTE</code>表示增加5分钟。</p> 
<h2><a id="5_INSTR__55"></a>5. INSTR 函数</h2> 
<p><code>INSTR</code> 函数是 SQL 中用来查找字符串中子串的函数。它的语法如下：</p> 
<pre><code class="prism language-sql">INSTR<span class="token punctuation">(</span>string<span class="token punctuation">,</span> substring<span class="token punctuation">)</span>
</code></pre> 
<p>其中，<code>string</code> 是要查找的字符串，<code>substring</code> 是要查找的子串。函数返回 <code>substring</code> 在 <code>string</code> 中第一次出现的位置，如果 <code>substring</code> 不在 <code>string</code> 中，则返回 0。</p> 
<p>以下是一个示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> INSTR<span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这个查询会返回 <code>7</code>，因为子串 <code>'world'</code> 在字符串 <code>'hello world'</code> 中第一次出现的位置是 7。</p> 
<p>在你的例子中，<code>INSTR(comment,'是')+INSTR(comment,'试')+INSTR(comment,'报名') &gt; 0</code> 的含义是，如果 <code>comment</code> 字符串中包含子串 <code>'是'</code>、<code>'试'</code> 或 <code>'报名'</code> 中的任意一个，那么该表达式的值就为真（即大于0）。</p> 
<h2><a id="6_substring_index__74"></a>6. substring_index 函数</h2> 
<p><code>SUBSTRING_INDEX</code> 函数用于在字符串中查找并返回某个分隔符之前或之后的子串。该函数的语法如下：</p> 
<pre><code class="prism language-sql">SUBSTRING_INDEX<span class="token punctuation">(</span>str<span class="token punctuation">,</span> delim<span class="token punctuation">,</span> count<span class="token punctuation">)</span>
</code></pre> 
<ul><li><code>str</code> 是要进行处理的字符串。</li><li><code>delim</code> 是用作分隔符的字符或子串。</li><li><code>count</code> 指定了要返回的子串在分隔符出现的次数。如果 <code>count</code> 为正数，函数将从左侧开始查找；如果 <code>count</code> 为负数，函数将从右侧开始查找。</li></ul> 
<p>例如，如果有字符串 <code>'apple,banana,cherry'</code>，想要获取逗号后的第一个内容 <code>'banana'</code>，可以使用以下 SQL 查询：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> SUBSTRING_INDEX<span class="token punctuation">(</span><span class="token string">'apple,banana,cherry'</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> result<span class="token punctuation">;</span>
</code></pre> 
<p>这个查询将返回 <code>'banana'</code>，因为它是逗号后的第一个内容。</p> 
<h2><a id="7_LENGTH__CHAR_LENGTH__93"></a>7. LENGTH 函数和 CHAR_LENGTH 函数</h2> 
<p>在 SQL 中，<code>LENGTH</code> 函数和 <code>CHAR_LENGTH</code> 函数用于获取字符串的长度，但它们之间有一些区别。</p> 
<ol><li> <p><code>LENGTH</code> 函数：</p> 
  <ul><li><code>LENGTH</code> 函数返回字符串中的字符数或字节数，取决于数据库的字符集编码。</li><li>对于英文字符或单字节字符集，<code>LENGTH</code> 函数返回字符串中的字符数。</li><li>对于多字节字符集（如 UTF-8），<code>LENGTH</code> 函数返回字符串中的字节数，而不是字符数。</li></ul> </li><li> <p><code>CHAR_LENGTH</code> 函数：</p> 
  <ul><li><code>CHAR_LENGTH</code> 函数返回字符串中的字符数，不受字符集编码的影响。</li><li>无论是单字节字符集还是多字节字符集，<code>CHAR_LENGTH</code> 函数都会返回字符串中的字符数。</li></ul> </li></ol> 
<p>例如，假设有一个包含中文字符的字符串 <code>'你好，世界！'</code>，如果使用 <code>LENGTH</code> 和 <code>CHAR_LENGTH</code> 函数来获取其长度，结果可能如下：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> LENGTH<span class="token punctuation">(</span><span class="token string">'你好，世界！'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> length_result<span class="token punctuation">,</span> 
       CHAR_LENGTH<span class="token punctuation">(</span><span class="token string">'你好，世界！'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> char_length_result<span class="token punctuation">;</span>
</code></pre> 
<p>在这个例子中，<code>length_result</code> 的值取决于数据库的字符集编码，而 <code>char_length_result</code> 的值将始终是 6，因为字符串中有 6 个字符。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4c30eb678e812fb52e4cc29cea8fbdf9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mistral Large，Le Chat来了！Mistral AI连放两个大招！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6866575a1c87fcfb9fcb83390fff651e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决 request to https://registry.npm.taobao.org/@types%2ffs-extra failed, reason: certificate has expi</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>