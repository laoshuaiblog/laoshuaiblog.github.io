<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>计算任意两个日期之间相隔的天数以及年数 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/2bdee51965c00ae1b110e1b67863e29b/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="计算任意两个日期之间相隔的天数以及年数">
  <meta property="og:description" content="计算任意两个日期之间相隔的天数以及年数。 //&amp;lt;思路&amp;gt; //历法规定，四年一闰，四百年闰，例如2000年是闰年，2100年不闰年， //公历年份是整百数的，必须是400的倍数的才是闰年，不是400的倍数的就是平年 //计算两个日期之间的天数(C&#43;&#43;) //定义变量year1, month1, day1, year2, month2, day2 //首先比较两个日期，将小的给date1 //再将date1进行加1，一直增加到date2的日期 //其中当天数大于GetLastDay时，月数加1，同理当月数大于12时，年加1 //再这过程中delta进行自增（&#43;&#43;）——&amp;gt; return delta； /* 问题: 给你两个日期(如&#34;2017，8，18&#34;和&#34;2013，6，11&#34;),求它们之间相差的天数 分析: 这是一年看似简单，实际上却有点复杂的小问题，首先你要考虑到月大月小的问题，其次你要考虑到闰年的问题 当然，你也要检测一下，给定的日期格式是否合法，对这个问题的解法，写出伪代码如下 */ #include &amp;lt;Windows.h&amp;gt; #include &amp;lt;stdio.h&amp;gt; struct tagDate { int year; int month; int day; }; //设置日期 void SetDate(int y, int m, int d, tagDate *date) { date-&amp;gt;year = y; date-&amp;gt;month = m; date-&amp;gt;day = d; } //是否闰年 int IsLeapYear(int year) { return ((year%4==0) &amp;amp;&amp;amp; (year%100!=0)||year%400==0); } //得到date.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2017-08-10T14:30:38+08:00">
    <meta property="article:modified_time" content="2017-08-10T14:30:38+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">计算任意两个日期之间相隔的天数以及年数</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5 id="计算任意两个日期之间相隔的天数以及年数">计算任意两个日期之间相隔的天数以及年数。</h5> 
<pre class="prettyprint"><code class="language-C++ hljs axapta"><span class="hljs-comment">//&lt;思路&gt;</span>
<span class="hljs-comment">//历法规定，四年一闰，四百年闰，例如2000年是闰年，2100年不闰年，</span>
<span class="hljs-comment">//公历年份是整百数的，必须是400的倍数的才是闰年，不是400的倍数的就是平年</span>
<span class="hljs-comment">//计算两个日期之间的天数(C++) </span>
<span class="hljs-comment">//定义变量year1, month1, day1, year2, month2, day2</span>
<span class="hljs-comment">//首先比较两个日期，将小的给date1</span>
<span class="hljs-comment">//再将date1进行加1，一直增加到date2的日期</span>
<span class="hljs-comment">//其中当天数大于GetLastDay时，月数加1，同理当月数大于12时，年加1</span>
<span class="hljs-comment">//再这过程中delta进行自增（++）——&gt; return delta；</span>
<span class="hljs-comment">/*
问题: 给你两个日期(如"2017，8，18"和"2013，6，11"),求它们之间相差的天数
分析: 这是一年看似简单，实际上却有点复杂的小问题，首先你要考虑到月大月小的问题，其次你要考虑到闰年的问题
当然，你也要检测一下，给定的日期格式是否合法，对这个问题的解法，写出伪代码如下

*/</span>




<span class="hljs-preprocessor">#include &lt;Windows.h&gt;  </span>
<span class="hljs-preprocessor">#include &lt;stdio.h&gt;  </span>


struct tagDate  
{   
    <span class="hljs-keyword">int</span> year;  
    <span class="hljs-keyword">int</span> month;  
    <span class="hljs-keyword">int</span> day;  
};  

<span class="hljs-comment">//设置日期  </span>
<span class="hljs-keyword">void</span> SetDate(<span class="hljs-keyword">int</span> y, <span class="hljs-keyword">int</span> m, <span class="hljs-keyword">int</span> d, tagDate *<span class="hljs-keyword">date</span>)  
{   
    <span class="hljs-keyword">date</span>-&gt;year = y;  
    <span class="hljs-keyword">date</span>-&gt;month = m;  
    <span class="hljs-keyword">date</span>-&gt;day = d;  
}   

<span class="hljs-comment">//是否闰年  </span>
<span class="hljs-keyword">int</span> IsLeapYear(<span class="hljs-keyword">int</span> year)    
{   
    <span class="hljs-keyword">return</span> ((year%<span class="hljs-number">4</span>==<span class="hljs-number">0</span>) &amp;&amp; (year%<span class="hljs-number">100</span>!=<span class="hljs-number">0</span>)||year%<span class="hljs-number">400</span>==<span class="hljs-number">0</span>);   
}   

<span class="hljs-comment">//得到date.month的最大天数  </span>
<span class="hljs-keyword">int</span> GetLastDay(tagDate <span class="hljs-keyword">date</span>)   
{   
    <span class="hljs-keyword">int</span> num;  
    <span class="hljs-keyword">switch</span>(<span class="hljs-keyword">date</span>.month)   
    {  
    <span class="hljs-keyword">case</span>  <span class="hljs-number">1</span>:  
    <span class="hljs-keyword">case</span>  <span class="hljs-number">3</span>:  
    <span class="hljs-keyword">case</span>  <span class="hljs-number">5</span>:  
    <span class="hljs-keyword">case</span>  <span class="hljs-number">7</span>:  
    <span class="hljs-keyword">case</span>  <span class="hljs-number">8</span>:  
    <span class="hljs-keyword">case</span> <span class="hljs-number">10</span>:  
    <span class="hljs-keyword">case</span> <span class="hljs-number">12</span>:  
        num=<span class="hljs-number">31</span>;  
        <span class="hljs-keyword">break</span>;  
    <span class="hljs-keyword">case</span>  <span class="hljs-number">2</span>:  
        num = <span class="hljs-number">28</span>+IsLeapYear(<span class="hljs-keyword">date</span>.year);   
        <span class="hljs-keyword">break</span>;   
    <span class="hljs-keyword">default</span>:   
        num = <span class="hljs-number">30</span>;   
    }   
    <span class="hljs-keyword">return</span> num;   
}  

<span class="hljs-comment">//日期是否合法  </span>
<span class="hljs-keyword">int</span> IsDateValid(tagDate <span class="hljs-keyword">date</span>)  
{   
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">date</span>.year &lt;<span class="hljs-number">0</span> || <span class="hljs-keyword">date</span>.month &lt;<span class="hljs-number">1</span> || <span class="hljs-keyword">date</span>.month&gt; <span class="hljs-number">12</span>)   
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  

    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">date</span>.day &lt;<span class="hljs-number">1</span> || <span class="hljs-keyword">date</span>.day&gt; GetLastDay(<span class="hljs-keyword">date</span>))  
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  

    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;  
}   

<span class="hljs-comment">//date+1  </span>
<span class="hljs-keyword">void</span> AddDay(tagDate *<span class="hljs-keyword">date</span>)  
{  
    <span class="hljs-keyword">date</span>-&gt;day++;  
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">date</span>-&gt;day &gt; GetLastDay(*<span class="hljs-keyword">date</span>))  
    {  
        <span class="hljs-keyword">date</span>-&gt;day = <span class="hljs-number">1</span>;  
        <span class="hljs-keyword">date</span>-&gt;month++;  
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">date</span>-&gt;month &gt; <span class="hljs-number">12</span>)  
        {  
            <span class="hljs-keyword">date</span>-&gt;month = <span class="hljs-number">1</span>;  
            <span class="hljs-keyword">date</span>-&gt;year++;  
        }  
    }  
}  

<span class="hljs-comment">//date1比date2小返回值为1，否则为0  </span>
<span class="hljs-keyword">int</span> Compare(tagDate date1, tagDate date2)  
{  
    <span class="hljs-keyword">if</span>(date1.year &lt; date2.year)  
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;  
    <span class="hljs-keyword">if</span>(date1.year &lt;= date2.year &amp;&amp; date1.month &lt; date2.month)  
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;  
    <span class="hljs-keyword">if</span>(date1.year &lt;= date2.year &amp;&amp; date1.month &lt;= date2.month &amp;&amp; date1.day &lt; date2.day)  
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;  

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  
}   
<span class="hljs-comment">//计算两个日期的间隔天数  </span>
<span class="hljs-keyword">long</span> DateDiff(tagDate date1, tagDate date2)  
{  
    <span class="hljs-keyword">long</span> delta = <span class="hljs-number">0</span>;  
    tagDate date3;  
    <span class="hljs-comment">//若date1 &gt; date2,交换date1,date2  </span>
    <span class="hljs-keyword">if</span>(!Compare(date1, date2))  
    {  
        date3 = date2;  
        date2 = date1;  
        date1 = date3;  
    }  

    <span class="hljs-comment">//date1比date2少时，date1日期加1  </span>
    <span class="hljs-keyword">while</span>(Compare(date1,date2))  
    {  
        AddDay(&amp;date1);  
        delta++;  
    }  
    <span class="hljs-keyword">return</span> delta;  
}   

<span class="hljs-keyword">void</span> main()  
{  
    tagDate date1, date2;  
    <span class="hljs-keyword">int</span> y, m, d;  

    system(<span class="hljs-string">"cls"</span>);

    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)  
    {  
        puts(<span class="hljs-string">"Please Input date1\t "</span>);  
        scanf(<span class="hljs-string">"%d,%d,%d"</span>, &amp;y, &amp;m, &amp;d);  
        SetDate(y, m, d, &amp;date1);  
        <span class="hljs-keyword">if</span>(!IsDateValid(date1))  
        {   
            puts( <span class="hljs-string">"date1   is   invalid !"</span>);  
            exit(<span class="hljs-number">1</span>);  
        }  

        puts(<span class="hljs-string">"\nPlease Input date2\t "</span>);  
        scanf(<span class="hljs-string">"%d,%d,%d"</span>, &amp;y, &amp;m, &amp;d);  
        SetDate(y, m, d, &amp;date2);  
        <span class="hljs-keyword">if</span>(!IsDateValid(date2))  
        {  
            puts( <span class="hljs-string">"date2   is   invalid !"</span>);  
            exit(<span class="hljs-number">1</span>);  
        }  
        <span class="hljs-comment">//返回的天数，以及年数 </span>
        printf(<span class="hljs-string">"\nResult : %ld day [about %.2f year]\n"</span>, DateDiff(date1,date2),DateDiff(date1,date2)/<span class="hljs-number">365.0</span>);  
    }  
}  </code></pre> 
<hr>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5d6c0cc05d6bb5f180e6fe728253f8b4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Statement、PreparedStatement、CallableStatement</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2fc8c69a3ed9cd39df0b274a6d9f0f42/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python3常见编码转换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>