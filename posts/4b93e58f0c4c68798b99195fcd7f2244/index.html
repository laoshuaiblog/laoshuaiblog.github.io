<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Retrofit和Rxjava的优势和区别 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/4b93e58f0c4c68798b99195fcd7f2244/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Retrofit和Rxjava的优势和区别">
  <meta property="og:description" content="Retrofit 定义：它是一个基于Ok的网络请求框架。
优势：
1、使用更方便，
2、相对于Ok来说网络请求过程更加解耦，通过注解和动态代理的方式将请求体和请求过程分离。
3、并且还处理了Ok在使用过程中一些问题。回调结果的处理和对象映射（也就是实体类映射）的处理
4、通过提供的工厂方法工具实现实体类的映射，提供配置三方工厂的一些操作。
Retrofit使用注意：
1、注意注解的搭配使用，BaseUrl()必须以“/”结尾，注解：@GET,@POST等使用过程中注意事项
2、实体类映射时，如果字符串
Retrofit2.6之前和Retrofit2.6之后区别：
2.6之后支持了kotlin的协程
Retrofit注解：
@Query
用于拼接Url路径后面的查询参数，一个@Query相当于拼接一个参数，多个参数中间用，隔开。
@QueryMap
主要的效果等同于多个@Query参数拼接,参数以map的形式传入,以Map的键值对为参数传入，只用于GET请求(@Query, @QueryMap)
@Field 用法类似于@Query 但只用于POST请求
@FieldMap
和QueryMap用法一样以Map形式传入键值对拼接请求参数
只用于POST请求,必须添加@FormUrlEncoded要不然会报异常(@Field, @FieldMap)
@FormUrlEncoded
表示这个请求为表单请求，如果在使用POST请求时不添加这行会报异常
Java.lang.IllegalArgumentException: @Field parameters can only be used with form encoding.
@Path
用于替换Url路径中的变量字符。可以使用在Url里添加{page} 然后在参数里@Path(&#34;page&#34;) 类型 参数名 声明这个page是一个拼接参数,注意使用@Path时，path对应的路径不能包含”/”，不然每个加到host Url后面的东西都会被省略掉
@Url
@Url是动态的Url请求数据的注解
@Multipart
标记这个请求用于文件传输,可以用@Part(&#34;字段名&#34;) Multipart.Part 参数名 来传入文件参数,也可以用 RequestBody来传文件
@Streaming
标记说明要把请求的返回数据转换为IO数据流 在文件下载时使用
@Headers/Header
@Headers传入多个头信息以{}来括住头信息 以,号隔开
@Header 传入单个头信息 以&#34;键:值&#34;的形式传入
Rxjava： 定义：Rxjava只是一个异步链式调用的库，不是网络请求！！！Rxjava是一种扩展的观察者模式，整个模式中有4个角色：
1.被观察者（Observable），用来产生事件。观察者（Observer），用来接收事件，并给出响应动作。订阅（Subscribe），用来连接被观察者和观察者。事件（Event）,作为被观察者和观察者沟通的载体。
2.Rxjava的执行流程：被观察者（Observable）通过订阅（Subscribe)按顺序发送事件给观察者（Observer），观察者（Observer）按顺序接收事件和作出对应的响应。
3.Rxjava的基本实现：
1. 创建Observable，它决定什么时候触发事件以及触发怎样的事件。
2. 创建Observer,Observer，它决定事件触发的时候将有怎样的行为。还可以用Subscriber代替。">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-06-01T21:33:30+08:00">
    <meta property="article:modified_time" content="2021-06-01T21:33:30+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Retrofit和Rxjava的优势和区别</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 style="margin-left:.0001pt;"><span style="color:#ff0000;">Retrofit</span></h3> 
<p style="margin-left:0;"><strong>定义：</strong>它是一个基于Ok的网络请求框架。</p> 
<p style="margin-left:0;"><strong>优势：</strong></p> 
<p style="margin-left:0;">1、使用更方便，</p> 
<p style="margin-left:0;">2、相对于Ok来说网络请求过程更加解耦，通过注解和动态代理的方式将请求体和请求过程分离。</p> 
<p style="margin-left:0;">3、并且还处理了Ok在使用过程中一些问题。回调结果的处理和对象映射（也就是实体类映射）的处理</p> 
<p style="margin-left:0;">4、通过提供的工厂方法工具实现实体类的映射，提供配置三方工厂的一些操作。</p> 
<p style="margin-left:0;"><strong>Retrofit使用注意：</strong></p> 
<p style="margin-left:0;">1、注意注解的搭配使用，BaseUrl()必须以“/”结尾，注解：@GET,@POST等使用过程中注意事项</p> 
<p style="margin-left:0;">2、实体类映射时，如果字符串</p> 
<p style="margin-left:0;">Retrofit2.6之前和Retrofit2.6之后区别：</p> 
<p style="margin-left:0;">2.6之后支持了kotlin的协程</p> 
<p style="margin-left:0;"><strong>Retrofit注解：</strong></p> 
<p style="margin-left:0;">@Query</p> 
<p style="margin-left:0;">用于拼接Url路径后面的查询参数，一个@Query相当于拼接一个参数，多个参数中间用，隔开。</p> 
<p style="margin-left:0;">@QueryMap</p> 
<p style="margin-left:0;">主要的效果等同于多个@Query参数拼接,参数以map的形式传入,以Map的键值对为参数传入，只用于GET请求(@Query, @QueryMap)</p> 
<p style="margin-left:0;">@Field   用法类似于@Query 但只用于POST请求</p> 
<p style="margin-left:0;">@FieldMap</p> 
<p style="margin-left:0;">和QueryMap用法一样以Map形式传入键值对拼接请求参数</p> 
<p style="margin-left:0;">只用于POST请求,必须添加@FormUrlEncoded要不然会报异常(@Field, @FieldMap)</p> 
<p style="margin-left:0;">@FormUrlEncoded</p> 
<p style="margin-left:0;">表示这个请求为表单请求，如果在使用POST请求时不添加这行会报异常</p> 
<p style="margin-left:0;">Java.lang.IllegalArgumentException: @Field parameters can only be used with form encoding.</p> 
<p style="margin-left:0;">@Path</p> 
<p style="margin-left:0;">用于替换Url路径中的变量字符。可以使用在Url里添加{page}  然后在参数里@Path("page") 类型 参数名 声明这个page是一个拼接参数,注意使用@Path时，path对应的路径不能包含”/”，不然每个加到host Url后面的东西都会被省略掉</p> 
<p style="margin-left:0;">@Url</p> 
<p style="margin-left:0;">@Url是动态的Url请求数据的注解</p> 
<p style="margin-left:0;">@Multipart</p> 
<p style="margin-left:0;">标记这个请求用于文件传输,可以用@Part("字段名") Multipart.Part 参数名 来传入文件参数,也可以用 RequestBody来传文件</p> 
<p style="margin-left:0;">@Streaming</p> 
<p style="margin-left:0;">标记说明要把请求的返回数据转换为IO数据流 在文件下载时使用</p> 
<p style="margin-left:0;">@Headers/Header</p> 
<p style="margin-left:0;">@Headers传入多个头信息以{}来括住头信息 以,号隔开</p> 
<p style="margin-left:0;">@Header 传入单个头信息 以"键:值"的形式传入</p> 
<h3 style="margin-left:.0001pt;"><span style="color:#ff0000;">Rxjava：</span></h3> 
<p style="margin-left:0;"><strong>定义：</strong>Rxjava只是一个异步链式调用的库，不是网络请求！！！Rxjava是一种扩展的观察者模式，整个模式中有4个角色：</p> 
<p style="margin-left:0;">1.被观察者（Observable），用来产生事件。观察者（Observer），用来接收事件，并给出响应动作。订阅（Subscribe），用来连接被观察者和观察者。事件（Event）,作为被观察者和观察者沟通的载体。</p> 
<p style="margin-left:0;">2.Rxjava的执行流程：被观察者（Observable）通过订阅（Subscribe)按顺序发送事件给观察者（Observer），观察者（Observer）按顺序接收事件和作出对应的响应。</p> 
<p style="margin-left:0;">3.Rxjava的基本实现：</p> 
<p style="margin-left:0;">    1. 创建Observable，它决定什么时候触发事件以及触发怎样的事件。</p> 
<p style="margin-left:0;">    2. 创建Observer,Observer，它决定事件触发的时候将有怎样的行为。还可以用Subscriber代替。</p> 
<p style="margin-left:0;">    3.Subscribe，用 subscribe() 方法将被观察者和观察者连接</p> 
<p style="margin-left:0;">    4.线程调度-scheduler</p> 
<p style="margin-left:0;">        RxJava 通过它来指定被观察者和观察者所在的线程。包括：</p> 
<p style="margin-left:0;">        Schedulers.immediate(): 直接在当前线程运行，默认</p> 
<p style="margin-left:0;">        Schedulers.newThread(): 启用新线程执行操作。</p> 
<p style="margin-left:0;">        Schedulers.io(): I/O 操作（读写文件、读写数据库、网络信息交互等）</p> 
<p style="margin-left:0;">        Schedulers.computation(): 计算所使用的 Scheduler。</p> 
<p style="margin-left:0;">        AndroidSchedulers.mainThread()，在 Android 主线程运行。</p> 
<p style="margin-left:0;">    使用 subscribeOn()指定被观察者所在线程，observeOn() 指定观察者所在线程</p> 
<p style="margin-left:0;">    5.变换</p> 
<p style="margin-left:0;">    RxJava 支持将事件序列中的对象或整个序列进行加工处理，转换成不同的事件或事件序列。</p> 
<p style="margin-left:0;"><strong>Rxjava好处：</strong></p> 
<p style="margin-left:0;">1、让复杂的异步处理逻辑更加清晰，因为它是异步链式调用的。它需要结合操作符来做。</p> 
<p style="margin-left:0;">2、整体遵循观察者设计模式。</p> 
<p style="margin-left:0;">3、切换线程更加方便。</p> 
<p style="margin-left:0;">4、他可以配置Retrofit来使用。为什么他可以搭配Retrofit来使用？</p> 
<p style="margin-left:0;">    Retrofit和Rxjavadapei使用是因为Rxjava本身并不是为了切换线程，Rxjava具备了切换线程的功能，对网络请求的而结果来进行链式操作，通过操作符来处理异步的结果，比如说操作符FiledMap，Map</p> 
<p style="margin-left:0;">5、具备了一个工具类的操作，具备了过滤，定时等操作。</p> 
<p style="margin-left:0;">原理：如何采用观察者实现这个效果的以及它如何完成线程切换操作？</p> 
<p style="margin-left:0;"><strong>Rxjava缺点：</strong></p> 
<p style="margin-left:0;">订阅完了必须得取消订阅，否则会出现内存泄漏。解决方案：</p> 
<p style="margin-left:0;">Rxjava操作符：</p> 
<p style="margin-left:0;">concat操作符</p> 
<p style="margin-left:0;">Concat先读取缓存数据并展示UI再获取网络数据刷新UI。</p> 
<p style="margin-left:0;">1、concat 实现不交错的发射两个甚至多个Observable</p> 
<p style="margin-left:0;">2、只有前一个 Observable 终止（onComplete）才会订阅下一个 Observable,</p> 
<p style="margin-left:0;">3、多个Observable的泛型应当保持一致</p> 
<p style="margin-left:0;">map操作符</p> 
<p style="margin-left:0;">可以将Observable操作的数据类型进行转换，传入的参数为Function类型。</p> 
<p style="margin-left:0;">1.map回调中，拿到传进来的数据，进行随意转换后继续发射给下一级。</p> 
<p style="margin-left:0;">2.Function泛型第一个是传进来的参数，第二个是返回值的类型</p> 
<p style="margin-left:0;">flatMap操作符</p> 
<p style="margin-left:0;">类似map。FlatMap将一个Observable变换成多个Observable，将它们合并发射。不保证事件的顺序。</p> 
<p style="margin-left:0;">使用场景：多个网络请求依次依赖</p> 
<p style="margin-left:0;">1、注册用户前先通过接口A获取当前用户是否已注册，再通过接口B注册;</p> 
<p style="margin-left:0;">2、注册后自动登录，先通过注册接口注册用户信息，注册成功后马上调用登录接口进行自动登录。</p> 
<p style="margin-left:0;">concatMap操作符</p> 
<p style="margin-left:0;">concatMap和flatMap几乎一样，它能保证事件的顺序。</p> 
<p style="margin-left:0;">Flowable背压</p> 
<p style="margin-left:0;">Flowable返回值为Publisher或其实现类。Flowable是publisher的实现类，少写一个for循环，用了forArray（）方法。解决背压问题</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/41e2926b804e218a41d5b3588b1236a9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">4. 案例-使用 Statement 完成 JDBC 增删改查</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fed4b2154aaece07a592f83357d92ce1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">完美解决dataframe多条件筛选问题:A value is trying to be set on a copy of a slice from a DataFrame</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>