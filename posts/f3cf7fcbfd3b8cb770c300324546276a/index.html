<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Verilog入门设计（三）——组合电路和逻辑电路的仿真 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/f3cf7fcbfd3b8cb770c300324546276a/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Verilog入门设计（三）——组合电路和逻辑电路的仿真">
  <meta property="og:description" content="数字电路仿真 一、测试平台（Test Bench）1、测试程序一般结构2、激励信号产生方式举例2.1 initial语句产生激励信号2.2 always语句产生激励信号 二、组合电路的仿真1、8位乘法器的仿真2、8位加法器的仿真3、2选1数据选择器的仿真 三、时序电路的仿真8位计数器的仿真 一、测试平台（Test Bench） 测试平台的作用是给我们的设计进行验证，通过给被测试模块施加激励信号，观察其输出，然后判断其逻辑功能与时序关系正确与否来判断这个设计是否符合需求。
从图中可以看出，测试模块向待测木块施加激励信号，激励信号必须定义为reg类型，以保持其信号值。待测模块在激励作用下产生输出，输出信号必须定义为wire型。测试模块将输出信息按规定的格式以文本或图形输出，供用户检测。
1、测试程序一般结构 module 仿真模块名；//无端口列表 数据类型说明 //其中激励信号定义为reg类型，输出信号定义为wire类型 parameter、integer等定义 待测模块调用 激励向量定义（always、initial结构等，if-else/for/case/while/repeat/disable等控制语句） 显示格式定义（$monitor、$display、$time等） endmodule 测试模块只有模块名，没有端口列表；输入信号（激励信号）必须定义为reg型，以保持其信号值；输出信号（显示信号）必须定义为wire型；在测试模块中调用待测试模块，在调用时应注意端口排列的顺序与模块定义时一致；一般用always、initial等过程快来定义激励信号，使用系统任务和系统函数来定义输出格式；在激励型号的定义中，可使用如下一些控制语句：if-else, for,forever,case,while,repeat,wait,disable,force,release,begin-end,fork-join等，这些控制语句一般只用在always、initial、function、task等过程快中。 2、激励信号产生方式举例 2.1 initial语句产生激励信号 `timescale 1ns/100ps module test1;	//定义模块名 reg A,B,C;	//定义输入输出端口，本例只有输入端口，声明为reg类型 initial begin A=0;B=1;C=0; #10 C=1;	//#n表示延迟10个时间单位，时间单位由timescale确定，本例中一个时间单位为1ns，精度为100ps。#10表示延迟10ns #10 A=1;B=0; #10 A=0; #10 C=0; end initial $monitor($time,,,&#34;A=%d,B=%d,C=%d&#34;,A,B,C);	//显示 endmodule 2.2 always语句产生激励信号 例1:
`timescale 1ns/1ns module always_clk; reg clk; parameter CYCLE=100; always #(CYCLE/2) clk=~clk; initial clk=1; initial $monitor($time,,,&#34;clk=%d&#34;,clk); endmodule 例2:">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-04-14T23:00:14+08:00">
    <meta property="article:modified_time" content="2022-04-14T23:00:14+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Verilog入门设计（三）——组合电路和逻辑电路的仿真</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>数字电路仿真</h4> 
 <ul><li><a href="#Test_Bench_1" rel="nofollow">一、测试平台（Test Bench）</a></li><li><ul><li><a href="#1_5" rel="nofollow">1、测试程序一般结构</a></li><li><a href="#2_24" rel="nofollow">2、激励信号产生方式举例</a></li><li><ul><li><a href="#21_initial_25" rel="nofollow">2.1 initial语句产生激励信号</a></li><li><a href="#22_always_43" rel="nofollow">2.2 always语句产生激励信号</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_77" rel="nofollow">二、组合电路的仿真</a></li><li><ul><li><a href="#18_78" rel="nofollow">1、8位乘法器的仿真</a></li><li><a href="#28_121" rel="nofollow">2、8位加法器的仿真</a></li><li><a href="#321_178" rel="nofollow">3、2选1数据选择器的仿真</a></li></ul> 
  </li><li><a href="#_226" rel="nofollow">三、时序电路的仿真</a></li><li><ul><li><a href="#8_227" rel="nofollow">8位计数器的仿真</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="Test_Bench_1"></a>一、测试平台（Test Bench）</h2> 
<p>  测试平台的作用是给我们的设计进行验证，通过给被测试模块施加激励信号，观察其输出，然后判断其逻辑功能与时序关系正确与否来判断这个设计是否符合需求。<br> <img src="https://images2.imgbox.com/8e/de/7eEvhtw1_o.png" alt="在这里插入图片描述"><br>   从图中可以看出，测试模块向待测木块施加激励信号，激励信号必须定义为reg类型，以保持其信号值。待测模块在激励作用下产生输出，输出信号必须定义为wire型。测试模块将输出信息按规定的格式以文本或图形输出，供用户检测。</p> 
<h3><a id="1_5"></a>1、测试程序一般结构</h3> 
<pre><code class="prism language-c">module 仿真模块名；<span class="token comment">//无端口列表</span>

数据类型说明  <span class="token comment">//其中激励信号定义为reg类型，输出信号定义为wire类型</span>
parameter、integer等定义
待测模块调用

激励向量定义（always、initial结构等，<span class="token keyword">if</span><span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">/</span><span class="token keyword">for</span><span class="token operator">/</span><span class="token keyword">case</span><span class="token operator">/</span><span class="token keyword">while</span><span class="token operator">/</span>repeat<span class="token operator">/</span>disable等控制语句）

显示格式定义（$monitor、$display、$time等）
endmodule
</code></pre> 
<ul><li>测试模块只有模块名，没有端口列表；输入信号（激励信号）必须定义为reg型，以保持其信号值；输出信号（显示信号）必须定义为wire型；</li><li>在测试模块中调用待测试模块，在调用时应注意端口排列的顺序与模块定义时一致；</li><li>一般用always、initial等过程快来定义激励信号，使用系统任务和系统函数来定义输出格式；在激励型号的定义中，可使用如下一些控制语句：if-else, for,forever,case,while,repeat,wait,disable,force,release,begin-end,fork-join等，这些控制语句一般只用在always、initial、function、task等过程快中。</li></ul> 
<h3><a id="2_24"></a>2、激励信号产生方式举例</h3> 
<h4><a id="21_initial_25"></a>2.1 initial语句产生激励信号</h4> 
<pre><code class="prism language-c">`timescale <span class="token number">1</span>ns<span class="token operator">/</span><span class="token number">100</span>ps
module test1<span class="token punctuation">;</span>	<span class="token comment">//定义模块名</span>
reg A<span class="token punctuation">,</span>B<span class="token punctuation">,</span>C<span class="token punctuation">;</span>		<span class="token comment">//定义输入输出端口，本例只有输入端口，声明为reg类型</span>
initial
begin
A<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>B<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>C<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
#<span class="token number">10</span> C<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>		<span class="token comment">//#n表示延迟10个时间单位，时间单位由timescale确定，本例中一个时间单位为1ns，精度为100ps。#10表示延迟10ns</span>
#<span class="token number">10</span> A<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>B<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
#<span class="token number">10</span> A<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
#<span class="token number">10</span> C<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
end
initial $<span class="token function">monitor</span><span class="token punctuation">(</span>$time<span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token string">"A=%d,B=%d,C=%d"</span><span class="token punctuation">,</span>A<span class="token punctuation">,</span>B<span class="token punctuation">,</span>C<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//显示</span>
endmodule
</code></pre> 
<h4><a id="22_always_43"></a>2.2 always语句产生激励信号</h4> 
<p>例1:</p> 
<pre><code class="prism language-c">`timescale <span class="token number">1</span>ns<span class="token operator">/</span><span class="token number">1</span>ns
module always_clk<span class="token punctuation">;</span>
reg clk<span class="token punctuation">;</span>
parameter CYCLE<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
always #<span class="token punctuation">(</span>CYCLE<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span> clk<span class="token operator">=</span><span class="token operator">~</span>clk<span class="token punctuation">;</span>
initial clk<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
initial $<span class="token function">monitor</span><span class="token punctuation">(</span>$time<span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token string">"clk=%d"</span><span class="token punctuation">,</span>clk<span class="token punctuation">)</span><span class="token punctuation">;</span>
endmodule

</code></pre> 
<p>例2:</p> 
<pre><code class="prism language-c">`timescale <span class="token number">1</span>ns<span class="token operator">/</span><span class="token number">1</span>ns
module test2<span class="token punctuation">;</span>
reg clk1<span class="token punctuation">,</span>clk2<span class="token punctuation">;</span>
parameter CYCLE<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>	<span class="token comment">//定义参数</span>
always
 begin
  	       <span class="token punctuation">{<!-- --></span>clk1<span class="token punctuation">,</span>clk2<span class="token punctuation">}</span><span class="token operator">=</span><span class="token number">2</span>'b10<span class="token punctuation">;</span>
#<span class="token punctuation">(</span>CYCLE<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>clk1<span class="token punctuation">,</span>clk2<span class="token punctuation">}</span><span class="token operator">=</span><span class="token number">2</span>'b11<span class="token punctuation">;</span>
#<span class="token punctuation">(</span>CYCLE<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>clk1<span class="token punctuation">,</span>clk2<span class="token punctuation">}</span><span class="token operator">=</span><span class="token number">2</span>'b10<span class="token punctuation">;</span>
#<span class="token punctuation">(</span>CYCLE<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>clk1<span class="token punctuation">,</span>clk2<span class="token punctuation">}</span><span class="token operator">=</span><span class="token number">2</span>'b01<span class="token punctuation">;</span>
#<span class="token punctuation">(</span>CYCLE<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>clk1<span class="token punctuation">,</span>clk2<span class="token punctuation">}</span><span class="token operator">=</span><span class="token number">2</span>'b10<span class="token punctuation">;</span>

 end
initial $<span class="token function">monitor</span><span class="token punctuation">(</span>$time<span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token string">"clk1=%b,clk2=%b"</span><span class="token punctuation">,</span>clk1<span class="token punctuation">,</span>clk2<span class="token punctuation">)</span><span class="token punctuation">;</span>
endmodule
</code></pre> 
<h2><a id="_77"></a>二、组合电路的仿真</h2> 
<h3><a id="18_78"></a>1、8位乘法器的仿真</h3> 
<p>（1）待测试模块</p> 
<pre><code class="prism language-c"><span class="token comment">/*8位乘法器代码*/</span>
module <span class="token function">mult8</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//8位乘法器源码</span>
parameter size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">;</span>
input<span class="token punctuation">[</span>size<span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span>	<span class="token comment">//定义两个操作数</span>
output<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>size<span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> out<span class="token punctuation">;</span> <span class="token comment">//结果</span>
assign out<span class="token operator">=</span>a<span class="token operator">*</span>b<span class="token punctuation">;</span>		<span class="token comment">//乘法计算</span>
endmodule
</code></pre> 
<p>（2）测试模块</p> 
<pre><code class="prism language-c"><span class="token comment">/*8位乘法器的验证程序*/</span>
`timescale <span class="token number">10</span>ns<span class="token operator">/</span><span class="token number">1</span>ns
module mult_tb<span class="token punctuation">;</span>		<span class="token comment">//定义模块名</span>
reg<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span>		<span class="token comment">//定义输入信号</span>
wire<span class="token punctuation">[</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> out<span class="token punctuation">;</span>		<span class="token comment">//定义输出信号</span>
integer i<span class="token punctuation">,</span>j<span class="token punctuation">;</span>
mult8 <span class="token function">m1</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//调用测试模块</span>
initial			<span class="token comment">//激励波形设定</span>
begin
 a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>b<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
 <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">255</span><span class="token punctuation">;</span>i<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
   #<span class="token number">10</span> a<span class="token operator">=</span>i<span class="token punctuation">;</span>
end

initial
begin
 <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token number">255</span><span class="token punctuation">;</span>j<span class="token operator">=</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
   #<span class="token number">10</span> b<span class="token operator">=</span>j<span class="token punctuation">;</span>
end

initial 
begin
 $<span class="token function">monitor</span><span class="token punctuation">(</span>$time<span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token string">"%d*%d=%d"</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//定义显示格式</span>
 #<span class="token number">2560</span> $finish<span class="token punctuation">;</span>		<span class="token comment">//延迟2560*10ns后结束仿真</span>
end
endmodule
</code></pre> 
<p>（3）仿真结果<br> <img src="https://images2.imgbox.com/61/f9/yMzXXqdO_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="28_121"></a>2、8位加法器的仿真</h3> 
<p>（1）待测试模块</p> 
<pre><code class="prism language-c">
module <span class="token function">adder8</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span>cout<span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>cin<span class="token punctuation">)</span><span class="token punctuation">;</span>
parameter size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">;</span>
input<span class="token punctuation">[</span>size<span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span>
input cin<span class="token punctuation">;</span>
output<span class="token punctuation">[</span>size<span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> sum<span class="token punctuation">;</span>
output cout<span class="token punctuation">;</span>
assign <span class="token punctuation">{<!-- --></span>cout<span class="token punctuation">,</span>sum<span class="token punctuation">}</span><span class="token operator">=</span>a<span class="token operator">+</span>b<span class="token operator">+</span>cin<span class="token punctuation">;</span>
endmodule
</code></pre> 
<p>（2）测试模块</p> 
<pre><code class="prism language-c">`timescale <span class="token number">1</span>ns<span class="token operator">/</span><span class="token number">100</span>ps
module adder8_tb<span class="token punctuation">;</span>
reg<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span>
reg cin<span class="token punctuation">;</span>
wire<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> sum<span class="token punctuation">;</span>
wire cout<span class="token punctuation">;</span>

integer i<span class="token punctuation">,</span>j<span class="token punctuation">;</span>

adder8 <span class="token function">a0</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span>cout<span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>cin<span class="token punctuation">)</span><span class="token punctuation">;</span>

initial		<span class="token comment">//输入激励信号a的波形</span>
begin
 a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>b<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>cin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
 <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">255</span><span class="token punctuation">;</span>i<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
 #<span class="token number">10</span> a<span class="token operator">=</span>i<span class="token punctuation">;</span>
end

initial		<span class="token comment">//输入激励信号b的波形</span>
begin
 <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token number">255</span><span class="token punctuation">;</span>j<span class="token operator">=</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
 #<span class="token number">10</span> b<span class="token operator">=</span>j<span class="token punctuation">;</span>
end

initial	
begin	<span class="token comment">//输入激励信号cin的波形</span>
 forever #<span class="token number">200</span> cin<span class="token operator">=</span><span class="token operator">~</span>cin<span class="token punctuation">;</span>
end

initial
begin
$<span class="token function">monitor</span><span class="token punctuation">(</span>$time<span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token string">"%d+%d+%b={%b+%d}"</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>cin<span class="token punctuation">,</span>cout<span class="token punctuation">,</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
 #<span class="token number">2500</span> $finish<span class="token punctuation">;</span>
end
endmodule
</code></pre> 
<p>（3）仿真结果<img src="https://images2.imgbox.com/78/9a/QfeiNQ2W_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="321_178"></a>3、2选1数据选择器的仿真</h3> 
<p>（1）待测试模块</p> 
<pre><code class="prism language-c">module <span class="token function">mux2_1</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span>in1<span class="token punctuation">,</span>in2<span class="token punctuation">,</span>sel<span class="token punctuation">)</span><span class="token punctuation">;</span>
input in1<span class="token punctuation">,</span>in2<span class="token punctuation">,</span>sel<span class="token punctuation">;</span>
output out<span class="token punctuation">;</span>
assign out<span class="token operator">=</span>sel<span class="token operator">?</span>in1<span class="token operator">:</span>in2<span class="token punctuation">;</span>
endmodule
</code></pre> 
<p>（2）测试模块</p> 
<pre><code class="prism language-c">`timescale <span class="token number">1</span>ns<span class="token operator">/</span><span class="token number">100</span>ps
module mux2_1_tb<span class="token punctuation">;</span>
reg in1<span class="token punctuation">,</span>in2<span class="token punctuation">,</span>sel<span class="token punctuation">;</span>
wire out<span class="token punctuation">;</span>

mux2_1 <span class="token function">m1</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span>in1<span class="token punctuation">,</span>in2<span class="token punctuation">,</span>sel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调用待测试模块</span>

initial 	<span class="token comment">//激励波形设置</span>
begin
 in1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>in2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>sel<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
 forever #<span class="token number">10</span> in1<span class="token operator">=</span><span class="token operator">~</span>in1<span class="token punctuation">;</span>
end

initial 	
begin
 forever #<span class="token number">20</span> in2<span class="token operator">=</span><span class="token operator">~</span>in2<span class="token punctuation">;</span>
end

initial 	
begin
 forever #<span class="token number">50</span> sel<span class="token operator">=</span><span class="token operator">~</span>sel<span class="token punctuation">;</span>
end

initial
begin
$<span class="token function">monitor</span><span class="token punctuation">(</span>$time<span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token string">"in1=%b in2=%b sel=%b out=%b"</span><span class="token punctuation">,</span>in1<span class="token punctuation">,</span>in2<span class="token punctuation">,</span>sel<span class="token punctuation">,</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
#<span class="token number">5000</span> $finish<span class="token punctuation">;</span>
end
endmodule
</code></pre> 
<p>（3）仿真结果<br> <img src="https://images2.imgbox.com/f5/12/puT8rI4u_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_226"></a>三、时序电路的仿真</h2> 
<h3><a id="8_227"></a>8位计数器的仿真</h3> 
<p>（1）待测试模块</p> 
<pre><code class="prism language-c"><span class="token comment">//带同步复位的8位计数器</span>
module <span class="token function">count8</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span>reset<span class="token punctuation">,</span>clk<span class="token punctuation">)</span><span class="token punctuation">;</span>
input reset<span class="token punctuation">,</span>clk<span class="token punctuation">;</span>
output reg<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> out<span class="token punctuation">;</span>
always@<span class="token punctuation">(</span>posedge clk<span class="token punctuation">)</span>
begin
 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>reset<span class="token punctuation">)</span>
    out<span class="token operator">&lt;=</span><span class="token number">8</span>'b00000000<span class="token punctuation">;</span>
 <span class="token keyword">else</span>
    out<span class="token operator">&lt;=</span>out<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
end
endmodule
</code></pre> 
<p>（2）测试模块</p> 
<pre><code class="prism language-c">`timescale <span class="token number">1</span>ns<span class="token operator">/</span><span class="token number">100</span>ps
module count8_tb<span class="token punctuation">;</span>
reg reset<span class="token punctuation">,</span>clk<span class="token punctuation">;</span>
wire<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> out<span class="token punctuation">;</span>

count8 <span class="token function">c1</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span>reset<span class="token punctuation">,</span>clk<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调用待测模块</span>

initial
begin
 clk<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>reset<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
 forever #<span class="token number">10</span> clk<span class="token operator">=</span><span class="token operator">~</span>clk<span class="token punctuation">;</span>
end

initial
begin
 #<span class="token number">100</span> reset<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
 #<span class="token number">110</span> reset<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
end

initial 
$<span class="token function">monitor</span><span class="token punctuation">(</span>$time<span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token string">"clk=%b reset=%b out=%d"</span><span class="token punctuation">,</span>clk<span class="token punctuation">,</span>reset<span class="token punctuation">,</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
endmodule
</code></pre> 
<p>（3）仿真结果<br> <img src="https://images2.imgbox.com/33/98/MScytQsK_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e68e21537b01df1983586c47078737d0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python项目中的self到底是什么？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b66f750cec154bce2f74054edd5cb46c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用 LSTM 进行多变量时间序列预测</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>