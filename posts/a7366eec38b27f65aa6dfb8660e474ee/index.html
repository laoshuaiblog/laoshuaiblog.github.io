<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySOL数据库管理 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/a7366eec38b27f65aa6dfb8660e474ee/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="MySOL数据库管理">
  <meta property="og:description" content="数据库基本操作 库和表 数据库–&amp;gt;数据表–&amp;gt;行（记录）：用来描述一个对象的信息 列（字段）：用来描述对象的一个属性 常用的数据类型 int整型float单精度浮点 4字节32位double双精度浮点 8字节64位char固定长度的字符类型varchar可变长度的字符类型text文本image图片decimal(5,2)5个有效长度数字，小数点后面有2位 char与varchar区别
查看数据表结构 查看当前服务器的数据库 #大小写不区分，分号“;”表示结束 SHOW DATABASES; 查看数据库中包含的表 USE 数据库名；
SHOW TABLES;
SHOW TABLES FROM 数据库名；
查看表的结构
USE 数据库名； DESCRIBE 表名； 可缩写成:DESC 表明； DESCRIBE [数据库名.] 表明； SHOW CREATE TABLE 表名；#以命令的形式查看表结构 SQL语句 SQL语句用于维护管理数据库，包括数据查询、数据更新、访问控制、对象管理等功能。
SQL语句分类：
语句代表的意思DDL数据定义语言，用于创建数据库对象，如库、表、索引等（create ）DML数据操纵语言，用于对表中的数据进行管理(insert drop delete update )DQL数据查询语言，用于从数据表中查找符合条件的数据记录(select )DCL数据控制语言，用于设置或者更改数据库用户或角色权限(grant ) 创建及删除数据库和表 创建新的数据库 CREATE DATABASE 数据库名； 创建新的表 主键一般选择能代表唯一性的字段不允许取空值（NULL），一个表只能有一个主键。
CREATE TABLE 表名 (字段1 数据类型,字段2 数据类型 [,...][,PRIMARY KEY (主键名)]); 示例：
use zdj
create table zdj (id int, name char(10) not null, age int, sex char(4), money decimal(5,2));">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-21T14:10:48+08:00">
    <meta property="article:modified_time" content="2024-03-21T14:10:48+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySOL数据库管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 id="数据库基本操作">数据库基本操作</h3> 
<h4 id="库和表">库和表</h4> 
<pre><code>数据库–&gt;数据表–&gt;行（记录）：用来描述一个对象的信息
               列（字段）：用来描述对象的一个属性
</code></pre> 
<h4 id="常用的数据类型">常用的数据类型</h4> 
<table><thead><tr><th>int</th><th>整型</th></tr></thead><tbody><tr><td>float</td><td>单精度浮点 4字节32位</td></tr><tr><td>double</td><td>双精度浮点 8字节64位</td></tr><tr><td><strong>char</strong></td><td><strong>固定长度的字符类型</strong></td></tr><tr><td><strong>varchar</strong></td><td><strong>可变长度的字符类型</strong></td></tr><tr><td>text</td><td>文本</td></tr><tr><td>image</td><td>图片</td></tr><tr><td><strong>decimal(5,2)</strong></td><td><strong>5个有效长度数字，小数点后面有2位</strong></td></tr></tbody></table> 
<p><strong>char与varchar区别</strong></p> 
<p></p> 
<p class="img-center"><img alt="" height="265" src="https://images2.imgbox.com/67/ce/joudGvK7_o.png" width="897"></p> 
<h4 id="查看数据表结构">查看数据表结构</h4> 
<h5 id="查看当前服务器的数据库">查看当前服务器的数据库</h5> 
<pre><code>#大小写不区分，分号“;”表示结束
SHOW DATABASES;
</code></pre> 
<p></p> 
<p><img alt="" height="312" src="https://images2.imgbox.com/3b/e2/RuP0isjG_o.png" width="725"></p> 
<h5 id="查看数据库中包含的表">查看数据库中包含的表</h5> 
<p>USE 数据库名；</p> 
<p>SHOW TABLES;</p> 
<p>SHOW TABLES FROM 数据库名；</p> 
<p><img alt="" height="491" src="https://images2.imgbox.com/51/b3/A2i9Liur_o.png" width="1046"></p> 
<p> <img alt="" height="388" src="https://images2.imgbox.com/2f/d0/aw4ovqRl_o.png" width="1051"></p> 
<p> 查看表的结构</p> 
<pre><code>USE 数据库名；
DESCRIBE 表名；
可缩写成:DESC 表明；

DESCRIBE  [数据库名.] 表明；
SHOW CREATE TABLE 表名；#以命令的形式查看表结构</code></pre> 
<p> <img alt="" height="349" src="https://images2.imgbox.com/7b/71/PeZlQh3K_o.png" width="1200"></p> 
<p><img alt="" height="418" src="https://images2.imgbox.com/69/45/luRQpkjI_o.png" width="1200"> <img alt="" height="289" src="https://images2.imgbox.com/bf/03/4sTGhs5u_o.png" width="1200"></p> 
<p><img alt="" height="630" src="https://images2.imgbox.com/18/a5/hEokCpeN_o.png" width="1035"></p> 
<h4 id="sql语句">SQL语句</h4> 
<p>SQL语句用于维护管理数据库，包括数据查询、数据更新、访问控制、对象管理等功能。</p> 
<p><strong>SQL语句分类：</strong></p> 
<table><thead><tr><th>语句</th><th>代表的意思</th></tr></thead><tbody><tr><td>DDL</td><td>数据定义语言，用于创建数据库对象，如库、表、索引等（create ）</td></tr><tr><td>DML</td><td>数据操纵语言，用于对表中的数据进行管理(insert drop delete update )</td></tr><tr><td>DQL</td><td>数据查询语言，用于从数据表中查找符合条件的数据记录(select )</td></tr><tr><td>DCL</td><td>数据控制语言，用于设置或者更改数据库用户或角色权限(grant )</td></tr></tbody></table> 
<h4 id="创建及删除数据库和表">创建及删除数据库和表</h4> 
<h5 id="创建新的数据库">创建新的数据库</h5> 
<pre><code>CREATE DATABASE 数据库名；</code></pre> 
<p> <img alt="" height="480" src="https://images2.imgbox.com/72/19/9I42PRDF_o.png" width="1148"></p> 
<p> </p> 
<h5 id="创建新的表">创建新的表</h5> 
<p>主键一般选择能代表唯一性的字段不允许取空值（NULL），一个表只能有一个主键。</p> 
<pre><code>CREATE TABLE 表名 (字段1 数据类型,字段2 数据类型 [,...][,PRIMARY KEY (主键名)]); 
</code></pre> 
<p><strong>示例：</strong></p> 
<p>use zdj</p> 
<p>create table zdj (id int, name char(10) not null, age int, sex char(4), money decimal(5,2));</p> 
<p>desc lisi;</p> 
<p><img alt="" height="405" src="https://images2.imgbox.com/f4/42/P8OHlhlt_o.png" width="1065"></p> 
<h5 id="%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A1%A8%C2%A0"><strong>删除指定的数据表 </strong></h5> 
<p>use 库名；</p> 
<p>drop table 表名；</p> 
<p>drop table 库名.表名;#库外删除指定表</p> 
<p><img alt="" height="376" src="https://images2.imgbox.com/cf/4a/l7KKYJQQ_o.png" width="859"></p> 
<p> </p> 
<h5 id="删除指定的数据库">删除指定的数据库</h5> 
<pre><code>drop database 库名；</code></pre> 
<p><img alt="" height="384" src="https://images2.imgbox.com/6a/e9/lCKxGST9_o.png" width="950"> </p> 
<p> </p> 
<h4 id="管理表中的数据记录">管理表中的数据记录</h4> 
<h5 id="向数据表中插入新的数据记录">向数据表中插入新的数据记录</h5> 
<p>insert into 表名 (字段1，字段2 [,.....]) values (字段1的值，字段2的值，.....);</p> 
<p>insert into 表名 values (字段1的值，字段2的值，.....);#不指定字段则会按照表结构的顺序插入数据</p> 
<p><img alt="" height="326" src="https://images2.imgbox.com/7b/d9/esYEbOZs_o.png" width="1099"> </p> 
<p> <img alt="" height="488" src="https://images2.imgbox.com/18/fc/7mtdmcE0_o.png" width="895"></p> 
<h5 id="查询数据记录">查询数据记录</h5> 
<pre><code>SELECT 字段名1,字段名2[,...] FROM 表名 [WHERE 条件表达式];

select * from 表名; #这里的*表示所有字段则会按照表结构的顺序显示
select 字段1，字段2，.... from ky18;  #如果指定字段不分前后顺序
select * from 表名 \G;  #以列表方式竖向显示数据记录
select * from 表明 limit n; #表示查看头n行的数据记录
select * from 表明 limit n，m; #表示查看n行后的m行数据记录
select 字段1，字段2.... from 表名 where 条件表达式;  #只查看添加符合的字段数据记录</code></pre> 
<p> <img alt="" height="840" src="https://images2.imgbox.com/f2/70/RfscdFWS_o.png" width="884"></p> 
<p> <img alt="" height="834" src="https://images2.imgbox.com/a8/5f/ndS3gzRu_o.png" width="779"></p> 
<p> </p> 
<h5 id="修改更新数据中的数据记录">修改、更新数据中的数据记录</h5> 
<pre><code> UPDATE 表名 SET 字段名1=字段值1[,字段名2=字段值2] [WHERE 条件表达式]; 
 #这里注意使用的时候一定要加where语句去匹配条件不然会修改指定字段的所有内容</code></pre> 
<p> <img alt="" height="634" src="https://images2.imgbox.com/de/d6/jtvzSo2o_o.png" width="755"></p> 
<h5 id="在数据表中删除指定的数据记录">在数据表中删除指定的数据记录</h5> 
<pre><code> DELETE FROM 表名 [WHERE 条件表达式]; </code></pre> 
<p> <img alt="" height="656" src="https://images2.imgbox.com/31/f1/wUouSfs3_o.png" width="741"></p> 
<p> </p> 
<h4 id="修改表名和表结构">修改表名和表结构</h4> 
<h5 id="修改表名">修改表名</h5> 
<pre><code>ALTER TABLE 旧表名 RENAME 新表名; </code></pre> 
<p> <img alt="" height="533" src="https://images2.imgbox.com/a3/1e/PmV3E6Pl_o.png" width="545"></p> 
<h5 id="扩展表结构增加字段">扩展表结构（增加字段）</h5> 
<pre><code>ALTER TABLE 表名 ADD 字段名 数据类型 default 'default值';
#default 'default值'：表示此字段设置默认值 未填写则自动填入默认值；可与 NOT NULL 配合使用</code></pre> 
<p><img alt="" height="705" src="https://images2.imgbox.com/68/27/5v78PXRL_o.png" width="1200"> </p> 
<p> </p> 
<h5 id="修改字段列名添加唯一键">修改字段（列）名，添加唯一键</h5> 
<p>唯一键： unique key<br> 主键： primary key</p> 
<p>共同点：字段的值都是唯一性，不允许有重复的值<br> 不同点：一个表中 只能有1个主键，但是可以有多个唯一键<br> 主键字段中不允许有null值，唯一键是允许有null</p> 
<pre><code>ALTER TABLE 表名 CHANGE 旧列名 新列名 数据类型 [unique key];</code></pre> 
<p> <img alt="" height="525" src="https://images2.imgbox.com/58/98/lu8NaH3v_o.png" width="939"></p> 
<p> </p> 
<h5 id="指定字段为主键">指定字段为主键</h5> 
<pre><code>ALTER TABLE 表名 ADD PRIMARY KEY(字段名);
#设置为主键后字段的值得是唯一</code></pre> 
<p> </p> 
<h5 id="删除字段">删除字段</h5> 
<pre><code> ALTER TABLE 表名 drop 字段名; </code></pre> 
<p><img alt="" height="464" src="https://images2.imgbox.com/bb/d8/a37ZVpTJ_o.png" width="1200"> </p> 
<p> </p> 
<h5 id="克隆表将数据表的数据记录生成到新的表中">克隆表——将数据表的数据记录生成到新的表中</h5> 
<pre><code>CREATE TABLE 新表名称 like 旧表名称； #克隆表的结构</code></pre> 
<p> <img alt="" height="874" src="https://images2.imgbox.com/28/72/W2XjHhay_o.png" width="857"></p> 
<h4 id="清空表删除表内的所有数据">清空表——删除表内的所有数据</h4> 
<pre><code>方法1
DELETE FROM 表名；
#DELETE清空表后，返回的结果内有删除的记录条目；DELETE工作时是一行一行的删除记录数据的；如果表中有自增长字段，使用DELETE FROM 删除所有记录后，再次新添加的记录会从原来最大的记录 ID 后面继续自增写入记录。 
</code></pre> 
<pre><code>方法2
TRUNCATE TABLE 表名；
#TRUNCATE 清空表后，没有返回被删除的条目；TRUNCATE 工作时是将表结构按原样重新建立，因此在速度上 TRUNCATE 会比 DELETE 清空表快；使用 TRUNCATE TABLE 清空表内数据后，ID 会从 1 开始重新记录 </code></pre> 
<p> </p> 
<h4 id="创建临时表">创建临时表</h4> 
<ul><li>临时表创建成功之后，使用SHOW TABLES命令是看不到创建的临时表的，临时表会在连接退出后被销毁。 如果在退出连接之前，也可以可执行增删改查等操作，比如使用 DROP TABLE 语句手动直接删除临时表。</li></ul> 
<pre><code>CREATE TEMPORARY TABLE 表名 （字段1 数据类型，字段2 数据类型[,....] [,PRIMARY KEY (主键名)]）；</code></pre> 
<h4 id="创建外键约束保证数据的完整性和一致性">创建外键约束，保证数据的完整性和一致性</h4> 
<ul><li>外键的定义：如果同一个属性字段x在表一中是主键，而在表二中不是主键，则字段x称为表二的外键。</li></ul> 
<p><strong>主键表和外键表的理解：</strong></p> 
<ul><li>以公共关键字作主键的表为主键表（父表、主表）</li><li>以公共关键字作外键的表为外键表（从表、外表）</li></ul> 
<p><strong>注意：与外键关联的主表的字段必须设置为主键。要求从表不能是临时表，主从表的字段具备相同的数据类型、字符长度和约束。</strong></p> 
<p> </p> 
<h3 id="数据库用户管理">数据库用户管理</h3> 
<p><strong>‘用户名’：指定将创建的用户名</strong></p> 
<ul><li>‘来源地址’：指定新创建的用户可在哪些主机上登录，可使用IP地址、网段、主机名的形式，本地用户可用localhost，允许任意主机登录可用通配符%</li></ul> 
<p><strong>‘密码’：</strong></p> 
<ul><li> <p>若使用明文密码，直接输入’密码’，插入到数据库时由Mysql自动加密；</p> </li><li> <p>若使用加密密码，需要先使用SELECT PASSWORD(‘密码’); 获取密文，再在语句中添加 PASSWORD ‘密文’;</p> </li><li> <p>若省略“IDENTIFIED BY”部分，则用户的密码将为空（不建议使用）</p> </li></ul> 
<pre><code> CREATE USER '用户名'@'来源地址' [IDENTIFIED BY [PASSWORD] '密码']; 
</code></pre> 
<h4 id="使用明文创建用户">使用明文创建用户</h4> 
<p><img alt="" height="520" src="https://images2.imgbox.com/d1/73/vQZLnENe_o.png" width="906"></p> 
<p></p> 
<h4 id="使用密文创建用户">使用密文创建用户</h4> 
<p><img alt="" height="675" src="https://images2.imgbox.com/51/d7/KjVagPTg_o.png" width="1200"></p> 
<h4 id="查看用户信息">查看用户信息</h4> 
<ul><li>创建后的用户保存在 mysql 数据库的 user 表里</li></ul> 
<p> use myaql; #切换库</p> 
<p>#查看表结构</p> 
<p>desc user;</p> 
<p>#指定字段用户，登录认证字符串，登录主机，查看数据记录</p> 
<p> select User,authentication_string,Host from user;</p> 
<p><img alt="" height="309" src="https://images2.imgbox.com/2e/5d/xDJhGWDE_o.png" width="917"></p> 
<h4 id="删除用户">删除用户</h4> 
<pre><code>DROP  USER '用户名'@'登录主机'；</code></pre> 
<p> </p> 
<h4 id="修改当前登录用户密码">修改当前登录用户密码</h4> 
<pre><code>SET PASSWORD = PASSWORD('123123');</code></pre> 
<p> </p> 
<h4 id="修改其他用户密码">修改其他用户密码</h4> 
<p>SET PASSWORD FOR '用户'@'登录主机'=password（'新的密码'）</p> 
<h4 id="忘记-root-密码的解决办法">忘记 root 密码的解决办法</h4> 
<p>#修改配置文件，添加配置，使登录mysql不使用授权表</p> 
<p>vim /etc/my.cnf</p> 
<p>#添加此行 skip-grant-tables</p> 
<p>systemctl restart mysqld.service</p> 
<p id="main-toc">mysql#登录数据库</p> 
<p>#使用update修改root密码，刷新数据库</p> 
<p>update mysql.user set authentication_string = password('123456') where user='root';</p> 
<p>flush privileges;</p> 
<p> #退出 quit</p> 
<p>#编辑配置文件 vim /etc/my.cnf</p> 
<p>#删除添加的配置 skip-grant-tables</p> 
<p>#登录 mysql -u root -p123456</p> 
<h3 id="数据库用户授权">数据库用户授权</h3> 
<h4 id="授予权限">授予权限</h4> 
<p>GRANT语句：专门用来设置数据库用户的访问权限。当指定的用户名不存在时，GRANT语句将会创建新的用户；当指定的用户名存在时，GRANT 语句用于修改用户信息。</p> 
<pre><code>GRANT 权限列表 ON 数据库名.表名 TO '用户名'@'来源地址' [IDENTIFIED BY '密码'];
</code></pre> 
<ul><li> <p>权限列表：用于列出授权使用的各种数据库操作，以逗号进行分隔，如“select,insert,update”。使用“all”表示所有权限，可授权执行任何操作。</p> </li><li> <p>数据库名.表名：用于指定授权操作的数据库和表的名称，其中可以使用通配符“”。例如，使用“kgc.”表示授权操作的对象为 kgc数据库中的所有表。</p> </li><li> <p>‘用户名@来源地址’：用于指定用户名称和允许访问的客户机地址，即谁能连接、能从哪里连接。来源地址可以是域名、IP 地址，还可以使用“%”通配符，表示某个区域或网段内的所有地址，如“%.accp.com”、“192.168.6.%”等。</p> </li><li> <p>IDENTIFIED BY：用于设置用户连接数据库时所使用的密码字符串。在新建用户时，若省略“IDENTIFIED BY”部分， 则用户的密码将为空。</p> </li></ul> 
<p> </p> 
<p> 补充：</p> 
<p>flush privileges;    #刷新权限</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#000000;vertical-align:top;"> <p style="margin-left:0cm;">drop table table_name<br> 属于DDL<br> 无法恢复<br> 不带where<br> 表内容结构删除<br> 删除速度快</p> </td><td style="border-color:#000000;vertical-align:top;"> <p style="margin-left:0cm;">truncate table table_name<br> 属于DDL<br> 不可回滚<br> 不带where<br> 表内容删除<br> 删除速度快</p> </td><td style="border-color:#000000;vertical-align:top;"> <p style="margin-left:0cm;">delete from table_name<br> 属于DML<br> 可恢复<br> 可带where<br> 表结构在，表内容要看where执行的情况<br> 删除速度慢，需要逐行删除</p> </td></tr></tbody></table> 
<p>不再需要一张表的时候，用drop<br> 想删除部分数据行时候，用delete，并且带上where子句<br> 保留表而删除所有数据的时候用truncate</p> 
<p></p> 
<p>删除速度<br> drop&gt; truncate &gt; delete<br> 安全性<br> delete 最好</p> 
<p></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/889a81272db7bf7d5c87119b5a13a820/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【WEEK4】 【DAY2】整合SSM框架之功能实现—总览、添加数据【中文版】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b4a2bc4982e398ac4c0dd65ddce3efaf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">leetcode每日一题1969</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>