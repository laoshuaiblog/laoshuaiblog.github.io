<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Linux】Linux内核编译与入门 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/39b7b8915ff96c4f8e5527d386416190/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="【Linux】Linux内核编译与入门">
  <meta property="og:description" content="😏★,°:.☆(￣▽￣)/$:.°★ 😏
这篇文章主要介绍Linux内核编译。
学其所用，用其所学。——梁启超
欢迎来到我的博客，一起学习知识，共同进步。
喜欢的朋友可以关注一下，下次更新不迷路🥞
文章目录 :smirk:1. Linux内核介绍:blush:2. Linux内核编译:satisfied:3. Linux内核使用 😏1. Linux内核介绍 Linux内核是一种开源操作系统内核，它是基于Unix系列操作系统的设计思想和原则。与其他操作系统内核相比，Linux内核具有很多特点，例如高度可定制、模块化设计、强大的网络支持、多处理器支持、安全性、稳定性等。
Linux内核最初由芬兰程序员Linus Torvalds于1991年创建，并在全球范围内得到了广泛的使用和支持。现在，Linux内核已经成为许多流行的操作系统的核心，包括Ubuntu、Red Hat、Debian、CentOS等。
在Linux内核中，各种设备和功能都采用模块化设计，这使得内核可以灵活扩展，只需加载必要的模块即可实现所需功能。此外，Linux内核还支持多种文件系统和文件系统类型，例如ext4、xfs、btrfs、nfs等。
总体来说，Linux内核是一个高度可定制的、功能丰富的、稳定的操作系统内核，其开放源代码和广泛的社区支持使其成为开发者和用户的首选之一。
😊2. Linux内核编译 首先准备一台Linux机器，查看内核版本：uname -r
根据获取的linux kernel版本，在www.kernel.org上面下载合适的kernel版本。（如我的Ubuntu18.04内核版本是5.4.0，安装版本选择5.4.244）
解压后，将boot下config文件拷贝到本地：cp -v /boot/config-$(uname -r) .config
然后编辑.config文件：
vim .config # 将该项原有内容删掉即可，如下 CONFIG_SYSTEM_TRUSTED_KEYS=&#34;&#34; 输入make menuconfig 启动配置界面，小白直接保存即可；
安装依赖：
sudo apt-get install git fakeroot build-essential ncurses-dev xz-utils libssl-dev bc flex libelf-dev bison dwarves 开始编译内核：
# 根据机器选择核数 -j x make -j 10	#（时间很长） # 安装模块 sudo make modules_install # 安装内核 sudo make install 完成后的结果如下（不容易呀）：">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-06-12T17:03:37+08:00">
    <meta property="article:modified_time" content="2023-06-12T17:03:37+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Linux】Linux内核编译与入门</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>😏<em>★,°</em>:.☆(￣▽￣)/$:<em>.°★</em> 😏<br> 这篇文章主要介绍Linux内核编译。<br> <strong><font color="red">学其所用，用其所学。——梁启超</font></strong><br> 欢迎来到我的博客，一起学习知识，共同进步。<br> 喜欢的朋友可以关注一下，下次更新不迷路🥞</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#smirk1_Linux_7" rel="nofollow">:smirk:1. Linux内核介绍</a></li><li><a href="#blush2_Linux_15" rel="nofollow">:blush:2. Linux内核编译</a></li><li><a href="#satisfied3_Linux_83" rel="nofollow">:satisfied:3. Linux内核使用</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="smirk1_Linux_7"></a>😏1. Linux内核介绍</h3> 
<p>Linux内核是一种开源操作系统内核，它是基于Unix系列操作系统的设计思想和原则。与其他操作系统内核相比，Linux内核具有很多特点，例如高度可定制、模块化设计、强大的网络支持、多处理器支持、安全性、稳定性等。</p> 
<p>Linux内核最初由芬兰程序员Linus Torvalds于1991年创建，并在全球范围内得到了广泛的使用和支持。现在，Linux内核已经成为许多流行的操作系统的核心，包括Ubuntu、Red Hat、Debian、CentOS等。</p> 
<p>在Linux内核中，各种设备和功能都采用模块化设计，这使得内核可以灵活扩展，只需加载必要的模块即可实现所需功能。此外，Linux内核还支持多种文件系统和文件系统类型，例如ext4、xfs、btrfs、nfs等。</p> 
<p>总体来说，Linux内核是一个高度可定制的、功能丰富的、稳定的操作系统内核，其开放源代码和广泛的社区支持使其成为开发者和用户的首选之一。</p> 
<h3><a id="blush2_Linux_15"></a>😊2. Linux内核编译</h3> 
<p>首先准备一台Linux机器，查看内核版本：<code>uname -r</code></p> 
<p>根据获取的linux kernel版本，在<code>www.kernel.org</code>上面下载合适的kernel版本。（如我的Ubuntu18.04内核版本是5.4.0，安装版本选择5.4.244）</p> 
<p><img src="https://images2.imgbox.com/74/ba/KJCU7kpm_o.png" alt="在这里插入图片描述"></p> 
<p>解压后，将boot下config文件拷贝到本地：<code>cp -v /boot/config-$(uname -r) .config</code></p> 
<p>然后编辑<code>.config</code>文件：</p> 
<pre><code class="prism language-bash"><span class="token function">vim</span> .config
<span class="token comment"># 将该项原有内容删掉即可，如下</span>
<span class="token assign-left variable">CONFIG_SYSTEM_TRUSTED_KEYS</span><span class="token operator">=</span><span class="token string">""</span>
</code></pre> 
<p>输入<code>make menuconfig</code> 启动配置界面，小白直接保存即可；</p> 
<p>安装依赖：</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">git</span> fakeroot build-essential ncurses-dev xz-utils libssl-dev <span class="token function">bc</span> flex libelf-dev bison dwarves
</code></pre> 
<p>开始编译内核：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 根据机器选择核数 -j x</span>
<span class="token function">make</span> -j <span class="token number">10</span>	<span class="token comment">#（时间很长）</span>
<span class="token comment"># 安装模块</span>
<span class="token function">sudo</span> <span class="token function">make</span> modules_install
<span class="token comment"># 安装内核</span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<p>完成后的结果如下（不容易呀）：</p> 
<p><img src="https://images2.imgbox.com/53/cf/NRCr4dtG_o.png" alt="请添加图片描述"></p> 
<p>然后重启电脑：</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">update-grub</span>
<span class="token function">sudo</span> <span class="token function">reboot</span>
</code></pre> 
<p>如果出现<code>error vmlinuz has invalid signature 【或者】 mmx64.efi not found</code>这种错误，是因为bios开启了安全启动，去<code>bios-secure boot</code>，设置为<code>disable</code>（禁用安全模式）即可。</p> 
<p>正常启动后，查看当前内核版本：<code>uname -r</code></p> 
<p><img src="https://images2.imgbox.com/ce/30/5ZiuEImK_o.png" alt="在这里插入图片描述"></p> 
<p>内核编译成功。</p> 
<p>卸载内核：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 改为自己的内核版本，我这里是5.4.244</span>
<span class="token function">sudo</span> <span class="token function">rm</span> -rf  /boot/vmlinuz*5.4.244* /boot/initrd*5.4.244* /boot/System-map*5.4.244* /boot/config-*5.4.244* /lib/modules/*5.4.244*/ /var/lib/initramfs-tools/*5.4.244*/
<span class="token function">sudo</span> <span class="token function">apt-get</span> purge linux-image-****-generic
<span class="token comment"># 更新grub配置</span>
<span class="token function">sudo</span> update-grub2
</code></pre> 
<p>查看自己安装了哪些内核：</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> dpkg --get-selections  <span class="token operator">|</span>  <span class="token function">grep</span>  <span class="token string">'linux'</span>
</code></pre> 
<h3><a id="satisfied3_Linux_83"></a>😆3. Linux内核使用</h3> 
<p>内核目录如下：</p> 
<p><img src="https://images2.imgbox.com/9a/8e/VUMmUybd_o.png" alt="在这里插入图片描述"></p> 
<p>可以基于此学习Linux驱动开发、应用开发等，还可以在新内核的基础上进行裁剪等操作。</p> 
<p>嵌入式Linux学习路线：</p> 
<blockquote> 
 <p>1.嵌入式开发基础知识：学习 C/C++ 编程语言、计算机体系结构、操作系统和嵌入式系统的基础概念。 Linux 系统管理员技能：熟悉<br> 2.Linux 操作系统的基本命令行和文件系统，了解如何管理用户帐户和权限，如何安装软件包等。<br> 3.嵌入式 Linux 知识：学习如何配置和定制Linux 内核、驱动程序和 bootloaders，以及嵌入式设备的文件系统和启动过程。<br> 4.嵌入式开发板的选择和使用：学习如何选择适合您项目需求的嵌入式开发板，了解如何调试和测试硬件和软件。<br> 5.特殊的应用场景：如实时操作系统、网络编程、多线程编程、图像处理等。 项目经验：完成一些小型嵌入式项目，如控制LED、读取传感器数据等，并逐步提高难度，最终达到完成完整项目的能力。</p> 
</blockquote> 
<p>参考：</p> 
<pre><code class="prism language-bash">http://t.csdn.cn/7F656
https://zhuanlan.zhihu.com/p/378149586
</code></pre> 
<p><img src="https://images2.imgbox.com/ec/d5/ebDVDrgE_o.png" alt="在这里插入图片描述"></p> 
<p>以上。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0edd70132623873fa2119410631c5cce/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">HCL网络实操之telnet登录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c14ea5936be59a3fd7f92e4764accb74/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于HTML面试题汇总之H5</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>