<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>解决vue-cli打包后html文件引用其他文件失效，打开空白问题 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/d6dedaf34d97a3ee64858fee34667dcd/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="解决vue-cli打包后html文件引用其他文件失效，打开空白问题">
  <meta property="og:description" content="解决vue-cli打包后html文件引用其他文件失效，打开空白问题 写一篇解决问题的博客，最近打包vue项目的时候总是机械性解决bug，出现各种各样可能的问题，看网络上也少有对应的解决方法，所以打算写一个下来。
首先要说明的问题应该就是出现最多的bug，当你写完vue项目的时候，（使用到vue-cli的时候哈），执行run npm build，然后发现打包后的html文件，打开后是空白的，然后按F12键查看控制台输出，出现类似如下的页面：
首先，分析以上报错，共两种，一种是js引用不到，一种是css文件引用不到，而且报错都在产出的index.html文件中报错，这才导致出现空白页面的情况，所以解决这个文件的索引，应该就可以了，而写过原生html的小伙伴知道，我们的html文件引用文件通常如果文件存在，就一定是可以索引到的，那么要做的就是观察html文件的代码及引用的文件是否存在：
&amp;lt;!doctype html&amp;gt; &amp;lt;html lang=&#34;&#34;&amp;gt; &amp;lt;head&amp;gt; &amp;lt;meta charset=&#34;utf-8&#34;&amp;gt; &amp;lt;meta http-equiv=&#34;X-UA-Compatible&#34; content=&#34;IE=edge&#34;&amp;gt; &amp;lt;meta name=&#34;viewport&#34; content=&#34;width=device-width,initial-scale=1&#34;&amp;gt; &amp;lt;link rel=&#34;icon&#34; href=&#34;/favicon.ico&#34;&amp;gt; &amp;lt;title&amp;gt;database&amp;lt;/title&amp;gt; &amp;lt;script defer=&#34;defer&#34; src=&#34;/js/chunk-vendors.a61c6f87.js&#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script defer=&#34;defer&#34; src=&#34;/js/app.dd10a5af.js&#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;link href=&#34;/css/chunk-vendors.10dd4e95.css&#34; rel=&#34;stylesheet&#34;&amp;gt; &amp;lt;link href=&#34;/css/app.346d652b.css&#34; rel=&#34;stylesheet&#34;&amp;gt; &amp;lt;/head&amp;gt; &amp;lt;body&amp;gt;&amp;lt;noscript&amp;gt;&amp;lt;strong&amp;gt;We&#39;re sorry but database doesn&#39;t work properly without JavaScript enabled. Please enable it to continue.&amp;lt;/strong&amp;gt;&amp;lt;/noscript&amp;gt; &amp;lt;div id=&#34;app&#34;&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/body&amp;gt; &amp;lt;/html&amp;gt; 以上是打包后的index.html页面，文件的引用位置如上所示，那应该在该页面的根目录中查找对应的文件：
打开js文件：
显然，文件存在，但是为什么找不到呢？
再仔细观察一下报错的部分，就会发现请求的地方是：
GET file:///E:/js/chunk-vendors.a61c6f87.js net::ERR_FILE_NOT_FOUND
E盘下哪里会有这个文件夹，所以归根到最后就是请求的地方出错，我找很久的解决方法，最终锁定在路由模块，当路由开启history模式下，如果没有后端来帮助你获取真正请求的路径时，由于初始页面是没有东西的，或者说是初始页面都是引用到其他组件的部分，但是组件最后被打包到js中，而页面加载一开始就会主动去使用路由，来请求对应的js文件，history模式下如果没有后端主动返回地址，那么就会使用初始URL，自然就是向盘符发送请求了，所以解决这个问题的方法就是将history模式去掉：
在vue的route的index.js中：
import Vue from &#39;vue&#39; import VueRouter from &#39;vue-router&#39; Vue.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-30T13:48:44+08:00">
    <meta property="article:modified_time" content="2023-11-30T13:48:44+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">解决vue-cli打包后html文件引用其他文件失效，打开空白问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="vueclihtml_0"></a>解决vue-cli打包后html文件引用其他文件失效，打开空白问题</h3> 
<p><strong>写一篇解决问题的博客，最近打包vue项目的时候总是机械性解决bug，出现各种各样可能的问题，看网络上也少有对应的解决方法，所以打算写一个下来。</strong><br> <strong>首先要说明的问题应该就是出现最多的bug，当你写完vue项目的时候，（使用到vue-cli的时候哈），执行run npm build，然后发现打包后的html文件，打开后是空白的，然后按F12键查看控制台输出，出现类似如下的页面：</strong><br> <img src="https://images2.imgbox.com/a6/43/AFXiZSyZ_o.png" alt="在这里插入图片描述"><br> <strong>首先，分析以上报错，共两种，一种是js引用不到，一种是css文件引用不到，而且报错都在产出的index.html文件中报错，这才导致出现空白页面的情况，所以解决这个文件的索引，应该就可以了，而写过原生html的小伙伴知道，我们的html文件引用文件通常如果文件存在，就一定是可以索引到的，那么要做的就是观察html文件的代码及引用的文件是否存在：</strong></p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span>doctype html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width,initial-scale=1"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"icon"</span> href<span class="token operator">=</span><span class="token string">"/favicon.ico"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>database<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script defer<span class="token operator">=</span><span class="token string">"defer"</span> src<span class="token operator">=</span><span class="token string">"/js/chunk-vendors.a61c6f87.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script defer<span class="token operator">=</span><span class="token string">"defer"</span> src<span class="token operator">=</span><span class="token string">"/js/app.dd10a5af.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>link href<span class="token operator">=</span><span class="token string">"/css/chunk-vendors.10dd4e95.css"</span> rel<span class="token operator">=</span><span class="token string">"stylesheet"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>link href<span class="token operator">=</span><span class="token string">"/css/app.346d652b.css"</span> rel<span class="token operator">=</span><span class="token string">"stylesheet"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span>noscript<span class="token operator">&gt;</span><span class="token operator">&lt;</span>strong<span class="token operator">&gt;</span>We<span class="token string">'re sorry but database doesn'</span>t work properly without JavaScript enabled<span class="token punctuation">.</span> Please enable it to
            <span class="token keyword">continue</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>strong<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>noscript<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre> 
<p><strong>以上是打包后的index.html页面，文件的引用位置如上所示，那应该在该页面的根目录中查找对应的文件：</strong><br> <img src="https://images2.imgbox.com/9d/95/oPenJfTV_o.png" alt="在这里插入图片描述"><br> 打开js文件：<br> <img src="https://images2.imgbox.com/08/9a/nD4t85nv_o.png" alt="在这里插入图片描述"><br> <strong>显然，文件存在，但是为什么找不到呢？</strong><br> <strong>再仔细观察一下报错的部分，就会发现请求的地方是：</strong><br> GET file:///E:/js/chunk-vendors.a61c6f87.js net::ERR_FILE_NOT_FOUND<br> <strong>E盘下哪里会有这个文件夹，所以归根到最后就是请求的地方出错，我找很久的解决方法，最终锁定在路由模块，当路由开启history模式下，如果没有后端来帮助你获取真正请求的路径时，由于初始页面是没有东西的，或者说是初始页面都是引用到其他组件的部分，但是组件最后被打包到js中，而页面加载一开始就会主动去使用路由，来请求对应的js文件，history模式下如果没有后端主动返回地址，那么就会使用初始URL，自然就是向盘符发送请求了，所以解决这个问题的方法就是将history模式去掉：</strong><br> 在vue的route的index.js中：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>

<span class="token punctuation">]</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// mode: 'history',   这个不要！！！</span>
  <span class="token literal-property property">base</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">,</span>
  routes
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre> 
<p>这样子到底行不行了，那肯定还是有问题，因为没有配置静态资源的地址问题，还是会出如上找不到文件的情况，所以需要修改vue.config.js中的内容，声明下publicPath为相对路径：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> defineConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@vue/cli-service'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">transpileDependencies</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'./'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> 
<p>这样子就可以运行正常了：<br> <img src="https://images2.imgbox.com/69/11/VOrE0uKi_o.png" alt="在这里插入图片描述"><br> 但是可能有出现静态资源找不到的，可以通过修改vue.config.js中的publicPath，这个其实就是声明静态资源<br> 路径的，比如说你产出不在默认位置，而是别的地方的文件夹下，那么你的静态文件路径应该要加上对应的目录，总之配合outputDir使用就是。<br> <strong>总结：</strong><br> <strong>解决index.html打开空白的情况，使用1、注释路由中mode：history 。<br> 2、修改vue.config.js，添加publicPath的相关声明。</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/04f94a2b3f606657c74c8bbcda61e2e9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SqlServer 批量删除数据库所有实体表</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/706b8bf49c3e67153dc98eec4182831a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">HEC-RAS模型中堤防设置（建立溃坝模拟，防洪评价，决堤模拟，淹没模拟）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>