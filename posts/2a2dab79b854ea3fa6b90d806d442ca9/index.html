<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Makefileç®€å•ä½¿ç”¨ - è€å¸…çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/2a2dab79b854ea3fa6b90d806d442ca9/">
  <meta property="og:site_name" content="è€å¸…çš„åšå®¢">
  <meta property="og:title" content="Makefileç®€å•ä½¿ç”¨">
  <meta property="og:description" content="Makefileæ¨¡å¼è§„åˆ™ Makefileè§„åˆ™ï¼šå½“ä¾èµ–æ¯”ç›®æ ‡æ–‡ä»¶æ–°æ—¶ï¼Œé‡æ–°ç”Ÿæˆç›®æ ‡æ–‡ä»¶
target(ç›®æ ‡):prerequiriesï¼ˆä¾èµ–ï¼‰
commandï¼ˆå‘½ä»¤ï¼‰
ç®€å•ä¾‹å­ï¼Œç°åœ¨æœ‰ä¸‰ä¸ªæ–‡ä»¶a.c b.h b.cå†…å®¹ä¸ºï¼š
---------------------a.c-------------- #include &amp;lt;stdio.h&amp;gt; #include &amp;lt;stdlib.h&amp;gt; #include &#34;b.h&#34; int main(int argc,char **argv) { int c; c=add(1,2); printf(&#34;c = %d\n&#34;,c); return 0; } ---------------------b.c----------------- #include &#34;b.h&#34; int add(int a,int b) { return a&#43;b; } ---------------------b.h------------------ #ifndef _B_H #define _B_H int add(int a,int b); #endif ä¸‹é¢äº†è§£å‡ ä¸ªå˜é‡çš„å«ä¹‰ï¼š
ç¬¦åˆ|å«ä¹‰
â€“|:â€“ğŸ˜â€“:
@ âˆ£ è§„åˆ™ä¸­çš„ç›®æ ‡é›†åˆï¼Œåœ¨æ¨¡å¼è§„åˆ™ä¸­ï¼Œå¦‚æœæœ‰å¤šä¸ªç›®æ ‡çš„è¯ï¼Œâ€œ @|è§„åˆ™ä¸­çš„ç›®æ ‡é›†åˆï¼Œåœ¨æ¨¡å¼è§„åˆ™ä¸­ï¼Œå¦‚æœæœ‰å¤šä¸ªç›®æ ‡çš„è¯ï¼Œâ€œ @âˆ£è§„åˆ™ä¸­çš„ç›®æ ‡é›†åˆï¼Œåœ¨æ¨¡å¼è§„åˆ™ä¸­ï¼Œå¦‚æœæœ‰å¤šä¸ªç›®æ ‡çš„è¯ï¼Œâ€œ@â€è¡¨ç¤ºåŒ¹é…æ¨¡å¼ä¸­å®šä¹‰çš„ç›®æ ‡é›†åˆ
&amp;lt; âˆ£ ä¾èµ–æ–‡ä»¶é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœä¾èµ–æ–‡ä»¶æ˜¯ä»¥æ¨¡å¼ ( å³â€œ &amp;lt;|ä¾èµ–æ–‡ä»¶é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœä¾èµ–æ–‡ä»¶æ˜¯ä»¥æ¨¡å¼(å³â€œ%â€ )å®šä¹‰çš„ï¼Œé‚£ä¹ˆâ€œ &amp;lt;âˆ£ä¾èµ–æ–‡ä»¶é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœä¾èµ–æ–‡ä»¶æ˜¯ä»¥æ¨¡å¼(å³â€œ&amp;lt;â€å°±æ˜¯ç¬¦åˆæ¨¡å¼çš„ä¸€ç³»åˆ—çš„æ–‡ä»¶é›†åˆ
âˆ£ æ‰€æœ‰ä¾èµ–æ–‡ä»¶çš„é›†åˆï¼Œä½¿ç”¨ç©ºæ ¼åˆ†å¼€ï¼Œå¦‚æœåœ¨ä¾èµ–æ–‡ä»¶ä¸­æœ‰å¤šä¸ªé‡å¤çš„æ–‡ä»¶ï¼Œâ€œ ^|æ‰€æœ‰ä¾èµ–æ–‡ä»¶çš„é›†åˆï¼Œä½¿ç”¨ç©ºæ ¼åˆ†å¼€ï¼Œå¦‚æœåœ¨ä¾èµ–æ–‡ä»¶ä¸­æœ‰å¤šä¸ªé‡å¤çš„æ–‡ä»¶ï¼Œâ€œ âˆ£æ‰€æœ‰ä¾èµ–æ–‡ä»¶çš„é›†åˆï¼Œä½¿ç”¨ç©ºæ ¼åˆ†å¼€ï¼Œå¦‚æœåœ¨ä¾èµ–æ–‡ä»¶ä¸­æœ‰å¤šä¸ªé‡å¤çš„æ–‡ä»¶ï¼Œâ€œ^â€ä¼šå»é™¤é‡å¤çš„ä¾èµ–æ–‡ä»¶ï¼Œå€¼ä¿ç•™ä¸€ä»½ã€‚">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-01-07T22:53:05+08:00">
    <meta property="article:modified_time" content="2023-01-07T22:53:05+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="è€å¸…çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">è€å¸…çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Makefileç®€å•ä½¿ç”¨</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="Makefile_1"></a>Makefileæ¨¡å¼è§„åˆ™</h3> 
<p>Makefileè§„åˆ™ï¼šå½“ä¾èµ–æ¯”ç›®æ ‡æ–‡ä»¶æ–°æ—¶ï¼Œé‡æ–°ç”Ÿæˆç›®æ ‡æ–‡ä»¶</p> 
<blockquote> 
 <p>target(ç›®æ ‡):prerequiriesï¼ˆä¾èµ–ï¼‰<br> commandï¼ˆå‘½ä»¤ï¼‰</p> 
</blockquote> 
<p>ç®€å•ä¾‹å­ï¼Œç°åœ¨æœ‰ä¸‰ä¸ªæ–‡ä»¶<code>a.c b.h b.c</code>å†…å®¹ä¸ºï¼š</p> 
<pre><code class="prism language-c"><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>a<span class="token punctuation">.</span>c<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"b.h"</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> c<span class="token punctuation">;</span>
	c<span class="token operator">=</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"c = %d\n"</span><span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>b<span class="token punctuation">.</span>c<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"b.h"</span></span>
<span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>b<span class="token punctuation">.</span>h<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">_B_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_B_H</span></span>
<span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre> 
<p>ä¸‹é¢äº†è§£å‡ ä¸ªå˜é‡çš„å«ä¹‰ï¼š<br> ç¬¦åˆ|å«ä¹‰<br> â€“|:â€“ğŸ˜â€“:<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         @ 
        
       
         âˆ£ 
        
       
         è§„åˆ™ä¸­çš„ç›®æ ‡é›†åˆï¼Œåœ¨æ¨¡å¼è§„åˆ™ä¸­ï¼Œå¦‚æœæœ‰å¤šä¸ªç›®æ ‡çš„è¯ï¼Œâ€œ 
        
       
      
        @|è§„åˆ™ä¸­çš„ç›®æ ‡é›†åˆï¼Œåœ¨æ¨¡å¼è§„åˆ™ä¸­ï¼Œå¦‚æœæœ‰å¤šä¸ªç›®æ ‡çš„è¯ï¼Œâ€œ 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">@âˆ£</span><span class="mord cjk_fallback">è§„åˆ™ä¸­çš„ç›®æ ‡é›†åˆï¼Œåœ¨æ¨¡å¼è§„åˆ™ä¸­ï¼Œå¦‚æœæœ‰å¤šä¸ªç›®æ ‡çš„è¯ï¼Œ</span><span class="mord">â€œ</span></span></span></span></span>@â€è¡¨ç¤ºåŒ¹é…æ¨¡å¼ä¸­å®šä¹‰çš„ç›®æ ‡é›†åˆ<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         &lt; 
        
       
         âˆ£ 
        
       
         ä¾èµ–æ–‡ä»¶é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœä¾èµ–æ–‡ä»¶æ˜¯ä»¥æ¨¡å¼ 
        
       
         ( 
        
       
         å³â€œ 
        
       
      
        &lt;|ä¾èµ–æ–‡ä»¶é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœä¾èµ–æ–‡ä»¶æ˜¯ä»¥æ¨¡å¼(å³â€œ%â€ )å®šä¹‰çš„ï¼Œé‚£ä¹ˆâ€œ 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">âˆ£</span><span class="mord cjk_fallback">ä¾èµ–æ–‡ä»¶é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœä¾èµ–æ–‡ä»¶æ˜¯ä»¥æ¨¡å¼</span><span class="mopen">(</span><span class="mord cjk_fallback">å³</span><span class="mord">â€œ</span></span></span></span></span>&lt;â€å°±æ˜¯ç¬¦åˆæ¨¡å¼çš„ä¸€ç³»åˆ—çš„æ–‡ä»¶é›†åˆ<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
         
        
          âˆ£ 
         
        
       
         æ‰€æœ‰ä¾èµ–æ–‡ä»¶çš„é›†åˆï¼Œä½¿ç”¨ç©ºæ ¼åˆ†å¼€ï¼Œå¦‚æœåœ¨ä¾èµ–æ–‡ä»¶ä¸­æœ‰å¤šä¸ªé‡å¤çš„æ–‡ä»¶ï¼Œâ€œ 
        
       
      
        ^|æ‰€æœ‰ä¾èµ–æ–‡ä»¶çš„é›†åˆï¼Œä½¿ç”¨ç©ºæ ¼åˆ†å¼€ï¼Œå¦‚æœåœ¨ä¾èµ–æ–‡ä»¶ä¸­æœ‰å¤šä¸ªé‡å¤çš„æ–‡ä»¶ï¼Œâ€œ 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.888em;"></span><span class="mord"><span class=""></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.888em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">âˆ£</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">æ‰€æœ‰ä¾èµ–æ–‡ä»¶çš„é›†åˆï¼Œä½¿ç”¨ç©ºæ ¼åˆ†å¼€ï¼Œå¦‚æœåœ¨ä¾èµ–æ–‡ä»¶ä¸­æœ‰å¤šä¸ªé‡å¤çš„æ–‡ä»¶ï¼Œ</span><span class="mord">â€œ</span></span></span></span></span>^â€ä¼šå»é™¤é‡å¤çš„ä¾èµ–æ–‡ä»¶ï¼Œå€¼ä¿ç•™ä¸€ä»½ã€‚</p> 
<p>ç®€å•Makefileç¼–å†™ï¼š</p> 
<pre><code class="prism language-c">test <span class="token operator">:</span> a<span class="token punctuation">.</span>c b<span class="token punctuation">.</span>c b<span class="token punctuation">.</span>h
        gcc <span class="token operator">-</span>o test a<span class="token punctuation">.</span>c b<span class="token punctuation">.</span>c
clean<span class="token operator">:</span>
        rm <span class="token operator">*</span><span class="token punctuation">.</span>o test <span class="token operator">-</span>f
</code></pre> 
<p>æ”¹è¿›ï¼š</p> 
<pre><code class="prism language-c">#å˜é‡è¡¨ç¤º
objs <span class="token operator">=</span> a<span class="token punctuation">.</span>o b<span class="token punctuation">.</span>o

#$<span class="token operator">^</span>è¡¨ç¤ºæ‰€æœ‰ä¾èµ–
test<span class="token operator">:</span>$<span class="token punctuation">(</span>objs<span class="token punctuation">)</span>
	gcc <span class="token operator">-</span>o test $<span class="token operator">^</span>

#$@ï¼šç›®æ ‡é›†åˆ $<span class="token operator">&lt;</span>ï¼šä¾èµ–æ–‡ä»¶é›†åˆ
<span class="token operator">%</span><span class="token punctuation">.</span>o <span class="token operator">:</span> <span class="token operator">%</span><span class="token punctuation">.</span>c
	gcc <span class="token operator">-</span>c <span class="token operator">-</span>o $@ $<span class="token operator">&lt;</span>

#<span class="token punctuation">.</span>PHONYä¼ªç›®æ ‡ï¼Œè¿™æ ·å­ä¸ä¼šåˆ¤æ–­åŒä¸€ç›®å½•ä¸‹æ˜¯å¦æœ‰cleanæ–‡ä»¶å­˜åœ¨
<span class="token punctuation">.</span>PHONY clean<span class="token operator">:</span>
	rm test <span class="token operator">*</span><span class="token punctuation">.</span>o <span class="token operator">-</span>rf
</code></pre> 
<h3><a id="Makefile_65"></a>Makefileä¸­çš„å˜é‡</h3> 
<p>Makefileä¸­çš„å˜é‡åˆ†ä¸ºä¸‰ç§ï¼šç®€å•å˜é‡ï¼Œå»¶æ—¶å˜é‡ï¼Œexportå˜é‡</p> 
<ul><li><code>A := XXX</code>:Açš„å€¼å®šä¹‰æ—¶å°±ç¡®å®šä¸ºXXX</li><li><code>B = XXX</code>:XXXå®šä¹‰ä¹‹åBçš„å€¼æ‰ç¡®å®šä¸‹æ¥</li><li><code>C ?= XXX</code>:ç¬¬ä¸€æ¬¡å®šä¹‰æ‰èµ·æ•ˆï¼Œå‰é¢è‹¥å·²ç»å®šä¹‰ï¼Œåˆ™å¿½ç•¥</li></ul> 
<p>ç¤ºä¾‹ï¼š</p> 
<pre><code class="prism language-c">A <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">123</span>
B  <span class="token operator">=</span> $<span class="token punctuation">(</span>C<span class="token punctuation">)</span>
C  <span class="token operator">=</span> abc
D  <span class="token operator">=</span> <span class="token number">100</span>ASK
D  <span class="token operator">?</span><span class="token operator">=</span> ASK

print<span class="token operator">:</span>
	@echo $<span class="token punctuation">(</span>A<span class="token punctuation">)</span>
	@echo $<span class="token punctuation">(</span>B<span class="token punctuation">)</span>
	@echo $<span class="token punctuation">(</span>C<span class="token punctuation">)</span>
	@echo $<span class="token punctuation">(</span>D<span class="token punctuation">)</span>
</code></pre> 
<p>ç»“æœï¼š<br> <img src="https://images2.imgbox.com/a4/d6/CEyI74Lf_o.png" alt=""></p> 
<h3><a id="Makefile_88"></a>Makefileçš„ç®€å•å‡½æ•°</h3> 
<ul><li>$(foreach var,list,test),éå†listï¼Œå°†listä¸­çš„æ¯ä¸ªå˜é‡èµ‹ç»™var,å†å°†varä»£å…¥testä¸­<br> ç¤ºä¾‹ï¼šå°†Aä¸­çš„æ¯ä¸ªå˜é‡éƒ½æ·»åŠ .oåç¼€</li></ul> 
<pre><code class="prism language-c">A <span class="token operator">=</span> a b c
B <span class="token operator">=</span> $<span class="token punctuation">(</span>foreach f<span class="token punctuation">,</span>$<span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">,</span>$<span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">.</span>o<span class="token punctuation">)</span>

print<span class="token operator">:</span>
	@echo B<span class="token operator">=</span>$<span class="token punctuation">(</span>B<span class="token punctuation">)</span>
</code></pre> 
<p>ç»“æœï¼š<br> <img src="https://images2.imgbox.com/ba/93/Wib8hSpZ_o.png" alt=""></p> 
<ul><li>$(filter pattern â€¦,text)ï¼šåœ¨textä¸­å–å‡ºç¬¦åˆpatternæ ¼å¼çš„å€¼</li><li>$(filter-out pattern â€¦,text)ï¼šåœ¨textä¸­å–å‡ºä¸ç¬¦åˆpatternæ ¼å¼çš„å€¼</li></ul> 
<p>ç¤ºä¾‹ï¼š</p> 
<pre><code class="prism language-c">C <span class="token operator">=</span> a b c d<span class="token operator">/</span>

D <span class="token operator">=</span> $<span class="token punctuation">(</span>filter <span class="token operator">%</span><span class="token operator">/</span><span class="token punctuation">,</span>$<span class="token punctuation">(</span>C<span class="token punctuation">)</span><span class="token punctuation">)</span>
E <span class="token operator">=</span> $<span class="token punctuation">(</span>filter<span class="token operator">-</span>out <span class="token operator">%</span><span class="token operator">/</span><span class="token punctuation">,</span>$<span class="token punctuation">(</span>C<span class="token punctuation">)</span><span class="token punctuation">)</span>

print<span class="token operator">:</span>
	@echo D<span class="token operator">=</span>$<span class="token punctuation">(</span>D<span class="token punctuation">)</span>
	@echo E<span class="token operator">=</span>$<span class="token punctuation">(</span>E<span class="token punctuation">)</span>
</code></pre> 
<p>ç»“æœï¼š<br> <img src="https://images2.imgbox.com/04/e0/MpQlQ8gL_o.png" alt=""></p> 
<ul><li>$(wildcard pattern)ï¼šå–å‡ºç¬¦åˆpatternæ ¼å¼çš„æ–‡ä»¶<br> ç¤ºä¾‹:å–å‡ºçœŸå®å­˜åœ¨çš„æ–‡ä»¶ï¼Œæˆ‘çš„æŸä¸ªç›®å½•ä¸‹æœ‰<code>a.c b.c c.c</code>ä¸‰ä¸ªæ–‡ä»¶</li></ul> 
<pre><code class="prism language-c">files <span class="token operator">=</span> a<span class="token punctuation">.</span>c b<span class="token punctuation">.</span>c c<span class="token punctuation">.</span>c d<span class="token punctuation">.</span>c
files2 <span class="token operator">=</span> $<span class="token punctuation">(</span>wildcard $<span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">)</span>
print<span class="token operator">:</span>
	@echo files2 <span class="token operator">=</span> $<span class="token punctuation">(</span>files2<span class="token punctuation">)</span>
</code></pre> 
<p>ç»“æœï¼š<br> <img src="https://images2.imgbox.com/ea/59/SGaIeZFi_o.png" alt=""></p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          ( 
         
        
          p 
         
        
          a 
         
        
          t 
         
        
          s 
         
        
          u 
         
        
          b 
         
        
          s 
         
        
          t 
         
        
          p 
         
        
          a 
         
        
          t 
         
        
          t 
         
        
          e 
         
        
          r 
         
        
          n 
         
        
          , 
         
        
          r 
         
        
          e 
         
        
          p 
         
        
          l 
         
        
          a 
         
        
          c 
         
        
          e 
         
        
          m 
         
        
          e 
         
        
          n 
         
        
          t 
         
        
          , 
         
        
       
         (patsubst pattern,replacement, 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">b</span><span class="mord mathnormal">s</span><span class="mord mathnormal">tp</span><span class="mord mathnormal">a</span><span class="mord mathnormal">tt</span><span class="mord mathnormal" style="margin-right: 0.0278em;">er</span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal">a</span><span class="mord mathnormal">ce</span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mpunct">,</span></span></span></span></span>(var)):å°†varæ‰€æœ‰æ»¡è¶³patternæ ¼å¼çš„æ–‡ä»¶å…¨éƒ¨æ›¿æ¢ä¸ºreplacementæ ¼å¼<br> ç¤ºä¾‹ï¼šå°†æ‰€æœ‰filesä¸­æ‰€æœ‰<code>.c</code>æ–‡ä»¶æ›¿æ¢ä¸º<code>.d</code>æ–‡ä»¶</li></ul> 
<pre><code class="prism language-c">files <span class="token operator">=</span> a<span class="token punctuation">.</span>c b<span class="token punctuation">.</span>c c<span class="token punctuation">.</span>c d<span class="token punctuation">.</span>c
files2 <span class="token operator">=</span> $<span class="token punctuation">(</span>patsubst <span class="token operator">%</span><span class="token punctuation">.</span>c<span class="token punctuation">,</span><span class="token operator">%</span><span class="token punctuation">.</span>d<span class="token punctuation">,</span>$<span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">)</span>
print<span class="token operator">:</span>
	@echo files2 <span class="token operator">=</span> $<span class="token punctuation">(</span>files2<span class="token punctuation">)</span>
</code></pre> 
<p>ç»“æœï¼š<br> <img src="https://images2.imgbox.com/19/75/v2KUg5vE_o.png" alt=""></p> 
<h3><a id="Makefile_137"></a>Makefileå®ä¾‹</h3> 
<ul><li><code>gcc -M a.c</code>å¯ä»¥å¾—åˆ°<code>a.c</code>çš„ä¾èµ–æ–‡ä»¶<br> <img src="https://images2.imgbox.com/78/5d/tMvFyBNi_o.png" alt=""></li><li><code>gcc -M -MF a.d a.c</code>å¯ä»¥å°†<code>a.c</code>çš„ä¾èµ–æ–‡ä»¶å…¨éƒ¨å†™å…¥<code>a.d</code>æ–‡ä»¶ä¸­<br> <img src="https://images2.imgbox.com/8b/0b/PHYXKGoQ_o.png" alt=""><br> ç¤ºä¾‹ï¼šæœ‰ä¸‰ä¸ªæ–‡ä»¶<code>a.c b.c b.h</code></li></ul> 
<pre><code class="prism language-c">objs <span class="token operator">=</span> a<span class="token punctuation">.</span>o b<span class="token punctuation">.</span>o

#ä¾èµ–<span class="token punctuation">,</span>åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¾èµ–a<span class="token punctuation">.</span>d<span class="token punctuation">,</span>b<span class="token punctuation">.</span>d
dep_files <span class="token operator">:</span><span class="token operator">=</span>$<span class="token punctuation">(</span>patsubst <span class="token operator">%</span><span class="token punctuation">,</span><span class="token operator">%</span><span class="token punctuation">.</span>d<span class="token punctuation">,</span>$<span class="token punctuation">(</span>objs<span class="token punctuation">)</span><span class="token punctuation">)</span>
dep_files <span class="token operator">:</span><span class="token operator">=</span>$<span class="token punctuation">(</span>wildcard $<span class="token punctuation">(</span>dep_files<span class="token punctuation">)</span><span class="token punctuation">)</span>

#ç¼–è¯‘é€‰é¡¹
CFLAGS <span class="token operator">=</span> <span class="token operator">-</span>Werror <span class="token operator">-</span>Iinclude

test<span class="token operator">:</span>$<span class="token punctuation">(</span>objs<span class="token punctuation">)</span>
	gcc <span class="token operator">-</span>o test $<span class="token operator">^</span>
	
#åˆ¤æ–­æ˜¯å¦å­˜åœ¨<span class="token punctuation">,</span>æ³¨æ„ç©ºæ ¼
<span class="token function">ifneq</span> <span class="token punctuation">(</span>$<span class="token punctuation">(</span>dep_files<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span>
include $<span class="token punctuation">(</span>dep_files<span class="token punctuation">)</span>
endif

<span class="token operator">%</span><span class="token punctuation">.</span>o<span class="token operator">:</span><span class="token operator">%</span><span class="token punctuation">.</span>c
	gcc $<span class="token punctuation">(</span>CFLAGS<span class="token punctuation">)</span> <span class="token operator">-</span>c <span class="token operator">-</span>o $@ $<span class="token operator">&lt;</span> <span class="token operator">-</span>MD <span class="token operator">-</span>MF $@<span class="token punctuation">.</span>d

clean<span class="token operator">:</span>
	rm test <span class="token operator">*</span><span class="token punctuation">.</span>o <span class="token operator">-</span>rf

distclean<span class="token operator">:</span>
	rm $<span class="token punctuation">(</span>dep_files<span class="token punctuation">)</span>

<span class="token punctuation">.</span>PHONY<span class="token operator">:</span> clean
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/368f523267a25652c56ceb2820765fd7/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">æ“ä½œç³»ç»Ÿâ€”â€”æ¦‚å¿µã€åŠŸèƒ½ã€ç‰¹å¾åŠå‘å±•åˆ†ç±»</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f64855621d7e97a322d1ffe000bfc12c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">ä¸€ç¯‡å½»åº•è§£å†³:Fatal error compiling: æ— æ•ˆçš„ç›®æ ‡å‘è¡Œç‰ˆ: 11 -ï¼ [Help 1]</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 è€å¸…çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>