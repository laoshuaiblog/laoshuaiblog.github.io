<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据挖掘项目——新零售无人智能售货机商务数据分析 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/9d2d3912ce279818f2a96010b1e6bd69/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="数据挖掘项目——新零售无人智能售货机商务数据分析">
  <meta property="og:description" content="数据挖掘项目——新零售无人智能售货机商务数据分析 前言一、 原始数据分析二、数据清洗1、处理附件12、处理附件2 三、数据分析1、描述性分析2、数据可视化 结果如下： 前言 本文所使用的代码和数据集请关注公众号： CV市场， 后台回复“零售机项目”获取，感谢支持。
一、 原始数据分析 原数据中包含两个附件annex_1和annex_2。
其中annex_1中有数据：订单号、设备ID、应付金额、实际金额、商品、支付时间、地点、状态、提现。具体如下：
#原始数据 detail = pd.read_csv(&#39;annex_1.csv&#39;,parse_dates=[0],encoding=&#39;gbk&#39;) detail.head() annex_2是对附件1(annex_1)中出售商品的具体分类：
goods = pd.read_csv(&#39;annex_2.csv&#39;,encoding=&#39;gbk&#39;) goods.head() 二、数据清洗 1、处理附件1 查看附件1的数据信息：
detail.info() #查看是否有缺失值 (detail.isnull()).sum() 可以看到附件1没有空值，那么再继续仔细分析每个数据，这里使用pandas.to_datetime处理“支付时
间”列，由于&#34;创建时间&#34;列包含AM和PM这样的字段，所以使用如下处理：
import pandas as pd from dateutil.parser import parse import datetime as dt detail[&#39;支付时间&#39;]=detail[&#39;支付时间&#39;].apply(lambda x:parse(x)) print(detail[&#39;支付时间&#39;]) 但是报错了：
意思是日期超过了当前月份的天数，那么具体些代码分析：
#解析出每条数据的年、月、日 detail[&#39;year&#39;] = detail[&#39;支付时间&#39;].apply(lambda x : int(str(x).split(&#39;/&#39;)[0])) detail[&#39;month&#39;] = detail[&#39;支付时间&#39;].apply(lambda x : int(str(x).split(&#39;/&#39;)[1])) detail[&#39;day&#39;] = detail[&#39;支付时间&#39;].apply(lambda x : int(str(x).split(&#39;/&#39;)[-1].split(&#39; &#39;)[0])) detail[&#39;year&#39;].unique() 可以看到附件1中只包含2017年的数据">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-12-09T16:41:51+08:00">
    <meta property="article:modified_time" content="2021-12-09T16:41:51+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据挖掘项目——新零售无人智能售货机商务数据分析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>数据挖掘项目——新零售无人智能售货机商务数据分析</h4> 
 <ul><li><ul><li><a href="#_2" rel="nofollow">前言</a></li><li><a href="#__5" rel="nofollow">一、 原始数据分析</a></li><li><a href="#_26" rel="nofollow">二、数据清洗</a></li><li><ul><li><a href="#11_28" rel="nofollow">1、处理附件1</a></li><li><a href="#22_135" rel="nofollow">2、处理附件2</a></li></ul> 
   </li><li><a href="#_141" rel="nofollow">三、数据分析</a></li><li><ul><li><a href="#1_152" rel="nofollow">1、描述性分析</a></li><li><a href="#2_190" rel="nofollow">2、数据可视化</a></li></ul> 
   </li><li><a href="#_284" rel="nofollow">结果如下：</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_2"></a>前言</h3> 
<p><font color="red">本文所使用的代码和数据集请关注公众号： CV市场， 后台回复“零售机项目”获取，感谢支持。</font></p> 
<h3><a id="__5"></a>一、 原始数据分析</h3> 
<p>原数据中包含两个附件annex_1和annex_2。</p> 
<p>其中annex_1中有数据：订单号、设备ID、应付金额、实际金额、商品、支付时间、地点、状态、提现。具体如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#原始数据</span>
detail <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'annex_1.csv'</span><span class="token punctuation">,</span>parse_dates<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>
detail<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/67/8a/5GDagC3P_o.png" alt="在这里插入图片描述"></p> 
<p>annex_2是对附件1(annex_1)中出售商品的具体分类：</p> 
<pre><code class="prism language-python">goods <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'annex_2.csv'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>
goods<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cc/b9/vPtGwy3o_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_26"></a>二、数据清洗</h3> 
<h4><a id="11_28"></a>1、处理附件1</h4> 
<p>查看附件1的数据信息：</p> 
<pre><code class="prism language-python">detail<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#查看是否有缺失值</span>
<span class="token punctuation">(</span>detail<span class="token punctuation">.</span>isnull<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/98/d6/ul26JIfj_o.png" alt="在这里插入图片描述"><br> 可以看到附件1没有空值，那么再继续仔细分析每个数据，这里使用pandas.to_datetime处理“支付时</p> 
<p>间”列，由于"创建时间"列包含AM和PM这样的字段，所以使用如下处理：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">from</span> dateutil<span class="token punctuation">.</span>parser <span class="token keyword">import</span> parse
<span class="token keyword">import</span> datetime <span class="token keyword">as</span> dt
detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token operator">=</span>detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>parse<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>但是报错了：</p> 
<p><img src="https://images2.imgbox.com/5c/6d/aa5aF2Nt_o.png" alt="在这里插入图片描述"><br> 意思是日期超过了当前月份的天数，那么具体些代码分析：</p> 
<pre><code class="prism language-python"><span class="token comment">#解析出每条数据的年、月、日</span>
detail<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">=</span> detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x <span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
detail<span class="token punctuation">[</span><span class="token string">'month'</span><span class="token punctuation">]</span> <span class="token operator">=</span> detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x <span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
detail<span class="token punctuation">[</span><span class="token string">'day'</span><span class="token punctuation">]</span> <span class="token operator">=</span> detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x <span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">detail<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>可以看到附件1中只包含2017年的数据</p> 
<p><img src="https://images2.imgbox.com/bf/42/p6meTyTu_o.png" alt="在这里插入图片描述"></p> 
<p>依次检验每个月的天数是否正确:</p> 
<pre><code class="prism language-python"><span class="token keyword">for</span> i<span class="token punctuation">,</span>j <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>detail<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">(</span>detail<span class="token punctuation">[</span><span class="token string">'month'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span> <span class="token punctuation">(</span>detail<span class="token punctuation">[</span><span class="token string">'day'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>detail<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">(</span>detail<span class="token punctuation">[</span><span class="token string">'month'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span> <span class="token punctuation">(</span>detail<span class="token punctuation">[</span><span class="token string">'day'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>index<span class="token punctuation">.</span>values<span class="token punctuation">)</span>    
</code></pre> 
<p><img src="https://images2.imgbox.com/3c/d5/CNoDGM3j_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到显示的是行索引为70679的数据，那么打印下该条数据：<br> <img src="https://images2.imgbox.com/81/f6/canywuHz_o.png" alt="在这里插入图片描述"></p> 
<p>很明显，2017年的2月是没有第29天的，所以drop掉：</p> 
<pre><code class="prism language-python">detail<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>index <span class="token operator">=</span> <span class="token number">70679</span><span class="token punctuation">,</span>axis <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p>这回再根据时间提取年、月、日、时、分、秒：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> dateutil<span class="token punctuation">.</span>parser <span class="token keyword">import</span> parse
detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token operator">=</span>detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>parse<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>

detail<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">=</span> detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>year
detail<span class="token punctuation">[</span><span class="token string">'month'</span><span class="token punctuation">]</span> <span class="token operator">=</span> detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>month
detail<span class="token punctuation">[</span><span class="token string">'day'</span><span class="token punctuation">]</span> <span class="token operator">=</span> detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>day
detail<span class="token punctuation">[</span><span class="token string">'hour'</span><span class="token punctuation">]</span> <span class="token operator">=</span> detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>hour
detail<span class="token punctuation">[</span><span class="token string">'minute'</span><span class="token punctuation">]</span> <span class="token operator">=</span> detail<span class="token punctuation">[</span><span class="token string">'支付时间'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>minute
</code></pre> 
<p><img src="https://images2.imgbox.com/75/76/KSgkagRA_o.png" alt="在这里插入图片描述"><br> 再次检查是否有空值：<br> <img src="https://images2.imgbox.com/57/d4/YxbGoidc_o.png" alt="在这里插入图片描述"><br> 查看有没有重复行：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> Counter
<span class="token comment">#判断是否有重复行</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>Counter<span class="token punctuation">(</span>detail<span class="token punctuation">.</span>duplicated<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ab/83/gIk0x2SN_o.png" alt="在这里插入图片描述"><br> 没有空值，没有重复行。</p> 
<p>下面再深入观察“商品”列数据：</p> 
<pre><code class="prism language-python">detail<span class="token punctuation">[</span><span class="token string">'商品'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>发现里面有很多类似于“商品”<br> +数字的格式，这样的数据是没有意义的，应该drop掉</p> 
<p><img src="https://images2.imgbox.com/9d/88/9KieSEIA_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">detail<span class="token punctuation">[</span><span class="token string">'商品'</span><span class="token punctuation">]</span> <span class="token operator">=</span> detail<span class="token punctuation">[</span><span class="token string">'商品'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span>
detail<span class="token operator">=</span>detail<span class="token punctuation">[</span><span class="token operator">~</span>detail<span class="token punctuation">[</span><span class="token string">'商品'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>contains<span class="token punctuation">(</span><span class="token string">'商品'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre> 
<p>现在数据清洗算是做完了，将清洗后的数据存入到文件中：</p> 
<pre><code class="prism language-python">detail<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'cleared_annex_1.csv'</span><span class="token punctuation">,</span>index <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span>
goods<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'cleared_annex_2.csv'</span><span class="token punctuation">,</span>index <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="22_135"></a>2、处理附件2</h4> 
<p><img src="https://images2.imgbox.com/5c/1f/Qzm4yl9v_o.png" alt="在这里插入图片描述"></p> 
<p>没空值，暂时不需要处理。</p> 
<h3><a id="_141"></a>三、数据分析</h3> 
<p>先读取上面做好数据清洗的csv文件:</p> 
<pre><code class="prism language-python">cleared_annex_1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'cleared_annex_1.csv'</span><span class="token punctuation">)</span>
cleared_annex_2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'cleared_annex_2.csv'</span><span class="token punctuation">)</span>
commodity_sale <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./result/commodity_sale.csv'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>
</code></pre> 
<p>这里多读了一个文件，用来描述每件商品的订单量和交易额：<br> <img src="https://images2.imgbox.com/ea/c4/AIZLU4uN_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1_152"></a>1、描述性分析</h4> 
<pre><code class="prism language-python"><span class="token comment">#描述性分析</span>
cleared_annex_1<span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/78/49/fkv9NIJQ_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">cleared_annex_2<span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6e/43/zdrBeXU4_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">commodity_sale<span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d3/9a/Px6N1REY_o.png" alt="在这里插入图片描述"></p> 
<p>查看实际支付的分布散点图：</p> 
<pre><code class="prism language-python">cleared_annex_1<span class="token punctuation">[</span><span class="token string">'实际金额'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span>style<span class="token operator">=</span><span class="token string">'k.'</span><span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>c <span class="token operator">=</span> <span class="token string">'r'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>tick_params<span class="token punctuation">(</span>labelsize<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d4/34/90BMbPm7_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到上面有些离群点，但此时并不能说明是异常值，要根据商品名字再做判断：</p> 
<pre><code class="prism language-python">cleared_annex_1<span class="token punctuation">[</span>cleared_annex_1<span class="token punctuation">[</span><span class="token string">'实际金额'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">80</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'商品'</span><span class="token punctuation">,</span><span class="token string">'实际金额'</span><span class="token punctuation">,</span><span class="token string">'应付金额'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0b/b5/VuxUn9y1_o.png" alt="在这里插入图片描述"><br> 我去某东查了一下价格，好像也差不多，所以这里就不算是异常数据了。</p> 
<h4><a id="2_190"></a>2、数据可视化</h4> 
<p><strong>（1）查看每个‘实际金额’的频率</strong></p> 
<pre><code class="prism language-python、">#直方图
cleared_annex_1['实际金额'].plot(kind='hist',bins=50)
</code></pre> 
<p><img src="https://images2.imgbox.com/19/2d/qkMqk79p_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token comment">#概率密度图</span>
cleared_annex_1<span class="token punctuation">[</span><span class="token string">'实际金额'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span>kind<span class="token operator">=</span><span class="token string">'kde'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/71/ff/GedFXaEb_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到在价格在0~20之间出现的频率最高。</p> 
<p><strong>（2）订单量的统计图</strong></p> 
<pre><code class="prism language-python"><span class="token comment">#订单量概率密度图</span>
commodity_sale<span class="token punctuation">[</span><span class="token string">"订单量"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span>kind<span class="token operator">=</span><span class="token string">'kde'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b7/9e/KFfmr2O2_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token comment">#交易额概率概率图</span>
data<span class="token punctuation">[</span><span class="token string">"交易额"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span>kind<span class="token operator">=</span><span class="token string">'kde'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f4/50/7W1wjtXz_o.png" alt="在这里插入图片描述"><br> <strong>3、实际交易金额数量直方图</strong></p> 
<pre><code class="prism language-python">bins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">48</span><span class="token punctuation">,</span><span class="token number">130</span><span class="token punctuation">]</span>
pd<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>cleared_annex_1<span class="token punctuation">[</span><span class="token string">'实际金额'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>bins<span class="token punctuation">)</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>rot<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'green'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'实际支付分析'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/57/39/OYkbBtgm_o.png" alt="在这里插入图片描述"></p> 
<p><strong>4、销售量最多的前5个商品</strong></p> 
<pre><code class="prism language-python">cleared_annex_1<span class="token punctuation">[</span><span class="token string">'商品'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">'brown'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'商品排名'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cd/34/Q3GWK8Rj_o.png" alt="在这里插入图片描述"></p> 
<p><strong>5、每个地点所有商品价格的平均值</strong></p> 
<pre><code class="prism language-python">cleared_annex_1<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'地点'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'实际金额'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'每个地点所有商品价格的平均值'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a9/19/e1jFbqUS_o.png" alt="加粗样式"></p> 
<p><strong>6、每个地点销售商品的数量</strong></p> 
<pre><code class="prism language-python">cleared_annex_1<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'地点'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'订单号'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'每个地点销售商品的数量'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1b/e4/wZyPILVb_o.png" alt="在这里插入图片描述"></p> 
<p><strong>7、每月限售额的平均值</strong></p> 
<pre><code class="prism language-python">cleared_annex_1<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'month'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'实际金额'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'每月限售额的平均值'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b8/c8/vwzzj0QD_o.png" alt="在这里插入图片描述"></p> 
<p><strong>8、每月的销售量</strong></p> 
<pre><code class="prism language-python">cleared_annex_1<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'month'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'订单号'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'每月的销售量'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7a/2d/7Fuen91I_o.png" alt="在这里插入图片描述"></p> 
<p><strong>9、每个地点每月的销售总额</strong></p> 
<pre><code class="prism language-python">cleared_annex_1<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'地点'</span><span class="token punctuation">,</span><span class="token string">'month'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'实际金额'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'每个地点每月的销售总额'</span><span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a7/59/fudMU2rN_o.png" alt="在这里插入图片描述"><br> <strong>10、每个地点每个商品的销售量</strong></p> 
<pre><code class="prism language-python">cleared_annex_1<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'地点'</span><span class="token punctuation">,</span><span class="token string">'商品'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'商品'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_284"></a>结果如下：</h3> 
<p>地点 商品<br> A 100g*5瓶益力多 40<br> 100g卫龙点心面黑椒牛排味 6<br> 100g果王咸柑桔罐装 20<br> 100g越南LIPO奶味面包干 1<br> 103g康师傅红烧牛肉面 15<br> 107g出前一丁桶面酱香牛肉王 12<br> 10g卫龙亲嘴烧香辣味 25<br> 10g越南LIPO奶味面包干 5<br> 10g越南LIPO奶味面包干0015 4<br> 10g越南LIPO奶味面包干0046 2<br> 110g顺宝九制话梅 41<br> 117gUFO炒面铁板色拉鱿鱼风味 5<br> 120g达利园蔓越莓提子面包 1<br> 123gUFO炒面XO酱海鲜风味 2<br> 12g劲仔小鱼卤香味 20<br> 12g劲仔小鱼麻辣味 103<br> 130g果王玉带蚕豆 5<br> 13g无穷烤鸡小腿蜂蜜味 201<br> 13g雀巢咖啡1+2特浓 4<br> 145g果王迷你山楂包装 4<br> 145ml旺仔牛奶盒装 131<br> 145ml旺仔牛奶罐装 2<br> 148g富甲一方紫薯仔 39<br> 14g德芙巧克力 2<br> 150g健能酸奶原味 28<br> 150g洽洽原香瓜子 11<br> 150抽诗竹竹纤维面巾纸 9<br> 160g盼盼手撕面包 28<br> 180g统一满汉全席台式半筋半肉牛肉面 6<br> 180ml雀巢咖啡罐装 22<br> …<br> E 维他柠檬茶 169<br> 维他柠檬茶330ml（罐） 2<br> 美年达（罐） 133<br> 美汁源果粒橙 27<br> 脉动 996<br> 脉动（椰子菠萝口味） 9<br> 脉动（青柠） 44<br> 芙蓉王 6<br> 芦荟汁 44<br> 芬达330ml 382<br> 茉莉蜜茶 83<br> 营养快线 805<br> 诗竹竹纤维面巾纸 21<br> 越南LIPO奶味面包干100g 11<br> 迷你纸巾 13<br> 银鹭八宝粥 220<br> 阿萨姆奶茶 792<br> 阿萨姆煎茶奶绿 11<br> 雀巢咖啡 97<br> 雪力矿泉水 35<br> 雪碧 38<br> 雪碧330ml 173<br> 雪碧最新款 309<br> 雪碧（500ml） 172<br> 韩国海牌海苔 49<br> 顺宝九制梅 15<br> 香脆肠 76<br> 香豆干 251<br> 鸡爪 6<br> 鸭翅 282<br> Name: 商品, Length: 1303, dtype: int64<br> ---------------------------------------------------------------------------------</p> 
<p><strong>11、Top5商品占总商品比例</strong></p> 
<pre><code class="prism language-python">top5 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"怡宝纯净水"</span><span class="token punctuation">,</span><span class="token string">"脉动"</span><span class="token punctuation">,</span><span class="token string">"东鹏特饮"</span><span class="token punctuation">,</span><span class="token string">"阿萨姆奶茶"</span><span class="token punctuation">,</span><span class="token string">"营养快线"</span><span class="token punctuation">]</span>
cleared_annex_1_top5 <span class="token operator">=</span> cleared_annex_1<span class="token punctuation">[</span>cleared_annex_1<span class="token punctuation">[</span><span class="token string">'商品'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span>top5<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Top5商品占总商品比例：%.2f%%'</span><span class="token operator">%</span><span class="token punctuation">(</span>cleared_annex_1_top5<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">/</span>cleared_annex_1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/5d/64/MBcWljZh_o.png" alt="在这里插入图片描述"><br> <strong>12、Top5商品中每个商品的数量</strong></p> 
<pre><code class="prism language-python">cleared_annex_1_top5<span class="token punctuation">[</span><span class="token string">'商品'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'Top5商品中每个商品的数量'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b5/e6/MnHFqtm7_o.png" alt="在这里插入图片描述"><br> 占比：</p> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>axes<span class="token punctuation">(</span>aspect<span class="token operator">=</span><span class="token string">'equal'</span><span class="token punctuation">)</span> <span class="token comment">#将横轴，纵轴坐标标准化处理，保证饼图是一个正圆，否则为椭圆</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>cleared_annex_1_top5<span class="token punctuation">[</span><span class="token string">'商品'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>explode<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0.05</span><span class="token punctuation">,</span><span class="token number">0.05</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>startangle<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>labels<span class="token operator">=</span>top5<span class="token punctuation">,</span>autopct<span class="token operator">=</span><span class="token string">'%.2f%%'</span><span class="token punctuation">,</span>radius<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d5/75/hLa0LFon_o.png" alt="在这里插入图片描述"><br> <strong>13、以6、7、8月的销售量为例，画出热力图</strong></p> 
<pre><code class="prism language-python"><span class="token comment">#原始数据</span>
data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./result/6th_8th_month_order/6th_month_order.csv'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>
data<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/94/2a/2ILhGeJq_o.png" alt="在这里插入图片描述"><br> 画出6月的热力图：</p> 
<pre><code class="prism language-python">data <span class="token operator">=</span> data<span class="token punctuation">.</span>pivot_table<span class="token punctuation">(</span>index<span class="token operator">=</span><span class="token string">'hour'</span><span class="token punctuation">,</span>columns<span class="token operator">=</span><span class="token string">'day'</span><span class="token punctuation">,</span>values<span class="token operator">=</span><span class="token string">"number"</span><span class="token punctuation">,</span> aggfunc<span class="token operator">=</span>np<span class="token punctuation">.</span>mean<span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>data<span class="token punctuation">,</span>linewidths<span class="token operator">=</span><span class="token number">0.001</span><span class="token punctuation">,</span>vmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>vmax<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a2/14/fQdV7h7F_o.png" alt="在这里插入图片描述"><br> 同样的方式，分别画出7月和8月的热力图：<br> <img src="https://images2.imgbox.com/88/d2/tpAceLhu_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/46/47/CHKhQ2oJ_o.png" alt="在这里插入图片描述"></p> 
<p>从以上面三个图，可以看到6，7，8三个月份每一天的订单量随时间的变化。6月全月的订单量基本集中在8时至21时这段时间内；7月订单量有两段较为集中的时段，一段是7月1日至7月5日的8时至20时，另一段是7月22日至7月31日的9时至22时；8月订单量基本集中在8月1日至8月23日的9时至22时。因此，可以基本推测消费者在这三个月中的消费时间在8时至22时。运营者需要定期检查，保证在这段时间前将受欢迎的商品补充到售货机中。</p> 
<p><font color="red"><strong>本文所使用的代码和数据集请关注公众号： CV市场， 后台回复“零售机项目”获取，感谢支持。</strong></font></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/928729c1024f8562a015178a4d837eb9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">求出所有的水仙花数。所谓水仙花数是指一个三位数，其各位数字的立方和等于该数字本身。比如153是一个水仙花数，因为153=1^3&#43;5^3&#43;3^3。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/176a4a370a61e92bdf14fc67511a1bc5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据的交换输出-C语言</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>