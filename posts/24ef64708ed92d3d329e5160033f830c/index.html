<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>uniapp安卓本地打包成apk - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/24ef64708ed92d3d329e5160033f830c/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="uniapp安卓本地打包成apk">
  <meta property="og:description" content="uniapp安卓本地打包成apk 环境准备 1.HBuilderX最新版
2.与HBuilderX版本对应版本的“Android 离线SDK - 正式版”， 下载见：https://nativesupport.dcloud.net.cn/AppDocs/download/android.html
3.Android Studio，官方下载地址：https://developer.android.google.cn/studio?hl=zh-cn
4.java1.8环境
证书（keystore）准备 输入生成证书的命令，格式为:
keytool -genkey -alias 证书别名 -keyalg RSA -keysize 2048 -validity 证书的有效期（单位为天） -keystore 证书文件名.keystore
例如：
keytool -genkey -alias test -keyalg RSA -keysize 2048 -validity 36500 -keystore test.keystore 之后查看证书，使用命令
keytool -list -v -keystore 证书文件名.keystore
例如：
keytool -list -v -keystore test.keystore 显示的信息如下，重点注意证书指纹信息：SHA1，SHA256，之后要用到
注册登录开发者中心（dcloud） 注册登录开发者中心，网址：https://dev.dcloud.net.cn
创建项目 使用HBuilderX创建uniapp项目
项目创建好后可以在“开发者中心-我的应用”中查看到该应用和Appid
Android平台信息配置与离线打包key获取 点击应用名称进入管理页面
点击各平台信息
点击新增
平台选择Android App，版本选择正式版，输入包名（自定义即可），和证书指纹信息中的SHA1，SHA256值，然后点击提交
提交后点击创建离线打包key
创建好之后然后点击查看
打码部分就是我们需要的离线打包key，之后需要用到
App配置 配置需要支持的CPU类型，我这里全勾了，关于该配置的说明见官网：https://ask.dcloud.net.cn/article/36195
生成本地打包App资源 生成的资源所在路径如下：（我这里_UNI_F60B5A5就是生成的资源）">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-18T14:37:43+08:00">
    <meta property="article:modified_time" content="2024-01-18T14:37:43+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">uniapp安卓本地打包成apk</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="uniappapk_0"></a>uniapp安卓本地打包成apk</h2> 
<h3><a id="_1"></a>环境准备</h3> 
<p>1.HBuilderX最新版<br> 2.与HBuilderX版本对应版本的“Android 离线SDK - 正式版”， 下载见：<a href="https://nativesupport.dcloud.net.cn/AppDocs/download/android.html" rel="nofollow">https://nativesupport.dcloud.net.cn/AppDocs/download/android.html</a><br> 3.Android Studio，官方下载地址：<a href="https://developer.android.google.cn/studio?hl=zh-cn" rel="nofollow">https://developer.android.google.cn/studio?hl=zh-cn</a><br> 4.java1.8环境</p> 
<h3><a id="keystore_6"></a>证书（keystore）准备</h3> 
<p>输入生成证书的命令，格式为:<br> keytool -genkey -alias 证书别名 -keyalg RSA -keysize 2048 -validity 证书的有效期（单位为天） -keystore 证书文件名.keystore</p> 
<p>例如：</p> 
<pre><code class="prism language-cmd">keytool -genkey -alias test -keyalg RSA -keysize 2048 -validity 36500 -keystore test.keystore
</code></pre> 
<p>之后查看证书，使用命令<br> keytool -list -v -keystore 证书文件名.keystore</p> 
<p>例如：</p> 
<pre><code class="prism language-cmd">keytool -list -v -keystore test.keystore
</code></pre> 
<p>显示的信息如下，重点注意证书指纹信息：SHA1，SHA256，之后要用到<br> <img src="https://images2.imgbox.com/d8/4e/UTL2AoxF_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="dcloud_24"></a>注册登录开发者中心（dcloud）</h3> 
<p>注册登录开发者中心，网址：<a href="https://dev.dcloud.net.cn" rel="nofollow">https://dev.dcloud.net.cn</a></p> 
<h3><a id="_26"></a>创建项目</h3> 
<p>使用HBuilderX创建uniapp项目<br> <img src="https://images2.imgbox.com/56/00/OMZJL5Tm_o.png" alt="在这里插入图片描述"><br> 项目创建好后可以在“开发者中心-我的应用”中查看到该应用和Appid<br> <img src="https://images2.imgbox.com/e3/03/TAk5BnBu_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Androidkey_31"></a>Android平台信息配置与离线打包key获取</h3> 
<p>点击应用名称进入管理页面<br> 点击各平台信息<br> 点击新增<br> <img src="https://images2.imgbox.com/45/1f/aZt7USoO_o.png" alt="在这里插入图片描述"><br> 平台选择Android App，版本选择正式版，输入包名（自定义即可），和证书指纹信息中的SHA1，SHA256值，然后点击提交<br> <img src="https://images2.imgbox.com/c9/bb/lXRkGH9y_o.png" alt="在这里插入图片描述"><br> 提交后点击创建离线打包key<br> <img src="https://images2.imgbox.com/4d/33/wICdSyWz_o.png" alt="在这里插入图片描述"><br> 创建好之后然后点击查看<br> <img src="https://images2.imgbox.com/2b/d8/7vZFYMEJ_o.png" alt="在这里插入图片描述"><br> 打码部分就是我们需要的离线打包key，之后需要用到<br> <img src="https://images2.imgbox.com/a0/bf/DmCQofy5_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="App_44"></a>App配置</h3> 
<p>配置需要支持的CPU类型，我这里全勾了，关于该配置的说明见官网：<a href="https://ask.dcloud.net.cn/article/36195" rel="nofollow">https://ask.dcloud.net.cn/article/36195</a><br> <img src="https://images2.imgbox.com/0e/ef/lHSRYxxW_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="App_47"></a>生成本地打包App资源</h3> 
<p><img src="https://images2.imgbox.com/18/3b/CZu6RfKQ_o.png" alt="在这里插入图片描述"><br> 生成的资源所在路径如下：（我这里_UNI_F60B5A5就是生成的资源）<br> <img src="https://images2.imgbox.com/d0/f6/UjTLEFyz_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Android_Studioapk_51"></a>使用Android Studio将资源打包成apk</h3> 
<p>使用“Android Studio”打开“Android 离线SDK”中的“HBuilder-Integrate-AS”项目<br> <img src="https://images2.imgbox.com/b2/49/nXhLd5ls_o.png" alt="在这里插入图片描述"><br> 将HBuilder-Integrate-AS\simpleDemo\src\main\assets\apps_UNI_A删除，替换为HBuilderX生成的资源<br> <img src="https://images2.imgbox.com/ea/f8/U90UV388_o.png" alt="在这里插入图片描述"><br> 修改simpleDemo/src/main/AndroidManifest.xml中的包名为dcloud里配置的包名<br> <img src="https://images2.imgbox.com/91/43/ZqOwFx1i_o.png" alt="在这里插入图片描述"><br> 以及修改android:value的值为之前生成的“离线打包key”<br> <img src="https://images2.imgbox.com/5c/a5/hPyERE45_o.png" alt="在这里插入图片描述"></p> 
<p>修改simpleDemo/src/main/assets/data/dcloud_control.xml中的appid为你的appid（我这里是__UNI__F60B5A5）<br> <img src="https://images2.imgbox.com/7a/42/RBfYQnnu_o.png" alt="在这里插入图片描述"><br> 修改simpleDemo/build.gradle中的applicationId为包名，我这里是（UNI.F60B5A5）<br> <img src="https://images2.imgbox.com/64/ed/oUX2DEb7_o.png" alt="在这里插入图片描述"><br> 修改simpleDemo\src\main\res\values\strings.xml的app_name为你需要的app名称<br> <img src="https://images2.imgbox.com/60/3b/97fSIm0X_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="jdk_68"></a>配置构建使用的jdk版本</h2> 
<p>进入设置<br> <img src="https://images2.imgbox.com/28/f4/FgrCrOVQ_o.png" alt="在这里插入图片描述"><br> 进入Build/Build Tools/Gradle菜单<br> <img src="https://images2.imgbox.com/8c/9a/9jf39Cc9_o.png" alt="在这里插入图片描述"><br> 将默认使用的jdk改为本地的jdk1.8，之后点击OK<br> <img src="https://images2.imgbox.com/05/6c/tGp9mhEl_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_75"></a>打包</h3> 
<p><img src="https://images2.imgbox.com/07/c5/vWJTYZfa_o.png" alt="在这里插入图片描述"><br> 选中APK<br> <img src="https://images2.imgbox.com/4e/c3/Rh3D0EAg_o.png" alt="在这里插入图片描述"><br> 填写证书路径，别名，密码等信息<br> <img src="https://images2.imgbox.com/21/74/oM9txXDB_o.png" alt="在这里插入图片描述"><br> 点击Next，选中release，点击Create开始打包<br> <img src="https://images2.imgbox.com/77/ba/BM3Sluac_o.png" alt="在这里插入图片描述"><br> 打包成功之后生成的apk文件在simpleDemo/release路径下<br> <img src="https://images2.imgbox.com/02/dc/PGUhq7un_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_85"></a>参考</h3> 
<p>HBuilderX官方（App离线打包）：<a href="https://nativesupport.dcloud.net.cn/AppDocs/usesdk/android.html#versioncode" rel="nofollow"> https://nativesupport.dcloud.net.cn/AppDocs/usesdk/android.html#versioncode</a><br> segmentfault博客：<a href="https://segmentfault.com/a/1190000040092971" rel="nofollow">https://segmentfault.com/a/1190000040092971</a><br> CSDN博客：<a href="https://blog.csdn.net/PIOnly/article/details/125196697">https://blog.csdn.net/PIOnly/article/details/125196697</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6438961c0dc61a54164542ff85b8e17a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MoviePy：超强的 视频处理Python 库</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1bf2c39b746c1a89cb15404fe5812f32/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">（学习打卡2）重学Java设计模式之六大设计原则</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>