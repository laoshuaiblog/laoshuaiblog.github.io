<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenCV&#43;python实现摄像头简单手势识别--进度条控制亮度 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/01693d400bdc79ad8e3670822b3c30e4/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="OpenCV&#43;python实现摄像头简单手势识别--进度条控制亮度">
  <meta property="og:description" content="文章目录 前言一、整体框架二、使用步骤;1.引入库;2.第一步:打开摄像头;3.第二步:设置回调函数;4.第三步:肤色检测;5.第四步:进行高斯滤波;6.第五步:边缘轮廓检测；7.第六步:求出手势的凹凸点；8.第七步: 利用凹凸点个数判断当前手势; 成果展示完整代码 总结 前言 例如：随着人工智能的不断发展，计算机视觉这门技术也越来越重要，很多人都开启了学习计算机视觉，本文在Opencv基础上实现了摄像头简单手势识别–进度条控制亮度的基础内容,并没有使用深度学习技术,因此准确率并不高。
一、整体框架 ∙ \bullet ∙第一步： 开启摄像头，检测每帧图片；
∙ \bullet ∙第二步： 设置回调函数,操纵滑动条来调整亮度；
∙ \bullet ∙第三步： 肤色检测，基于HSV颜色空间H,S,V范围筛选法。在HSV中 7&amp;lt;H&amp;lt;20，28&amp;lt;S&amp;lt;256，50&amp;lt;V&amp;lt;256；
∙ \bullet ∙第四步： 进行高斯滤波；
∙ \bullet ∙第五步： 边缘轮廓检测；
∙ \bullet ∙第六步： 求出手势的凹凸点；
∙ \bullet ∙第七步： 利用凹凸点个数判断当前手势。例如：0个凹凸点就是拳头，4个凹点就是布。
二、使用步骤; 1.引入库; import cv2 import numpy as np import math 2.第一步:打开摄像头; 代码如下（示例）：
cap = cv2.VideoCapture(0) while (cap.isOpened()): ret, frame = cap.read() # 读取摄像头每帧图片 frame = cv2.flip(frame, 1) #镜像调整,将图像左右调换回来正常显示 3.第二步:设置回调函数; def callback(object): #注意这里createTrackbar会向其传入参数即滑动条地址（几乎用不到），所以必须写一个参数 pass cv2.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-09-23T21:58:34+08:00">
    <meta property="article:modified_time" content="2022-09-23T21:58:34+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenCV&#43;python实现摄像头简单手势识别--进度条控制亮度</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_3" rel="nofollow">前言</a></li><li><a href="#_9" rel="nofollow">一、整体框架</a></li><li><a href="#_27" rel="nofollow">二、使用步骤;</a></li><li><ul><li><ul><li><a href="#1_28" rel="nofollow">1.引入库;</a></li><li><a href="#2_36" rel="nofollow">2.第一步:打开摄像头;</a></li><li><a href="#3_44" rel="nofollow">3.第二步:设置回调函数;</a></li><li><a href="#4_51" rel="nofollow">4.第三步:肤色检测;</a></li><li><a href="#5_58" rel="nofollow">5.第四步:进行高斯滤波;</a></li><li><a href="#6_65" rel="nofollow">6.第五步:边缘轮廓检测；</a></li><li><a href="#7_80" rel="nofollow">7.第六步:求出手势的凹凸点；</a></li><li><a href="#8__86" rel="nofollow">8.第七步: 利用凹凸点个数判断当前手势;</a></li></ul> 
   </li><li><a href="#_111" rel="nofollow">成果展示</a></li><li><a href="#_119" rel="nofollow">完整代码</a></li></ul> 
  </li><li><a href="#_248" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_3"></a>前言</h2> 
<p>例如：随着人工智能的不断发展，计算机视觉这门技术也越来越重要，很多人都开启了学习计算机视觉，本文在Opencv基础上实现了摄像头简单手势识别–进度条控制亮度的基础内容,并没有使用深度学习技术,因此准确率并不高。</p> 
<hr> 
<h2><a id="_9"></a>一、整体框架</h2> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ∙ 
        
       
      
        \bullet 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4445em;"></span><span class="mord">∙</span></span></span></span></span>第一步： 开启摄像头，检测每帧图片；</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ∙ 
        
       
      
        \bullet 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4445em;"></span><span class="mord">∙</span></span></span></span></span>第二步： 设置回调函数,操纵滑动条来调整亮度；</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ∙ 
        
       
      
        \bullet 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4445em;"></span><span class="mord">∙</span></span></span></span></span>第三步： 肤色检测，基于HSV颜色空间H,S,V范围筛选法。在HSV中 7&lt;H&lt;20，28&lt;S&lt;256，50&lt;V&lt;256；</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ∙ 
        
       
      
        \bullet 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4445em;"></span><span class="mord">∙</span></span></span></span></span>第四步： 进行高斯滤波；</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ∙ 
        
       
      
        \bullet 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4445em;"></span><span class="mord">∙</span></span></span></span></span>第五步： 边缘轮廓检测；</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ∙ 
        
       
      
        \bullet 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4445em;"></span><span class="mord">∙</span></span></span></span></span>第六步： 求出手势的凹凸点；</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ∙ 
        
       
      
        \bullet 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4445em;"></span><span class="mord">∙</span></span></span></span></span>第七步： 利用凹凸点个数判断当前手势。例如：0个凹凸点就是拳头，4个凹点就是布。</p> 
<h2><a id="_27"></a>二、使用步骤;</h2> 
<h4><a id="1_28"></a>1.引入库;</h4> 
<pre><code class="prism language-c">import cv2
import numpy as np
import math
</code></pre> 
<h4><a id="2_36"></a>2.第一步:打开摄像头;</h4> 
<p>代码如下（示例）：</p> 
<pre><code class="prism language-python">cap <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>cap<span class="token punctuation">.</span>isOpened<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  
    ret<span class="token punctuation">,</span> frame <span class="token operator">=</span> cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 读取摄像头每帧图片</span>
    frame <span class="token operator">=</span> cv2<span class="token punctuation">.</span>flip<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">#镜像调整,将图像左右调换回来正常显示</span>
</code></pre> 
<h4><a id="3_44"></a>3.第二步:设置回调函数;</h4> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment">#注意这里createTrackbar会向其传入参数即滑动条地址（几乎用不到），所以必须写一个参数</span>
    <span class="token keyword">pass</span>
cv2<span class="token punctuation">.</span>createTrackbar<span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token string">"frame"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="4_51"></a>4.第三步:肤色检测;</h4> 
<pre><code class="prism language-python"><span class="token comment"># 基于hsv的肤色检测,通过HSV颜色空间来筛选所需要的像素</span>
hsv <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>roi<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2HSV<span class="token punctuation">)</span>
lower_skin <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>
upper_skin <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="5_58"></a>5.第四步:进行高斯滤波;</h4> 
<pre><code class="prism language-python"><span class="token comment"># 进行高斯滤波,降低噪声的影响</span>
mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>inRange<span class="token punctuation">(</span>hsv<span class="token punctuation">,</span> lower_skin<span class="token punctuation">,</span> upper_skin<span class="token punctuation">)</span>
mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>dilate<span class="token punctuation">(</span>mask<span class="token punctuation">,</span> kernel<span class="token punctuation">,</span> iterations<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>GaussianBlur<span class="token punctuation">(</span>mask<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="6_65"></a>6.第五步:边缘轮廓检测；</h4> 
<pre><code class="prism language-python"><span class="token comment"># 找出轮廓,确定手势范围</span>
contours<span class="token punctuation">,</span> h <span class="token operator">=</span> cv2<span class="token punctuation">.</span>findContours<span class="token punctuation">(</span>
    mask<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>RETR_TREE<span class="token punctuation">,</span>
    cv2<span class="token punctuation">.</span>CHAIN_APPROX_SIMPLE<span class="token punctuation">)</span>  <span class="token comment">#opencv中提供findContours()函数来寻找图像中物体的轮廓</span>
cnt <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>contours<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> cv2<span class="token punctuation">.</span>contourArea<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
epsilon <span class="token operator">=</span> <span class="token number">0.0005</span> <span class="token operator">*</span> cv2<span class="token punctuation">.</span>arcLength<span class="token punctuation">(</span>cnt<span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
approx <span class="token operator">=</span> cv2<span class="token punctuation">.</span>approxPolyDP<span class="token punctuation">(</span>cnt<span class="token punctuation">,</span> epsilon<span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
hull <span class="token operator">=</span> cv2<span class="token punctuation">.</span>convexHull<span class="token punctuation">(</span>cnt<span class="token punctuation">)</span>
areahull <span class="token operator">=</span> cv2<span class="token punctuation">.</span>contourArea<span class="token punctuation">(</span>hull<span class="token punctuation">)</span>
areacnt <span class="token operator">=</span> cv2<span class="token punctuation">.</span>contourArea<span class="token punctuation">(</span>cnt<span class="token punctuation">)</span>
arearatio <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>areahull <span class="token operator">-</span> areacnt<span class="token punctuation">)</span> <span class="token operator">/</span> areacnt<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span>
</code></pre> 
<h4><a id="7_80"></a>7.第六步:求出手势的凹凸点；</h4> 
<pre><code class="prism language-python"><span class="token comment"># 求出凹凸点</span>
hull <span class="token operator">=</span> cv2<span class="token punctuation">.</span>convexHull<span class="token punctuation">(</span>approx<span class="token punctuation">,</span> returnPoints<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>  <span class="token comment">#convexHull能很方便的用于求多边形凸包</span>
defects <span class="token operator">=</span> cv2<span class="token punctuation">.</span>convexityDefects<span class="token punctuation">(</span>approx<span class="token punctuation">,</span> hull<span class="token punctuation">)</span>  <span class="token comment">#使用convexityDefects计算轮廓凸缺陷</span>
</code></pre> 
<h4><a id="8__86"></a>8.第七步: 利用凹凸点个数判断当前手势;</h4> 
<pre><code class="prism language-python"><span class="token comment"># 定义凹凸点个数初始值为0</span>
l <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>defects<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    s<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> <span class="token operator">=</span> defects<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
    start <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span>approx<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    end <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span>approx<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    far <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span>approx<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    pt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    a <span class="token operator">=</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token punctuation">(</span>end<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> start<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> start<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>
    b <span class="token operator">=</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token punctuation">(</span>far<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> start<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>far<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> start<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>
    c <span class="token operator">=</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token punctuation">(</span>end<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> far<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> far<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>
    s <span class="token operator">=</span> <span class="token punctuation">(</span>a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
    ar <span class="token operator">=</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>s <span class="token operator">*</span> <span class="token punctuation">(</span>s <span class="token operator">-</span> a<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>s <span class="token operator">-</span> b<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>s <span class="token operator">-</span> c<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 手指间角度求取</span>
    angle <span class="token operator">=</span> math<span class="token punctuation">.</span>acos<span class="token punctuation">(</span><span class="token punctuation">(</span>b<span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> c<span class="token operator">**</span><span class="token number">2</span> <span class="token operator">-</span> a<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> b <span class="token operator">*</span> c<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">57</span>
    <span class="token keyword">if</span> angle <span class="token operator">&lt;=</span> <span class="token number">90</span> <span class="token keyword">and</span> d <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">:</span>
        l <span class="token operator">+=</span> <span class="token number">1</span>
        cv2<span class="token punctuation">.</span>circle<span class="token punctuation">(</span>roi<span class="token punctuation">,</span> far<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
    cv2<span class="token punctuation">.</span>line<span class="token punctuation">(</span>roi<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment"># 画出包络线</span>
l <span class="token operator">+=</span> <span class="token number">1</span>
font <span class="token operator">=</span> cv2<span class="token punctuation">.</span>FONT_HERSHEY_SIMPLEX
</code></pre> 
<h3><a id="_111"></a>成果展示</h3> 
<p>可通过滑动条来调整亮度,提高识别率。<br> <img src="https://images2.imgbox.com/21/4f/2lgQROWC_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b8/2a/TMoDK3sW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/79/77/ErqzrE2Z_o.png" alt="在这里插入图片描述"><br> 由于肤色检测的时候是用色调来提取特征,因此会被黄色调的影响,因此准确率并不算高,只能实现基本的功能,要想准确率高还得上深度学习算法。</p> 
<h3><a id="_119"></a>完整代码</h3> 
<pre><code class="prism language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token triple-quoted-string string">"""
Created on Thu Apr  7 18:42:02 2022

@author: He Zekai
"""</span>
<span class="token keyword">import</span> cv2
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> math

<span class="token keyword">def</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment">#注意这里createTrackbar会向其传入参数即滑动条地址（几乎用不到），所以必须写一个参数</span>
    <span class="token keyword">pass</span>

cap <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

cv2<span class="token punctuation">.</span>namedWindow<span class="token punctuation">(</span><span class="token string">'frame'</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>resizeWindow<span class="token punctuation">(</span><span class="token string">'frame'</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>createTrackbar<span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token string">"frame"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>

<span class="token keyword">while</span><span class="token punctuation">(</span>cap<span class="token punctuation">.</span>isOpened<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        
    ret<span class="token punctuation">,</span>image <span class="token operator">=</span> cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 读取摄像头每帧图片</span>
    
    image <span class="token operator">=</span> cv2<span class="token punctuation">.</span>flip<span class="token punctuation">(</span>image<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>

    cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>image<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># 用红线画出手势识别框</span>
    
    <span class="token comment">#滑动条控制颜色    </span>
    value <span class="token operator">=</span> cv2<span class="token punctuation">.</span>getTrackbarPos<span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token string">'frame'</span><span class="token punctuation">)</span>
    image_dst <span class="token operator">=</span> np<span class="token punctuation">.</span>uint8<span class="token punctuation">(</span>image<span class="token operator">/</span><span class="token number">100</span><span class="token operator">*</span>value<span class="token punctuation">)</span>


    roi <span class="token operator">=</span> image_dst<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">:</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">:</span><span class="token number">300</span><span class="token punctuation">]</span><span class="token comment"># 选取图片中固定位置作为手势输入</span>
    kernel <span class="token operator">=</span> np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>

    <span class="token comment"># 进行高斯滤波</span>
    lower_skin <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>
    upper_skin <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>
    
    mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>inRange<span class="token punctuation">(</span>roi<span class="token punctuation">,</span>lower_skin<span class="token punctuation">,</span>upper_skin<span class="token punctuation">)</span>
    mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>dilate<span class="token punctuation">(</span>mask<span class="token punctuation">,</span>kernel<span class="token punctuation">,</span>iterations<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
    mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>GaussianBlur<span class="token punctuation">(</span>mask<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 基于hsv的肤色检测</span>
    hsv <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>roi<span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>COLOR_BGR2HSV<span class="token punctuation">)</span>

    <span class="token comment"># 进行高斯滤波</span>
    mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>inRange<span class="token punctuation">(</span>hsv<span class="token punctuation">,</span>lower_skin<span class="token punctuation">,</span>upper_skin<span class="token punctuation">)</span>
    mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>dilate<span class="token punctuation">(</span>mask<span class="token punctuation">,</span>kernel<span class="token punctuation">,</span>iterations<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
    mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>GaussianBlur<span class="token punctuation">(</span>mask<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>

    <span class="token comment"># 找出轮廓</span>
    contours<span class="token punctuation">,</span>h <span class="token operator">=</span> cv2<span class="token punctuation">.</span>findContours<span class="token punctuation">(</span>mask<span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>RETR_TREE<span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>CHAIN_APPROX_SIMPLE<span class="token punctuation">)</span>
    cnt <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>contours<span class="token punctuation">,</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>cv2<span class="token punctuation">.</span>contourArea<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
    epsilon <span class="token operator">=</span> <span class="token number">0.0005</span><span class="token operator">*</span>cv2<span class="token punctuation">.</span>arcLength<span class="token punctuation">(</span>cnt<span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    approx <span class="token operator">=</span> cv2<span class="token punctuation">.</span>approxPolyDP<span class="token punctuation">(</span>cnt<span class="token punctuation">,</span><span class="token number">0.05</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    hull <span class="token operator">=</span> cv2<span class="token punctuation">.</span>convexHull<span class="token punctuation">(</span>cnt<span class="token punctuation">)</span>
    areahull <span class="token operator">=</span> cv2<span class="token punctuation">.</span>contourArea<span class="token punctuation">(</span>hull<span class="token punctuation">)</span>
    areacnt <span class="token operator">=</span> cv2<span class="token punctuation">.</span>contourArea<span class="token punctuation">(</span>cnt<span class="token punctuation">)</span>
    arearatio <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>areahull<span class="token operator">-</span>areacnt<span class="token punctuation">)</span><span class="token operator">/</span>areacnt<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span>

    <span class="token comment"># 求出凹凸点</span>
    hull <span class="token operator">=</span> cv2<span class="token punctuation">.</span>convexHull<span class="token punctuation">(</span>approx<span class="token punctuation">,</span>returnPoints<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    defects <span class="token operator">=</span> cv2<span class="token punctuation">.</span>convexityDefects<span class="token punctuation">(</span>approx<span class="token punctuation">,</span>hull<span class="token punctuation">)</span>

    <span class="token comment"># 定义凹凸点个数初始值为0</span>
    l<span class="token operator">=</span><span class="token number">0</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>defects<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            s<span class="token punctuation">,</span>e<span class="token punctuation">,</span>f<span class="token punctuation">,</span>d<span class="token punctuation">,</span> <span class="token operator">=</span> defects<span class="token punctuation">[</span>i<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>
            start <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span>approx<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            end <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span>approx<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            far <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span>approx<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            pt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>
        
            a <span class="token operator">=</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token punctuation">(</span>end<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span>start<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token operator">+</span><span class="token punctuation">(</span>end<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>start<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>
            b <span class="token operator">=</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token punctuation">(</span>far<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> start<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>far<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> start<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>
            c <span class="token operator">=</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token punctuation">(</span>end<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span>far<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token operator">+</span><span class="token punctuation">(</span>end<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>far<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>
            s <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">+</span>b<span class="token operator">+</span>c<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span>
            ar <span class="token operator">=</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>s<span class="token operator">*</span><span class="token punctuation">(</span>s<span class="token operator">-</span>a<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>s<span class="token operator">-</span>b<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>s<span class="token operator">-</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>
        
        	<span class="token comment"># 手指间角度求取</span>
            angle <span class="token operator">=</span> math<span class="token punctuation">.</span>acos<span class="token punctuation">(</span><span class="token punctuation">(</span>b<span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> c<span class="token operator">**</span><span class="token number">2</span> <span class="token operator">-</span>a<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>b<span class="token operator">*</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">57</span>
        
            <span class="token keyword">if</span> angle<span class="token operator">&lt;=</span><span class="token number">90</span> <span class="token keyword">and</span> d<span class="token operator">&gt;</span><span class="token number">20</span><span class="token punctuation">:</span>
                l<span class="token operator">+=</span><span class="token number">1</span>
                cv2<span class="token punctuation">.</span>circle<span class="token punctuation">(</span>roi<span class="token punctuation">,</span>far<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
            cv2<span class="token punctuation">.</span>line<span class="token punctuation">(</span>roi<span class="token punctuation">,</span>start<span class="token punctuation">,</span>end<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># 画出包络线</span>
        l<span class="token operator">+=</span><span class="token number">1</span>
        font <span class="token operator">=</span> cv2<span class="token punctuation">.</span>FONT_HERSHEY_SIMPLEX
        
        <span class="token comment"># 条件判断，知道手势后想实现的功能</span>
        <span class="token keyword">if</span> l<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> areacnt<span class="token operator">&lt;</span><span class="token number">2000</span><span class="token punctuation">:</span>
                cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>image_dst<span class="token punctuation">,</span><span class="token string">"Please put hand in the window"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>LINE_AA<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> arearatio<span class="token operator">&lt;</span><span class="token number">12</span><span class="token punctuation">:</span>
                    cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>image_dst<span class="token punctuation">,</span><span class="token string">'0'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>LINE_AA<span class="token punctuation">)</span>
                <span class="token keyword">elif</span> arearatio<span class="token operator">&lt;</span><span class="token number">17.5</span><span class="token punctuation">:</span>
                    cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>image_dst<span class="token punctuation">,</span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>LINE_AA<span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>image_dst<span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>LINE_AA<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> l<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">:</span>
            cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>image_dst<span class="token punctuation">,</span><span class="token string">'2'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>LINE_AA<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> l<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> arearatio<span class="token operator">&lt;</span><span class="token number">27</span><span class="token punctuation">:</span>
                cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>image_dst<span class="token punctuation">,</span><span class="token string">'3'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>LINE_AA<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>image_dst<span class="token punctuation">,</span><span class="token string">'3'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>LINE_AA<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> l<span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">:</span>
            cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>image_dst<span class="token punctuation">,</span><span class="token string">'4'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>LINE_AA<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> l<span class="token operator">==</span><span class="token number">5</span><span class="token punctuation">:</span>
            cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>image_dst<span class="token punctuation">,</span><span class="token string">'5'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>LINE_AA<span class="token punctuation">)</span>
        <span class="token comment"># cv2.imshow('frame',frame)</span>
        cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'mask'</span><span class="token punctuation">,</span> mask<span class="token punctuation">)</span>
        cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'frame'</span><span class="token punctuation">,</span> image_dst<span class="token punctuation">)</span>
        
        key <span class="token operator">=</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token operator">&amp;</span> <span class="token number">0xFF</span>
        <span class="token keyword">if</span> key <span class="token operator">==</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'q'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token comment"># 键盘q键退出</span>
            <span class="token keyword">break</span>
    <span class="token keyword">except</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>
cap<span class="token punctuation">.</span>release<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<hr> 
<h2><a id="_248"></a>总结</h2> 
<p>例如：本次基于摄像头的简单手势识别实验,让我对以往的知识掌握更加深刻。虽然现在手势识别都是通过深度学习中的CNN等实现的,但仅使用opencv的传统方法来实现这个功能对我来说还挺新颖的,让我对opencv更加充满了兴趣。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b6b91429c4ca398170b794e9a217bd41/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解析 JSON Schema 文档生成 Java 代码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5c1b4a08a340f9117dda63858a4f3eb3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Flask: flask &#43; tornado&#43; nginx组合</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>