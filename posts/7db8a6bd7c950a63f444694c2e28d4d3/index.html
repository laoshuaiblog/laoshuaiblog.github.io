<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>空调机状态机verilog - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/7db8a6bd7c950a63f444694c2e28d4d3/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="空调机状态机verilog">
  <meta property="og:description" content="该文章为汇总文章Verilog学习代码总结的状态机——空调机部分。
该状态机为moore型时序电路。
采用三段式设计方式。
题目要求 设计一个空调机的控制机。温度传感器控制两个输入端temp_high和temp_low, 如果室内温度较高，则temp_high为’1’， 同时temp_low为’0’; 如果室内温度较低，则temp_high为’0’， 同时temp_ low为’1’; 如果室内温度正常，则temp_high为’0’， 同时temp_low为’0’。 根据输入端temp_high和temp_ _low的值来判断当前的状态是: 1.too_hot (太热) ; 2. too_cold (太冷) ; 3.just_right (正好)，然后决定输出端heat和cool的值是’1’还是’0’,从而控制是制冷还是制热。
要求:
1.画出有限状态机,标明状态转换条件;
2.写出程序代码，标注说明和解释;
3.写出验证程序，对设计进行全面的验证。
状态转移图 源代码 module air(clk,rst,temp_high,temp_low,heat,cool); input clk,rst,temp_high,temp_low; output heat,cool; reg heat,cool; reg [1:0] cur_state,next_state; //定义三个状态 parameter TOO_HIGH = 2&#39;b10, JUST_RIGHT = 2&#39;b00, TOO_LOW = 2&#39;b01; //时序 设置当前状态为预设的下一状态或初始 always @(posedge clk or posedge rst) begin if(rst)begin //重设置零 cur_state &amp;lt;= JUST_RIGHT; next_state &amp;lt;= JUST_RIGHT; end else begin cur_state &amp;lt;= next_state; end end //根据当前状态决定输出 always @(cur_state) begin case (cur_state) TOO_HIGH: begin {heat,cool} = 2&#39;b01; end JUST_RIGHT: begin {heat,cool} = 2&#39;b00; end TOO_LOW: begin {heat,cool} = 2&#39;b10; end default: begin {heat,cool} = 2&#39;b00; end endcase end //根据输入决定下一预设状态 always @(cur_state or temp_high or temp_low) begin case (cur_state) TOO_HIGH: begin next_state = (temp_high == 1)?">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-05-15T15:18:28+08:00">
    <meta property="article:modified_time" content="2020-05-15T15:18:28+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">空调机状态机verilog</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>该文章为汇总文章<a href="https://blog.csdn.net/qq_44856695/article/details/106103964">Verilog学习代码总结</a>的状态机——空调机部分。</p> 
<blockquote> 
 <p>该状态机为moore型时序电路。<br> 采用三段式设计方式。</p> 
</blockquote> 
<h4><a id="_3"></a>题目要求</h4> 
<p>设计一个空调机的控制机。温度传感器控制两个输入端temp_high和temp_low, 如果室内温度较高，则temp_high为’1’， 同时temp_low为’0’; 如果室内温度较低，则temp_high为’0’， 同时temp_ low为’1’; 如果室内温度正常，则temp_high为’0’， 同时temp_low为’0’。 根据输入端temp_high和temp_ _low的值来判断当前的状态是: 1.too_hot (太热) ; 2. too_cold (太冷) ; 3.just_right (正好)，然后决定输出端heat和cool的值是’1’还是’0’,从而控制是制冷还是制热。</p> 
<p>要求:</p> 
<p>1.画出有限状态机,标明状态转换条件;</p> 
<p>2.写出程序代码，标注说明和解释;</p> 
<p>3.写出验证程序，对设计进行全面的验证。</p> 
<hr> 
<h4><a id="_16"></a>状态转移图</h4> 
<p><img src="https://images2.imgbox.com/35/b5/SJ4YvPTo_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_19"></a>源代码</h4> 
<pre><code class="prism language-verilog">module air(clk,rst,temp_high,temp_low,heat,cool);
  input clk,rst,temp_high,temp_low;
  output heat,cool;
  reg heat,cool;
  reg [1:0] cur_state,next_state;
  //定义三个状态
  parameter TOO_HIGH = 2'b10,
            JUST_RIGHT = 2'b00,
            TOO_LOW = 2'b01;

  //时序  设置当前状态为预设的下一状态或初始
  always @(posedge clk or posedge rst) begin
    if(rst)begin
      //重设置零
      cur_state &lt;= JUST_RIGHT;
      next_state &lt;= JUST_RIGHT;
    end else begin
      cur_state &lt;= next_state;
    end
  end

  //根据当前状态决定输出
  always @(cur_state) begin
    case (cur_state)
      TOO_HIGH: begin
        {heat,cool} = 2'b01;
      end 
      JUST_RIGHT: begin
        {heat,cool} = 2'b00;
      end 
      TOO_LOW: begin
        {heat,cool} = 2'b10;
      end 
      default: begin
        {heat,cool} = 2'b00;
      end 
    endcase
  end

  //根据输入决定下一预设状态
  always @(cur_state or temp_high or temp_low) begin
    case (cur_state)
      TOO_HIGH: begin
        next_state = (temp_high == 1)?TOO_HIGH:JUST_RIGHT;
      end
      JUST_RIGHT: begin
        if (temp_high == 1 &amp;&amp; temp_low == 0) begin
          next_state = TOO_HIGH;
        end else if (temp_high == 0 &amp;&amp; temp_low == 1) begin
          next_state = TOO_LOW;
        end else begin
          next_state = JUST_RIGHT;
        end
      end 
      TOO_LOW: begin
        next_state = (temp_low == 1)?TOO_LOW:JUST_RIGHT;
      end 
      default: begin
        next_state = JUST_RIGHT;
      end 
    endcase
  end
endmodule
</code></pre> 
<h4><a id="_87"></a>测试代码</h4> 
<pre><code class="prism language-verilog">`timescale 1ns/1ns
module tb_air;
reg clk,rst,temp_high,temp_low;
wire heat,cool;
parameter PERIOD = 10;
parameter CHANGE_PERIOD = 4*PERIOD;

//初始化各值
initial begin
    clk = 1'b0;
    rst = 1'b0;
    temp_high = 1'b0;
    temp_low = 1'b0;
end

//设定时钟周期
initial 
  forever #(PERIOD/2) clk = ~clk;

//重置模块
initial begin
  #PERIOD rst = 1;
  #PERIOD rst = 0;
end

initial begin
  //测试JUST_RIGHT状态下输入改变
  #CHANGE_PERIOD {temp_high,temp_low} = 2'b11;
  #CHANGE_PERIOD {temp_high,temp_low} = 2'b00;
  #CHANGE_PERIOD {temp_high,temp_low} = 2'b01;
  //转入TOO_LOW，测试TOO_LOW状态下输入改变
  #CHANGE_PERIOD {temp_high,temp_low} = 2'b01;
  #CHANGE_PERIOD {temp_high,temp_low} = 2'b11;
  #CHANGE_PERIOD {temp_high,temp_low} = 2'b10;
  //重新转入JUST_RIGHT
  #CHANGE_PERIOD {temp_high,temp_low} = 2'b10;
  //转入TOO_HIGH，测试TOO_HIGH状态下输入改变
  #CHANGE_PERIOD {temp_high,temp_low} = 2'b11;
  #CHANGE_PERIOD {temp_high,temp_low} = 2'b10;
  #CHANGE_PERIOD {temp_high,temp_low} = 2'b00;
  #CHANGE_PERIOD $finish;
end

//实例化模块
air i1(clk,rst,temp_high,temp_low,heat,cool);

endmodule //tb_air 
</code></pre> 
<h4><a id="_139"></a>模拟仿真</h4> 
<p><img src="https://images2.imgbox.com/2c/9b/s20CPkFe_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3395ce0a0039a9535d03df8193d308f9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">K_means算法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8933ec1e949243064d94bbec1a931650/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">高等数学复习笔记（五）-一元函数积分的计算</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>