<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[经验] I2C和SPI通信方式的讲解 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/9908121f0a21d5bed1843938dd79229c/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="[经验] I2C和SPI通信方式的讲解">
  <meta property="og:description" content="I2C和SPI是两种不同的通信协议。 一。 IIC 简介 它是由数据线 SDA 和时钟 SCL 构成的串行总线， 可发送和接收数据。在 CPU 与被控 IC 之间、IC 与 IC 之间进行双向传送，高速 IIC 总线一般可达 400kbps 以上。用I2C通信的芯片最常用的就是EEPROM芯片，如Atmel的AT24CXX系列，此外，还有一些其它功能的芯片。 (这是EEPROM芯片的接法) （对应的单片机引脚） I2C 总线在传送数据过程中共有三种类型信号， 它们分别是：开始信号、结束信号和应答信号。 开始信号：SCL 为高电平时，SDA 由高电平向低电平跳变，开始传送数据。 结束信号：SCL 为高电平时，SDA 由低电平向高电平跳变，结束传送数据。 应答信号： 接收数据的 IC 在接收到 8bit 数据后， 向发送数据的 IC 发出特定的低电平脉冲，表示已收到数据。CPU 向受控单元发出一个信号后，等待受控单元发出一个应答信号，CPU 接收到应答信号后，根据实际情况作出是否继续传递信号的判断。若未收到应答信号，由判断为受控单元出现故障。 二.SPI SPI通常有SCK时钟，STB片选，DATA数据信号三个信号。SPI总线真正实现了全双工数据传输，SPI 有3线跟4线两种，4线的话，就是多了一条叫SDC的线，用来告知从设备现在传输的是数据还是指令。这个接口较快，可以传输较连续的数据。SPI要想连接多个从设备，就需要给每个从设备配备一根片选信号。如果要可以实现全双工，也是需要多加一根数据线（MOSI MISO）。SPI通信芯片的引脚名称不一定都是这几个名称，可能还有会别的名称，但是意思是一样的，例如MOSI引脚的意思是“主机输出从机输入”，某个SPI接口的芯片就有可能会写成SDI，因为这个SPI器件是作为从机的，所以它的SDI的意思就是“从机数据输入引脚”。
SPI通信过程为：把CS引脚拉低，然后SCK输出时钟，然后就可以在MOSI引脚上输出数据，同时可以在MISO上获得数据了。
(这是一个SPI FLASH芯片，DO是MISO，DI是MOSI，CLK是SCK，功能一样，叫法不一样而已)
(单片机接法)
下面主要总结一下2种总线的异同点：
1 iic总线不是全双工，2根线SCL SDA。spi总线实现全双工，4根线SCK CS MOSI MISO
2 iic总线是多主机总线，通过SDA上的地址信息来锁定从设备。spi总线只有一个主设备，主设备通过CS片选来确定从设备
3 iic总线传输速度在100kbps-4Mbps。spi总线传输速度更快，可以达到30MHZ以上。
4 iic总线空闲状态下SDA SCL都是高电平。spi总线空闲状态MOSI MISO也都是 SCK是有CPOL决定的
5 iic总线scl高电平时sda下降沿标志传输开始，上升沿标志传输结束。spi总线cs拉低标志传输开始，cs拉高标志传输结束">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2017-09-05T09:21:36+08:00">
    <meta property="article:modified_time" content="2017-09-05T09:21:36+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[经验] I2C和SPI通信方式的讲解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <table cellspacing="0" cellpadding="0" style="word-wrap:break-word; empty-cells:show; border-collapse:collapse; table-layout:fixed; width:692px; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:12px; line-height:14.4px"><tbody style="word-wrap:break-word"><tr style="word-wrap:break-word"><td class="t_f" id="postmessage_5414354" style="word-wrap:break-word; font-size:14px"> <span style="word-wrap:break-word; font-weight:700"><span style="color:#FF0000; word-wrap:break-word"></span></span> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)">I2C和SPI是两种不同的<a target="_blank" href="http://bbs.elecfans.com/zhuti_wireless_1.html" rel="nofollow noopener noreferrer" class="relatedlink" style="word-wrap:break-word; color:rgb(66,152,186); text-decoration:none!important; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:blue">通信</a>协议。</span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)">一。 IIC  简介</span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)">它是由数据线 SDA 和时钟 SCL 构成的串行总线， 可发送和接收数据。在 CPU 与被控 IC 之间、IC 与 IC 之间进行双向传送，高速 IIC 总线一般可达 400kbps 以上。用I2C通信的<a target="_blank" href="http://www.hqchip.com/?u=999" rel="nofollow noopener noreferrer" class="relatedlink" style="word-wrap:break-word; color:rgb(66,152,186); text-decoration:none!important; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:blue">芯片</a>最常用的就是EEPROM芯片，如Atmel的AT24CXX系列，此外，还有一些其它功能的芯片。</span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)"><img id="aimg_433872" src="https://images2.imgbox.com/56/84/q1WHekCc_o.png" class="zoom" width="590" height="230" alt="" style="word-wrap:break-word; max-width:690px"></span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)">(这是EEPROM芯片的接法)</span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)"><img id="aimg_433873" src="https://images2.imgbox.com/d1/db/5h56AUY9_o.png" class="zoom" width="590" alt="" style="word-wrap:break-word; max-width:690px"></span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)">（对应的<a target="_blank" href="http://bbs.elecfans.com/zhuti_mcu_1.html" rel="nofollow noopener noreferrer" class="relatedlink" style="word-wrap:break-word; color:rgb(66,152,186); text-decoration:none!important; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:blue">单片机</a>引脚）</span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)"><img id="aimg_433874" src="https://images2.imgbox.com/c7/9f/RLZsWRqC_o.png" class="zoom" width="347" alt="" style="word-wrap:break-word; max-width:690px"></span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)">I2C 总线在传送数据过程中共有三种类型信号， 它们分别是：开始信号、结束信号和应答信号。</span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)">开始信号：SCL 为高电平时，SDA 由高电平向低电平跳变，开始传送数据。</span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)">结束信号：SCL 为高电平时，SDA 由低电平向高电平跳变，结束传送数据。</span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)">应答信号： 接收数据的 IC 在接收到 8bit 数据后， 向发送数据的 IC 发出特定的低电平脉冲，表示已收到数据。CPU 向受控单元发出一个信号后，等待受控单元发出一个应答信号，CPU 接收到应答信号后，根据实际情况作出是否继续传递信号的判断。若未收到应答信号，由判断为受控单元出现故障。</span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)">   </span> 
    </div> 
    <div align="left" style="word-wrap:break-word"> 
     <span style="word-wrap:break-word; color:rgb(0,0,0)">二.SPI</span> 
    </div> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:30px; text-indent:2em"> <span style="font-family:Verdana,Geneva,sans-serif,宋体; word-wrap:break-word">SPI通常有SCK时钟，STB片选，DATA数据信号三个信号。SPI总线真正实现了全双工数据传输，SPI 有3线跟4线两种，4线的话，就是多了一条叫SDC的线，用来告知从设备现在传输的是数据还是指令。这个接口较快，可以传输较连续的数据。SPI要想连接多个从设备，就需要给每个从设备配备一根片选信号。如果要可以实现全双工，也是需要多加一根数据线（MOSI MISO）。SPI通信芯片的引脚名称不一定都是这几个名称，可能还有会别的名称，但是意思是一样的，例如MOSI引脚的意思是“主机输出从机输入”，某个SPI接口的芯片就有可能会写成SDI，因为这个SPI器件是作为从机的，所以它的SDI的意思就是“从机数据输入引脚”。</span></p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:30px; text-indent:2em"> <span style="font-family:Verdana,Geneva,sans-serif,宋体; word-wrap:break-word">SPI通信过程为：把CS引脚拉低，然后SCK输出时钟，然后就可以在MOSI引脚上输出数据，同时可以在MISO上获得数据了。</span></p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:30px; text-indent:2em"> <span style="font-family:Verdana,Geneva,sans-serif,宋体; word-wrap:break-word"><img id="aimg_433875" src="https://images2.imgbox.com/f9/48/Y2z1liad_o.png" class="zoom" width="590" alt="" style="word-wrap:break-word; max-width:690px"></span></p> <span style="font-family:Verdana,Geneva,sans-serif,宋体; word-wrap:break-word"></span> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px"> </p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:30px; text-indent:2em"> <span style="font-family:Verdana,Geneva,sans-serif,宋体; word-wrap:break-word">(这是一个SPI FLASH芯片，DO是MISO，DI是MOSI，CLK是SCK，功能一样，叫法不一样而已)</span></p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:30px; text-indent:2em"> <span style="font-family:Verdana,Geneva,sans-serif,宋体; word-wrap:break-word"><img id="aimg_433876" src="https://images2.imgbox.com/70/23/qUFHW9Br_o.png" class="zoom" width="590" alt="" style="word-wrap:break-word; max-width:690px"></span></p> <span style="font-family:Verdana,Geneva,sans-serif,宋体; word-wrap:break-word"></span> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px"> </p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:30px; text-indent:2em"> <span style="font-family:Verdana,Geneva,sans-serif,宋体; word-wrap:break-word">(单片机接法)</span></p> <br style="word-wrap:break-word"> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:35px"> <span style="word-wrap:break-word; color:rgb(85,85,85)">下面主要总结一下2种总线的异同点：</span></p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:35px"> <span style="word-wrap:break-word; color:rgb(85,85,85)">1 iic总线不是全双工，2根线SCL SDA。spi总线实现全双工，4根线SCK CS MOSI MISO</span></p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:35px"> <span style="word-wrap:break-word; color:rgb(85,85,85)">2 iic总线是多主机总线，通过SDA上的地址信息来锁定从设备。spi总线只有一个主设备，主设备通过CS片选来确定从设备</span></p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:35px"> <span style="word-wrap:break-word; color:rgb(85,85,85)">3 iic总线传输速度在100kbps-4Mbps。spi总线传输速度更快，可以达到30MHZ以上。</span></p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:35px"> <span style="word-wrap:break-word; color:rgb(85,85,85)">4 iic总线空闲状态下SDA SCL都是高电平。spi总线空闲状态MOSI MISO也都是 SCK是有CPOL决定的</span></p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:35px"> <span style="word-wrap:break-word; color:rgb(85,85,85)">5 iic总线scl高电平时sda下降沿标志传输开始，上升沿标志传输结束。spi总线cs拉低标志传输开始，cs拉高标志传输结束</span></p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:35px"> <span style="word-wrap:break-word; color:rgb(85,85,85)">6 iic总线是SCL高电平采样。spi总线因为是全双工，因此是沿采样，具体要根据CPHA决定。一般情况下master device是SCK的上升沿发送，下降沿采集</span></p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:35px"> <span style="word-wrap:break-word; color:rgb(85,85,85)">7 iic总线和spi总线数据传输都是MSB在前，LSB在后（串口是LSB在前）</span></p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:35px"> <span style="word-wrap:break-word; color:rgb(85,85,85)">8 iic总线和spi总线时钟都是由主设备产生，并且只在数据传输时发出时钟</span></p> <p style="word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:35px"> <span style="word-wrap:break-word; color:rgb(85,85,85)">9 iic总线读写时序比较固定统一，设备驱动编写方便。spi总线不同从设备读写时序差别比较大，因此必须根据具体的设备datasheet来实现读写，相对复杂一些。</span></p> <br style="word-wrap:break-word"> 如果您觉得对您有帮助请关注我的公众号“老赵a科技”我们一起学习</td></tr></tbody></table>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4a7c350798150dd95b04de942b347c2a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python3.6爬取网站图片</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c2242a9178cfd459e6de46bdfea3fa9a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【python Excel】如何使用python将大量数据导出到Excel中的小技巧之一</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>