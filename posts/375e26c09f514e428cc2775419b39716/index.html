<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【FFmpeg】ffmpeg 命令行参数 ⑥ ( 使用 FFmpeg 提取 YUV 像素格式数据 | 使用 FFmpeg 提取 RGB 像素格式数据 | RGB 与 YUV 之间的格式转换 ) - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/375e26c09f514e428cc2775419b39716/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="【FFmpeg】ffmpeg 命令行参数 ⑥ ( 使用 FFmpeg 提取 YUV 像素格式数据 | 使用 FFmpeg 提取 RGB 像素格式数据 | RGB 与 YUV 之间的格式转换 )">
  <meta property="og:description" content="文章目录 一、使用 FFmpeg 提取 YUV 像素格式数据1、YUV 像素格式2、提取 YUV 数据3、提取 YUV 数据 - 设定提取长度和画面大小4、使用 ffplay 播放 YUV 视频 二、使用 FFmpeg 提取 RGB 像素格式数据1、提取 RGB 像素格式2、提取 RGB 像素格式 - 设定提取长度和画面大小3、使用 ffplay 播放 RGB 视频 三、RGB 与 YUV 之间的格式转换1、设置分辨率与像素格式2、设置分辨率与像素格式 - 同时设置输入 / 输出文件的参数3、设置分辨率与像素格式 - 只设置输入文件的参数 一、使用 FFmpeg 提取 YUV 像素格式数据 1、YUV 像素格式 FFmpeg 是一个非常强大的多媒体处理工具 , 可以用来 处理 / 转换 / 播放 各种音视频格式的数据 , 因此 使用 FFmpeg 自然也可以提取 YUV 像素格式的数据 ;
在学习 FFmpeg 时 , 经常需要使用 YUV 像素格式 的 视频数据 来测试 编解码器 , 网上一般很少有 像素格式 的视频 , 因为占据的空间巨大 , 此时就需要 使用 FFmpeg 工具自己提取像素格式的视频数据 ;">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-27T23:48:35+08:00">
    <meta property="article:modified_time" content="2024-03-27T23:48:35+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【FFmpeg】ffmpeg 命令行参数 ⑥ ( 使用 FFmpeg 提取 YUV 像素格式数据 | 使用 FFmpeg 提取 RGB 像素格式数据 | RGB 与 YUV 之间的格式转换 )</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_FFmpeg__YUV__8" rel="nofollow">一、使用 FFmpeg 提取 YUV 像素格式数据</a></li><li><ul><li><a href="#1YUV__16" rel="nofollow">1、YUV 像素格式</a></li><li><a href="#2_YUV__27" rel="nofollow">2、提取 YUV 数据</a></li><li><a href="#3_YUV____55" rel="nofollow">3、提取 YUV 数据 - 设定提取长度和画面大小</a></li><li><a href="#4_ffplay__YUV__76" rel="nofollow">4、使用 ffplay 播放 YUV 视频</a></li></ul> 
  </li><li><a href="#_FFmpeg__RGB__105" rel="nofollow">二、使用 FFmpeg 提取 RGB 像素格式数据</a></li><li><ul><li><a href="#1_RGB__113" rel="nofollow">1、提取 RGB 像素格式</a></li><li><a href="#2_RGB____134" rel="nofollow">2、提取 RGB 像素格式 - 设定提取长度和画面大小</a></li><li><a href="#3_ffplay__RGB__155" rel="nofollow">3、使用 ffplay 播放 RGB 视频</a></li></ul> 
  </li><li><a href="#RGB__YUV__186" rel="nofollow">三、RGB 与 YUV 之间的格式转换</a></li><li><ul><li><a href="#1_194" rel="nofollow">1、设置分辨率与像素格式</a></li><li><a href="#2_____209" rel="nofollow">2、设置分辨率与像素格式 - 同时设置输入 / 输出文件的参数</a></li><li><a href="#3___244" rel="nofollow">3、设置分辨率与像素格式 - 只设置输入文件的参数</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<br> 
<br> 
<br> 
<br> 
<h2><a id="_FFmpeg__YUV__8"></a>一、使用 FFmpeg 提取 YUV 像素格式数据</h2> 
<hr> 
<br> 
<br> 
<h3><a id="1YUV__16"></a>1、YUV 像素格式</h3> 
<br> 
<p>FFmpeg 是一个非常强大的多媒体处理工具 , 可以用来 <font color="blue">处理 / 转换 / 播放 各种音视频格式的数据</font> , 因此 使用 FFmpeg 自然也可以提取 YUV 像素格式的数据 ;</p> 
<p>在学习 FFmpeg 时 , 经常需要使用 YUV 像素格式 的 视频数据 来测试 编解码器 , 网上一般很少有 像素格式 的视频 , 因为占据的空间巨大 , 此时就需要 <font color="red">使用 FFmpeg 工具自己提取像素格式的视频数据 ;</font></p> 
<br> 
<h3><a id="2_YUV__27"></a>2、提取 YUV 数据</h3> 
<br> 
<p>执行下面的命令 , 可以 使用 ffmpeg 工具 从 input.mp4 视频文件 中提取 YUV420P 格式的数据 到 output_yuv420p.yuv 输出文件 中 ;</p> 
<pre><code class="prism language-cpp">ffmpeg <span class="token operator">-</span>i input<span class="token punctuation">.</span>mp4 <span class="token operator">-</span>pix_fmt yuv420p <span class="token operator">-</span>f rawvideo output_yuv420p<span class="token punctuation">.</span>yuv
</code></pre> 
<ul><li><code>-i input.mp4</code> 设置 要提取数据的 输入视频文件 ;</li><li><code>-pix_fmt yuv420p</code> 设置 提取后的输出文件 的 数据格式为 YUV420P 像素格式 ;</li><li><code>-f rawvideo</code> 设置 输出的数据格式 为 原始视频数据 ;</li><li><code>output_yuv420p.yuv</code> 设置 输出文件的 文件名称 ;</li></ul> 
<p>执行过程如下 :</p> 
<p><img src="https://images2.imgbox.com/e0/2c/4G678BEj_o.png" alt="在这里插入图片描述"></p> 
<p>输入 MP4 格式 视频文件 是 H.264 编码格式 , 1 分钟的视频大概有 13MB ;</p> 
<p>输出 YUV 格式 视频文件 是 YUV 像素格式 , 1 分钟视频大概有 837MB , 像素格式的视频数据占据的空间是 H264 压缩格式的 80 倍 ;</p> 
<p><img src="https://images2.imgbox.com/1a/cc/POgcPcng_o.png" alt="在这里插入图片描述"></p> 
<br> 
<h3><a id="3_YUV____55"></a>3、提取 YUV 数据 - 设定提取长度和画面大小</h3> 
<br> 
<p>可以通过 <code>-t</code> 参数 , 设置提取前 3 秒的视频数据 ,</p> 
<p>通过 <code>-s</code> 参数 , 设置 提取 320x240 大小的视频画面 数据 ,</p> 
<p>执行</p> 
<pre><code class="prism language-cpp">ffmpeg <span class="token operator">-</span>i input<span class="token punctuation">.</span>mp4 <span class="token operator">-</span>t <span class="token number">3</span> <span class="token operator">-</span>s <span class="token number">320</span>x240 <span class="token operator">-</span>pix_fmt yuv420p <span class="token operator">-</span>f rawvideo output_yuv420p<span class="token punctuation">.</span>yuv
</code></pre> 
<p>可以看到 , 提取的 3 秒钟 的 YUV 格式 320x240 格式 的视频数据 有 10MB 左右 ;</p> 
<p><img src="https://images2.imgbox.com/7d/40/rq77msn9_o.png" alt="在这里插入图片描述"></p> 
<br> 
<h3><a id="4_ffplay__YUV__76"></a>4、使用 ffplay 播放 YUV 视频</h3> 
<br> 
<p>播放一个 YUV 像素格式的视频 , 必须知道该视频的</p> 
<ul><li><strong>尺寸 :</strong> 通过 <code>-video_size</code> 参数设置 ;</li><li><strong>帧率 :</strong> 通过 <code>-framerate</code> 参数设置 ;</li><li><strong>具体像素格式 :</strong> 通过 <code>-pixel_format</code> 参数设置 ;</li></ul> 
<p>执行</p> 
<pre><code class="prism language-cpp">ffplay <span class="token operator">-</span>pixel_format yuv420p <span class="token operator">-</span>video_size <span class="token number">320</span>x240 <span class="token operator">-</span>framerate <span class="token number">5</span> <span class="token operator">-</span>i output_yuv420p<span class="token punctuation">.</span>yuv
</code></pre> 
<p>命令 , 可以播放 上述导出的 320x240 大小的 yuv420p 格式的 视频文件 ;</p> 
<p><img src="https://images2.imgbox.com/fe/07/vMbP0TMS_o.png" alt="在这里插入图片描述"></p> 
<p>参考 <a href="https://hanshuliang.blog.csdn.net/article/details/135912128" rel="nofollow">【FFmpeg】ffplay 命令行参数 ① ( 设置播放分辨率 | 禁用 音频 / 视频 / 字幕 选项 )</a> 博客 , 播放进行 ffplay 播放设置 ;</p> 
<br> 
<br> 
<br> 
<br> 
<h2><a id="_FFmpeg__RGB__105"></a>二、使用 FFmpeg 提取 RGB 像素格式数据</h2> 
<hr> 
<br> 
<br> 
<h3><a id="1_RGB__113"></a>1、提取 RGB 像素格式</h3> 
<br> 
<p>执行</p> 
<pre><code class="prism language-cpp">ffmpeg <span class="token operator">-</span>i input<span class="token punctuation">.</span>mp4 <span class="token operator">-</span>pix_fmt rgb24 output_rgb24<span class="token punctuation">.</span>rgb
</code></pre> 
<p>命令 , 可以从 输入文件 input.mp4 中 提取出 rgb24 格式的 像素文件 , 提取出来的文件有 1.63GB , 这是未经压缩的视频画面文件 ;</p> 
<p>上述命令的核心是 <code>-pix_fmt rgb24 </code> 设置 提取后的输出文件 的 数据格式为 rgb24 像素格式 ;</p> 
<p><img src="https://images2.imgbox.com/9a/61/ZrmoRHyz_o.png" alt="在这里插入图片描述"></p> 
<br> 
<h3><a id="2_RGB____134"></a>2、提取 RGB 像素格式 - 设定提取长度和画面大小</h3> 
<br> 
<p>提取 RGB 像素格式 文件 ,</p> 
<p>也可以通过 <code>-t</code> 参数 , 设置提数据的时间长度 , 通过 <code>-s</code> 参数 , 设置 数据的 视频画面 大小 ,</p> 
<p>执行</p> 
<pre><code class="prism language-cpp">ffmpeg <span class="token operator">-</span>i input<span class="token punctuation">.</span>mp4 <span class="token operator">-</span>t <span class="token number">3</span> <span class="token operator">-</span>s <span class="token number">320</span>x240 <span class="token operator">-</span>pix_fmt rgb24 output_rgb24<span class="token punctuation">.</span>rgb
</code></pre> 
<p>可以看到 , 提取的 3 秒钟 的 rgb24 格式 320x240 格式 的视频数据 有 20MB 左右 ;</p> 
<p><img src="https://images2.imgbox.com/f1/f5/Vyno3Ajx_o.png" alt="在这里插入图片描述"></p> 
<br> 
<h3><a id="3_ffplay__RGB__155"></a>3、使用 ffplay 播放 RGB 视频</h3> 
<br> 
<p>播放一个 RGB 像素格式的视频 , 必须知道该视频的</p> 
<ul><li><strong>尺寸 :</strong> 通过 <code>-video_size</code> 参数设置 ;</li><li><strong>帧率 :</strong> 通过 <code>-framerate</code> 参数设置 ;</li><li><strong>具体像素格式 :</strong> 通过 <code>-pixel_format</code> 参数设置 ;</li></ul> 
<p>执行</p> 
<pre><code class="prism language-cpp">ffplay <span class="token operator">-</span>pixel_format rgb24 <span class="token operator">-</span>video_size <span class="token number">320</span>x240 <span class="token operator">-</span>framerate <span class="token number">5</span> <span class="token operator">-</span>i output_rgb24<span class="token punctuation">.</span>rgb
</code></pre> 
<p>命令 , 可以播放 上述导出的 320x240 大小的 rgb24 格式的 视频文件 ;</p> 
<p><img src="https://images2.imgbox.com/94/45/3kciWChM_o.png" alt="在这里插入图片描述"></p> 
<p>参考 <a href="https://hanshuliang.blog.csdn.net/article/details/135912128" rel="nofollow">【FFmpeg】ffplay 命令行参数 ① ( 设置播放分辨率 | 禁用 音频 / 视频 / 字幕 选项 )</a> 博客 , 播放进行 ffplay 播放设置 ;</p> 
<br> 
<br> 
<br> 
<br> 
<h2><a id="RGB__YUV__186"></a>三、RGB 与 YUV 之间的格式转换</h2> 
<hr> 
<br> 
<br> 
<h3><a id="1_194"></a>1、设置分辨率与像素格式</h3> 
<br> 
<p>将 RGB 格式的视频 转为 YUV 格式的视频 时 , 可以分别为 输入视频 和 输出视频 都设置</p> 
<ul><li>画面分辨率</li><li>具体的像素格式</li></ul> 
<p>输出视频 的 分辨率 和 像素格式 可以 不进行设置 , 默认与 输入视频 的 参数相同 ;</p> 
<p>输入视频 必须设置 分辨率 和 像素格式 , 否则无法进行 像素格式的转换 ;</p> 
<br> 
<h3><a id="2_____209"></a>2、设置分辨率与像素格式 - 同时设置输入 / 输出文件的参数</h3> 
<br> 
<p>执行</p> 
<pre><code class="prism language-cpp">ffmpeg <span class="token operator">-</span>pix_fmt rgb24 <span class="token operator">-</span>s <span class="token number">320</span>x240 <span class="token operator">-</span>i output_rgb24<span class="token punctuation">.</span>rgb <span class="token operator">-</span>pix_fmt yuv420p <span class="token operator">-</span>s <span class="token number">640</span>x480 output_yuv420p<span class="token punctuation">.</span>yuv
</code></pre> 
<p>命令 , 将 320x240 画面大小的 rgb24 格式的视频文件 , 转为 640x480 画面大小的 yuv 格式的视频文件 ,</p> 
<p><code>-pix_fmt rgb24 -s 320x240</code> 是 输入文件 的 像素格式 和 画面大小 ,</p> 
<p><code>-pix_fmt yuv420p -s 640x480</code> 是 输出文件 的 像素格式 和 画面大小 ;</p> 
<p><img src="https://images2.imgbox.com/36/4d/JGNIf5My_o.png" alt="在这里插入图片描述"></p> 
<p>执行</p> 
<pre><code class="prism language-cpp">ffplay <span class="token operator">-</span>pixel_format yuv420p <span class="token operator">-</span>video_size <span class="token number">640</span>x480 <span class="token operator">-</span>framerate <span class="token number">5</span> <span class="token operator">-</span>i output_yuv420p<span class="token punctuation">.</span>yuv
</code></pre> 
<p>命令 , 可以播放 上述导出的 640x480 大小的 yuv420p 格式的 视频文件 ;</p> 
<p><img src="https://images2.imgbox.com/64/ea/GIZ1yLH1_o.png" alt="在这里插入图片描述"></p> 
<br> 
<h3><a id="3___244"></a>3、设置分辨率与像素格式 - 只设置输入文件的参数</h3> 
<br> 
<p>执行</p> 
<pre><code class="prism language-cpp">ffmpeg <span class="token operator">-</span>pix_fmt rgb24 <span class="token operator">-</span>s <span class="token number">320</span>x240 <span class="token operator">-</span>i output_rgb24<span class="token punctuation">.</span>rgb <span class="token operator">-</span>pix_fmt yuv420p output_yuv420p<span class="token punctuation">.</span>yuv
</code></pre> 
<p>命令 , 将 320x240 画面大小的 rgb24 格式的视频文件 , 转为 yuv 格式的视频文件 , 没有设置 输出文件的 视频画面大小 ;</p> 
<p>此时 输出文件 默认情况 下 , 使用 输入文件 的 画面大小 320x240 像素 ;</p> 
<p>执行完 , 可查看转换后的文件 ;</p> 
<p><img src="https://images2.imgbox.com/44/51/UxZhn0c0_o.png" alt="在这里插入图片描述"></p> 
<p>执行</p> 
<pre><code class="prism language-cpp">ffplay <span class="token operator">-</span>pixel_format yuv420p <span class="token operator">-</span>video_size <span class="token number">320</span>x240 <span class="token operator">-</span>framerate <span class="token number">5</span> <span class="token operator">-</span>i output_yuv420p<span class="token punctuation">.</span>yuv
</code></pre> 
<p>命令 , 可以播放 上述 yuv420p 格式的 视频文件 , 使用 320x240 像素大小播放正确 , 说明输出文件就是使用了 输入文件 的 参数 ;</p> 
<p><img src="https://images2.imgbox.com/4a/3d/BYdSXqbY_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1b432c7f08b0d62a54960af42c7f2da2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Vue时间组件：Dayjs与Moment对比</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/328a4b08a8e8dbf59d836e748b881ecc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">快速上手Spring Cloud三：API网关深入探索与实战应用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>