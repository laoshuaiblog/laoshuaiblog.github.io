<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue生命周期的理解 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/d390e8b3ed53b556e4714a5f008a754f/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="vue生命周期的理解">
  <meta property="og:description" content="一.Vue生命周期简介 官网：https://cn.vuejs.org/v2/api/#beforeCreate Vue实例从创建到销毁的过程，就是生命周期。详细来说也就是从开始创建、初始化数据、编译模板、挂载Dom、渲染→更新→渲染、卸载等一系列过程。 首先我们来看一下官网的生命周期图（我自己做了一点点注释）： Vue提供给我们的钩子为上图的红色的文字
二.钩子详解 1.beforeCreate 在实例初始化之后，数据观测(data observer) 和 event/watcher 事件配置之前被调用。
&amp;lt;!DOCTYPE html&amp;gt; &amp;lt;html lang=&#34;en&#34;&amp;gt; &amp;lt;head&amp;gt; &amp;lt;meta charset=&#34;UTF-8&#34;&amp;gt; &amp;lt;title&amp;gt;Document&amp;lt;/title&amp;gt; &amp;lt;!-- 引入vue.js --&amp;gt; &amp;lt;script type=&#34;text/javascript&#34; src=&#39;./vue.js&#39;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;/head&amp;gt; &amp;lt;body&amp;gt; &amp;lt;div id=&#34;app&#34;&amp;gt; &amp;lt;input type=&#34;text&#34; name=&#34;&#34; v-model=&#34;message&#34;&amp;gt; {{message}} &amp;lt;/div&amp;gt; &amp;lt;script type=&#34;text/javascript&#34;&amp;gt; //实例化Vue var app = new Vue({ el:&#39;#app&#39;, data:{ message:&#39;this is mseeage&#39; }, //时刻监测数据message的变化,一但那变化就会吊该函数 watch:{ //message必须和监测的data名字一样 message:function(){ console.log(&#39;watch:&#39;,&#39;message 变了&#39;) } }, methods:{ init:function(){ console.log(&#39;这是初始化方法&#39;) } }, //我们在beforeCreate钩子中调用Vue的data和method beforeCreate:function(){ console.log(&#34;beforeCreate&#34;,this.message); this.init(); } }) &amp;lt;/script&amp;gt; &amp;lt;/body&amp;gt; &amp;lt;/html&amp;gt; 我们在上面的例子中在的beforeCreate钩子中调用Vue的data和method，来看一下结果： 可以看到Vue中的data和方法都是去不到的，并且是在wath之前执行">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2017-10-26T21:22:41+08:00">
    <meta property="article:modified_time" content="2017-10-26T21:22:41+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue生命周期的理解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2 id="一vue生命周期简介">一.Vue生命周期简介</h2> 
<p>官网：<a href="https://cn.vuejs.org/v2/api/#beforeCreate" rel="nofollow">https://cn.vuejs.org/v2/api/#beforeCreate</a> <br> Vue实例从创建到销毁的过程，就是生命周期。详细来说也就是从开始创建、初始化数据、编译模板、挂载Dom、渲染→更新→渲染、卸载等一系列过程。 <br> 首先我们来看一下官网的生命周期图（我自己做了一点点注释）： <br> <img src="https://images2.imgbox.com/c4/20/iE94rMk4_o.png" alt="这里写图片描述" title=""> <br> Vue提供给我们的钩子为上图的红色的文字</p> 
<h2 id="二钩子详解">二.钩子详解</h2> 
<h3 id="1beforecreate">1.beforeCreate</h3> 
<p>在实例初始化之后，数据观测(data observer) 和 event/watcher 事件配置之前被调用。</p> 
<pre class="prettyprint"><code class=" hljs handlebars"><span class="xml"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span> <span class="hljs-attribute">lang</span>=<span class="hljs-value">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 引入vue.js --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">'./vue.js'</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"app"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">v-model</span>=<span class="hljs-value">"message"</span>&gt;</span>
        </span><span class="hljs-expression">{<!-- -->{<!-- --><span class="hljs-variable">message</span>}}</span><span class="xml"> 
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">//实例化Vue</span>
        <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> Vue({
            el:<span class="hljs-string">'#app'</span>,
            data:{
                message:<span class="hljs-string">'this is mseeage'</span>
            },
            <span class="hljs-comment">//时刻监测数据message的变化,一但那变化就会吊该函数</span>
            watch:{
                <span class="hljs-comment">//message必须和监测的data名字一样</span>
                message:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{<!-- --></span>
                    console.log(<span class="hljs-string">'watch:'</span>,<span class="hljs-string">'message 变了'</span>)
                }
            },
            methods:{
                init:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{<!-- --></span>
                    console.log(<span class="hljs-string">'这是初始化方法'</span>)
                }
            },
            <span class="hljs-comment">//我们在beforeCreate钩子中调用Vue的data和method</span>
            beforeCreate:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{<!-- --></span>
                console.log(<span class="hljs-string">"beforeCreate"</span>,<span class="hljs-keyword">this</span>.message);
                <span class="hljs-keyword">this</span>.init();
            }
        })
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>   
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></span></code></pre> 
<p>我们在上面的例子中在的beforeCreate钩子中调用Vue的data和method，来看一下<strong>结果</strong>： <br> <img src="https://images2.imgbox.com/5f/58/cTHX57nz_o.png" alt="这里写图片描述" title=""> <br> 可以看到Vue中的data和方法都是去不到的，并且是在wath之前执行</p> 
<h3 id="2created">2.created</h3> 
<p>实例已经创建完成之后被调用。在这一步，实例已完成以下的配置：数据观测(data observer)，属性和方法的运算， watch/event 事件回调。然而，挂载阶段还没开始，$el 属性目前不可见。 <br> <strong>主要应用：</strong>调用数据，调用方法，调用异步函数</p> 
<pre class="prettyprint"><code class=" hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"app"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">v-for</span>=<span class="hljs-value">"(item,index) of list"</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">"index"</span>&gt;</span></span><span class="hljs-expression">{<!-- -->{<!-- --><span class="hljs-variable">item</span>}}</span><span class="xml">--</span><span class="hljs-expression">{<!-- -->{<!-- --><span class="hljs-variable">message</span>}}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">ul</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>p1<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>p1<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>p1<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">//实例化Vue</span>
    <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> Vue({
        el:<span class="hljs-string">'#app'</span>,
        data:{
            message:<span class="hljs-string">'this is mseeage'</span>,
            list:[<span class="hljs-string">'aaaaaaaa'</span>,<span class="hljs-string">'bbbbbbb'</span>,<span class="hljs-string">'ccccccc'</span>]
        },
        <span class="hljs-comment">//时刻监测数据message的变化,一但那变化就会吊该函数</span>
        watch:{
            <span class="hljs-comment">//message必须和监测的data名字一样</span>
            message:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{<!-- --></span>
                console.log(<span class="hljs-string">'watch:'</span>,<span class="hljs-string">'message 变了'</span>)
            }
        },
        methods:{
            foo:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{<!-- --></span>
                console.log(<span class="hljs-string">'foo : '</span>,<span class="hljs-string">'这是初始化方法'</span>)
            }
        },
        <span class="hljs-comment">//created钩子</span>
        created:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{<!-- --></span>
            <span class="hljs-comment">//调用Vue的data</span>
            console.log(<span class="hljs-string">"created : "</span>,<span class="hljs-keyword">this</span>.message);
            <span class="hljs-comment">//调用Vue方法</span>
            <span class="hljs-keyword">this</span>.foo();
            <span class="hljs-comment">//因为我们是通过v-for循环遍历li，所以created之前挂载阶段还没开始.是无法获取li的个数的</span>
            console.log(<span class="hljs-string">'li数量：'</span>,document.getElementsByTagName(<span class="hljs-string">'li'</span>).length);
            <span class="hljs-comment">//直接加载出来的DOM是可以直接获取到的</span>
            console.log(<span class="hljs-string">'p个数：'</span>,document.getElementsByTagName(<span class="hljs-string">'p'</span>).length);
        },
    })
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>   </span></code></pre> 
<p><strong>结果</strong>： <br> <img src="https://images2.imgbox.com/12/22/YPcc5jV6_o.png" alt="这里写图片描述" title=""> <br> 可以看到：created钩子可以获取Vue的data，调用Vue方法，获取原本HTML上的直接加载出来的DOM，但是无法获取到通过挂载模板生成的DOM（例如：v-for循环遍历Vue.list生成li）</p> 
<h3 id="3beforemount">3.beforeMount</h3> 
<p>在挂载开始之前被调用：相关的 render 函数（模板）首次被调用。 <br> 例如通过v-for生成的html还没有被挂载到页面上 <br> （接 2created的代码）</p> 
<pre class="prettyprint"><code class=" hljs matlab"> beforeMount: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
     <span class="hljs-transposed_variable">console.</span><span class="hljs-built_in">log</span>(<span class="hljs-string">'beforeMount:'</span>,<span class="hljs-transposed_variable">document.</span>getElementsByTagName(<span class="hljs-string">'li'</span>).<span class="hljs-built_in">length</span>);
  },</code></pre> 
<p>结果 beforeMount: 1</p> 
<h3 id="4mounted">4.mounted</h3> 
<p>el 被新创建的 vm.$el 替换，并挂载到实例上去之后调用该钩子。 <br> <strong>有初始值的DOM渲染，例如我们的初始数据list,渲染出来的li，只有这里才能获取</strong> <br> （接 2created的代码）</p> 
<pre class="prettyprint"><code class=" hljs matlab">mounted: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
    <span class="hljs-transposed_variable">console.</span><span class="hljs-built_in">log</span>(<span class="hljs-string">'mounted:'</span>,<span class="hljs-transposed_variable">document.</span>getElementsByTagName(<span class="hljs-string">'li'</span>).<span class="hljs-built_in">length</span>);
},</code></pre> 
<p><strong>结果</strong> mounted: 3 <br> 可以看到到这里为止，挂载到实例上了，我们可以获取到li的个数了</p> 
<h3 id="5beforeupdate">5.beforeUpdate</h3> 
<p>数据更新时调用，发生在虚拟 DOM 重新渲染和打补丁之前。 你可以在这个钩子中进一步地更改状态，这不会触发附加的重渲染过程。 <br> 当我们更改Vue的任何数据，都会触发该函数</p> 
<pre class="prettyprint"><code class=" hljs matlab"> beforeUpdate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
       <span class="hljs-transposed_variable">console.</span><span class="hljs-built_in">log</span>(<span class="hljs-string">'beforeUpdate 钩子执行...'</span>);
       <span class="hljs-transposed_variable">console.</span><span class="hljs-built_in">log</span>(<span class="hljs-string">'beforeUpdate:'</span>+<span class="hljs-transposed_variable">this.</span>message)
 },</code></pre> 
<h3 id="6updated">6.updated</h3> 
<p>由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。 <br> 当这个钩子被调用时，组件 DOM 已经更新，所以你现在可以执行依赖于 DOM 的操作。然而在大多数情况下，你应该避免在此期间更改状态，因为这可能会导致更新无限循环。 <br> 该钩子在服务器端渲染期间不被调用。</p> 
<p>数据更新就会触发（vue所有的数据只有有更新就会触发）,如果想数据一遍就做统一的处理，可以用这个，如果想对不同数据的更新做不同的处理可以用nextTick，或者是watch进行监听</p> 
<pre class="prettyprint"><code class=" hljs matlab"> updated: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
     <span class="hljs-transposed_variable">console.</span><span class="hljs-built_in">log</span>(<span class="hljs-string">'updated 钩子执行...'</span>);
     <span class="hljs-transposed_variable">console.</span><span class="hljs-built_in">log</span>(<span class="hljs-string">'updated:'</span>,<span class="hljs-transposed_variable">this.</span>message)
},</code></pre> 
<h3 id="7beforedestroy">7.beforeDestroy</h3> 
<p>实例销毁之前调用。在这一步，实例仍然完全可用。</p> 
<h3 id="8destroyed">8.destroyed</h3> 
<p>Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。 该钩子在服务器端渲染期间不被调用。</p> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"app"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">//实例化Vue</span>
    <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> Vue({
        el:<span class="hljs-string">'#app'</span>,
        data:{
            message:<span class="hljs-string">'this is mseeage'</span>,
        },
        beforeDestroy: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
            console.log(<span class="hljs-string">'beforeDestroy 钩子执行...'</span>,<span class="hljs-keyword">this</span>.message)
        },
        destroyed: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
            console.log(<span class="hljs-string">'destroyed 钩子执行...'</span>,<span class="hljs-keyword">this</span>.message)
        }
    })
    <span class="hljs-comment">//销毁Vue实例，触发beforeDestroy和destroyed函数</span>
    app.$destroy()
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>   </code></pre> 
<p>结果： <br> <img src="https://images2.imgbox.com/ac/39/EPKZS4xe_o.png" alt="这里写图片描述" title=""> <br> 可以看打到销毁Vue实例时会调用这两个函数</p> 
<h3 id="补充mount">补充$mount</h3> 
<p>当你vue没有挂在el时，我们可以用$mount</p> 
<pre class="prettyprint"><code class=" hljs lasso"><span class="hljs-built_in">var</span> app <span class="hljs-subst">=</span> <span class="hljs-literal">new</span> Vue({
    <span class="hljs-built_in">data</span>:{
            message:<span class="hljs-string">'this is mseeage'</span>,
        },
})<span class="hljs-built_in">.</span><span class="hljs-variable">$mount</span>(<span class="hljs-string">'#app'</span>)</code></pre> 
<h2 id="三钩子的一些实战用法">三.钩子的一些实战用法</h2> 
<h2 id="1异步函数">1.异步函数</h2> 
<p>这里我们用定时器来做异步函数</p> 
<pre class="prettyprint"><code class=" hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"app"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">v-for</span>=<span class="hljs-value">"(item,index) of list"</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">"index"</span>&gt;</span></span><span class="hljs-expression">{<!-- -->{<!-- --><span class="hljs-variable">item</span>}}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> Vue({
        el:<span class="hljs-string">'#app'</span>,
        data:{
            list:[<span class="hljs-string">'aaaaaaaa'</span>,<span class="hljs-string">'bbbbbbb'</span>,<span class="hljs-string">'ccccccc'</span>]
        },
        created:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{<!-- --></span>
            consoloe.log(<span class="hljs-string">'created异步：aaaaa'</span>);
            <span class="hljs-comment">//异步获取数据</span>
            <span class="hljs-comment">// 因为是异步,就和我们ajax获取数据一样</span>
            setTimeout(()=&gt;{
                <span class="hljs-keyword">this</span>.list=[<span class="hljs-string">'111'</span>,<span class="hljs-string">'222'</span>,<span class="hljs-string">'333'</span>,<span class="hljs-string">'444'</span>],
                console.log(<span class="hljs-string">'created异步：'</span>,document.getElementsByTagName(<span class="hljs-string">'li'</span>).length);
            },<span class="hljs-number">0</span>)
        },
        mounted: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
            console.log(<span class="hljs-string">'mounted:'</span>,document.getElementsByTagName(<span class="hljs-string">'li'</span>).length);
        },
        updated: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
            console.log(<span class="hljs-string">'updated:'</span>,document.getElementsByTagName(<span class="hljs-string">'li'</span>).length)
        },
    })
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span></span></code></pre> 
<p><strong>结果为：</strong> <br> create: aaaaaaaa <br> mounted: 3 <br> created异步函数： 3 <br> updated: 4 <br> <strong>解释：</strong> <br> 可以看到因为是在created的钩子中加入异步函数，所以函数的执行顺序为： <br> ceated钩子,mounted钩子,异步函数,updated钩子(根据事件队列原理,只有在updated后，li才是真的DOM渲染为4个，所以异步函数中获取的li的个数时是没有变化的li的个数)。 <br> 因为mounted获取到的是我们在Vue的data中设置初始值渲染的DOM，而我们是在异步函数中变化的list数据，所以mounted获取的li的个数为3。 <br> update函数是只要数据vue绑定的数据变化就会触发，所以最后执行，为4</p> 
<p>这是不是意味着可以直接在update函数中操作呢，其实不是，因为update函数是针对vue的所有数据的变化，而我们也有可能会有其他数据的变化。</p> 
<p>例如下面的例子：</p> 
<pre class="prettyprint"><code class=" hljs coffeescript"><span class="hljs-regexp">//</span>我们利用异步函数改变了两次list，会发现update被触发了<span class="hljs-number">2</span>次
<span class="hljs-attribute">created</span>:<span class="hljs-reserved">function</span>(){
        <span class="hljs-regexp">//</span>异步获取数据
        <span class="hljs-regexp">//</span> 因为是异步,就和我们ajax获取数据一样
        setTimeout<span class="hljs-function"><span class="hljs-params">(()=&gt;{
             <span class="hljs-keyword">this</span>.list=[<span class="hljs-string">'111'</span>,<span class="hljs-string">'222'</span>,<span class="hljs-string">'333'</span>,<span class="hljs-string">'444'</span>],
             <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'created异步：'</span>,<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'li'</span>).length);
        },<span class="hljs-number">0</span>)</span>
        <span class="hljs-title">setTimeout</span><span class="hljs-params">(()=&gt;{
             <span class="hljs-keyword">this</span>.list=[<span class="hljs-string">'快乐大本营'</span>,<span class="hljs-string">'脚踏实地'</span>,<span class="hljs-string">'300033'</span>,<span class="hljs-string">'天天向上'</span>,<span class="hljs-string">'好好学习'</span>],
             <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'created异步：'</span>,<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'li'</span>).length);
        },<span class="hljs-number">1000</span>)</span>
},
<span class="hljs-title">mounted</span>: <span class="hljs-title">function</span> <span class="hljs-params">()</span> {
        <span class="hljs-title">console</span>.<span class="hljs-title">log</span><span class="hljs-params">(<span class="hljs-string">'mounted:'</span>,<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'li'</span>).length)</span>;
},
<span class="hljs-title">updated</span>: <span class="hljs-title">function</span> <span class="hljs-params">()</span> {
        <span class="hljs-title">console</span>.<span class="hljs-title">log</span><span class="hljs-params">(<span class="hljs-string">'updated:'</span>,<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'li'</span>).length)</span>
},</span></code></pre> 
<p><strong>结果为：</strong> <br> <img src="https://images2.imgbox.com/a7/7a/bJ1pIWTV_o.png" alt="这里写图片描述" title=""></p> 
<h3 id="2vuenexttick对异步函数的结果进行操作">2.Vue.nextTick对异步函数的结果进行操作</h3> 
<p>我们想要改变数据时,各自触发各自的方法</p> 
<pre class="prettyprint"><code class=" hljs coffeescript">
<span class="hljs-attribute">created</span>:<span class="hljs-reserved">function</span>(){
<span class="hljs-regexp">//</span>异步获取数据
<span class="hljs-regexp">//</span> 因为是异步,就和我们ajax获取数据一样

    <span class="hljs-regexp">//</span>为了在数据变化之后等待 Vue 完成更新 DOM ，可以在数据变化之后立即使用 Vue.nextTick(callback) 。这样回调函数在 DOM 更新完成后就会调用。
    setTimeout<span class="hljs-function"><span class="hljs-params">(()=&gt;{
        <span class="hljs-keyword">this</span>.list=[<span class="hljs-string">'111'</span>,<span class="hljs-string">'222'</span>,<span class="hljs-string">'333'</span>,<span class="hljs-string">'444'</span>],
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'created异步：'</span>,<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'li'</span>).length);
        <span class="hljs-keyword">this</span>.$nextTick(<span class="hljs-reserved">function</span>(){
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"created$nextTick："</span>,<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'li'</span>).length)
        });
    },<span class="hljs-number">0</span>)</span>
    <span class="hljs-title">setTimeout</span><span class="hljs-params">(()=&gt;{
        <span class="hljs-keyword">this</span>.list=[<span class="hljs-string">'快乐大本营'</span>,<span class="hljs-string">'脚踏实地'</span>,<span class="hljs-string">'300033'</span>,<span class="hljs-string">'天天向上'</span>,<span class="hljs-string">'好好学习'</span>],
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'created异步：'</span>,<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'li'</span>).length);
        <span class="hljs-keyword">this</span>.$nextTick(<span class="hljs-reserved">function</span>(){
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"created$nextTick："</span>,<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'li'</span>).length)
        });
    },<span class="hljs-number">1000</span>)</span>
},
<span class="hljs-title">mounted</span>: <span class="hljs-title">function</span> <span class="hljs-params">()</span> {
    <span class="hljs-title">console</span>.<span class="hljs-title">log</span><span class="hljs-params">(<span class="hljs-string">'mounted:'</span>,<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'li'</span>).length)</span>;
},
<span class="hljs-title">updated</span>: <span class="hljs-title">function</span> <span class="hljs-params">()</span> {
  <span class="hljs-title">console</span>.<span class="hljs-title">log</span><span class="hljs-params">(<span class="hljs-string">'updated:'</span>,<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'li'</span>).length)</span>
},</span></code></pre> 
<p>结果：<img src="https://images2.imgbox.com/99/d2/o75IXCNw_o.png" alt="这里写图片描述" title=""> <br> 我们可以看到通过$nextTick我们可以对异步函数的结果进行各自的操作</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/783b12ab8d38c09d111ddb7581bbfbc6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SVN包含非法文件系统格式选项/包含非法文件系统格式选项</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1c5a99895e3c7ea6c5bf357ab65ebe10/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">STM32F407VE单片机使用I2C接口操作内部控制芯片为RA8816的FYD12864-1001A型的12864液晶</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>