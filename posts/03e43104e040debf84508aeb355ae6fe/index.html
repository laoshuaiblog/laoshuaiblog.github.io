<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android | Android OS 源码结构 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/03e43104e040debf84508aeb355ae6fe/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Android | Android OS 源码结构">
  <meta property="og:description" content="参考：AndroidXRef (http://androidxref.com/)版本：Pie - 9.0.0_r3 整体结构 对于 Android OS 的源码目录来说，各个版本的结构大同小异，随不同版本特性会有个别目录差异。编译后会额外产生一个 out 文件夹用于存储编译产生的文件。对于 Android 9.0.0 系统来说，其源码根目录结构如下：
Android.bp：soong 编译配置文件，使用 soong 编译前会遍历源码目录树并找到所有 .dp 文件art/：ART 运行环境bionic/：针对 Android OS 定制的系统C库bootable/：Android OS 启动引导相关bootstrap.bashbuild/：Android OS 编译规则存放路径compatibility/：Android OS 兼容性计划cts/：Android OS 兼容性测试套件标准dalvik/：Android Dalvik 虚拟机相关developers/：Android 开发者相关文档development/：Android 应用开发基础设施相关device/：Android OS 设备相关配置external/：Android OS 开源模组相关frameworks/：应用程序框架，Android 系统核心hardware/：HAL 部分相关代码，硬件适配接口kernel/：Linux Kernel，默认不提供，需要自己单独下载导入libcore/：Android Java 核心类库libnativehelper/：Android 动态库，实现 JNI 基础Makefile：全局 Makefile 文件，指定编译规则packages/：应用程序包pdk/：Plug Development Kit，本地开发套件platform_testing/：Android OS 测试程序相关prebuilts/：x86 和 arm 架构下预编译资源sdk/：Android Java 层 SDK 和模拟器system/：Android 底层文件系统库、应用、组件相关test/：Android Vendor 测试框架相关toolchain/：Android 工具链相关tools/：Android 工具文件相关 系统架构实现 Android OS 的系统架构从上（直接与用户交互）到下（直接与硬件交互）分为好几层，其中每层的核心代码位于如下位置：">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-05-27T18:52:30+08:00">
    <meta property="article:modified_time" content="2023-05-27T18:52:30+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android | Android OS 源码结构</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <ul><li>参考：AndroidXRef (http://androidxref.com/)</li><li>版本：Pie - 9.0.0_r3</li></ul> 
<p><img src="https://images2.imgbox.com/7d/8d/XFcuU6rP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_5"></a>整体结构</h3> 
<p>对于 <code>Android OS</code> 的源码目录来说，各个版本的结构大同小异，随不同版本特性会有个别目录差异。编译后会额外产生一个 <code>out</code> 文件夹用于存储编译产生的文件。对于 <code>Android 9.0.0</code> 系统来说，其源码根目录结构如下：</p> 
<ul><li>Android.bp：soong 编译配置文件，使用 soong 编译前会遍历源码目录树并找到所有 .dp 文件</li><li>art/：ART 运行环境</li><li>bionic/：针对 Android OS 定制的系统C库</li><li>bootable/：Android OS 启动引导相关</li><li>bootstrap.bash</li><li>build/：Android OS 编译规则存放路径</li><li>compatibility/：Android OS 兼容性计划</li><li>cts/：Android OS 兼容性测试套件标准</li><li>dalvik/：Android Dalvik 虚拟机相关</li><li>developers/：Android 开发者相关文档</li><li>development/：Android 应用开发基础设施相关</li><li>device/：Android OS 设备相关配置</li><li>external/：Android OS 开源模组相关</li><li>frameworks/：应用程序框架，Android 系统核心</li><li>hardware/：HAL 部分相关代码，硬件适配接口</li><li>kernel/：Linux Kernel，默认不提供，需要自己单独下载导入</li><li>libcore/：Android Java 核心类库</li><li>libnativehelper/：Android 动态库，实现 JNI 基础</li><li>Makefile：全局 Makefile 文件，指定编译规则</li><li>packages/：应用程序包</li><li>pdk/：Plug Development Kit，本地开发套件</li><li>platform_testing/：Android OS 测试程序相关</li><li>prebuilts/：x86 和 arm 架构下预编译资源</li><li>sdk/：Android Java 层 SDK 和模拟器</li><li>system/：Android 底层文件系统库、应用、组件相关</li><li>test/：Android Vendor 测试框架相关</li><li>toolchain/：Android 工具链相关</li><li>tools/：Android 工具文件相关</li></ul> 
<h3><a id="_37"></a>系统架构实现</h3> 
<p><code>Android OS</code> 的系统架构从上（直接与用户交互）到下（直接与硬件交互）分为好几层，其中每层的核心代码位于如下位置：</p> 
<ul><li>System Apps：系统应用层部分的代码主要位于 <code>package/</code> 路径下</li><li>Frameworks：应用框架层部分的代码主要位于 <code>frameworks/</code> 路径下</li><li>Native C/C++ Libs：种类繁多，功能全面，并不完全位于同一路径中，常用且重要的 <code>C/C++</code> 程序库包括：<code>bionic/</code>，<code>frameworks/native/</code>，<code>external</code> 等</li><li>Android Runtime：Android 运行时部分代码位于 <code>art/</code> 路径下</li><li>HAL：硬件抽象层的代码主要位于 <code>hardware/</code> 路径下</li><li>Linux Kernel：Linux 内核层主要位于 <code>kernel/</code> 路径下</li></ul> 
<h3><a id="_47"></a>应用层</h3> 
<p>应用层在 <code>Android</code> 平台的最上层，是直接与用户交互的部分，包含系统内置应用与三方应用。在源码目录中应用层对应 <code>package</code> 目录，其结构如下：</p> 
<ul><li>apps/：系统核心应用程序</li><li>experimental/：第三方应用程序</li><li>inputmethods/：输入法路径</li><li>providers/：内容提供者路径</li><li>screensavers/：屏幕保护服务</li><li>services/：通信服务</li><li>wallpapers/：壁纸服务</li></ul> 
<h3><a id="_58"></a>应用框架</h3> 
<p><code>Android OS</code> 核心部分，<code>frameworks</code> 部分。向上给应用层提供接口，向下与 <code>C/C++</code> 程序库及 <code>HAL</code> 等衔接。应用框架部分的代码主要位于 <code>frameworks/av</code> 与 <code>frameworks/base</code> 路径下。</p> 
<p><code>framework</code> 路径结构如下：</p> 
<ul><li>av/：多媒体框架相关</li><li>base/：Android Frameworks 的主要核心目录</li><li>compile/：编译相关</li><li>data-binding/：数据绑定相关组件</li><li>ex/：文件解析器相关</li><li>hardware/：硬件适配接口相关</li><li>layoutlib/：布局文件相关</li><li>minikin/：Android 原生字体效果</li><li>ml/：机器学习神经网络相关</li><li>multidex/：多 dex 文件加载相关</li><li>native/：native 实现相关</li><li>opt/：基础应用软件相关</li><li>rs/：Render Script，3D 接口相关</li><li>support/：frameworks 支持软件</li><li>wilhelm/：基于 Khronos 的 OpenSL ES 与 OpenMAX AL 的audio 与 multimedia 实现</li></ul> 
<p><code>frameworks/base</code> 路径结构如下：</p> 
<ul><li>Android.bp</li><li>Android.mk</li><li>apct-tests/：性能优化测试</li><li>api/：Android 应用框架层声明类、属性、资源</li><li>CleanSpec.mk</li><li>cmds/：Android OS 启动时命令 commands</li><li>config/：配置相关</li><li>core/：frameworks 核心框架组件</li><li>data/：Android 资源，如字体、文本、音频、视频等数据文件</li><li>docs/：Android 项目说明文档</li><li>drm/：权限管理、数字解密等模块</li><li>graphics/：图像渲染模块</li><li>keystore/：密钥库</li><li>libs/：库文件</li><li>location/：位置信息模块</li><li>lowpan/：loWPAN 支持模块</li><li>media/：多媒体管理模块</li><li>MODULE_LICENSE_APACHE2</li><li>native/：本地方法模块</li><li>nfc-extras/：近场通信模块 NFC</li><li>NOTICE</li><li>obex/：蓝牙模块</li><li>opengl/：2D 与 3D 图形绘制</li><li>packages/：Android 应用层基础应用实现</li><li>pathmap.mk</li><li>PREUPLOAD.cfg</li><li>proto/：协议框架</li><li>rs/：资源框架</li><li>samples/：样例程序</li><li>sax/：XML 解析器模块</li><li>services/：系统服务程序</li><li>telecomm/：通信框架</li><li>telephony/：电话通讯管理相关模块</li><li>test-base/</li><li>test-legacy/</li><li>test-mock/</li><li>test-runner/</li><li>tests/：测试相关</li><li>tools/：工具相关</li><li>vr/：VR 相关模块</li><li>wifi/：Wi-Fi 相关模块</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4ec4ad1c40d23dd3ea269cf718f2e906/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SPI、I2C、CAN通信的简单介绍和笔记</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/34933e5d966b18e2325bb5f6f2638fa9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java高级编程——多线程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>