<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>uniapp微信小程序_购物车_下单页面 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/c08956cd553a8030d929c1dd5fc65552/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="uniapp微信小程序_购物车_下单页面">
  <meta property="og:description" content="先说下整体逻辑以方便总体理解
1、首先画出下单页面
2、此次画出结算价格页面
3、怎么点击下完单变成结算页面？其实就是把下单页面的信息传递给结算页面就行
问题难点？
点击加号的时候把物品加入一个数组传到下单页面，但是点击的时候不能把所有物品加上，需要把重复的物品转换成数量
点击减号为0的时候需要减去商品，使用过滤api过滤掉次数为0的就相当于删除次数为0的商品
最后将物品总价使用computed一算就可以
一、解决购物车加购的时候重复问题 mergeDuplicateItems(cartItems) { // 创建一个空对象来存储合并后的商品 const mergedItems = {}; // 遍历购物车中的每个商品 cartItems.forEach(item =&amp;gt; { // 使用商品名称作为键来查找是否存在该商品 const existingItem = mergedItems[item.name]; if (existingItem) { // 把这边的点击次数传出去 existingItem.content = item.content; } else { // 如果商品不存在，则将其添加到合并后的对象中 mergedItems[item.name] = { ...item }; } }); // 将合并后的对象转换回数组 // 把汉字就去掉了 const mergedCartItems = Object.values(mergedItems); return mergedCartItems; }, 以上把加购重复的商品加购进去
mergedItems[item.name] = { ...item }; 这个解释一下
mergedCartItems是这个但是得转换一下 { exampleName1: { name: &#39;exampleName1&#39;, value: &#39;value1&#39; }, exampleName2: { name: &#39;exampleName2&#39;, value: &#39;value2&#39; }, exampleName3: { name: &#39;exampleName3&#39;, value: &#39;value3&#39; } } Object.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-21T11:53:41+08:00">
    <meta property="article:modified_time" content="2024-03-21T11:53:41+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">uniapp微信小程序_购物车_下单页面</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><img alt="" height="326" src="https://images2.imgbox.com/fc/b7/eEXNKOX5_o.png" width="360"><img alt="" height="350" src="https://images2.imgbox.com/3d/74/SSXqdAou_o.png" width="380"></p> 
<p><img alt="" height="563" src="https://images2.imgbox.com/e6/fa/IteNypeD_o.png" width="361"></p> 
<blockquote> 
 <p><strong> 先说下整体逻辑以方便总体理解<br>  1、首先画出下单页面<br>  2、此次画出结算价格页面<br>  3、怎么点击下完单变成结算页面？其实就是把下单页面的信息传递给结算页面就行<br>  问题难点？<br> 点击加号的时候把物品加入一个数组传到下单页面，但是点击的时候不能把所有物品加上，需要把重复的物品转换成数量<br> 点击减号为0的时候需要减去商品，使用过滤api过滤掉次数为0的就相当于删除次数为0的商品<br> 最后将物品总价使用computed一算就可以</strong></p> 
</blockquote> 
<h2> 一、解决购物车加购的时候重复问题</h2> 
<pre><code class="hljs">	mergeDuplicateItems(cartItems) {
				// 创建一个空对象来存储合并后的商品  
				const mergedItems = {};
				// 遍历购物车中的每个商品  
				cartItems.forEach(item =&gt; {
					// 使用商品名称作为键来查找是否存在该商品  
					const existingItem = mergedItems[item.name];
					if (existingItem) {
						// 把这边的点击次数传出去
						existingItem.content = item.content;
					} else {
						// 如果商品不存在，则将其添加到合并后的对象中  
						mergedItems[item.name] = {
							...item
						};
					}
				});
				// 将合并后的对象转换回数组  
				// 把汉字就去掉了
				const mergedCartItems = Object.values(mergedItems);
				return mergedCartItems;
			},</code></pre> 
<blockquote> 
 <p>以上把加购重复的商品加购进去</p> 
 <pre><code class="language-javascript">	mergedItems[item.name] = {
							...item
						};
</code></pre> 
 <p>这个解释一下</p> 
 <pre><code class="language-javascript">mergedCartItems是这个但是得转换一下
{  
    exampleName1: { name: 'exampleName1', value: 'value1' },  
    exampleName2: { name: 'exampleName2', value: 'value2' },  
    exampleName3: { name: 'exampleName3', value: 'value3' }  
}


Object.values(mergedItems);使用这个转换一下就下面这种了


[  
    { name: 'exampleName1', value: 'value1' },  
    { name: 'exampleName2', value: 'value2' },  
    { name: 'exampleName3', value: 'value3' }  
]</code></pre> 
 <p><img alt="" height="942" src="https://images2.imgbox.com/06/64/UzcxKlrz_o.png" width="1200"></p> 
 <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/values" rel="nofollow" title="Object.values() - JavaScript | MDN (mozilla.org)">Object.values() - JavaScript | MDN (mozilla.org)</a>这是api官方解释</p> 
</blockquote> 
<h2>二、加购商品 减少商品</h2> 
<pre><code class="language-javascript">	// 加号
			increaseCount(index) {
				// 加号次数增加
				this.food[index].content++
				// 加号显示
				this.food[index].showDelete = true;
				// 将点的餐加入购买的订单
				this.cart.push(this.food[index])
				// 有重复的处理成一个
				this.mergedCart = this.mergeDuplicateItems(this.cart);
				//过滤，当点击的次数等于0的时候将次数不等于0的过滤出来，就是相当于删除了次数等于0的商品
				let filteredFood = this.mergedCart.filter(item =&gt; item.content !== 0);
				// 转换成字符串
				this.cartstring = JSON.stringify(filteredFood)
			},
			// 减号
			deletegoods(index) {
				this.food[index].content--
				if (this.food[index].content &gt; 0) {
					// 将加完之后的结果传入mergeDuplicateItems函数减的话就是把次数传过去
					this.mergedCart = this.mergeDuplicateItems(this.cart);
					let filteredFood = this.mergedCart.filter(item =&gt; item.content !== 0);
					this.cartstring = JSON.stringify(filteredFood)
				}
				if (this.food[index].content == 0) {
					this.food[index].showDelete = false;
					//过滤，当点击的次数等于0的时候将次数不等于0的过滤出来，就是相当于删除了次数等于0的商品
					let filteredFood = this.food.filter(item =&gt; item.content !== 0);
					this.mergedCart = this.mergeDuplicateItems(filteredFood);
					this.cartstring = JSON.stringify(this.mergedCart)
				}
			}</code></pre> 
<h3>1.首先定义一个传过去得数组cart再把需要得商品加到购物车里面cart</h3> 
<pre><code class="language-javascript">data:{
cart: [],
}
this.cart.push(this.food[index])
				// 有重复的处理成一个
this.mergedCart = this.mergeDuplicateItems(this.cart);
//过滤，当点击的次数等于0的时候将次数不等于0的过滤出来，就是相当于删除了次数等于0的商品
let filteredFood = this.mergedCart.filter(item =&gt; item.content !== 0);
				// 转换成字符串
this.cartstring = JSON.stringify(filteredFood)</code></pre> 
<blockquote> 
 <p>let filteredFood = this.mergedCart.filter(item =&gt; item.content !== 0);还得过滤一下不然把之前没有的还会加进去，减商品也一样。</p> 
</blockquote> 
<h2>三、算出总价格 </h2> 
<pre><code class="language-javascript">	&lt;!-- 加购的食物 --&gt;
			&lt;view class="addFood"&gt;
				&lt;view class="foodDetail" v-for="(item,index) in food"&gt;
					&lt;image :src="item.imgUrl" class="foodImagel"&gt;&lt;/image&gt;
					&lt;view class="Afternoon"&gt;
						&lt;view class=""&gt;
							&lt;view class="AfternoonText"&gt;
								{<!-- -->{item.name}}
							&lt;/view&gt;
							&lt;view class="recommend"&gt;
								默认：×{<!-- -->{item.content}}
							&lt;/view&gt;
						&lt;/view&gt;
						&lt;view class=""&gt;
							&lt;view class="foodMoney"&gt;
								&lt;text class="symbol"&gt;￥&lt;/text&gt;&lt;text&gt;{<!-- -->{item.money}}&lt;/text&gt;
							&lt;/view&gt;
						&lt;/view&gt;
					&lt;/view&gt;
				&lt;/view&gt;
			&lt;/view&gt;
	&lt;!-- 底部支付 --&gt;
		&lt;view class="foot"&gt;
			&lt;view class="foodMoney"&gt;
				&lt;text class="symbol"&gt;￥&lt;/text&gt;&lt;text&gt;{<!-- -->{addPrice}}&lt;/text&gt;
			&lt;/view&gt;
			&lt;view class="lijiyuyue" @click="lijiyuyue1"&gt;
				立即支付
			&lt;/view&gt;
		&lt;/view&gt;



computed: {
			// 价格的总价
			addPrice() {
				var sum = 0
				this.food.forEach(el =&gt; {
					sum = el.money * el.content+sum
				})
				return sum
			}
		},</code></pre> 
<blockquote> 
 <p> 这个简单：computed定义总的价格addprice,然后直接引用这个变量，就是数量乘以价格加上之前累积得就可以了</p> 
</blockquote> 
<h2> 四、完结</h2> 
<blockquote> 
 <p>大哥们要是有更简单可以一起探讨学习下</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a257f01163c5f93b1aef0680e0da29ea/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">真心建议大家搞个香港身份，再不冲就晚了！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/68d2b9bb40c5b1f34e636fbfa1792e33/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">全面盘点17个C&#43;&#43;17的高级特性</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>