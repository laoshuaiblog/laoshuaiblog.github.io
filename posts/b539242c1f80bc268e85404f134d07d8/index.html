<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C#属性显示 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/b539242c1f80bc268e85404f134d07d8/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="C#属性显示">
  <meta property="og:description" content="功能：
显示对象的属性，包括可显示属性、可编辑属性、及不可编辑属性。
1、MainWindow.xaml
&amp;lt;Window x:Class=&#34;FlowChart.MainWindow&#34; xmlns=&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34; xmlns:x=&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34; xmlns:d=&#34;http://schemas.microsoft.com/expression/blend/2008&#34; xmlns:mc=&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34; xmlns:local=&#34;clr-namespace:FlowChart&#34; mc:Ignorable=&#34;d&#34; Title=&#34;MainWindow&#34; Height=&#34;450&#34; Width=&#34;800&#34;&amp;gt; &amp;lt;DockPanel&amp;gt; &amp;lt;StackPanel DockPanel.Dock=&#34;Left&#34; Width=&#34;300&#34; Margin=&#34;0 0 10 0&#34;&amp;gt; &amp;lt;StackPanel Margin=&#34;0 10 0 10&#34;&amp;gt; &amp;lt;TextBlock Text=&#34;属性&#34; FontWeight=&#34;Bold&#34; Margin=&#34;0 0 0 10&#34;/&amp;gt; &amp;lt;local:PropertiesView x:Name=&#34;_propertiesView&#34; Height=&#34;200&#34;/&amp;gt; &amp;lt;/StackPanel&amp;gt; &amp;lt;/StackPanel&amp;gt; &amp;lt;Border BorderBrush=&#34;Black&#34; BorderThickness=&#34;1&#34;&amp;gt;&amp;lt;/Border&amp;gt; &amp;lt;/DockPanel&amp;gt; &amp;lt;/Window&amp;gt; 2、MainWindow.cs
using System; using System.Collections.Generic; using System.ComponentModel; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows; using System.Windows.Controls; using System.Windows.Data; using System.Windows.Documents; using System.Windows.Input; using System.Windows.Media; using System.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-29T17:31:40+08:00">
    <meta property="article:modified_time" content="2024-03-29T17:31:40+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C#属性显示</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>功能：<br> 显示对象的属性，包括可显示属性、可编辑属性、及不可编辑属性。<br> 1、MainWindow.xaml</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">Window</span> x<span class="token punctuation">:</span>Class<span class="token operator">=</span><span class="token string">"FlowChart.MainWindow"</span>
        xmlns<span class="token operator">=</span><span class="token string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        xmlns<span class="token punctuation">:</span>x<span class="token operator">=</span><span class="token string">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
        xmlns<span class="token punctuation">:</span>d<span class="token operator">=</span><span class="token string">"http://schemas.microsoft.com/expression/blend/2008"</span>
        xmlns<span class="token punctuation">:</span>mc<span class="token operator">=</span><span class="token string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
        xmlns<span class="token punctuation">:</span>local<span class="token operator">=</span><span class="token string">"clr-namespace:FlowChart"</span>
        mc<span class="token punctuation">:</span>Ignorable<span class="token operator">=</span><span class="token string">"d"</span>
        Title<span class="token operator">=</span><span class="token string">"MainWindow"</span> Height<span class="token operator">=</span><span class="token string">"450"</span> Width<span class="token operator">=</span><span class="token string">"800"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>DockPanel<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>StackPanel DockPanel<span class="token punctuation">.</span>Dock<span class="token operator">=</span><span class="token string">"Left"</span> Width<span class="token operator">=</span><span class="token string">"300"</span> Margin<span class="token operator">=</span><span class="token string">"0 0 10 0"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">StackPanel</span> Margin<span class="token operator">=</span><span class="token string">"0 10 0 10"</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">TextBlock</span> Text<span class="token operator">=</span><span class="token string">"属性"</span> FontWeight<span class="token operator">=</span><span class="token string">"Bold"</span> Margin<span class="token operator">=</span><span class="token string">"0 0 0 10"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>local<span class="token punctuation">:</span><span class="token class-name">PropertiesView</span> x<span class="token punctuation">:</span>Name<span class="token operator">=</span><span class="token string">"_propertiesView"</span> Height<span class="token operator">=</span><span class="token string">"200"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>StackPanel<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>StackPanel<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">Border</span> BorderBrush<span class="token operator">=</span><span class="token string">"Black"</span> BorderThickness<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Border<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>DockPanel<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Window<span class="token operator">&gt;</span>
</code></pre> 
<p>2、MainWindow.cs</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>ComponentModel</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Text</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Controls</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Documents</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Input</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Media</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Media<span class="token punctuation">.</span>Imaging</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Navigation</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Shapes</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">FlowChart</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">/// &lt;summary&gt;</span>
    <span class="token comment">/// MainWindow.xaml 的交互逻辑</span>
    <span class="token comment">/// &lt;/summary&gt;</span>
    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">MainWindow</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Window</span></span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">DataInitialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>Selection<span class="token punctuation">&gt;</span></span> selections<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Selection<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DataInitialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Selection</span> selection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Selection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            selection<span class="token punctuation">.</span>Location<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            selection<span class="token punctuation">.</span>Size<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Size</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//selection.Name = "测试";</span>
            _propertiesView<span class="token punctuation">.</span>SelectedObject<span class="token operator">=</span> selection<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Selection</span><span class="token punctuation">:</span><span class="token type-list"><span class="token class-name">INotifyPropertyChanged</span></span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">private</span> <span class="token class-name">Point</span> _location<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Point</span> Location
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _location<span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{<!-- --></span>
                _location <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
                <span class="token function">OnPropertyChanged</span><span class="token punctuation">(</span><span class="token string">"Location"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token class-name">Size</span> _size<span class="token punctuation">;</span>
        <span class="token comment">//[Browsable(false)]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Size</span> Size
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _size<span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{<!-- --></span>
                _size <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
                <span class="token function">OnPropertyChanged</span><span class="token punctuation">(</span><span class="token string">"Size"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">string</span></span> _name<span class="token operator">=</span><span class="token string">"Test"</span><span class="token punctuation">;</span>
        
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _name<span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token comment">//set { _name = value;</span>
            <span class="token comment">//    OnPropertyChanged("Name");</span>
            <span class="token comment">//}</span>
        <span class="token punctuation">}</span>


        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">event</span> <span class="token class-name">PropertyChangedEventHandler</span> PropertyChanged<span class="token punctuation">;</span>

        <span class="token keyword">protected</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnPropertyChanged</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>PropertyChanged <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token function">PropertyChanged</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PropertyChangedEventArgs</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>3、PropertiesView.xaml</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">UserControl</span> x<span class="token punctuation">:</span>Class<span class="token operator">=</span><span class="token string">"FlowChart.PropertiesView"</span>
             xmlns<span class="token operator">=</span><span class="token string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
             xmlns<span class="token punctuation">:</span>x<span class="token operator">=</span><span class="token string">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
             xmlns<span class="token punctuation">:</span>mc<span class="token operator">=</span><span class="token string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span> 
             xmlns<span class="token punctuation">:</span>d<span class="token operator">=</span><span class="token string">"http://schemas.microsoft.com/expression/blend/2008"</span> 
             xmlns<span class="token punctuation">:</span>local<span class="token operator">=</span><span class="token string">"clr-namespace:FlowChart"</span>
             mc<span class="token punctuation">:</span>Ignorable<span class="token operator">=</span><span class="token string">"d"</span> 
             d<span class="token punctuation">:</span>DesignHeight<span class="token operator">=</span><span class="token string">"450"</span> d<span class="token punctuation">:</span>DesignWidth<span class="token operator">=</span><span class="token string">"300"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>UserControl<span class="token punctuation">.</span>Resources<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">ControlTemplate</span> x<span class="token punctuation">:</span>Key<span class="token operator">=</span><span class="token string">"validationErrorTemplate"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>DockPanel<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">Image</span> Source<span class="token operator">=</span><span class="token string">"Resources\empty.png"</span> Height<span class="token operator">=</span><span class="token string">"16"</span> Width<span class="token operator">=</span><span class="token string">"16"</span> DockPanel<span class="token punctuation">.</span>Dock<span class="token operator">=</span><span class="token string">"Right"</span> Margin<span class="token operator">=</span><span class="token string">"-18 0 0 0"</span>
                       ToolTip<span class="token operator">=</span><span class="token string">"{Binding ElementName=adorner,Path=AdornedElement.(Validation.Errors)[0].ErrorContent}"</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Image<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">AdornedElementPlaceholder</span> x<span class="token punctuation">:</span>Name<span class="token operator">=</span><span class="token string">"adorner"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>DockPanel<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ControlTemplate<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token class-name">Style</span> x<span class="token punctuation">:</span>Key<span class="token operator">=</span><span class="token string">"gridLineStyle"</span> TargetType<span class="token operator">=</span><span class="token string">"Line"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"Stroke"</span> Value<span class="token operator">=</span><span class="token string">"Gray"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"Stretch"</span> Value<span class="token operator">=</span><span class="token string">"Fill"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"Grid.ZIndex"</span> Value<span class="token operator">=</span><span class="token string">"1000"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Style<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token class-name">Style</span> x<span class="token punctuation">:</span>Key<span class="token operator">=</span><span class="token string">"gridHorizontalLineStyle"</span> TargetType<span class="token operator">=</span><span class="token string">"Line"</span> BasedOn<span class="token operator">=</span><span class="token string">"{StaticResource gridLineStyle}"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"X2"</span> Value<span class="token operator">=</span><span class="token string">"1"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"VerticalAlignment"</span> Value<span class="token operator">=</span><span class="token string">"Bottom"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"Grid.ColumnSpan"</span>
                Value<span class="token operator">=</span>"<span class="token punctuation">{<!-- --></span><span class="token class-name">Binding</span> 
                            Path<span class="token operator">=</span>ColumnDefinitions<span class="token punctuation">.</span>Count<span class="token punctuation">,</span>
                            RelativeSource<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token class-name">RelativeSource</span> AncestorType<span class="token operator">=</span>Grid<span class="token punctuation">}</span><span class="token punctuation">}</span>"<span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Style<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token class-name">Style</span> x<span class="token punctuation">:</span>Key<span class="token operator">=</span><span class="token string">"gridVerticalLineStyle"</span> TargetType<span class="token operator">=</span><span class="token string">"Line"</span> BasedOn<span class="token operator">=</span><span class="token string">"{StaticResource gridLineStyle}"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"Y2"</span> Value<span class="token operator">=</span><span class="token string">"1"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"HorizontalAlignment"</span> Value<span class="token operator">=</span><span class="token string">"Right"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"Grid.RowSpan"</span> 
                Value<span class="token operator">=</span>"<span class="token punctuation">{<!-- --></span><span class="token class-name">Binding</span> 
                            Path<span class="token operator">=</span>RowDefinitions<span class="token punctuation">.</span>Count<span class="token punctuation">,</span>
                            RelativeSource<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token class-name">RelativeSource</span> AncestorType<span class="token operator">=</span>Grid<span class="token punctuation">}</span><span class="token punctuation">}</span>"<span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Style<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>UserControl<span class="token punctuation">.</span>Resources<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token class-name">Border</span> BorderThickness<span class="token operator">=</span><span class="token string">"1"</span> BorderBrush<span class="token operator">=</span><span class="token string">"Black"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">DockPanel</span> x<span class="token punctuation">:</span>Name<span class="token operator">=</span><span class="token string">"_panel"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Border</span> x<span class="token punctuation">:</span>Name<span class="token operator">=</span><span class="token string">"_label"</span> Width<span class="token operator">=</span><span class="token string">"50"</span> Height<span class="token operator">=</span><span class="token string">"16"</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">TextBlock</span> Text<span class="token operator">=</span><span class="token string">"Empty"</span> TextAlignment<span class="token operator">=</span><span class="token string">"Center"</span> Foreground<span class="token operator">=</span><span class="token string">"Gray"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Border<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">ScrollViewer</span> x<span class="token punctuation">:</span>Name<span class="token operator">=</span><span class="token string">"_gridContainer"</span> VerticalScrollBarVisibility<span class="token operator">=</span><span class="token string">"Auto"</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">Grid</span> x<span class="token punctuation">:</span>Name<span class="token operator">=</span><span class="token string">"_grid"</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Grid<span class="token punctuation">.</span>ColumnDefinitions<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>ColumnDefinition<span class="token operator">/</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>ColumnDefinition<span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token punctuation">.</span>ColumnDefinitions<span class="token operator">&gt;</span>

                    <span class="token operator">&lt;</span><span class="token class-name">Line</span> Name<span class="token operator">=</span><span class="token string">"_vLine"</span> Grid<span class="token punctuation">.</span>Column<span class="token operator">=</span><span class="token string">"0"</span> Grid<span class="token punctuation">.</span>RowSpan<span class="token operator">=</span><span class="token string">"1000"</span> Style<span class="token operator">=</span><span class="token string">"{StaticResource gridVerticalLineStyle}"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">GridSplitter</span> Name<span class="token operator">=</span><span class="token string">"_splitter"</span> Grid<span class="token punctuation">.</span>RowSpan<span class="token operator">=</span><span class="token string">"1000"</span>  Margin<span class="token operator">=</span><span class="token string">"0,0,-2,0"</span> Width<span class="token operator">=</span><span class="token string">"4"</span> 
                                  Background<span class="token operator">=</span><span class="token string">"White"</span> Opacity<span class="token operator">=</span><span class="token string">"0.01"</span> Grid<span class="token punctuation">.</span>ZIndex<span class="token operator">=</span><span class="token string">"10000"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ScrollViewer<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>DockPanel<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Border<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>UserControl<span class="token operator">&gt;</span>
</code></pre> 
<p>4、PropertiesView.cs</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>ComponentModel</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Reflection</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Text</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Controls</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Documents</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Input</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Media</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Media<span class="token punctuation">.</span>Imaging</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Navigation</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Shapes</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">FlowChart</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">/// &lt;summary&gt;</span>
    <span class="token comment">/// PropertiesView.xaml 的交互逻辑</span>
    <span class="token comment">/// &lt;/summary&gt;</span>
    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">PropertiesView</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">UserControl</span></span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token function">PropertiesView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">DisplayProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">object</span></span> _selectedObject<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> SelectedObject
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _selectedObject<span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>_selectedObject <span class="token operator">!=</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name"><span class="token keyword">var</span></span> obj <span class="token operator">=</span> _selectedObject <span class="token keyword">as</span> <span class="token class-name">INotifyPropertyChanged</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                        obj<span class="token punctuation">.</span>PropertyChanged <span class="token operator">-=</span> PropertyChanged<span class="token punctuation">;</span>

                    _selectedObject <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
                    <span class="token function">DisplayProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    obj <span class="token operator">=</span> _selectedObject <span class="token keyword">as</span> <span class="token class-name">INotifyPropertyChanged</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                        obj<span class="token punctuation">.</span>PropertyChanged <span class="token operator">+=</span> PropertyChanged<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PropertyChanged</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">PropertyChangedEventArgs</span> e<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">DisplayProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DisplayProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            _panel<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">ClearGrid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>SelectedObject <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token class-name"><span class="token keyword">int</span></span> row <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> prop <span class="token keyword">in</span> SelectedObject<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">OrderBy</span><span class="token punctuation">(</span>p <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name"><span class="token keyword">var</span></span> attr <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">GetCustomAttributes</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">BrowsableAttribute</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>attr<span class="token punctuation">.</span>Length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token punctuation">(</span>attr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token class-name">BrowsableAttribute</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Browsable<span class="token punctuation">)</span>
                    <span class="token punctuation">{<!-- --></span>
                        <span class="token function">DisplayProperty</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> row<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        row<span class="token operator">++</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                _panel<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>_gridContainer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{<!-- --></span>
                _panel<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>_label<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ClearGrid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            _grid<span class="token punctuation">.</span>RowDefinitions<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> _grid<span class="token punctuation">.</span>Children<span class="token punctuation">.</span>Count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>_grid<span class="token punctuation">.</span>Children<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> _vLine <span class="token operator">&amp;&amp;</span> _grid<span class="token punctuation">.</span>Children<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> _splitter<span class="token punctuation">)</span>
                    _grid<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">RemoveAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DisplayProperty</span><span class="token punctuation">(</span><span class="token class-name">PropertyInfo</span> prop<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> row<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name"><span class="token keyword">var</span></span> rowDef <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RowDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            rowDef<span class="token punctuation">.</span>Height <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GridLength</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>FontSize <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            _grid<span class="token punctuation">.</span>RowDefinitions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>rowDef<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name"><span class="token keyword">var</span></span> tb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TextBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> Text <span class="token operator">=</span> prop<span class="token punctuation">.</span>Name <span class="token punctuation">}</span><span class="token punctuation">;</span>
            tb<span class="token punctuation">.</span>Margin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Thickness</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Grid<span class="token punctuation">.</span><span class="token function">SetColumn</span><span class="token punctuation">(</span>tb<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Grid<span class="token punctuation">.</span><span class="token function">SetRow</span><span class="token punctuation">(</span>tb<span class="token punctuation">,</span> _grid<span class="token punctuation">.</span>RowDefinitions<span class="token punctuation">.</span>Count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name"><span class="token keyword">var</span></span> ed <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TextBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ed<span class="token punctuation">.</span>PreviewKeyDown <span class="token operator">+=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">KeyEventHandler</span><span class="token punctuation">(</span>ed_KeyDown<span class="token punctuation">)</span><span class="token punctuation">;</span>
            ed<span class="token punctuation">.</span>Margin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Thickness</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ed<span class="token punctuation">.</span>BorderThickness <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Thickness</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Grid<span class="token punctuation">.</span><span class="token function">SetColumn</span><span class="token punctuation">(</span>ed<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Grid<span class="token punctuation">.</span><span class="token function">SetRow</span><span class="token punctuation">(</span>ed<span class="token punctuation">,</span> _grid<span class="token punctuation">.</span>RowDefinitions<span class="token punctuation">.</span>Count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name"><span class="token keyword">var</span></span> line <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Line</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            line<span class="token punctuation">.</span>Style <span class="token operator">=</span> <span class="token punctuation">(</span>Style<span class="token punctuation">)</span>Resources<span class="token punctuation">[</span><span class="token string">"gridHorizontalLineStyle"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            Grid<span class="token punctuation">.</span><span class="token function">SetRow</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> row<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name"><span class="token keyword">var</span></span> binding <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Binding</span><span class="token punctuation">(</span>prop<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            binding<span class="token punctuation">.</span>Source <span class="token operator">=</span> SelectedObject<span class="token punctuation">;</span>
            binding<span class="token punctuation">.</span>ValidatesOnExceptions <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            binding<span class="token punctuation">.</span>Mode <span class="token operator">=</span> BindingMode<span class="token punctuation">.</span>OneWay<span class="token punctuation">;</span>
            ed<span class="token punctuation">.</span>IsEnabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>prop<span class="token punctuation">.</span>CanWrite<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                ed<span class="token punctuation">.</span>IsEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token class-name"><span class="token keyword">var</span></span> mi <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">GetSetMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>mi <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> mi<span class="token punctuation">.</span>IsPublic<span class="token punctuation">)</span>
                    binding<span class="token punctuation">.</span>Mode <span class="token operator">=</span> BindingMode<span class="token punctuation">.</span>TwoWay<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            ed<span class="token punctuation">.</span><span class="token function">SetBinding</span><span class="token punctuation">(</span>TextBox<span class="token punctuation">.</span>TextProperty<span class="token punctuation">,</span> binding<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name"><span class="token keyword">var</span></span> template <span class="token operator">=</span> <span class="token punctuation">(</span>ControlTemplate<span class="token punctuation">)</span>Resources<span class="token punctuation">[</span><span class="token string">"validationErrorTemplate"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            Validation<span class="token punctuation">.</span><span class="token function">SetErrorTemplate</span><span class="token punctuation">(</span>ed<span class="token punctuation">,</span> template<span class="token punctuation">)</span><span class="token punctuation">;</span>

            _grid<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>tb<span class="token punctuation">)</span><span class="token punctuation">;</span>
            _grid<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ed<span class="token punctuation">)</span><span class="token punctuation">;</span>
            _grid<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ed_KeyDown</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">KeyEventArgs</span> e<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name"><span class="token keyword">var</span></span> ed <span class="token operator">=</span> sender <span class="token keyword">as</span> <span class="token class-name">TextBox</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ed <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>Key <span class="token operator">==</span> Key<span class="token punctuation">.</span>Enter<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    ed<span class="token punctuation">.</span><span class="token function">GetBindingExpression</span><span class="token punctuation">(</span>TextBox<span class="token punctuation">.</span>TextProperty<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UpdateSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    e<span class="token punctuation">.</span>Handled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>Key <span class="token operator">==</span> Key<span class="token punctuation">.</span>Escape<span class="token punctuation">)</span>
                    ed<span class="token punctuation">.</span><span class="token function">GetBindingExpression</span><span class="token punctuation">(</span>TextBox<span class="token punctuation">.</span>TextProperty<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UpdateTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>5、运行结果<br> <img src="https://images2.imgbox.com/2e/2c/rTDjfiTV_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/03be7b5422bd2e1fb1475bccf3eb3d1f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mac系统使用经验</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6ab7b148d8eba3bebf3949b90c56efff/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">代码随想录阅读笔记-二叉树【对称二叉树】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>