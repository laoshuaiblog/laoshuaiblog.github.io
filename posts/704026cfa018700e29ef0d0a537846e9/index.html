<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Cisco Catalyst3850交换机RTU license使用方法 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/704026cfa018700e29ef0d0a537846e9/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Cisco Catalyst3850交换机RTU license使用方法">
  <meta property="og:description" content="1 情况说明 客户处采购了4台3850-14T交换机，在配置的时候发现OSPF不支持，
查询原因为当前license不支持 (lanbase, 只能支持2层功能）
报错如下：
Access-3850-1(config)#router ospf 100 Protocol not in this image 2 如何处理？ 开启RTU license，加载ip service类型的license
开启RTU License后正常。如下图：
Access-3850-1(config)#router ospf 100 Access-3850-1(config-router)# 3 扫盲： 啥是RTU license What is RTU License ? A Right to Use license scheme is an honor-based model for licensing. Licenses are not tied to an unique device identifier (UDI), product ID, or serial number.
看到上面所说的了吗？ honor-based model ，说人话就是你应该购买license，但你可以直接使用。不买就用的就是臭不要脸。
我的理解，实际上就是cisco为了简化license安装和加载，以前的交换机或路由器上要加载license需要几步：
购买了license后，登录cisco.com官网输入license信封上的key，并输入交换机的SN进行绑定，—&amp;gt;生成license文件—&amp;gt;下载下来通过install license命令进行安装 现在不需要这么繁琐了，可以直接加载使用。">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-23T19:57:35+08:00">
    <meta property="article:modified_time" content="2024-03-23T19:57:35+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Cisco Catalyst3850交换机RTU license使用方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1__0"></a>1 情况说明</h2> 
<p>客户处采购了4台3850-14T交换机，在配置的时候发现OSPF不支持，<br> 查询原因为当前license不支持 (lanbase, 只能支持2层功能）<br> 报错如下：</p> 
<pre><code class="prism language-bash">Access-3850-1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 100</span>
Protocol not <span class="token keyword">in</span> this image
</code></pre> 
<h2><a id="2__9"></a>2 如何处理？</h2> 
<p>开启RTU license，加载ip service类型的license<br> 开启RTU License后正常。如下图：</p> 
<pre><code class="prism language-bash">Access-3850-1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 100</span>
Access-3850-1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#</span>
</code></pre> 
<h2><a id="3__RTU_license%09What_is_RTU_License___18"></a>3 扫盲： 啥是RTU license What is RTU License ?</h2> 
<p>A Right to Use license scheme is an honor-based model for licensing. Licenses are not tied to an unique device identifier (UDI), product ID, or serial number.<br> 看到上面所说的了吗？ honor-based model ，说人话就是你应该购买license，但你可以直接使用。不买就用的就是臭不要脸。</p> 
<p>我的理解，实际上就是cisco为了简化license安装和加载，以前的交换机或路由器上要加载license需要几步：</p> 
<ol><li>购买了license后，登录cisco.com官网</li><li>输入license信封上的key，并输入交换机的SN进行绑定，—&gt;生成license文件—&gt;下载下来</li><li>通过install license命令进行安装</li></ol> 
<p>现在不需要这么繁琐了，可以直接加载使用。</p> 
<h2><a id="4%09_30"></a>4 具体操作方法</h2> 
<h3><a id="41%09OSPF__31"></a>4.1 无法运行OSPF, 报错</h3> 
<pre><code class="prism language-bash">Access-3850-1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 100</span>
Protocol not <span class="token keyword">in</span> this image
</code></pre> 
<h3><a id="42%09license_38"></a>4.2 查看license</h3> 
<pre><code class="prism language-bash">Access-3850-1<span class="token comment">#show license right-to-use usage </span>
 Slot<span class="token comment">#  License Name     Type     usage-duration(y:m:d)  In-Use  EULA</span>
-----------------------------------------------------------------------
 <span class="token number">1</span>      ipservices     permanent    <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      ipservices     evaluation   <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      ipbase         permanent    <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      ipbase         evaluation   <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      lanbase        permanent    <span class="token number">0</span> :0 :0                <span class="token function">yes</span>   <span class="token function">yes</span>  //这就是当前的license 类型
 <span class="token number">1</span>      apcount        evaluation   <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      apcount        base         <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      apcount        adder        <span class="token number">0</span> :0 :0                no    no
</code></pre> 
<h3><a id="43%09ipservices_license_54"></a>4.3 启用ipservices license</h3> 
<pre><code class="prism language-bash"><span class="token number">3850</span>-1<span class="token comment">#license right-to-use activate ipservices all  acceptEULA </span>
% switch-1:stack-mgr:Reboot the switch to invoke the highest activated License level
</code></pre> 
<h3><a id="44%09Reload__60"></a>4.4 Reload 重启交换机</h3> 
<pre><code class="prism language-bash"><span class="token number">3850</span>-1<span class="token comment">#reload </span>
Reload <span class="token builtin class-name">command</span> is being issued on Active unit, this will reload the whole stack
Proceed with reload? <span class="token punctuation">[</span>confirm<span class="token punctuation">]</span>
</code></pre> 
<h3><a id="35%09license_67"></a>3.5 重启完成，查看license</h3> 
<pre><code class="prism language-bash"><span class="token number">3850</span>-1<span class="token comment">#show license right-to-use usage </span>
 Slot<span class="token comment">#  License Name     Type     usage-duration(y:m:d)  In-Use  EULA</span>

 <span class="token number">1</span>      ipservices     permanent    <span class="token number">0</span> :0 :0                <span class="token function">yes</span>   <span class="token function">yes</span>    //加载了ip <span class="token function">service</span>
 <span class="token number">1</span>      ipservices     evaluation   <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      ipbase         permanent    <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      ipbase         evaluation   <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      lanbase        permanent    <span class="token number">0</span> :0 :0                no    <span class="token function">yes</span>  
 <span class="token number">1</span>      apcount        evaluation   <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      apcount        base         <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      apcount        adder        <span class="token number">0</span> :0 :0                no    no   
</code></pre> 
<h3><a id="36%09ospf_81"></a>3.6 再次启用ospf进程</h3> 
<pre><code class="prism language-bash"><span class="token number">3850</span>-1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router os 100</span>
IP routing not enabled

报了个错，但这个和license无关，是因为没有开ip routing

***开启ip routing***

<span class="token number">3850</span>-1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip routing</span>
<span class="token number">3850</span>-1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 100</span>
<span class="token number">3850</span>-1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#router ospf 100</span>
</code></pre> 
<h2><a id="_96"></a>其他查看命令</h2> 
<pre><code class="prism language-bash">
<span class="token number">3850</span>-1<span class="token comment">#license right-to-use activate ?</span>
  apcount     configure the AP-count licenses on the switch
  ipbase      activate ipbase license on the switch
  ipservices  activate Ipservices license on the switch
  lanbase     activate lanbase license on the switch

<span class="token number">3850</span>-1<span class="token comment">#license right-to-use activate ipservices all  acceptEULA </span>
% switch-1:stack-mgr:Reboot the switch to invoke the highest activated License level

<span class="token number">3850</span>-1<span class="token comment">#show license right-to-use usage </span>
 Slot<span class="token comment">#  License Name     Type     usage-duration(y:m:d)  In-Use  EULA</span>
-----------------------------------------------------------------------
 <span class="token number">1</span>      ipservices     permanent    <span class="token number">0</span> :0 :0                no    <span class="token function">yes</span>  
 <span class="token number">1</span>      ipservices     evaluation   <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      ipbase         permanent    <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      ipbase         evaluation   <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      lanbase        permanent    <span class="token number">0</span> :0 :0                <span class="token function">yes</span>   <span class="token function">yes</span>  
 <span class="token number">1</span>      apcount        evaluation   <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      apcount        base         <span class="token number">0</span> :0 :0                no    no   
 <span class="token number">1</span>      apcount        adder        <span class="token number">0</span> :0 :0                no    no  

不加eula参数，需要确认agreement.

<span class="token number">3850</span>-1<span class="token comment">#license right-to-use activate ipservices all </span>
PLEASE READ THE FOLLOWING TERMS CAREFULLY. INSTALLING THE LICENSE OR LICENSE KEY PROVIDED FOR ANY CISCO PRODUCT FEATURE OR USING SUCH PRODUCT FEATURE CONSTITUTES YOUR FULL ACCEPTANCE OF THE FOLLOWING TERMS. YOU MUST NOT PROCEED FURTHER IF YOU ARE NOT WILLING TO BE BOUND BY ALL THE TERMS SET FORTH HEREIN. Use of this product feature requires an additional license from Cisco, together with an additional payment.  You may use this product feature subject to the Cisco end user license agreement http://www.cisco.com/en/US/docs/general/warranty/English/EU1KEN_.html, together with any supplements relating to such product feature.   It is your responsibility to <span class="token function">make</span> payment to Cisco <span class="token keyword">for</span> your use of the product feature <span class="token keyword">if</span> not already licensed to <span class="token keyword">do</span> so. Your acceptance of this agreement <span class="token keyword">for</span> the software features on one product shall be deemed your acceptance with respect to all such software on all Cisco products you purchase <span class="token function">which</span> includes the same software.  <span class="token punctuation">(</span>The foregoing notwithstanding, you must purchase a license <span class="token keyword">for</span> each software feature you use, so that <span class="token keyword">if</span> you <span class="token builtin class-name">enable</span> a software feature on <span class="token number">1000</span> devices, you must purchase <span class="token number">1000</span> licenses <span class="token keyword">for</span> use.<span class="token punctuation">)</span>    This license may be transferrable from another Cisco device of the same model <span class="token keyword">for</span> the same functionality <span class="token keyword">if</span> such license already is owned.  Activation of the software <span class="token builtin class-name">command</span> line interface will be evidence of your acceptance of this agreement. By clicking  the <span class="token string">"accept"</span> button  or typing <span class="token string">"yes"</span> you are  indicating  you have <span class="token builtin class-name">read</span> and agree to be bound by all the terms provided herein.ACCEPT <span class="token punctuation">(</span>yes/no<span class="token punctuation">)</span> <span class="token builtin class-name">:</span> <span class="token function">yes</span>
% switch-1:stack-mgr:Reboot the switch to invoke the highest activated License level

<span class="token number">3850</span>-1<span class="token comment">#reload </span>

System configuration has been modified. Save? <span class="token punctuation">[</span>yes/no<span class="token punctuation">]</span>: y
Building configuration<span class="token punctuation">..</span>.
Compressed configuration from <span class="token number">3001</span> bytes to <span class="token number">1475</span> bytes<span class="token punctuation">[</span>OK<span class="token punctuation">]</span>Reload <span class="token builtin class-name">command</span> is being issued on Active unit, this will reload the whole stack
Proceed with reload? <span class="token punctuation">[</span>confirm<span class="token punctuation">]</span>






<span class="token number">3850</span>-1<span class="token comment">#show license right-to-use  default </span>
 Slot<span class="token comment">#    License Name    Type      Count </span>
------------------------------------------
 <span class="token number">1</span>        lanbase        permanent     N/A 
 <span class="token number">1</span>        apcount        base          <span class="token number">0</span>   

<span class="token number">3850</span>-1<span class="token comment">#show license right-to-use  de      </span>
<span class="token number">3850</span>-1<span class="token comment">#show license right-to-use  deta</span>
<span class="token number">3850</span>-1<span class="token comment">#show license right-to-use  detail </span>
Index <span class="token number">1</span>:  License Name: ipservices
           Period left: Lifetime
           License Type: permanent
           License State: Active, In use
           License Count: Non-Counted
           License Location: Slot <span class="token number">1</span>
Index <span class="token number">2</span>:  License Name: ipservices
           Period left: <span class="token number">90</span>
           License Type: evaluation
           License State: Not Activated
           License Count: Non-Counted
           License Location: Slot <span class="token number">1</span>
Index <span class="token number">3</span>:  License Name: ipbase
           Period left: Lifetime
           License Type: permanent
           License State: Not Activated
           License Count: Non-Counted
           License Location: Slot <span class="token number">1</span>
Index <span class="token number">4</span>:  License Name: ipbase
           Period left: <span class="token number">90</span>
           License Type: evaluation
           License State: Not Activated
           License Count: Non-Counted
           License Location: Slot <span class="token number">1</span>
Index <span class="token number">5</span>:  License Name: lanbase
           Period left: Lifetime
           License Type: permanent
           License State: Active, Not In use
           License Count: Non-Counted
           License Location: Slot <span class="token number">1</span>
Index <span class="token number">6</span>:  License Name: apcount
           Period left: <span class="token number">90</span>
           License Type: evaluation
           License State: Not Activated
           License Count: <span class="token number">50</span>
           License Location: Slot <span class="token number">1</span>
Index <span class="token number">7</span>:  License Name: apcount
           Period left: Lifetime
           License Type: base
           License State: Not Activated
           License Count: <span class="token number">0</span>
           License Location: Slot <span class="token number">1</span>
Index <span class="token number">8</span>:  License Name: apcount
           Period left: Lifetime
           License Type: adder
           License State: Not Activated
           License Count: <span class="token number">0</span>
           License Location: Slot <span class="token number">1</span>

<span class="token number">3850</span>-1<span class="token comment">#show license right-to-use  summary </span>
  License Name    Type     Count   Period left
-----------------------------------------------
  ipservices   permanent   N/A      Lifetime
  apcount      base        <span class="token number">0</span>        Lifetime
  apcount      adder       <span class="token number">0</span>        Lifetime

--------------------------------------------

License Level In Use: ipservices
License Level on Reboot: ipservices
Evaluation AP-Count: Disabled
Total AP Count Licenses: <span class="token number">0</span>
AP Count Licenses In-use: <span class="token number">0</span>
AP Count Licenses Remaining: <span class="token number">0</span>


</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3c3e94628aafd92cc9a966c258621ce9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【PHP &#43; 代码审计】数组函数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8c775b29d04f9926183c7d6c60c3b776/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【协议-ICMP】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>