<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Impala ODBC 安装笔记 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/2cf11cf7c40cf8b2dfe9698dc2e4bf4b/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Impala ODBC 安装笔记">
  <meta property="og:description" content="Impala在线文档介绍了 Impala ODBC接口安装和配置 http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/Impala/Installing-and-Using-Impala/ciiu_impala_odbc.html Impala ODBC 驱动下载地址： http://www.cloudera.com/content/support/en/downloads/connectors.html 本文详细讲解了CentOS-6.5-x86_64环境下 Impala ODBC的安装和使用。
一、检查unixODBC是否安装： rpm -qa|grep unixODBC
如果没有安装，使用下面的命令安装：
yum install unixODBC yum install unixODBC-devel
使用odbcinst命令查看unixODBC配置文件路径，不同版本的unixODBC配置文件路径是不同的，如果是源代码方式安装unixODBC，也可以通过编译参数--sysconfdir指定。
[root@h1 ~]# odbcinst -j unixODBC 2.2.14 DRIVERS............: /etc/odbcinst.ini SYSTEM DATA SOURCES: /etc/odbc.ini FILE DATA SOURCES..: /etc/ODBCDataSources USER DATA SOURCES..: /root/.odbc.ini SQLULEN Size.......: 8 SQLLEN Size........: 8 SQLSETPOSIROW Size.: 8 二、安装Impala ODBC驱动 下载ClouderaImpalaODBC-2.5.15.1015-1.el6.x86_64.rpm，保存到：/home/soft 目录，并进行安装：
[root@h1 soft]# ll total 16232 -rw-r--r--. 1 root root 16619934 Aug 24 06:37 ClouderaImpalaODBC-2.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2014-08-24T23:34:17+08:00">
    <meta property="article:modified_time" content="2014-08-24T23:34:17+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Impala ODBC 安装笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <span style="font-size:13px;font-family:Arial;">Impala在线文档介绍了 Impala ODBC接口安装和配置</span> 
<br> 
<span style="font-size:13px;font-family:Arial;color:rgb(4,46,238);"><u>http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/Impala/Installing-and-Using-Impala/ciiu_impala_odbc.html</u></span> 
<br> 
<span style="font-size:13px;font-family:Arial;">Impala ODBC 驱动下载地址：</span> 
<br> 
<span style="font-size:13px;font-family:Arial;color:rgb(4,46,238);"><u>http://www.cloudera.com/content/support/en/downloads/connectors.html</u></span> 
<br> 
<span style="font-size:13px;font-family:Arial;"></span> 
<br> 
<p><span style="font-size:13px;font-family:Arial;">本文详细讲解了CentOS-6.5-x86_64环境下 Impala ODBC的安装和使用。</span></p> 
<p></p> 
<p></p> 
<h4>一、检查unixODBC是否安装：</h4> 
<p>rpm -qa|grep unixODBC<br></p> 
<p>如果没有安装，使用下面的命令安装：</p> 
<p></p>yum install unixODBC 
<p></p> 
<p>yum install unixODBC-devel</p> 
<p>使用odbcinst命令查看unixODBC配置文件路径，不同版本的unixODBC配置文件路径是不同的，如果是源代码方式安装unixODBC，也可以通过编译参数--sysconfdir指定。</p> 
<p></p> 
<pre><code class="language-javascript">[root@h1 ~]# odbcinst -j
unixODBC 2.2.14
DRIVERS............: /etc/odbcinst.ini
SYSTEM DATA SOURCES: /etc/odbc.ini
FILE DATA SOURCES..: /etc/ODBCDataSources
USER DATA SOURCES..: /root/.odbc.ini
SQLULEN Size.......: 8
SQLLEN Size........: 8
SQLSETPOSIROW Size.: 8</code></pre> 
<h4>二、安装Impala ODBC驱动</h4> 
<p><span style="font-size:13px;font-family:Arial;">下载</span><span style="font-size:13px;font-family:'Lucida Grande';">ClouderaImpalaODBC-2.5.15.1015-1.el6.x86_64.rpm，保存到：/home/soft 目录，并进行安装：</span></p> 
<p><span style="font-size:13px;font-family:'Lucida Grande';"></span></p> 
<pre><code class="language-javascript">[root@h1 soft]# ll
total 16232
-rw-r--r--. 1 root root 16619934 Aug 24 06:37 ClouderaImpalaODBC-2.5.15.1015-1.el6.x86_64.rpm
[root@h1 soft]# rpm -ivh ClouderaImpalaODBC-2.5.15.1015-1.el6.x86_64.rpm 
Preparing...                ########################################### [100%]
   1:ClouderaImpalaODBC     ########################################### [100%]
[root@h1 soft]# </code></pre> 
<br>安装完成后的文件在：/opt/cloudera/impalaodbc 目录，这个目录包含了安装文档、lib包、配置文件示例。 
<p></p> 
<p></p> 
<pre><code class="language-javascript">[root@h1 impalaodbc]# pwd
/opt/cloudera/impalaodbc
[root@h1 impalaodbc]# ll
total 1016
-rwxr-xr-x. 1 root root 1007048 Apr 21 12:21 Cloudera ODBC Driver for Impala Install Guide.pdf
-rwxr-xr-x. 1 root root   12003 Apr 21 12:21 Cloudera-EULA.txt
drwxr-xr-x. 3 root root    4096 Aug 24 07:15 ErrorMessages
-rwxr-xr-x. 1 root root    3261 Apr 21 12:21 Readme.txt
-rwxr-xr-x. 1 root root    2350 Apr 21 12:21 Release Notes.txt
drwxr-xr-x. 2 root root    4096 Aug 24 07:15 Setup
drwxr-xr-x. 3 root root    4096 Aug 24 07:15 lib
[root@h1 impalaodbc]# </code></pre> 
<p></p> 
<p><br></p> 
<p>设置驱动的环境变量：</p> 
<p>在 /etc/profile 最后添加：</p> 
<p class="p1">export LD_LIBRARY_PATH=/usr/local/lib:/opt/cloudera/impalaodbc/lib/64</p> 
<p class="p1">然后执行：source /etc/profile  </p> 
<p>使修改的脚本立即生效。</p> 
<p>拷贝：cloudera.impalaodbc.ini 到 /etc/目录：</p> 
<p></p> 
<pre><code class="language-javascript">[root@h1 Setup]# pwd
/opt/cloudera/impalaodbc/Setup
[root@h1 Setup]# cp cloudera.impalaodbc.ini /etc/
[root@h1 Setup]# </code></pre> 
<br>修改：/etc/cloudera.impalaodbc.ini 中的如下条目： 
<p></p> 
<p></p> 
<pre><code class="language-javascript"># Generic ODBCInstLib
#   iODBC
#ODBCInstLib=libiodbcinst.so

#   SimbaDM / unixODBC
ODBCInstLib=libodbcinst.so</code></pre> 
<p>也就是说不使用iODBC , 使用 unixODBC</p> 
<p><br></p> 
<h4>三、修改/etc/odbc.ini 文件</h4> 
<p>参照 /opt/cloudera/impalaodbc/Setup/odbc.ini ,  在/etc/odbc.ini 添加如下的内容：<br></p> 
<p></p> 
<pre><code class="language-javascript">[impalaodbc]

# Description: DSN Description.
# This key is not necessary and is only to give a description of the data source.
Description=Cloudera ODBC Driver for Impala (64-bit) DSN

# Driver: The location where the ODBC driver is installed to.
Driver=/opt/cloudera/impalaodbc/lib/64/libclouderaimpalaodbc64.so

# The DriverUnicodeEncoding setting is only used for SimbaDM
# When set to 1, SimbaDM runs in UTF-16 mode.
# When set to 2, SimbaDM runs in UTF-8 mode.
#DriverUnicodeEncoding=2

# Values for HOST, PORT, KrbFQDN, and KrbServiceName should be set here.
# They can also be specified on the connection string.
HOST=172.16.230.152
PORT=21050
Database=default

# The authentication mechanism.
# 0 - no authentication.
# 1 - Kerberos authentication
# 2 - Username authentication.
# 3 - Username/password authentication.
# 4 - Username/password authentication with SSL.
AuthMech=0

# Kerberos related settings.
KrbFQDN=
KrbRealm=
KrbServiceName=

# Username/password authentication with SSL settings.
UID=
PWD=
CAIssuedCertNamesMismatch=1
TrustedCerts=/opt/cloudera/impalaodbc/lib/64/cacerts.pem

# Specify the proxy user ID to use.
#DelegationUID=

# General settings
TSaslTransportBufSize=1000
RowsFetchedPerBlock=1000
SocketTimeout=0
StringColumnLength=32767
UseNativeQuery=0</code></pre> 
<br> 
<h4>四、验证安装是否成功</h4> 
<p>执行 isql -v impalaodbc</p> 
<p></p> 
<pre><code class="language-javascript">[root@h1 ~]# isql -v impalaodbc
+---------------------------------------+
| Connected!                            |
|                                       |
| sql-statement                         |
| help [tablename]                      |
| quit                                  |
|                                       |
+---------------------------------------+
SQL&gt; select * from tab1;
[S1000][unixODBC][Cloudera][ImpalaODBC] (110) Error while executing a query in Impala: [HY000] : Error: Error: could not match input
[ISQL]ERROR: Could not SQLPrepare
SQL&gt; select * from tab1 
+------------+------+-------------------------+------------------------------+
| id         | col_1| col_2                   | col_3                        |
+------------+------+-------------------------+------------------------------+
| 1          | 1    | 123.123                 | 2012-10-24 08:55:00          |
| 2          | 0    | 1243.5                  | 2012-10-25 13:40:00          |
| 3          | 0    | 24453.325               | 2008-08-22 09:33:21.123000000|
| 4          | 0    | 243423.325              | 2007-05-12 22:32:21.334540000|
| 5          | 1    | 243.325                 | 1953-04-22 09:11:33          |
+------------+------+-------------------------+------------------------------+
SQLRowCount returns -1
5 rows fetched</code></pre>注意：执行的sql最后不要加封号。 
<p></p> 
<p>这样配置后，C/C++程序就可以通过unixODBC访问Impala中的数据了。</p> 
<h4>五、License问题</h4> 
<p>默认安装的Impala ODBC是评估版的，需要购买license，参见安装文档 Cloudera ODBC Driver for Impala Install Guide.pdf 中的这样一段话：</p> 
<p>If you are installing a driver with an evaluation license and you have purchased a perpetual license, then copy the License.lic file you received via e-mail into the /opt/cloudera/impalaodbc/lib/32 or /opt/cloudera/impalaodbc/lib/64 folder, depending on the version of the driver you installed.</p> 
<p>评估时为多长时间，目前还没找到答案。或者让你一直评估吧：）</p> 
<p><br></p> 
<p>原创作品，转载请注明出处 <a href="http://blog.csdn.net/yangzhaohui168/article/details/38800803">http://blog.csdn.net/yangzhaohui168/article/details/38800803</a><br></p> 
<br> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ac83ffd93b0aaead22d075c3da8e5870/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Windows下配置ftp服务器，使用QT实现文件上传和下载</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9f1318413e13b6a91aaaf536c55389b3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">图像分析：投影曲线的波峰查找</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>