<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>J2EE  Cookie 基础知识总结 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/d33a7325adae7582904e0ae3c0c66502/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="J2EE  Cookie 基础知识总结">
  <meta property="og:description" content="Tomcat 9 在讲述 Cookie 之前，有必要谈谈 Session
session 对象是服务器管理的（session对象存储在服务器端）session 对象是无状态的（每一个session对象与浏览器不存在直接的对应关系）session 需要一个标识来寻找 标识（JSESSIONID ）标识是谁分配的?服务器标识长成什么样?是一个 String（唯一）标识存储在哪里?存储在浏览器端什么时候存进去的?服务器在第一次给浏览器响应的时候携带标识标识具体存储在哪里?浏览器端的 Cookie 请求与响应过程简述
先启动服务器（携带项目：有许多资源，比如 Servlet、JSP、Filter…）浏览器主动发送请求（第一次请求时没有 标识）服务器解析请求，根据请求找资源，然后响应信息给浏览器的时候携带有 标识浏览器解析响应信息，并将 标识 存储，然后每一次新请求都携带 标识（正确来说是全部 Cookie 信息，标识 存储在 Cookie 中） 服务器端操作 Cookie （1）服务器端创建 Cookie
Cookie cookie = new Cookie(&#34;key&#34;, &#34;value&#34;); response.addCookie(cookie); 服务器端响应信息时携带 Cookie 信息下一次浏览器发送请求的时候会携带 Cookie 信息 （2）服务器端获取 Cookie
Cookie[] = request.getCookies(); （3）Cookie 对象常用方法
cookie.getName(); //获取cookie的key cookie.getValue(); //获取cookie的value cookie.setMaxAge(int); //设置cookie的失效时间，单位：秒 cookie.getDomain(); //返回cookie的域名 cookie.getPath(); cookie.getVerson(); ... cookie.setMaxAge(int); 默认值是 -1，当前 Session 结束时 Cookie 消失 （4）清除 Cookie">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-09-03T19:49:47+08:00">
    <meta property="article:modified_time" content="2020-09-03T19:49:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">J2EE  Cookie 基础知识总结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <ul><li>Tomcat 9</li></ul> 
<p><strong>在讲述 Cookie 之前，有必要谈谈 Session</strong></p> 
<ol><li>session 对象是服务器管理的（session对象存储在服务器端）</li><li>session 对象是无状态的（每一个session对象与浏览器不存在直接的对应关系）</li><li>session 需要一个<strong>标识</strong>来寻找</li></ol> 
<table><thead><tr><th>标识（JSESSIONID ）</th><th></th></tr></thead><tbody><tr><td>标识是谁分配的?</td><td>服务器</td></tr><tr><td>标识长成什么样?</td><td>是一个 String（唯一）</td></tr><tr><td>标识存储在哪里?</td><td>存储在浏览器端</td></tr><tr><td>什么时候存进去的?</td><td>服务器在第一次给浏览器响应的时候携带标识</td></tr><tr><td>标识具体存储在哪里?</td><td>浏览器端的 Cookie</td></tr></tbody></table> 
<p><strong>请求与响应过程简述</strong></p> 
<ol><li>先启动服务器（携带项目：有许多资源，比如 Servlet、JSP、Filter…）</li><li>浏览器主动发送请求（第一次请求时没有 <strong>标识</strong>）</li><li>服务器解析请求，根据请求找资源，然后响应信息给浏览器的时候携带有 <strong>标识</strong></li><li>浏览器解析响应信息，并将 <strong>标识</strong> 存储，然后每一次新请求都携带 <strong>标识</strong>（正确来说是全部 Cookie 信息，<strong>标识</strong> 存储在 Cookie 中）</li></ol> 
<h2><a id="_Cookie_21"></a>服务器端操作 Cookie</h2> 
<p><font color="#f40"><strong>（1）服务器端创建 Cookie</strong></font></p> 
<pre><code class="prism language-java">Cookie cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>服务器端响应信息时携带 Cookie 信息</li><li>下一次浏览器发送请求的时候会携带 Cookie 信息</li></ul> 
<p><font color="#f40"><strong>（2）服务器端获取 Cookie</strong></font></p> 
<pre><code class="prism language-java">Cookie<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><font color="#f40"><strong>（3）Cookie 对象常用方法</strong></font></p> 
<pre><code class="prism language-java">cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取cookie的key</span>
cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取cookie的value</span>
cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置cookie的失效时间，单位：秒</span>

cookie<span class="token punctuation">.</span><span class="token function">getDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回cookie的域名</span>
cookie<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cookie<span class="token punctuation">.</span><span class="token function">getVerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<ul><li><code>cookie.setMaxAge(int);</code> 默认值是 -1，当前 Session 结束时 Cookie 消失</li></ul> 
<p><font color="#f40"><strong>（4）清除 Cookie</strong></font></p> 
<ul><li>浏览器端（不同浏览器，不同的操作方法）</li><li>服务器端不能直接删除 Cookie，因为 Cookie 实际上存储在浏览器端，需要迂回告知浏览器端删除</li></ul> 
<pre><code class="prism language-java">cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>coookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="JavaScript__Cookie_61"></a>JavaScript 操作 Cookie</h2> 
<pre><code class="prism language-javascript"><span class="token keyword">var</span> cookieObject <span class="token operator">=</span> document<span class="token punctuation">.</span>cookie<span class="token punctuation">;</span> <span class="token comment">//k1=v1;k2=v2;k3=v3</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a3ea56fc138f2d93d396f840e0147fb1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ClickHouse节点扩容及数据迁移</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3541fb31975d62bad70c056ea7c59a72/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IDEA卡死解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>