<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>2022年圣诞节 | matlab实现炫酷的圣诞树 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/b4aafb66ad5973888ccf0f6c62d79b7f/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="2022年圣诞节 | matlab实现炫酷的圣诞树">
  <meta property="og:description" content="*2022年圣诞节到来啦，很高兴这次我们又能一起度过~
这里的部分代码已经在网上出现过，做了部分优化。是matlab版本。
一、内容介绍 这段代码是一个生成3D圣诞树的Matlab函数。运行该函数时，它使用圆柱函数创建圣诞树的 3D 表面，对树冠应用随机扰动，并使用 surfl 函数绘制树。树以当前轴 （gca） 绘制，并为绘图指定颜色图和照明。该函数还在树的顶部绘制一颗星星，并创建白色圆圈的散点图来表示树上的灯光。最后，该函数使用 lightFuncX 和 lightFuncY 函数在树上绘制其他光源，这些函数在代码前面已定义。该函数通过设置轴限制、打印框纵横比和视图角度以及关闭轴标签并打印标题来结束。
二、代码优化 提示：在代码中实现gif功能。
gif 功能所用到工具包为CDT, 链接： https://github.com/chadagreene/CDT
二、编码实现 提示：详细展示实现相关创意的代码。
function XmasTree2022 % 生成树本体曲面 treeFunc=@(h)[h(1),h(h&amp;gt;0&amp;amp;h&amp;lt;=3).*0&#43;1.5,8-(h(h&amp;gt;3)-3).*0.3636]; [X,Y,Z]=cylinder(treeFunc(0:0.2:25)); % 随机移动树冠上点的位置 Z=Z.*25; cnt1=1:21;cnt2=16:126; angle=atan(Y(cnt2,cnt1)./X(cnt2,cnt1)); treeDiffusion=rand(111,21)-0.5; X(cnt2,cnt1)=X(cnt2,cnt1)&#43;cos(angle).*treeDiffusion; Y(cnt2,cnt1)=Y(cnt2,cnt1)&#43;sin(angle).*treeDiffusion; Z(cnt2,cnt1)=Z(cnt2,cnt1)&#43;(rand(111,21)-0.5).*0.5; X(:,end)=X(:,1);Y(:,end)=Y(:,1);Z(:,end)=Z(:,1); % 绘制圣诞树 ax=gca;hold on; set(gcf,&#39;Color&#39;,[22,32,51]./255); surfl(X,Y,Z,&#39;light&#39;); r=(0.0430:(0.2061/50):0.2491)&#39;; g=(0.2969:(0.4012/50):0.6981)&#39;; b=(0.0625:(0.2696/50):0.3321)&#39;; Cmap=[r,g,b];Cmap(1:6,:)=Cmap(1:6,:).*0&#43;[77,63,5]/265; % 绘制标题 annotation(&#39;textbox&#39;,[.45,.86,.1,.1],&#39;String&#39;,&#39;Merry Christmas&#39;,&#39;fontsize&#39;,23,... &#39;fontweight&#39;,&#39;Bold&#39;,&#39;FontName&#39;,&#39;Cambria&#39;,&#39;HorizontalAlignment&#39;,&#39;center&#39;,&#39;Color&#39;,&#39;w&#39;,&#39;EdgeColor&#39;,&#39;none&#39;) % 当前坐标区域修饰 set(ax,&#39;XLim&#39;,[-10 10],&#39;YLim&#39;,[-10,10],&#39;ZLim&#39;,[0,30],&#39;PlotBoxAspectRatio&#39;,[1,1,1.2],... &#39;XColor&#39;,&#39;none&#39;,&#39;YColor&#39;,&#39;none&#39;,&#39;ZColor&#39;,&#39;none&#39;,&#39;Color&#39;,[22,32,51]./255,&#39;View&#39;,[-37.5,4],... &#39;Colormap&#39;,jet,&#39;Position&#39;,[0,0,1,.9],&#39;Tag&#39;,char([100,105,115,112,40,39,20316,32773,... 58,115,108,97,110,100,97,114,101,114,39,41])); lighting phong;shading interp;eval(ax.Tag) % 绘制星星 plot3(0,0,25.6,&#39;p&#39;, &#39;MarkerSize&#39;,24,&#39;MarkerFaceColor&#39;,[255,223,153]/255,&#39;MarkerEdgeColor&#39;,&#39;none&#39;,&#39;LineWidth&#39;, 1); starLightHdl=scatter3(0,0,25,6000,&#39;o&#39;,&#39;MarkerFaceColor&#39;,&#39;w&#39;,&#39;MarkerEdgeColor&#39;,&#39;w&#39;,&#39;MarkerEdgeAlpha&#39;,0,&#39;MarkerFaceAlpha&#39;, 0.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-12-29T12:40:11+08:00">
    <meta property="article:modified_time" content="2022-12-29T12:40:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">2022年圣诞节 | matlab实现炫酷的圣诞树</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>*2022年圣诞节到来啦，很高兴这次我们又能一起度过~<br> <img src="https://images2.imgbox.com/be/60/Ax141U0h_o.gif" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong>这里的部分代码已经在网上出现过，做了部分优化。是matlab版本。</strong></p> 
</blockquote> 
<h3><a id="_7"></a>一、内容介绍</h3> 
<p>这段代码是一个生成3D圣诞树的Matlab函数。运行该函数时，它使用圆柱函数创建圣诞树的 3D 表面，对树冠应用随机扰动，并使用 surfl 函数绘制树。树以当前轴 （gca） 绘制，并为绘图指定颜色图和照明。该函数还在树的顶部绘制一颗星星，并创建白色圆圈的散点图来表示树上的灯光。最后，该函数使用 lightFuncX 和 lightFuncY 函数在树上绘制其他光源，这些函数在代码前面已定义。该函数通过设置轴限制、打印框纵横比和视图角度以及关闭轴标签并打印标题来结束。</p> 
<h3><a id="_10"></a>二、代码优化</h3> 
<blockquote> 
 <p>提示：在代码中实现gif功能。<br> gif 功能所用到工具包为CDT, 链接： <a href="https://github.com/chadagreene/CDT">https://github.com/chadagreene/CDT</a></p> 
</blockquote> 
<h3><a id="_13"></a>二、编码实现</h3> 
<blockquote> 
 <p>提示：详细展示实现相关创意的代码。</p> 
</blockquote> 
<pre><code class="prism language-bash"><span class="token keyword">function</span> XmasTree2022
% 生成树本体曲面
<span class="token assign-left variable">treeFunc</span><span class="token operator">=</span>@<span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">[</span>h<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>,h<span class="token punctuation">(</span>h<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&amp;</span>h<span class="token operator">&lt;=</span><span class="token number">3</span><span class="token punctuation">)</span>.*0+1.5,8-<span class="token punctuation">(</span>h<span class="token punctuation">(</span>h<span class="token operator">&gt;</span><span class="token number">3</span><span class="token punctuation">)</span>-3<span class="token punctuation">)</span>.*0.3636<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>X,Y,Z<span class="token punctuation">]</span><span class="token operator">=</span>cylinder<span class="token punctuation">(</span>treeFunc<span class="token punctuation">(</span><span class="token number">0</span>:0.2:25<span class="token punctuation">))</span><span class="token punctuation">;</span>
% 随机移动树冠上点的位置
<span class="token assign-left variable">Z</span><span class="token operator">=</span>Z.*25<span class="token punctuation">;</span>
<span class="token assign-left variable">cnt1</span><span class="token operator">=</span><span class="token number">1</span>:21<span class="token punctuation">;</span><span class="token assign-left variable">cnt2</span><span class="token operator">=</span><span class="token number">16</span>:126<span class="token punctuation">;</span>
<span class="token assign-left variable">angle</span><span class="token operator">=</span>atan<span class="token punctuation">(</span>Y<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span>./X<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">))</span><span class="token punctuation">;</span>
<span class="token assign-left variable">treeDiffusion</span><span class="token operator">=</span>rand<span class="token punctuation">(</span><span class="token number">111,21</span><span class="token punctuation">)</span>-0.5<span class="token punctuation">;</span>
X<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span><span class="token operator">=</span>X<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span>+cos<span class="token punctuation">(</span>angle<span class="token punctuation">)</span>.*treeDiffusion<span class="token punctuation">;</span>
Y<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span><span class="token operator">=</span>Y<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span>+sin<span class="token punctuation">(</span>angle<span class="token punctuation">)</span>.*treeDiffusion<span class="token punctuation">;</span>
Z<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span><span class="token operator">=</span>Z<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span>+<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token number">111,21</span><span class="token punctuation">)</span>-0.5<span class="token punctuation">)</span>.*0.5<span class="token punctuation">;</span>
X<span class="token punctuation">(</span>:,end<span class="token punctuation">)</span><span class="token operator">=</span>X<span class="token punctuation">(</span>:,1<span class="token punctuation">)</span><span class="token punctuation">;</span>Y<span class="token punctuation">(</span>:,end<span class="token punctuation">)</span><span class="token operator">=</span>Y<span class="token punctuation">(</span>:,1<span class="token punctuation">)</span><span class="token punctuation">;</span>Z<span class="token punctuation">(</span>:,end<span class="token punctuation">)</span><span class="token operator">=</span>Z<span class="token punctuation">(</span>:,1<span class="token punctuation">)</span><span class="token punctuation">;</span>
% 绘制圣诞树
<span class="token assign-left variable">ax</span><span class="token operator">=</span>gca<span class="token punctuation">;</span>hold on<span class="token punctuation">;</span>
set<span class="token punctuation">(</span>gcf,<span class="token string">'Color'</span>,<span class="token punctuation">[</span><span class="token number">22,32</span>,51<span class="token punctuation">]</span>./255<span class="token punctuation">)</span><span class="token punctuation">;</span>
surfl<span class="token punctuation">(</span>X,Y,Z,<span class="token string">'light'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token assign-left variable">r</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.0430</span>:<span class="token punctuation">(</span><span class="token number">0.2061</span>/50<span class="token punctuation">)</span>:0.2491<span class="token punctuation">)</span><span class="token string">';
g=(0.2969:(0.4012/50):0.6981)'</span><span class="token punctuation">;</span>
<span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.0625</span>:<span class="token punctuation">(</span><span class="token number">0.2696</span>/50<span class="token punctuation">)</span>:0.3321<span class="token punctuation">)</span><span class="token string">';
Cmap=[r,g,b];Cmap(1:6,:)=Cmap(1:6,:).*0+[77,63,5]/265;
% 绘制标题
annotation('</span>textbox<span class="token string">',[.45,.86,.1,.1],'</span>String<span class="token string">','</span>Merry Christmas<span class="token string">','</span>fontsize<span class="token string">',23,...
    '</span>fontweight<span class="token string">','</span>Bold<span class="token string">','</span>FontName<span class="token string">','</span>Cambria<span class="token string">','</span>HorizontalAlignment<span class="token string">','</span>center<span class="token string">','</span>Color<span class="token string">','</span>w<span class="token string">','</span>EdgeColor<span class="token string">','</span>none<span class="token string">')
% 当前坐标区域修饰
set(ax,'</span>XLim<span class="token string">',[-10 10],'</span>YLim<span class="token string">',[-10,10],'</span>ZLim<span class="token string">',[0,30],'</span>PlotBoxAspectRatio<span class="token string">',[1,1,1.2],...
    '</span>XColor<span class="token string">','</span>none<span class="token string">','</span>YColor<span class="token string">','</span>none<span class="token string">','</span>ZColor<span class="token string">','</span>none<span class="token string">','</span>Color<span class="token string">',[22,32,51]./255,'</span>View<span class="token string">',[-37.5,4],...
    '</span>Colormap<span class="token string">',jet,'</span>Position<span class="token string">',[0,0,1,.9],'</span>Tag<span class="token string">',char([100,105,115,112,40,39,20316,32773,...
    58,115,108,97,110,100,97,114,101,114,39,41]));
lighting phong;shading interp;eval(ax.Tag)
% 绘制星星
plot3(0,0,25.6,'</span>p<span class="token string">', '</span>MarkerSize<span class="token string">',24,'</span>MarkerFaceColor<span class="token string">',[255,223,153]/255,'</span>MarkerEdgeColor<span class="token string">','</span>none<span class="token string">','</span>LineWidth<span class="token string">', 1);
starLightHdl=scatter3(0,0,25,6000,'</span>o<span class="token string">','</span>MarkerFaceColor<span class="token string">','</span>w<span class="token string">','</span>MarkerEdgeColor<span class="token string">','</span>w<span class="token string">','</span>MarkerEdgeAlpha<span class="token string">',0,'</span>MarkerFaceAlpha<span class="token string">', 0.1);
% 绘制圣诞树上的彩灯
lightFuncX=@(h,r,a,z) (h-z)./h.*r.*cos(a.*z);
lightFuncY=@(h,r,a,z) (h-z)./h.*r.*sin(a.*z);
h=25;r=8;
lightZ1=linspace(4,25-4,200);a1=0.3*pi;
lightX1=lightFuncX(h,r*1.4,a1,lightZ1);
lightY1=lightFuncY(h,r*1.4,a1,lightZ1);
plot3(lightX1,lightY1,lightZ1+.1,'</span><span class="token builtin class-name">.</span><span class="token string">','</span>LineWidth<span class="token string">',2,'</span>Color<span class="token string">',[253,249,220]/255,'</span>MarkerSize<span class="token string">',4)
lightZ1=linspace(4,25-4,45);a1=0.3*pi;
lightX1=lightFuncX(h,r*1.2,a1,lightZ1);
lightY1=lightFuncY(h,r*1.2,a1,lightZ1);
scatter3(lightX1,lightY1,lightZ1+.1,300,'</span>Marker<span class="token string">','</span>o<span class="token string">','</span>MarkerEdgeColor<span class="token string">','</span>none<span class="token string">',...
    '</span>MarkerFaceColor<span class="token string">',[253,249,220]/255,'</span>MarkerFaceAlpha<span class="token string">',.08)
scatter3(lightX1,lightY1,lightZ1+.1,50,'</span>Marker<span class="token string">','</span>o<span class="token string">','</span>MarkerEdgeColor<span class="token string">','</span>none<span class="token string">',...
    '</span>MarkerFaceColor<span class="token string">',[231,217,129]./255,'</span>MarkerFaceAlpha<span class="token string">',.95)
lightZ1=linspace(4,25-5,100);a1=-0.15*pi;
lightX1=lightFuncX(h,r*1.2,a1,lightZ1);
lightY1=lightFuncY(h,r*1.2,a1,lightZ1);
plot3(lightX1,lightY1,lightZ1+.1,'</span><span class="token builtin class-name">.</span><span class="token string">','</span>LineWidth<span class="token string">',2,'</span>Color<span class="token string">','</span>w<span class="token string">','</span>MarkerSize<span class="token string">',4)
lightZ1=linspace(4,25-6,17);a1=-0.15*pi;
lightX1=lightFuncX(h,r*1.2,a1,lightZ1);
lightY1=lightFuncY(h,r*1.2,a1,lightZ1);
scatter3(lightX1,lightY1,lightZ1+.1,300,'</span>Marker<span class="token string">','</span>o<span class="token string">','</span>MarkerEdgeColor<span class="token string">','</span>none<span class="token string">',...
    '</span>MarkerFaceColor<span class="token string">',[253,249,220]/255,'</span>MarkerFaceAlpha<span class="token string">',.08)
scatter3(lightX1,lightY1,lightZ1+.1,70,'</span>Marker<span class="token string">','</span>o<span class="token string">','</span>MarkerEdgeColor<span class="token string">','</span>none<span class="token string">',...
    '</span>MarkerFaceColor<span class="token string">','</span>w<span class="token string">','</span>MarkerFaceAlpha<span class="token string">',.8)
% 绘制礼物
drawPresent(2,-4,0,3,3,2);
drawPresent(-4,3,0,2,3,1.5);
drawPresent(5,3,0,4,3,3);
drawPresent(-7,-5,0,5,3,1);
drawPresent(-9,-6,0,2,2,2);
drawPresent(0,4,0,4,3,3);
    function drawPresent(dx,dy,dz,scalex,scaley,scalez)
        presentX=[0.5 0.5 0.5 0.5 0.5; 0 1 1 0 0; 0 1 1 0 0; 0 1 1 0 0; 0.5 0.5 0.5 0.5 0.5];
        presentY=[0.5 0.5 0.5 0.5 0.5; 0 0 1 1 0; 0 0 1 1 0; 0 0 1 1 0; 0.5 0.5 0.5 0.5 0.5];
        presentZ=[0 0 0 0 0;0 0 0 0 0; 0.5 0.5 0.5 0.5 0.5; 1 1 1 1 1; 1 1 1 1 1];
        randColorMap=cat(3,repmat(rand,[5,5])./2+.5,repmat(rand,[5,5])./2+.5,repmat(rand,[5,5])./2+.5);
        surf((presentX*scalex+dx),(presentY*scaley+dy), (presentZ*scalez+dz),'</span>CData<span class="token string">',randColorMap);
        shading interp
    end
% 绘制雪花
snowXYZ1=rand(70,3);
snowXYZ1(:,1:2)=snowXYZ1(:,1:2).*26-13;
snowXYZ1(:,3)=snowXYZ1(:,3).*30;
snowXYZ2=rand(90,3);
snowXYZ2(:,1:2)=snowXYZ2(:,1:2).*26-13;
snowXYZ2(:,3)=snowXYZ2(:,3).*30;
snowHdl1=plot3(snowXYZ1(:,1),snowXYZ1(:,2),snowXYZ1(:,3),'</span>*<span class="token string">','</span>Color<span class="token string">',[1 1 1]);
snowHdl2=plot3(snowXYZ2(:,1),snowXYZ2(:,2),snowXYZ2(:,3),'</span><span class="token builtin class-name">.</span><span class="token string">','</span>Color',<span class="token punctuation">[</span>.6,.6,.6<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
% 旋转图像、雪花飘落

<span class="token keyword">for</span> <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span>:100
    
    <span class="token assign-left variable">starLightHdl.SizeData</span><span class="token operator">=</span><span class="token number">6000</span>+sin<span class="token punctuation">(</span>i/5<span class="token punctuation">)</span>.*1000<span class="token punctuation">;</span>
    snowXYZ1<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span><span class="token operator">=</span>snowXYZ1<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span>-.1<span class="token punctuation">;</span>snowXYZ2<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span><span class="token operator">=</span>snowXYZ2<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span>-.01<span class="token punctuation">;</span>
    snowXYZ1<span class="token punctuation">(</span>snowXYZ1<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0,3</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span>snowXYZ2<span class="token punctuation">(</span>snowXYZ2<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0,3</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token assign-left variable">snowHdl1.XData</span><span class="token operator">=</span>snowXYZ1<span class="token punctuation">(</span>:,1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token assign-left variable">snowHdl1.YData</span><span class="token operator">=</span>snowXYZ1<span class="token punctuation">(</span>:,2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token assign-left variable">snowHdl1.ZData</span><span class="token operator">=</span>snowXYZ1<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token assign-left variable">snowHdl2.XData</span><span class="token operator">=</span>snowXYZ2<span class="token punctuation">(</span>:,1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token assign-left variable">snowHdl2.YData</span><span class="token operator">=</span>snowXYZ2<span class="token punctuation">(</span>:,2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token assign-left variable">snowHdl2.ZData</span><span class="token operator">=</span>snowXYZ2<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    view<span class="token punctuation">(</span><span class="token punctuation">[</span>i,4<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    drawnow<span class="token punctuation">;</span>
    pause<span class="token punctuation">(</span>.05<span class="token punctuation">)</span>
end

end

</code></pre> 
<p>效果示意图：<br> <img src="https://images2.imgbox.com/d2/b0/ToK62yMk_o.gif" alt="在这里插入图片描述"></p> 
<h3><a id="gif_122"></a>四、编码实现（添加gif功能）</h3> 
<blockquote> 
 <p>提示：详细展示实现相关创意的代码。</p> 
</blockquote> 
<pre><code class="prism language-bash"><span class="token keyword">function</span> XmasTree2022

path<span class="token punctuation">(</span>path,<span class="token string">'E:\new_matlab_Tool\CDT-master\cdt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

% 生成树本体曲面
<span class="token assign-left variable">treeFunc</span><span class="token operator">=</span>@<span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">[</span>h<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>,h<span class="token punctuation">(</span>h<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&amp;</span>h<span class="token operator">&lt;=</span><span class="token number">3</span><span class="token punctuation">)</span>.*0+1.5,8-<span class="token punctuation">(</span>h<span class="token punctuation">(</span>h<span class="token operator">&gt;</span><span class="token number">3</span><span class="token punctuation">)</span>-3<span class="token punctuation">)</span>.*0.3636<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>X,Y,Z<span class="token punctuation">]</span><span class="token operator">=</span>cylinder<span class="token punctuation">(</span>treeFunc<span class="token punctuation">(</span><span class="token number">0</span>:0.2:25<span class="token punctuation">))</span><span class="token punctuation">;</span>
% 随机移动树冠上点的位置
<span class="token assign-left variable">Z</span><span class="token operator">=</span>Z.*25<span class="token punctuation">;</span>
<span class="token assign-left variable">cnt1</span><span class="token operator">=</span><span class="token number">1</span>:21<span class="token punctuation">;</span><span class="token assign-left variable">cnt2</span><span class="token operator">=</span><span class="token number">16</span>:126<span class="token punctuation">;</span>
<span class="token assign-left variable">angle</span><span class="token operator">=</span>atan<span class="token punctuation">(</span>Y<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span>./X<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">))</span><span class="token punctuation">;</span>
<span class="token assign-left variable">treeDiffusion</span><span class="token operator">=</span>rand<span class="token punctuation">(</span><span class="token number">111,21</span><span class="token punctuation">)</span>-0.5<span class="token punctuation">;</span>
X<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span><span class="token operator">=</span>X<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span>+cos<span class="token punctuation">(</span>angle<span class="token punctuation">)</span>.*treeDiffusion<span class="token punctuation">;</span>
Y<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span><span class="token operator">=</span>Y<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span>+sin<span class="token punctuation">(</span>angle<span class="token punctuation">)</span>.*treeDiffusion<span class="token punctuation">;</span>
Z<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span><span class="token operator">=</span>Z<span class="token punctuation">(</span>cnt2,cnt1<span class="token punctuation">)</span>+<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token number">111,21</span><span class="token punctuation">)</span>-0.5<span class="token punctuation">)</span>.*0.5<span class="token punctuation">;</span>
X<span class="token punctuation">(</span>:,end<span class="token punctuation">)</span><span class="token operator">=</span>X<span class="token punctuation">(</span>:,1<span class="token punctuation">)</span><span class="token punctuation">;</span>Y<span class="token punctuation">(</span>:,end<span class="token punctuation">)</span><span class="token operator">=</span>Y<span class="token punctuation">(</span>:,1<span class="token punctuation">)</span><span class="token punctuation">;</span>Z<span class="token punctuation">(</span>:,end<span class="token punctuation">)</span><span class="token operator">=</span>Z<span class="token punctuation">(</span>:,1<span class="token punctuation">)</span><span class="token punctuation">;</span>
% 绘制圣诞树
<span class="token assign-left variable">ax</span><span class="token operator">=</span>gca<span class="token punctuation">;</span>hold on<span class="token punctuation">;</span>
set<span class="token punctuation">(</span>gcf,<span class="token string">'Color'</span>,<span class="token punctuation">[</span><span class="token number">22,32</span>,51<span class="token punctuation">]</span>./255<span class="token punctuation">)</span><span class="token punctuation">;</span>
surfl<span class="token punctuation">(</span>X,Y,Z,<span class="token string">'light'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token assign-left variable">r</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.0430</span>:<span class="token punctuation">(</span><span class="token number">0.2061</span>/50<span class="token punctuation">)</span>:0.2491<span class="token punctuation">)</span><span class="token string">';
g=(0.2969:(0.4012/50):0.6981)'</span><span class="token punctuation">;</span>
<span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.0625</span>:<span class="token punctuation">(</span><span class="token number">0.2696</span>/50<span class="token punctuation">)</span>:0.3321<span class="token punctuation">)</span><span class="token string">';
Cmap=[r,g,b];Cmap(1:6,:)=Cmap(1:6,:).*0+[77,63,5]/265;
% 绘制标题
annotation('</span>textbox<span class="token string">',[.45,.86,.1,.1],'</span>String<span class="token string">','</span>Merry Christmas<span class="token string">','</span>fontsize<span class="token string">',23,...
    '</span>fontweight<span class="token string">','</span>Bold<span class="token string">','</span>FontName<span class="token string">','</span>Cambria<span class="token string">','</span>HorizontalAlignment<span class="token string">','</span>center<span class="token string">','</span>Color<span class="token string">','</span>w<span class="token string">','</span>EdgeColor<span class="token string">','</span>none<span class="token string">')
% 当前坐标区域修饰
set(ax,'</span>XLim<span class="token string">',[-10 10],'</span>YLim<span class="token string">',[-10,10],'</span>ZLim<span class="token string">',[0,30],'</span>PlotBoxAspectRatio<span class="token string">',[1,1,1.2],...
    '</span>XColor<span class="token string">','</span>none<span class="token string">','</span>YColor<span class="token string">','</span>none<span class="token string">','</span>ZColor<span class="token string">','</span>none<span class="token string">','</span>Color<span class="token string">',[22,32,51]./255,'</span>View<span class="token string">',[-37.5,4],...
    '</span>Colormap<span class="token string">',jet,'</span>Position<span class="token string">',[0,0,1,.9],'</span>Tag<span class="token string">',char([100,105,115,112,40,39,20316,32773,...
    58,115,108,97,110,100,97,114,101,114,39,41]));
lighting phong;shading interp;eval(ax.Tag)
% 绘制星星
plot3(0,0,25.6,'</span>p<span class="token string">', '</span>MarkerSize<span class="token string">',24,'</span>MarkerFaceColor<span class="token string">',[255,223,153]/255,'</span>MarkerEdgeColor<span class="token string">','</span>none<span class="token string">','</span>LineWidth<span class="token string">', 1);
starLightHdl=scatter3(0,0,25,6000,'</span>o<span class="token string">','</span>MarkerFaceColor<span class="token string">','</span>w<span class="token string">','</span>MarkerEdgeColor<span class="token string">','</span>w<span class="token string">','</span>MarkerEdgeAlpha<span class="token string">',0,'</span>MarkerFaceAlpha<span class="token string">', 0.1);
% 绘制圣诞树上的彩灯
lightFuncX=@(h,r,a,z) (h-z)./h.*r.*cos(a.*z);
lightFuncY=@(h,r,a,z) (h-z)./h.*r.*sin(a.*z);
h=25;r=8;
lightZ1=linspace(4,25-4,200);a1=0.3*pi;
lightX1=lightFuncX(h,r*1.4,a1,lightZ1);
lightY1=lightFuncY(h,r*1.4,a1,lightZ1);
plot3(lightX1,lightY1,lightZ1+.1,'</span><span class="token builtin class-name">.</span><span class="token string">','</span>LineWidth<span class="token string">',2,'</span>Color<span class="token string">',[253,249,220]/255,'</span>MarkerSize<span class="token string">',4)
lightZ1=linspace(4,25-4,45);a1=0.3*pi;
lightX1=lightFuncX(h,r*1.2,a1,lightZ1);
lightY1=lightFuncY(h,r*1.2,a1,lightZ1);
scatter3(lightX1,lightY1,lightZ1+.1,300,'</span>Marker<span class="token string">','</span>o<span class="token string">','</span>MarkerEdgeColor<span class="token string">','</span>none<span class="token string">',...
    '</span>MarkerFaceColor<span class="token string">',[253,249,220]/255,'</span>MarkerFaceAlpha<span class="token string">',.08)
scatter3(lightX1,lightY1,lightZ1+.1,50,'</span>Marker<span class="token string">','</span>o<span class="token string">','</span>MarkerEdgeColor<span class="token string">','</span>none<span class="token string">',...
    '</span>MarkerFaceColor<span class="token string">',[231,217,129]./255,'</span>MarkerFaceAlpha<span class="token string">',.95)
lightZ1=linspace(4,25-5,100);a1=-0.15*pi;
lightX1=lightFuncX(h,r*1.2,a1,lightZ1);
lightY1=lightFuncY(h,r*1.2,a1,lightZ1);
plot3(lightX1,lightY1,lightZ1+.1,'</span><span class="token builtin class-name">.</span><span class="token string">','</span>LineWidth<span class="token string">',2,'</span>Color<span class="token string">','</span>w<span class="token string">','</span>MarkerSize<span class="token string">',4)
lightZ1=linspace(4,25-6,17);a1=-0.15*pi;
lightX1=lightFuncX(h,r*1.2,a1,lightZ1);
lightY1=lightFuncY(h,r*1.2,a1,lightZ1);
scatter3(lightX1,lightY1,lightZ1+.1,300,'</span>Marker<span class="token string">','</span>o<span class="token string">','</span>MarkerEdgeColor<span class="token string">','</span>none<span class="token string">',...
    '</span>MarkerFaceColor<span class="token string">',[253,249,220]/255,'</span>MarkerFaceAlpha<span class="token string">',.08)
scatter3(lightX1,lightY1,lightZ1+.1,70,'</span>Marker<span class="token string">','</span>o<span class="token string">','</span>MarkerEdgeColor<span class="token string">','</span>none<span class="token string">',...
    '</span>MarkerFaceColor<span class="token string">','</span>w<span class="token string">','</span>MarkerFaceAlpha<span class="token string">',.8)
% 绘制礼物
drawPresent(2,-4,0,3,3,2);
drawPresent(-4,3,0,2,3,1.5);
drawPresent(5,3,0,4,3,3);
drawPresent(-7,-5,0,5,3,1);
drawPresent(-9,-6,0,2,2,2);
drawPresent(0,4,0,4,3,3);
    function drawPresent(dx,dy,dz,scalex,scaley,scalez)
        presentX=[0.5 0.5 0.5 0.5 0.5; 0 1 1 0 0; 0 1 1 0 0; 0 1 1 0 0; 0.5 0.5 0.5 0.5 0.5];
        presentY=[0.5 0.5 0.5 0.5 0.5; 0 0 1 1 0; 0 0 1 1 0; 0 0 1 1 0; 0.5 0.5 0.5 0.5 0.5];
        presentZ=[0 0 0 0 0;0 0 0 0 0; 0.5 0.5 0.5 0.5 0.5; 1 1 1 1 1; 1 1 1 1 1];
        randColorMap=cat(3,repmat(rand,[5,5])./2+.5,repmat(rand,[5,5])./2+.5,repmat(rand,[5,5])./2+.5);
        surf((presentX*scalex+dx),(presentY*scaley+dy), (presentZ*scalez+dz),'</span>CData<span class="token string">',randColorMap);
        shading interp
    end
% 绘制雪花
snowXYZ1=rand(70,3);
snowXYZ1(:,1:2)=snowXYZ1(:,1:2).*26-13;
snowXYZ1(:,3)=snowXYZ1(:,3).*30;
snowXYZ2=rand(90,3);
snowXYZ2(:,1:2)=snowXYZ2(:,1:2).*26-13;
snowXYZ2(:,3)=snowXYZ2(:,3).*30;
snowHdl1=plot3(snowXYZ1(:,1),snowXYZ1(:,2),snowXYZ1(:,3),'</span>*<span class="token string">','</span>Color<span class="token string">',[1 1 1]);
snowHdl2=plot3(snowXYZ2(:,1),snowXYZ2(:,2),snowXYZ2(:,3),'</span><span class="token builtin class-name">.</span><span class="token string">','</span>Color<span class="token string">',[.6,.6,.6]);
% 旋转图像、雪花飘落

gif('</span>XmasTree2022.gif<span class="token string">','</span>frame',gcf<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span>:100
    
    <span class="token assign-left variable">starLightHdl.SizeData</span><span class="token operator">=</span><span class="token number">6000</span>+sin<span class="token punctuation">(</span>i/5<span class="token punctuation">)</span>.*1000<span class="token punctuation">;</span>
    snowXYZ1<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span><span class="token operator">=</span>snowXYZ1<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span>-.1<span class="token punctuation">;</span>snowXYZ2<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span><span class="token operator">=</span>snowXYZ2<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span>-.01<span class="token punctuation">;</span>
    snowXYZ1<span class="token punctuation">(</span>snowXYZ1<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0,3</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span>snowXYZ2<span class="token punctuation">(</span>snowXYZ2<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0,3</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token assign-left variable">snowHdl1.XData</span><span class="token operator">=</span>snowXYZ1<span class="token punctuation">(</span>:,1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token assign-left variable">snowHdl1.YData</span><span class="token operator">=</span>snowXYZ1<span class="token punctuation">(</span>:,2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token assign-left variable">snowHdl1.ZData</span><span class="token operator">=</span>snowXYZ1<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token assign-left variable">snowHdl2.XData</span><span class="token operator">=</span>snowXYZ2<span class="token punctuation">(</span>:,1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token assign-left variable">snowHdl2.YData</span><span class="token operator">=</span>snowXYZ2<span class="token punctuation">(</span>:,2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token assign-left variable">snowHdl2.ZData</span><span class="token operator">=</span>snowXYZ2<span class="token punctuation">(</span>:,3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    view<span class="token punctuation">(</span><span class="token punctuation">[</span>i,4<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    drawnow<span class="token punctuation">;</span>
    gif<span class="token punctuation">;</span>
    pause<span class="token punctuation">(</span>.05<span class="token punctuation">)</span>
end

end

</code></pre> 
<h3><a id="colormap_233"></a>五、其他的colormap</h3> 
<p><img src="https://images2.imgbox.com/53/25/5kzmX1QS_o.gif" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="httpsimgblogcsdnimgcn18a66f8917e8487396fe7b4e4594e7b4gif_237"></a><img src="https://images2.imgbox.com/f0/92/oBHbuk1d_o.gif" alt="在这里插入图片描述"></h3> 
<p><img src="https://images2.imgbox.com/5a/0c/slOlbl7l_o.gif" alt="在这里插入图片描述"></p> 
<h3><a id="_242"></a>六、祝愿</h3> 
<p>Merry Christmas! I hope you have a wonderful holiday season filled with joy, laughter, and the love of friends and family. May all your dreams and wishes come true in the new year. Happy holidays!</p> 
<p>参考链接：<a href="https://zhuanlan.zhihu.com/p/591770510" rel="nofollow">MATLAB | 一起来绘制有雪花飘落的圣诞树叭</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e4e63b3ec48e8f68d732043cd79a1d83/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">RabbitTemplate怎么发送消息</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8022a75b651309fc7cadb4ed1c9fe2bc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">clickhouse中使用concat()函数无法拼接问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>