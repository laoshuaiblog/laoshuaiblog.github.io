<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>首页模块丨前端uniapp微信小程序项目 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/d6dee52624c0c5ab8477e094ff48d0ca/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="首页模块丨前端uniapp微信小程序项目">
  <meta property="og:description" content="小兔鲜儿 - 首页模块 涉及知识点：组件通信、组件自动导入、数据渲染、触底分页加载、下拉刷新等。
自定义导航栏 参考效果：自定义导航栏的样式需要适配不同的机型。
操作步骤
准备组件
隐藏默认导航栏，修改文字颜色
样式适配 -&amp;gt; 安全区域
静态结构
新建业务组件：src/pages/index/componets/CustomNavbar.vue
&amp;lt;script setup lang=&#34;ts&#34;&amp;gt; // &amp;lt;/script&amp;gt; &amp;lt;template&amp;gt; &amp;lt;view class=&#34;navbar&#34;&amp;gt; &amp;lt;!-- logo文字 --&amp;gt; &amp;lt;view class=&#34;logo&#34;&amp;gt; &amp;lt;image class=&#34;logo-image&#34; src=&#34;@/static/images/logo.png&#34;&amp;gt;&amp;lt;/image&amp;gt; &amp;lt;text class=&#34;logo-text&#34;&amp;gt;新鲜 · 亲民 · 快捷&amp;lt;/text&amp;gt; &amp;lt;/view&amp;gt; &amp;lt;!-- 搜索条 --&amp;gt; &amp;lt;view class=&#34;search&#34;&amp;gt; &amp;lt;text class=&#34;icon-search&#34;&amp;gt;搜索商品&amp;lt;/text&amp;gt; &amp;lt;text class=&#34;icon-scan&#34;&amp;gt;&amp;lt;/text&amp;gt; &amp;lt;/view&amp;gt; &amp;lt;/view&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;style lang=&#34;scss&#34;&amp;gt; /* 自定义导航条 */ .navbar { background-image: url(@/static/images/navigator_bg.png); background-size: cover; position: relative; display: flex; flex-direction: column; padding-top: 20px; .logo { display: flex; align-items: center; height: 64rpx; padding-left: 30rpx; .">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-08-17T18:44:49+08:00">
    <meta property="article:modified_time" content="2023-08-17T18:44:49+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">首页模块丨前端uniapp微信小程序项目</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="___0"></a>小兔鲜儿 - 首页模块</h2> 
<p>涉及知识点：组件通信、组件自动导入、数据渲染、触底分页加载、下拉刷新等。</p> 
<h3><a id="_4"></a>自定义导航栏</h3> 
<p><strong>参考效果</strong>：自定义导航栏的样式需要适配不同的机型。</p> 
<p><img src="https://images2.imgbox.com/eb/45/E0MJ7BY8_o.png" alt="在这里插入图片描述"></p> 
<p><strong>操作步骤</strong></p> 
<ol><li> <p>准备组件</p> </li><li> <p>隐藏默认导航栏，修改文字颜色</p> </li><li> <p>样式适配 -&gt; 安全区域</p> </li></ol> 
<p><strong>静态结构</strong></p> 
<p>新建业务组件：<code>src/pages/index/componets/CustomNavbar.vue</code></p> 
<pre><code class="prism language-vue">&lt;script setup lang="ts"&gt;
//
&lt;/script&gt;

&lt;template&gt;
  &lt;view class="navbar"&gt;
    &lt;!-- logo文字 --&gt;
    &lt;view class="logo"&gt;
      &lt;image class="logo-image" src="@/static/images/logo.png"&gt;&lt;/image&gt;
      &lt;text class="logo-text"&gt;新鲜 · 亲民 · 快捷&lt;/text&gt;
    &lt;/view&gt;
    &lt;!-- 搜索条 --&gt;
    &lt;view class="search"&gt;
      &lt;text class="icon-search"&gt;搜索商品&lt;/text&gt;
      &lt;text class="icon-scan"&gt;&lt;/text&gt;
    &lt;/view&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;style lang="scss"&gt;
/* 自定义导航条 */
.navbar {
  background-image: url(@/static/images/navigator_bg.png);
  background-size: cover;
  position: relative;
  display: flex;
  flex-direction: column;
  padding-top: 20px;
  .logo {
    display: flex;
    align-items: center;
    height: 64rpx;
    padding-left: 30rpx;
    .logo-image {
      width: 166rpx;
      height: 39rpx;
    }
    .logo-text {
      flex: 1;
      line-height: 28rpx;
      color: #fff;
      margin: 2rpx 0 0 20rpx;
      padding-left: 20rpx;
      border-left: 1rpx solid #fff;
      font-size: 26rpx;
    }
  }
  .search {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 10rpx 0 26rpx;
    height: 64rpx;
    margin: 16rpx 20rpx;
    color: #fff;
    font-size: 28rpx;
    border-radius: 32rpx;
    background-color: rgba(255, 255, 255, 0.5);
  }
  .icon-search {
    &amp;::before {
      margin-right: 10rpx;
    }
  }
  .icon-scan {
    font-size: 30rpx;
    padding: 15rpx;
  }
}
&lt;/style&gt;
</code></pre> 
<h4><a id="_96"></a>安全区域</h4> 
<p>不同手机的安全区域不同，适配安全区域能防止页面重要内容被遮挡。</p> 
<p>可通过 <code>uni.getSystemInfoSync()</code> 获取屏幕边界到安全区的距离。</p> 
<p><img src="https://images2.imgbox.com/e0/b4/TXy7xVPB_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-hRSYBbIr-1692267231918)(./assets/home_picture_2.png)]"></p> 
<h4><a id="_105"></a>核心代码参考</h4> 
<p>自定义导航配置</p> 
<pre><code class="prism language-json"><span class="token comment">// src/pages.json</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"path"</span><span class="token operator">:</span> <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"style"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"navigationStyle"</span><span class="token operator">:</span> <span class="token string">"custom"</span><span class="token punctuation">,</span> <span class="token comment">// 隐藏默认导航</span>
    <span class="token string-property property">"navigationBarTextStyle"</span><span class="token operator">:</span> <span class="token string">"white"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"首页"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>组件安全区适配</p> 
<pre><code class="prism language-vue">&lt;!-- src/pages/index/componets/CustomNavbar.vue --&gt;
&lt;script&gt;
// 获取屏幕边界到安全区域距离
const { safeAreaInsets } = uni.getSystemInfoSync()
&lt;/script&gt;

&lt;template&gt;
  &lt;!-- 顶部占位 --&gt;
  &lt;view class="navbar" :style="{ paddingTop: safeAreaInsets?.top + 'px' }"&gt;
    &lt;!-- ...省略 --&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre> 
<h3><a id="_138"></a>通用轮播组件</h3> 
<p><strong>参考效果</strong></p> 
<p>小兔鲜儿项目中总共有两处广告位，分别位于【首页】和【商品分类页】。</p> 
<p>轮播图组件需要在首页和分类页使用，需要封装成通用组件。</p> 
<p><img src="https://images2.imgbox.com/cc/c9/5bDHZklu_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-FU0bFXmg-1692267231918)(./assets/home_picture_3.png)]"></p> 
<p><strong>静态结构</strong></p> 
<p>首页广告布局为独立的组件 <code>XtxSwiper</code> ，位于的 <code>src/components</code> 目录中。</p> 
<p>该组件定义了 <code>list</code> 属性接收外部传入的数据，内部通过小程序内置组件 <code>swiper</code> 展示首页广告的数据。</p> 
<p><strong>轮播图组件</strong></p> 
<p>静态结构：<code>src/components/XtxSwiper.vue</code></p> 
<pre><code class="prism language-vue">&lt;script setup lang="ts"&gt;
import { ref } from 'vue'

const activeIndex = ref(0)
&lt;/script&gt;

&lt;template&gt;
  &lt;view class="carousel"&gt;
    &lt;swiper :circular="true" :autoplay="false" :interval="3000"&gt;
      &lt;swiper-item&gt;
        &lt;navigator
          url="/pages/index/index"
          hover-class="none"
          class="navigator"
        &gt;
          &lt;image
            mode="aspectFill"
            class="image"
            src="https://pcapi-xiaotuxian-front-devtest.itheima.net/miniapp/uploads/slider_1.jpg"
          &gt;&lt;/image&gt;
        &lt;/navigator&gt;
      &lt;/swiper-item&gt;
      &lt;swiper-item&gt;
        &lt;navigator
          url="/pages/index/index"
          hover-class="none"
          class="navigator"
        &gt;
          &lt;image
            mode="aspectFill"
            class="image"
            src="https://pcapi-xiaotuxian-front-devtest.itheima.net/miniapp/uploads/slider_2.jpg"
          &gt;&lt;/image&gt;
        &lt;/navigator&gt;
      &lt;/swiper-item&gt;
      &lt;swiper-item&gt;
        &lt;navigator
          url="/pages/index/index"
          hover-class="none"
          class="navigator"
        &gt;
          &lt;image
            mode="aspectFill"
            class="image"
            src="https://pcapi-xiaotuxian-front-devtest.itheima.net/miniapp/uploads/slider_3.jpg"
          &gt;&lt;/image&gt;
        &lt;/navigator&gt;
      &lt;/swiper-item&gt;
    &lt;/swiper&gt;
    &lt;!-- 指示点 --&gt;
    &lt;view class="indicator"&gt;
      &lt;text
        v-for="(item, index) in 3"
        :key="item"
        class="dot"
        :class="{ active: index === activeIndex }"
      &gt;&lt;/text&gt;
    &lt;/view&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;style lang="scss"&gt;
:host {
  display: block;
  height: 280rpx;
}
/* 轮播图 */
.carousel {
  height: 100%;
  position: relative;
  overflow: hidden;
  transform: translateY(0);
  background-color: #efefef;
  .indicator {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 16rpx;
    display: flex;
    justify-content: center;
    .dot {
      width: 30rpx;
      height: 6rpx;
      margin: 0 8rpx;
      border-radius: 6rpx;
      background-color: rgba(255, 255, 255, 0.4);
    }
    .active {
      background-color: #fff;
    }
  }
  .navigator,
  .image {
    width: 100%;
    height: 100%;
  }
}
&lt;/style&gt;
</code></pre> 
<p><strong>自动导入全局组件</strong></p> 
<p>参考配置</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 组件自动引入规则</span>
  <span class="token string-property property">"easycom"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 是否开启自动扫描 @/components/$1/$1.vue 组件</span>
    <span class="token string-property property">"autoscan"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 以正则方式自定义组件匹配规则</span>
    <span class="token string-property property">"custom"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// uni-ui 规则如下配置</span>
      <span class="token string-property property">"^uni-(.*)"</span><span class="token operator">:</span> <span class="token string">"@dcloudio/uni-ui/lib/uni-$1/uni-$1.vue"</span><span class="token punctuation">,</span>
      <span class="token comment">// 以 Xtx 开头的组件，在 components 目录中查找</span>
      <span class="token string-property property">"^Xtx(.*)"</span><span class="token operator">:</span> <span class="token string">"@/components/Xtx$1.vue"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>全局组件类型声明</strong></p> 
<p>Volor 插件说明：<a href="https://github.com/vuejs/language-tools">Vue Language Tools</a></p> 
<pre><code class="prism language-ts"><span class="token comment">// src/types/components.d.ts</span>
<span class="token keyword">import</span> XtxSwiper <span class="token keyword">from</span> '<span class="token punctuation">.</span><span class="token operator">/</span>XtxSwiper<span class="token punctuation">.</span>vue’
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'@vue/runtime-core'</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">GlobalComponents</span> <span class="token punctuation">{<!-- --></span>
    XtxSwiper<span class="token operator">:</span> <span class="token keyword">typeof</span> XtxSwiper
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_295"></a>获取数据</h4> 
<p><strong>接口调用</strong></p> 
<p>该业务功能对于前端来说比较简单，只需调用后端提供的接口将获得的数据展现，结合运营人员的营销策略跳转到对应的链接地址即可。</p> 
<p>接口地址：/home/banner</p> 
<p>请求方式：GET</p> 
<p>请求参数：</p> 
<p><strong>Query:</strong></p> 
<table><thead><tr><th>字段名</th><th>必须</th><th>默认值</th><th>备注</th></tr></thead><tbody><tr><td>distributionSite</td><td>否</td><td>1</td><td>活动 banner 位置，1 代表首页，2 代表商品分类页，默认为 1</td></tr></tbody></table> 
<p><strong>请求封装</strong></p> 
<pre><code class="prism language-ts"><span class="token comment">// 存放路径: src/services/home.ts</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> BannerItem <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/types/home'</span>

<span class="token comment">/**
 * 首页-广告区域-小程序
 * @param distributionSite 广告区域展示位置（投放位置 投放位置，1为首页，2为分类商品页） 默认是1
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getHomeBannerAPI</span> <span class="token operator">=</span> <span class="token punctuation">(</span>distributionSite <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">http</span><span class="token generic class-name"><span class="token operator">&lt;</span>BannerItem<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    method<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'/home/banner'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      distributionSite<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>类型声明</strong></p> 
<p>存放路径：<code>src/types/home.d.ts</code></p> 
<pre><code class="prism language-ts"><span class="token comment">/** 首页-广告区域数据类型 */</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">BannerItem</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/** 跳转链接 */</span>
  hrefUrl<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** id */</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 图片链接 */</span>
  imgUrl<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 跳转类型 */</span>
  type<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>最后，将获得的数据结合模板语法渲染到页面中。</p> 
<h4><a id="_354"></a>参考代码</h4> 
<p>轮播图组件：<code>src\components\XtxSwiper.vue</code></p> 
<pre><code class="prism language-vue">&lt;script setup lang="ts"&gt;
import type { BannerItem } from '@/types/home'
import { ref } from 'vue'

const activeIndex = ref(0)

// 当 swiper 下标发生变化时触发
const onChange: UniHelper.SwiperOnChange = (ev) =&gt; {
  // ! 非空断言，主观上排除掉空值情况
  activeIndex.value = ev.detail!.current
}
// 定义 props 接收
defineProps&lt;{
  list: BannerItem[]
}&gt;()
&lt;/script&gt;

&lt;template&gt;
  &lt;view class="carousel"&gt;
    &lt;swiper
      :circular="true"
      :autoplay="false"
      :interval="3000"
      @change="onChange"
    &gt;
      &lt;swiper-item v-for="item in list" :key="item.id"&gt;
        &lt;navigator
          url="/pages/index/index"
          hover-class="none"
          class="navigator"
        &gt;
          &lt;image mode="aspectFill" class="image" :src="item.imgUrl"&gt;&lt;/image&gt;
        &lt;/navigator&gt;
      &lt;/swiper-item&gt;
    &lt;/swiper&gt;
    &lt;!-- 指示点 --&gt;
    &lt;view class="indicator"&gt;
      &lt;text
        v-for="(item, index) in list"
        :key="item.id"
        class="dot"
        :class="{ active: index === activeIndex }"
      &gt;&lt;/text&gt;
    &lt;/view&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre> 
<h3><a id="_407"></a>首页分类</h3> 
<p><strong>参考效果</strong></p> 
<p><img src="https://images2.imgbox.com/fc/fc/Fdr56vts_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-o1ZbSpTK-1692267231919)(./assets/home_picture_4.png)]"></p> 
<p><strong>准备工作</strong></p> 
<ol><li>准备组件，只有首页使用</li><li>导入并使用组件</li><li>设置首页底色为 <code>#F7F7F7</code></li></ol> 
<p><strong>静态结构</strong></p> 
<p>前台类目布局为独立的组件 <code>CategoryPanel</code>属于首页的业务组件，存放到首页的 <code>components</code> 目录中。</p> 
<pre><code class="prism language-vue">&lt;script setup lang="ts"&gt;
//
&lt;/script&gt;

&lt;template&gt;
  &lt;view class="category"&gt;
    &lt;navigator
      class="category-item"
      hover-class="none"
      url="/pages/index/index"
      v-for="item in 10"
      :key="item"
    &gt;
      &lt;image
        class="icon"
        src="https://pcapi-xiaotuxian-front-devtest.itheima.net/miniapp/images/nav_icon_1.png"
      &gt;&lt;/image&gt;
      &lt;text class="text"&gt;居家&lt;/text&gt;
    &lt;/navigator&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;style lang="scss"&gt;
/* 前台类目 */
.category {
  margin: 20rpx 0 0;
  padding: 10rpx 0;
  display: flex;
  flex-wrap: wrap;
  min-height: 328rpx;

  .category-item {
    width: 150rpx;
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
    box-sizing: border-box;

    .icon {
      width: 100rpx;
      height: 100rpx;
    }
    .text {
      font-size: 26rpx;
      color: #666;
    }
  }
}
&lt;/style&gt;
</code></pre> 
<h4><a id="_477"></a>获取数据</h4> 
<p><strong>接口调用</strong></p> 
<p>该业务功能对于前端来说比较简单，只需调用后端提供的接口将获得的数据展现。</p> 
<p>接口地址：/home/category/mutli</p> 
<p>请求方式：GET</p> 
<p>请求参数：无</p> 
<p><strong>请求封装</strong></p> 
<pre><code class="prism language-ts"><span class="token comment">// services/home.ts</span>
<span class="token comment">/**
 * 首页-前台分类-小程序
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getHomeCategoryAPI</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">http</span><span class="token generic class-name"><span class="token operator">&lt;</span>CategoryItem<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    method<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'/home/category/mutli'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>数据类型</strong></p> 
<pre><code class="prism language-typescript"><span class="token comment">/** 首页-前台类目数据类型 */</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">CategoryItem</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/** 图标路径 */</span>
  icon<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** id */</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 分类名称 */</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>最后，将获得的数据结合模板语法渲染到页面中。</p> 
<h4><a id="_520"></a>参考代码</h4> 
<p><code>src\pages\index\components\CategoryPanel.vue</code></p> 
<pre><code class="prism language-vue">&lt;script setup lang="ts"&gt;
import type { CategoryItem } from '@/types/home'

// 定义 props 接收数据
defineProps&lt;{
  list: CategoryItem[]
}&gt;()
&lt;/script&gt;

&lt;template&gt;
  &lt;view class="category"&gt;
    &lt;navigator
      class="category-item"
      hover-class="none"
      url="/pages/index/index"
      v-for="item in list"
      :key="item.id"
    &gt;
      &lt;image class="icon" :src="item.icon"&gt;&lt;/image&gt;
      &lt;text class="text"&gt;{<!-- -->{ item.name }}&lt;/text&gt;
    &lt;/navigator&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre> 
<h3><a id="_550"></a>热门推荐</h3> 
<p>热门推荐功能，后端根据用户的消费习惯等信息向用户推荐的一系列商品，前端负责展示这些商品展示给用户。</p> 
<p><strong>参考效果</strong></p> 
<p><img src="https://images2.imgbox.com/89/bc/Zv0aQRBU_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-UD7hpSlD-1692267231919)(./assets/home_picture_5.png)]"></p> 
<p><strong>静态结构</strong></p> 
<p>热门推荐布局为独立的组件 <code>HotPanel</code>，属于首页的业务组件，存放到首页的 <code>components</code> 目录中。</p> 
<pre><code class="prism language-vue">&lt;script setup lang="ts"&gt;
//
&lt;/script&gt;

&lt;template&gt;
  &lt;!-- 推荐专区 --&gt;
  &lt;view class="panel hot"&gt;
    &lt;view class="item" v-for="item in 4" :key="item"&gt;
      &lt;view class="title"&gt;
        &lt;text class="title-text"&gt;特惠推荐&lt;/text&gt;
        &lt;text class="title-desc"&gt;精选全攻略&lt;/text&gt;
      &lt;/view&gt;
      &lt;navigator hover-class="none" url="/pages/hot/hot" class="cards"&gt;
        &lt;image
          class="image"
          mode="aspectFit"
          src="https://pcapi-xiaotuxian-front-devtest.itheima.net/miniapp/uploads/goods_small_1.jpg"
        &gt;&lt;/image&gt;
        &lt;image
          class="image"
          mode="aspectFit"
          src="https://pcapi-xiaotuxian-front-devtest.itheima.net/miniapp/uploads/goods_small_2.jpg"
        &gt;&lt;/image&gt;
      &lt;/navigator&gt;
    &lt;/view&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;style lang="scss"&gt;
/* 热门推荐 */
.hot {
  display: flex;
  flex-wrap: wrap;
  min-height: 508rpx;
  margin: 20rpx 20rpx 0;
  border-radius: 10rpx;
  background-color: #fff;

  .title {
    display: flex;
    align-items: center;
    padding: 24rpx 24rpx 0;
    font-size: 32rpx;
    color: #262626;
    position: relative;
    .title-desc {
      font-size: 24rpx;
      color: #7f7f7f;
      margin-left: 18rpx;
    }
  }

  .item {
    display: flex;
    flex-direction: column;
    width: 50%;
    height: 254rpx;
    border-right: 1rpx solid #eee;
    border-top: 1rpx solid #eee;
    .title {
      justify-content: start;
    }
    &amp;:nth-child(2n) {
      border-right: 0 none;
    }
    &amp;:nth-child(-n + 2) {
      border-top: 0 none;
    }
    .image {
      width: 150rpx;
      height: 150rpx;
    }
  }
  .cards {
    flex: 1;
    padding: 15rpx 20rpx;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
}
&lt;/style&gt;
</code></pre> 
<h4><a id="_648"></a>获取数据</h4> 
<p><strong>接口调用</strong></p> 
<p>该业务功能对于前端来说比较简单，只需调用后端提供的接口将获得的数据展现。</p> 
<p>接口地址：/home/hot/mutli</p> 
<p>请求方式：GET</p> 
<p>请求参数：</p> 
<p><strong>Headers:</strong></p> 
<table><thead><tr><th>字段名称</th><th>是否必须</th><th>默认值</th><th>备注</th></tr></thead><tbody><tr><td>source-client</td><td>是</td><td>无</td><td>后端程序区分接口调用者，miniapp 代表小程序端</td></tr></tbody></table> 
<p>成功响应结果：</p> 
<table><thead><tr><th>字段名称</th><th>数据类型</th><th>备注</th></tr></thead><tbody><tr><td>id</td><td>string</td><td>ID</td></tr><tr><td>title</td><td>string</td><td>推荐标题</td></tr><tr><td>type</td><td>number</td><td>推荐类型</td></tr><tr><td>alt</td><td>string</td><td>推荐说明</td></tr><tr><td>pictures</td><td>array[string]</td><td>图片集合[ 图片路径 ]</td></tr></tbody></table> 
<p><strong>类型声明</strong></p> 
<pre><code class="prism language-ts"><span class="token comment">/** 首页-热门推荐数据类型 */</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">HotItem</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/** 说明 */</span>
  alt<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** id */</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 图片集合[ 图片路径 ] */</span>
  pictures<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">/** 跳转地址 */</span>
  target<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 标题 */</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 推荐类型 */</span>
  type<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>接口封装</strong></p> 
<pre><code class="prism language-ts"><span class="token comment">// services/home.ts</span>
<span class="token comment">/**
 * 首页-热门推荐-小程序
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getHomeHotAPI</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">http</span><span class="token generic class-name"><span class="token operator">&lt;</span>HotItem<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    method<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'/home/hot/mutli'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>最后将获得的数据结合模板语法渲染到页面中。</p> 
<h4><a id="_713"></a>参考代码</h4> 
<p><code>src\pages\index\components\HotPanel.vue</code></p> 
<pre><code class="prism language-vue">&lt;script setup lang="ts"&gt;
import type { HotItem } from '@/types/home'

// 定义 props 接收数据
defineProps&lt;{
  list: HotItem[]
}&gt;()
&lt;/script&gt;

&lt;template&gt;
  &lt;!-- 推荐专区 --&gt;
  &lt;view class="panel hot"&gt;
    &lt;view class="item" v-for="item in list" :key="item.id"&gt;
      &lt;view class="title"&gt;
        &lt;text class="title-text"&gt;{<!-- -->{ item.title }}&lt;/text&gt;
        &lt;text class="title-desc"&gt;{<!-- -->{ item.alt }}&lt;/text&gt;
      &lt;/view&gt;
      &lt;navigator
        hover-class="none"
        :url="`/pages/hot/hot?type=${item.type}`"
        class="cards"
      &gt;
        &lt;image
          v-for="src in item.pictures"
          :key="src"
          class="image"
          mode="aspectFit"
          :src="src"
        &gt;&lt;/image&gt;
      &lt;/navigator&gt;
    &lt;/view&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre> 
<h3><a id="_753"></a>猜你喜欢(重点难点)</h3> 
<p><strong>参考效果</strong></p> 
<p>猜你喜欢功能，后端根据用户的浏览记录等信息向用户随机推荐的一系列商品，前端负责把商品在<strong>多个页面中展示</strong>。</p> 
<p><img src="https://images2.imgbox.com/3e/dc/gaUpMWPu_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-wF9mLZGG-1692267231919)(./assets/home_picture_6.png)]"></p> 
<p><strong>准备工作</strong></p> 
<ol><li> <p>准备组件 (通用组件，多页面使用)</p> </li><li> <p>定义组件类型</p> </li><li> <p>准备 <code>scroll-view</code> 滚动容器</p> </li><li> <p>设置 <code>page</code> 和 <code>scroll-view</code> 样式</p> </li></ol> 
<p><strong>静态结构</strong></p> 
<p>猜你喜欢是一个通用组件 <code>XtxGuess</code>，多个页面会用到该组件，存放到 <code>src/components</code> 目录中。</p> 
<pre><code class="prism language-vue">&lt;script setup lang="ts"&gt;
//
&lt;/script&gt;

&lt;template&gt;
  &lt;!-- 猜你喜欢 --&gt;
  &lt;view class="caption"&gt;
    &lt;text class="text"&gt;猜你喜欢&lt;/text&gt;
  &lt;/view&gt;
  &lt;view class="guess"&gt;
    &lt;navigator
      class="guess-item"
      v-for="item in 10"
      :key="item"
      :url="`/pages/goods/goods?id=4007498`"
    &gt;
      &lt;image
        class="image"
        mode="aspectFill"
        src="https://pcapi-xiaotuxian-front-devtest.itheima.net/miniapp/uploads/goods_big_1.jpg"
      &gt;&lt;/image&gt;
      &lt;view class="name"&gt;
        德国THORE男表 超薄手表男士休闲简约夜光石英防水直径40毫米
      &lt;/view&gt;
      &lt;view class="price"&gt;
        &lt;text class="small"&gt;¥&lt;/text&gt;
        &lt;text&gt;899.00&lt;/text&gt;
      &lt;/view&gt;
    &lt;/navigator&gt;
  &lt;/view&gt;
  &lt;view class="loading-text"&gt; 正在加载... &lt;/view&gt;
&lt;/template&gt;

&lt;style lang="scss"&gt;
:host {
  display: block;
}
/* 分类标题 */
.caption {
  display: flex;
  justify-content: center;
  line-height: 1;
  padding: 36rpx 0 40rpx;
  font-size: 32rpx;
  color: #262626;
  .text {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0 28rpx 0 30rpx;

    &amp;::before,
    &amp;::after {
      content: '';
      width: 20rpx;
      height: 20rpx;
      background-image: url(@/static/images/bubble.png);
      background-size: contain;
      margin: 0 10rpx;
    }
  }
}

/* 猜你喜欢 */
.guess {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  padding: 0 20rpx;
  .guess-item {
    width: 345rpx;
    padding: 24rpx 20rpx 20rpx;
    margin-bottom: 20rpx;
    border-radius: 10rpx;
    overflow: hidden;
    background-color: #fff;
  }
  .image {
    width: 304rpx;
    height: 304rpx;
  }
  .name {
    height: 75rpx;
    margin: 10rpx 0;
    font-size: 26rpx;
    color: #262626;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }
  .price {
    line-height: 1;
    padding-top: 4rpx;
    color: #cf4444;
    font-size: 26rpx;
  }
  .small {
    font-size: 80%;
  }
}
// 加载提示文字
.loading-text {
  text-align: center;
  font-size: 28rpx;
  color: #666;
  padding: 20rpx 0;
}
&lt;/style&gt;
</code></pre> 
<p><strong>全局组件类型</strong></p> 
<pre><code class="prism language-ts"><span class="token comment">// types/components.d.ts</span>
<span class="token keyword">import</span> XtxSwiper <span class="token keyword">from</span> <span class="token string">'@/components/XtxSwiper.vue'</span>
<span class="token keyword">import</span> XtxGuess <span class="token keyword">from</span> <span class="token string">'@/components/XtxGuess.vue'</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'@vue/runtime-core'</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">GlobalComponents</span> <span class="token punctuation">{<!-- --></span>
    XtxSwiper<span class="token operator">:</span> <span class="token keyword">typeof</span> XtxSwiper
    XtxGuess<span class="token operator">:</span> <span class="token keyword">typeof</span> XtxGuess
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 组件实例类型</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">XtxGuessInstance</span> <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> XtxGuess<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="_907"></a>获取数据</h4> 
<p><strong>接口调用</strong></p> 
<p>该业务功能对于前端来说比较简单，只需调用后端提供的接口将获得的数据展现。</p> 
<p>接口地址：/home/goods/guessLike</p> 
<p>请求方式：GET</p> 
<p>请求参数：</p> 
<p><strong>Query:</strong></p> 
<table><thead><tr><th>字段名称</th><th>是否必须</th><th>默认值</th><th>备注</th></tr></thead><tbody><tr><td>page</td><td>否</td><td>1</td><td>分页的页码</td></tr><tr><td>pageSize</td><td>否</td><td>10</td><td>每页数据的条数</td></tr></tbody></table> 
<p><strong>请求封装</strong></p> 
<pre><code class="prism language-ts"><span class="token comment">// src/services/home.ts</span>
<span class="token comment">/**
 * 猜你喜欢-小程序
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getHomeGoodsGuessLikeAPI</span> <span class="token operator">=</span> <span class="token punctuation">(</span>data<span class="token operator">?</span><span class="token operator">:</span> PageParams<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">http</span><span class="token generic class-name"><span class="token operator">&lt;</span>PageResult<span class="token operator">&lt;</span>GuessItem<span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    method<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'/home/goods/guessLike'</span><span class="token punctuation">,</span>
    data<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>类型声明</strong></p> 
<p>通用分页结果类型如下，新建 <code>src/types/global.d.ts</code> 文件：</p> 
<pre><code class="prism language-ts"><span class="token comment">/** 通用分页结果类型 */</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">PageResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/** 列表数据 */</span>
  items<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">/** 总条数 */</span>
  counts<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token comment">/** 当前页数 */</span>
  page<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token comment">/** 总页数 */</span>
  pages<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token comment">/** 每页条数 */</span>
  pageSize<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>猜你喜欢-商品类型如下，存放到 <code>src/types/home.d.ts</code> 文件：</p> 
<pre><code class="prism language-typescript"><span class="token comment">/** 猜你喜欢-商品类型 */</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">GuessItem</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/** 商品描述 */</span>
  desc<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 商品折扣 */</span>
  discount<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token comment">/** id */</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 商品名称 */</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 商品已下单数量 */</span>
  orderNum<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token comment">/** 商品图片 */</span>
  picture<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 商品价格 */</span>
  price<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>通用分页参数类型如下，存放到 <code>src/types/global.d.ts</code> 文件：</p> 
<pre><code class="prism language-ts"><span class="token comment">/** 通用分页参数类型 */</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">PageParams</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/** 页码：默认值为 1 */</span>
  page<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token comment">/** 页大小：默认值为 10 */</span>
  pageSize<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_996"></a>核心业务</h4> 
<ol><li>子组件内部获取数据</li><li>父滚动触底需加载分页</li><li>组件通讯，子调父</li></ol> 
<h4><a id="_1002"></a>参考代码</h4> 
<p>项目首页</p> 
<pre><code class="prism language-vue">// pages/index/index.vue
&lt;script setup lang="ts"&gt;
import type { XtxGuessInstance } from '@/types/components'
import { ref } from 'vue'
// 获取猜你喜欢组件实例
const guessRef = ref&lt;XtxGuessInstance&gt;()

// 滚动触底事件
const onScrolltolower = () =&gt; {
  guessRef.value?.getMore()
}
&lt;/script&gt;

&lt;template&gt;
  &lt;!-- 滚动容器 --&gt;
  &lt;scroll-view scroll-y @scrolltolower="onScrolltolower"&gt;
    &lt;!-- 猜你喜欢 --&gt;
    &lt;XtxGuess ref="guessRef" /&gt;
  &lt;/scroll-view&gt;
&lt;/template&gt;
</code></pre> 
<p>猜你喜欢组件</p> 
<pre><code class="prism language-vue">// src/components/XtxGuess.vue
&lt;script setup lang="ts"&gt;
import { getHomeGoodsGuessLikeAPI } from '@/services/home'
import type { PageParams } from '@/types/global'
import type { GuessItem } from '@/types/home'
import { onMounted, ref } from 'vue'

// 分页参数
const pageParams: Required&lt;PageParams&gt; = {
  page: 1,
  pageSize: 10,
}
// 猜你喜欢的列表
const guessList = ref&lt;GuessItem[]&gt;([])
// 已结束标记
const finish = ref(false)
// 获取猜你喜欢数据
const getHomeGoodsGuessLikeData = async () =&gt; {
  // 退出分页判断
  if (finish.value === true) {
    return uni.showToast({ icon: 'none', title: '没有更多数据~' })
  }
  const res = await getHomeGoodsGuessLikeAPI(pageParams)
  // 数组追加
  guessList.value.push(...res.result.items)
  // 分页条件
  if (pageParams.page &lt; res.result.pages) {
    // 页码累加
    pageParams.page++
  } else {
    finish.value = true
  }
}
// 重置数据
const resetData = () =&gt; {
  pageParams.page = 1
  guessList.value = []
  finish.value = false
}
// 组件挂载完毕
onMounted(() =&gt; {
  getHomeGoodsGuessLikeData()
})
// 暴露方法
defineExpose({
  resetData,
  getMore: getHomeGoodsGuessLikeData,
})
&lt;/script&gt;

&lt;template&gt;
  &lt;!-- 猜你喜欢 --&gt;
  &lt;view class="caption"&gt;
    &lt;text class="text"&gt;猜你喜欢&lt;/text&gt;
  &lt;/view&gt;
  &lt;view class="guess"&gt;
    &lt;navigator
      class="guess-item"
      v-for="item in guessList"
      :key="item.id"
      :url="`/pages/goods/goods`"
    &gt;
      &lt;image class="image" mode="aspectFill" :src="item.picture"&gt;&lt;/image&gt;
      &lt;view class="name"&gt; {<!-- -->{ item.name }} &lt;/view&gt;
      &lt;view class="price"&gt;
        &lt;text class="small"&gt;¥&lt;/text&gt;
        &lt;text&gt;{<!-- -->{ item.price }}&lt;/text&gt;
      &lt;/view&gt;
    &lt;/navigator&gt;
  &lt;/view&gt;
  &lt;view class="loading-text"&gt;
    {<!-- -->{ finish ? '没有更多数据~' : '正在加载...' }}
  &lt;/view&gt;
&lt;/template&gt;
</code></pre> 
<h3><a id="_1108"></a>下拉刷新</h3> 
<p>下拉刷新实际上是在用户操作下拉交互时<strong>重新调用接口</strong>，然后将新获取的数据再次渲染到页面中。</p> 
<p><strong>操作步骤</strong></p> 
<p>基于 <code>scroll-view</code> 组件实现下拉刷新，需要通过以下方式来实现下拉刷新的功能。</p> 
<ul><li>配置 <code>refresher-enabled</code> 属性，开启下拉刷新交互</li><li>监听 <code>@refresherrefresh</code> 事件，判断用户是否执行了下拉操作</li><li>配置 <code>refresher-triggered</code> 属性，关闭下拉状态</li></ul> 
<h4><a id="_1120"></a>参考代码</h4> 
<p>猜你喜欢组件定义重置数据的方法</p> 
<pre><code class="prism language-ts"><span class="token comment">// src/components/XtxGuess.vue</span>
<span class="token comment">// 重置数据</span>
<span class="token keyword">const</span> <span class="token function-variable function">resetData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  pageParams<span class="token punctuation">.</span>page <span class="token operator">=</span> <span class="token number">1</span>
  guessList<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  finish<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
<span class="token comment">// 暴露方法</span>
<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  resetData<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>首页触发下拉刷新</p> 
<pre><code class="prism language-vue">// src/pages/index/index.vue
&lt;script setup lang="ts"&gt;
// 下拉刷新状态
const isTriggered = ref(false)
// 自定义下拉刷新被触发
const onRefresherrefresh = async () =&gt; {
  // 开启动画
  isTriggered.value = true
  // 重置猜你喜欢组件数据
  guessRef.value?.resetData() // 加载数据
  await Promise.all([
    getHomeBannerData(),
    getHomeCategoryData(),
    getHomeHotData(),
  ]) // 关闭动画
  isTriggered.value = false
}
&lt;/script&gt;

&lt;!-- 滚动容器 --&gt;
&lt;scroll-view
  refresher-enabled
  @refresherrefresh="onRefresherrefresh"
  :refresher-triggered="isTriggered"
  class="scroll-view"
  scroll-y
&gt;
  …省略
&lt;/scroll-view&gt;
</code></pre> 
<h3><a id="_1172"></a>骨架屏</h3> 
<p>骨架屏是页面的一个空白版本，通常会在页面完全渲染之前，通过一些灰色的区块大致勾勒出轮廓，待数据加载完成后，再替换成真实的内容。</p> 
<p><strong>参考效果</strong></p> 
<p>骨架屏作用是缓解用户等待时的焦虑情绪，属于用户体验优化方案。</p> 
<p><img src="https://images2.imgbox.com/f0/51/bVJmx1OP_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-hvwFMIfD-1692267231920)(./assets/home_picture_7.png)]"></p> 
<p><strong>生成骨架屏</strong></p> 
<p>微信开发者工具提供了自动生成骨架屏代码的能力，使用时需要把自动生成的 <code>xxx.skeleton.vue</code> 和 <code>xxx.skeleton.wxss</code> 封装成 <code>vue</code> 组件。</p> 
<p><img src="https://images2.imgbox.com/c9/73/HAUX6FQX_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-9P4bahQD-1692267231920)(./assets/home_picture_8.png)]"></p> 
<h3><a id="____1188"></a>视频学习 》 》》</h3> 
<p><a href="https://www.bilibili.com/video/BV1Bp4y1379L/?spm_id_from=333.999.0.0&amp;vd_source=02b3b35523aa39a49b4ddb14fb332acc" rel="nofollow">黑马程序员前端项目uniapp小兔鲜儿微信小程序项目视频教程</a></p> 
<p>全网首套用 vue3 加 TS 写的 uniapp 项目， 里面大量封装自己的组件库，课程从 uni-app 基础入手，按照9大电商业务模块逐步实现完整的电商购物流程业务；涵盖了猜你喜欢、热门推荐、商品分类、商品详情、微信登录、用户管理、地址管理、购物车管理、订单管理等功能。包含微信登录，微信支付等业务。一套代码多端全面覆盖微信小程序端、H5端、APP端。</p> 
<h3><a id="_1195"></a>教程笔记更新中</h3> 
<p>1 、<a href="https://blog.csdn.net/itcast_cn/article/details/132320923">前端项目uniapp小兔鲜儿微信小程序项目起步</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bf71ba0b238f7025c6f8290d5266eb8f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">clickhouse-数据导入导出方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/63ce3bd890576a5411843cb59ac84d0a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue3中使用mock.js</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>