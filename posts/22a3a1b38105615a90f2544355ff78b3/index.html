<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>项目中添加module作为依赖及删除依赖模块的正确姿势 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/22a3a1b38105615a90f2544355ff78b3/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="项目中添加module作为依赖及删除依赖模块的正确姿势">
  <meta property="og:description" content="添加模块作为依赖时，不小心出来个从错误 Error:Dependency UtilsApp:app:unspecified on project myapplication resolves to an APK archive which is not supported as a compilation dependency. File: D:\ProgramFiles(x86)\UtilsApp\app\build\outputs\apk\app-release-unsigned.apk 然后又出来个错误 Error:Library projects cannot set applicationId. applicationId is set to &#39;com.utils.utilsapp&#39; in default config. 所以总结了一下添加模块作为依赖的正确姿势。 错误出现地点及解决 在我的 UtilsApp 项目中有两个模块，现在我让 myapplication模块作为项目核心模块，app模块作为依赖。即为项目 myapplication添加依赖模块 app： 首先打开 打开Project Structure 选择应用的Dependencies,点击右边加号选择3添加模块依赖 选中作为依赖的模块 下面就表示把app模块加入了依赖，点击ok，gradle会自动sync 此时可以打开build.gradle(module:myapplication),可以看到依赖中自动添加了： compile project ( &#39;:app&#39; ) 此时gradle会sync出一个错误： Error:Dependency UtilsApp:app:unspecified on project myapplication resolves to an APK archive which is not supported as a compilation dependency.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2016-07-13T10:30:11+08:00">
    <meta property="article:modified_time" content="2016-07-13T10:30:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">项目中添加module作为依赖及删除依赖模块的正确姿势</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  添加模块作为依赖时，不小心出来个从错误 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="font-family:''">Error:Dependency UtilsApp:app:unspecified on project myapplication resolves to an APK archive which is not supported as a compilation dependency. File: D:\ProgramFiles(x86)\UtilsApp\app\build\outputs\apk\app-release-unsigned.apk</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  然后又出来个错误 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="font-family:''">Error:Library projects cannot set applicationId. applicationId is set to 'com.utils.utilsapp' in default config.</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="font-family:''">所以总结了一下添加模块作为依赖的正确姿势。</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="font-family:''"></span> 
 <h3 id="codota" style="">错误出现地点及解决</h3> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="font-family:''">在我的</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">UtilsApp</span> 
 <span style="font-family:''; background-color:window; font-size:10.5pt; line-height:1.5">项目中有两个模块，现在我让</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">myapplication模块作为项目核心模块，app模块作为依赖。即为项目</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">myapplication添加依赖模块</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">app：</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="font-family:''">首先打开</span> 
 <span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',微软雅黑,arial,宋体,sans-serif; font-size:16px; line-height:28px; text-align:justify; background-color:window">打开Project Structure</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <img src="https://images2.imgbox.com/a3/b3/5ALdOT3y_o.jpg" border="0" alt=""> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  选择应用的Dependencies,点击右边加号选择3添加模块依赖 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <img src="https://images2.imgbox.com/b9/74/7DQvKnUN_o.jpg" border="0" alt="" style="background-color:window; font-size:10.5pt; line-height:1.5"> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  选中作为依赖的模块 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <img src="https://images2.imgbox.com/c7/84/kmhuJCyw_o.jpg" border="0" alt="" style="background-color:window; font-size:10.5pt; line-height:1.5"> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  下面就表示把app模块加入了依赖，点击ok，gradle会自动sync 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <img src="https://images2.imgbox.com/e6/ba/fPh7a03Z_o.jpg" border="0" alt="" style="background-color:window; font-size:10.5pt; line-height:1.5"> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  此时可以打开build.gradle(module:myapplication),可以看到依赖中自动添加了： 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5">compile project</span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(126,48,5)">(</span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(0,128,0)"><strong>':app'</strong></span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(126,48,5)">)</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <img src="https://images2.imgbox.com/9e/31/zedvQXoI_o.jpg" border="0" alt="" style="background-color:window; font-size:10.5pt; line-height:1.5"> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  此时gradle会sync出一个错误： 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">Error:Dependency UtilsApp:app:unspecified on project myapplication resolves to an APK archive which is not supported as a compilation dependency. File: D:\ProgramFiles(x86)\UtilsApp\app\build\outputs\apk\app-release-unsigned.apk</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  意思是说， 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">UtilsApp中的</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">依赖模块</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">app，作为一个完整依赖，在</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">myapplication构建APK时，没有指明，这是不支持的行为。</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <img src="https://images2.imgbox.com/69/94/PU9ayAem_o.jpg" border="0" alt="" style="background-color:window; font-size:10.5pt; line-height:1.5"> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  这是因为需要把 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">build.gradle(module:app)中的：</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5">apply </span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(0,128,0)"><strong>plugin</strong></span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5">: </span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(0,128,0)"><strong>'com.android.application'改为：</strong></span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5">apply </span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(0,128,0)"><strong>plugin</strong></span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5">: </span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(0,128,0)"><strong>'com.android.library'</strong></span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="line-height:1.5"><span style="font-family:\Microsoft YaHei UI\;">如果此时你认为好了，进行</span></span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">sync </span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">gradle，将会再爆出一个错误：</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">Error:Library projects cannot set applicationId. applicationId is set to 'com.utils.utilsapp' in default config.</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">意思是说，依赖项中不能设置</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5"> applicationId，</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5"> applicationId是</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">com.utils.utilsapp的默认配置信息，表示项目主模块项的ID。</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <img src="https://images2.imgbox.com/d9/6d/bK2smaxz_o.jpg" border="0" alt="" style="background-color:window; font-size:10.5pt; line-height:1.5"> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <h3 id="codota" style=""><span style="font-family:\Helvetica Neue\, Helvetica,Arial,sans-serif; color:#333333"><span style="font-size:25px; font-weight:normal"><em><span style="line-height:1.5">项目中添加</span><span style="line-height:1.5">module作为依赖的正确姿势：</span></em></span></span></h3> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">1，</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">把</span> 
 <span style="font-size:10.5pt; line-height:1.5; background-color:window">build.gradle(module:依赖)中的：</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5">apply </span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(0,128,0)"><strong>plugin</strong></span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5">: </span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(0,128,0)"><strong>'com.android.application'</strong></span> 
 <span style="line-height:1.5"><span style="font-family:\Microsoft Yahei\, 微软雅黑,arial,宋体,sans-serif; font-size:14px; color:#333333">改为：</span></span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5">apply </span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(0,128,0)"><strong>plugin</strong></span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5">: </span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(0,128,0)"><strong>'com.android.library'</strong></span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  删除： 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5">applicationId </span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(0,128,0)"><strong>"com.utils.utilsapp"</strong></span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  2，从 
 <span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',微软雅黑,arial,宋体,sans-serif; font-size:16px; line-height:28px; text-align:justify; background-color:window">Project Structure添加模块依赖，或直接在</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">build.gradle(module:项目主模块)中的依赖中添加：</span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5">compile project</span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(126,48,5)">(</span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(0,128,0)"><strong>':依赖模块名'</strong></span> 
 <span style="font-family:'MV Boli'; font-size:12pt; background-color:window; line-height:1.5; color:rgb(126,48,5)">)</span> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">,</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="background-color:window; font-size:10.5pt; line-height:1.5">3，<span style="font-family:'Microsoft YaHei UI'; font-size:10.5pt; line-height:1.5; background-color:window">sync </span><span style="font-family:'Microsoft YaHei UI'; font-size:10.5pt; line-height:1.5; background-color:window">gradle</span></span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <h3 id="codota" style=""><span style="font-family:\Helvetica Neue,Helvetica\, Arial,sans-serif; color:#333333"><span style="font-size:25px; font-weight:normal"><em><span style="letter-spacing:normal; line-height:21px; widows:auto">在项目中删除作为</span><span style="letter-spacing:normal; line-height:1.5; widows:auto">依赖的</span><span style="letter-spacing:normal; line-height:1.5; widows:auto">module的正确姿势：</span></em></span></span></h3> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <div> 
  <span style="background-color:window; font-size:10.5pt; line-height:1.5">1，</span> 
  <span style="widows:auto">从</span> 
  <span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',微软雅黑,arial,宋体,sans-serif; font-size:16px; line-height:28px; background-color:window">Project Structure删除模块依赖，或直接在</span> 
  <span style="font-size:10.5pt; line-height:1.5; widows:auto; background-color:window">build.gradle(module:项目主模块)中的依赖中删除：</span> 
  <span style="widows:auto; font-family:'MV Boli'; font-size:12pt; line-height:1.5; background-color:window">compile project</span> 
  <span style="widows:auto; font-family:'MV Boli'; font-size:12pt; line-height:1.5; color:rgb(126,48,5); background-color:window">(</span> 
  <span style="widows:auto; font-family:'MV Boli'; font-size:12pt; line-height:1.5; color:rgb(0,128,0); background-color:window"><strong>':依赖模块名'</strong></span> 
  <span style="widows:auto; font-family:'MV Boli'; font-size:12pt; line-height:1.5; color:rgb(126,48,5); background-color:window">)</span> 
  <span style="font-size:10.5pt; line-height:1.5; widows:auto; background-color:window">,</span> 
 </div> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="font-size:10.5pt; line-height:1.5; background-color:window"><span style="font-family:'Microsoft YaHei UI'; font-size:10.5pt; line-height:1.5; background-color:window">2，<span style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px">sync </span></span><span style="font-family:'Microsoft YaHei UI'; font-size:10.5pt; line-height:1.5; background-color:window">gradle</span></span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="font-size:10.5pt; line-height:1.5; background-color:window">3，在settings.gradle中删除模块名，sync now后模块会自动删除消失了.如若还要删除模块源文件，就需要进入项目的文件目录下删除了</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <img src="https://images2.imgbox.com/40/45/o3hb2G2b_o.png" alt=""> 
 <br> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  在点击 
 <span style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px">sync now后，会弹出提示，点击ok：</span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px"><img src="https://images2.imgbox.com/14/59/jQyS8V7l_o.png" alt=""><br> </span> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  注意，如果先进行3，会出现如下错误，然后继续进行1错误会消失： 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <img src="https://images2.imgbox.com/8d/86/sZWjeZ9h_o.png" alt=""> 
 <br> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <img src="https://images2.imgbox.com/c3/ea/y11sPZVG_o.png" alt=""> 
 <img src="https://images2.imgbox.com/01/25/DErXoJ4A_o.png" alt=""> 
 <br> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <br> 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto">
  推荐阅读： 
</div> 
<div style="font-family:'Microsoft YaHei UI'; font-size:14px; line-height:21px; widows:auto"> 
 <span style="font-size:10.5pt; line-height:1.5; background-color:window"><a target="_blank" href="http://ask.android-studio.org/?/article/37" rel="nofollow noopener noreferrer">Android Studio大课堂 - 4.3.Coding - 使用第三方库</a><br> </span> 
</div> 
<div> 
 <span style="font-size:10.5pt; line-height:1.5; background-color:window"><br> </span> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c69d8cab649361b3fe44cf3ac80858bf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">统计正整数n的因数个数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3d8fbf369f7ec8989c756f3512e3e41a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">js中return false,return,return true的用法及区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>