<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>大数据毕业设计：python智慧交通大数据监控系统 交通可视化 物联网 Flask框架（源码）✅ - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/eb4ec3b4ce3ee26d7a325ec1c60c939b/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="大数据毕业设计：python智慧交通大数据监控系统 交通可视化 物联网 Flask框架（源码）✅">
  <meta property="og:description" content="毕业设计：2023-2024年计算机专业毕业设计选题汇总（建议收藏）
毕业设计：2023-2024年最新最全计算机专业毕设选题推荐汇总
🍅感兴趣的可以先收藏起来，点赞、关注不迷路，大家在毕设选题，项目以及论文编写等相关问题都可以给我留言咨询，希望帮助同学们顺利毕业 。🍅
1、项目介绍 技术栈：
Python语言、Flask框架、Echarts可视化、百度地图、sqlite数据库、HTML
智慧交通监控大数据系统是一个基于以上技术栈构建的系统，通过采集交通监控设备产生的数据，对数据进行处理和分析，然后使用Echarts可视化库将数据以图表的形式展示在Web页面上。百度地图可以用来显示交通状况、标注交通事件或热点区域。SQLite数据库用于存储交通监控设备采集的数据，支持数据的查询和管理。整个系统的前端界面则通过HTML来呈现给用户。
2、项目界面 （1）智慧交通大数据监控画面
（2）智慧交通大数据监控大屏
（3）智慧交通大数据监控地图
（4）智慧交通大数据监控统计分析
（5）智慧交通大数据监控系统后台数据管理
（6）智慧交通大数据监控数据统计分析
（7）注册登录界面
3、项目说明 技术栈描述：
Python语言：作为主要的开发语言，用于编写后端逻辑和数据处理。
Flask框架：用于构建Web应用程序，提供路由、请求处理和模板渲染等功能。
Echarts可视化：用于在Web页面中生成交互式图表，实现数据的可视化展示。
百度地图：通过百度地图API获取地理位置信息，实现地图显示和位置标注等功能。
SQLite数据库：作为轻量级的关系型数据库，存储系统中的监控数据。
HTML：用于构建前端用户界面，定义页面结构和内容展示。
智慧交通监控大数据系统是一个基于以上技术栈构建的系统，通过采集交通监控设备产生的数据，对数据进行处理和分析，然后使用Echarts可视化库将数据以图表的形式展示在Web页面上。百度地图可以用来显示交通状况、标注交通事件或热点区域。SQLite数据库用于存储交通监控设备采集的数据，支持数据的查询和管理。整个系统的前端界面则通过HTML来呈现给用户。
4、核心代码 from flask import session,redirect,request,render_template,url_for,Flask,jsonify from models import app import models from flask_security import Security, SQLAlchemySessionUserDatastore, \ UserMixin, RoleMixin, login_required, auth_token_required, http_auth_required,current_user from sqlalchemy import and_ user_datastore = SQLAlchemySessionUserDatastore(models.db.session, models.User, models.Role) security = Security(app, user_datastore) @app.route(&#39;/&#39;, methods=[&#39;GET&#39;, &#39;POST&#39;]) @app.route(&#39;/index&#39;, methods=[&#39;GET&#39;, &#39;POST&#39;]) def home(): stu_id = current_user.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-25T22:34:27+08:00">
    <meta property="article:modified_time" content="2024-02-25T22:34:27+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">大数据毕业设计：python智慧交通大数据监控系统 交通可视化 物联网 Flask框架（源码）✅</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <div class="blog-content-box"> 
 <div class="article-header-box"> 
 </div> 
</div> 
<p><a class="link-info" href="https://biyesheji0001.blog.csdn.net/article/details/134580993" rel="nofollow" title="毕业设计：2023-2024年计算机专业毕业设计选题汇总（建议收藏）">毕业设计：2023-2024年计算机专业毕业设计选题汇总（建议收藏）</a></p> 
<p><a class="link-info" href="https://blog.csdn.net/2201_75772776/article/details/133148685" title="[毕业设计]2023-2024年最新最全计算机专业毕设选题推荐汇总">毕业设计：2023-2024年最新最全计算机专业毕设选题推荐汇总</a></p> 
<p>🍅<strong>感兴趣的可以先收藏起来，点赞、关注不迷路，大家在毕设选题，项目以及论文编写等相关问题都可以给我留言咨询，希望帮助同学们顺利毕业 。</strong>🍅</p> 
<h3><a id="1_23"></a>1、项目介绍</h3> 
<p>技术栈：<br> Python语言、Flask框架、Echarts可视化、百度地图、sqlite数据库、HTML</p> 
<p>智慧交通监控大数据系统是一个基于以上技术栈构建的系统，通过采集交通监控设备产生的数据，对数据进行处理和分析，然后使用Echarts可视化库将数据以图表的形式展示在Web页面上。百度地图可以用来显示交通状况、标注交通事件或热点区域。SQLite数据库用于存储交通监控设备采集的数据，支持数据的查询和管理。整个系统的前端界面则通过HTML来呈现给用户。</p> 
<h3><a id="2_32"></a>2、项目界面</h3> 
<p>（1）智慧交通大数据监控画面</p> 
<p><img src="https://images2.imgbox.com/3c/a8/Lj4oIv4m_o.jpg" alt="在这里插入图片描述"></p> 
<p>（2）智慧交通大数据监控大屏</p> 
<p><img src="https://images2.imgbox.com/ea/ab/XgXr7X0f_o.jpg" alt="在这里插入图片描述"></p> 
<p>（3）智慧交通大数据监控地图<br> <img src="https://images2.imgbox.com/02/93/NOB9QJfq_o.jpg" alt="在这里插入图片描述"></p> 
<p>（4）智慧交通大数据监控统计分析</p> 
<p><img src="https://images2.imgbox.com/9d/a6/uj5mjzto_o.jpg" alt="在这里插入图片描述"></p> 
<p>（5）智慧交通大数据监控系统后台数据管理</p> 
<p><img src="https://images2.imgbox.com/61/c5/HUI3hHa5_o.jpg" alt="在这里插入图片描述"></p> 
<p>（6）智慧交通大数据监控数据统计分析</p> 
<p><img src="https://images2.imgbox.com/bb/37/X9glaFKJ_o.jpg" alt="在这里插入图片描述"></p> 
<p>（7）注册登录界面</p> 
<p><img src="https://images2.imgbox.com/ac/1d/McKxYOez_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="3_80"></a>3、项目说明</h3> 
<p>技术栈描述：</p> 
<p>Python语言：作为主要的开发语言，用于编写后端逻辑和数据处理。<br> Flask框架：用于构建Web应用程序，提供路由、请求处理和模板渲染等功能。<br> Echarts可视化：用于在Web页面中生成交互式图表，实现数据的可视化展示。<br> 百度地图：通过百度地图API获取地理位置信息，实现地图显示和位置标注等功能。<br> SQLite数据库：作为轻量级的关系型数据库，存储系统中的监控数据。<br> HTML：用于构建前端用户界面，定义页面结构和内容展示。<br> 智慧交通监控大数据系统是一个基于以上技术栈构建的系统，通过采集交通监控设备产生的数据，对数据进行处理和分析，然后使用Echarts可视化库将数据以图表的形式展示在Web页面上。百度地图可以用来显示交通状况、标注交通事件或热点区域。SQLite数据库用于存储交通监控设备采集的数据，支持数据的查询和管理。整个系统的前端界面则通过HTML来呈现给用户。</p> 
<h3><a id="4_96"></a>4、核心代码</h3> 
<pre><code class="prism language-python"><span class="token keyword">from</span> flask <span class="token keyword">import</span> session<span class="token punctuation">,</span>redirect<span class="token punctuation">,</span>request<span class="token punctuation">,</span>render_template<span class="token punctuation">,</span>url_for<span class="token punctuation">,</span>Flask<span class="token punctuation">,</span>jsonify
<span class="token keyword">from</span> models <span class="token keyword">import</span> app
<span class="token keyword">import</span> models
<span class="token keyword">from</span> flask_security <span class="token keyword">import</span> Security<span class="token punctuation">,</span> SQLAlchemySessionUserDatastore<span class="token punctuation">,</span> \
    UserMixin<span class="token punctuation">,</span> RoleMixin<span class="token punctuation">,</span> login_required<span class="token punctuation">,</span> auth_token_required<span class="token punctuation">,</span> http_auth_required<span class="token punctuation">,</span>current_user
<span class="token keyword">from</span> sqlalchemy <span class="token keyword">import</span> and_

user_datastore <span class="token operator">=</span> SQLAlchemySessionUserDatastore<span class="token punctuation">(</span>models<span class="token punctuation">.</span>db<span class="token punctuation">.</span>session<span class="token punctuation">,</span> models<span class="token punctuation">.</span>User<span class="token punctuation">,</span> models<span class="token punctuation">.</span>Role<span class="token punctuation">)</span>
security <span class="token operator">=</span> Security<span class="token punctuation">(</span>app<span class="token punctuation">,</span> user_datastore<span class="token punctuation">)</span>


<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    stu_id <span class="token operator">=</span> current_user<span class="token punctuation">.</span>is_anonymous
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token operator">**</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/carContrl'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">carContrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    stu_id <span class="token operator">=</span> current_user<span class="token punctuation">.</span>is_anonymous
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'carContrl.html'</span><span class="token punctuation">,</span> <span class="token operator">**</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/map'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    stu_id <span class="token operator">=</span> current_user<span class="token punctuation">.</span>is_anonymous
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'map.html'</span><span class="token punctuation">,</span> <span class="token operator">**</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/static1'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">static1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    stu_id <span class="token operator">=</span> current_user<span class="token punctuation">.</span>is_anonymous
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'static.html'</span><span class="token punctuation">,</span> <span class="token operator">**</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> os
<span class="token keyword">from</span> werkzeug<span class="token punctuation">.</span>utils <span class="token keyword">import</span> secure_filename
<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/message'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    stu_id <span class="token operator">=</span> current_user<span class="token punctuation">.</span>is_anonymous
    <span class="token keyword">if</span> stu_id<span class="token punctuation">:</span>
        <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'logins'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'message.html'</span><span class="token punctuation">,</span> <span class="token operator">**</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>
        title <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span>
        type1 <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span>
        ref <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'ref'</span><span class="token punctuation">)</span>
        <span class="token builtin">file</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>files<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span>
        user_input <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>

        basepath <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span>  <span class="token comment"># 当前文件所在路径</span>

        upload_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>basepath<span class="token punctuation">,</span> <span class="token string">'static/file'</span><span class="token punctuation">,</span> secure_filename<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">.</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 注意：没有的文件夹一定要先创建，不然会提示没有该路径</span>
        <span class="token comment"># upload_path = os.path.join(basepath, 'static/images','test.jpg')  #注意：没有的文件夹一定要先创建，不然会提示没有该路径</span>
        <span class="token builtin">file</span><span class="token punctuation">.</span>save<span class="token punctuation">(</span>upload_path<span class="token punctuation">)</span>

        content <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">)</span>

        models<span class="token punctuation">.</span>db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>add<span class="token punctuation">(</span>
            models<span class="token punctuation">.</span>Case_item<span class="token punctuation">(</span>
                title <span class="token operator">=</span> title<span class="token punctuation">,</span>
                <span class="token builtin">type</span> <span class="token operator">=</span> type1<span class="token punctuation">,</span>
                examine <span class="token operator">=</span> ref<span class="token punctuation">,</span>
                files <span class="token operator">=</span> upload_path<span class="token punctuation">,</span>
                conten <span class="token operator">=</span> content
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        models<span class="token punctuation">.</span>db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">)</span>



<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/table1'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">table1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    stu_id <span class="token operator">=</span> current_user<span class="token punctuation">.</span>is_anonymous
    <span class="token keyword">if</span> stu_id<span class="token punctuation">:</span>
        <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'logins'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        results <span class="token operator">=</span> models<span class="token punctuation">.</span>ShuJu<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'table1.html'</span><span class="token punctuation">,</span> <span class="token operator">**</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/add_project'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">add_project</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'add_project.html'</span><span class="token punctuation">,</span> <span class="token operator">**</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>
        name <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span>
        nameid <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'nameid'</span><span class="token punctuation">)</span>
        types <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'types'</span><span class="token punctuation">)</span>
        gjc <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'gjc'</span><span class="token punctuation">)</span>
        fanshi <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'fanshi'</span><span class="token punctuation">)</span>
        chetype <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'chetype'</span><span class="token punctuation">)</span>
        driversnumber <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'driversnumber'</span><span class="token punctuation">)</span>
        platenumber <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'platenumber'</span><span class="token punctuation">)</span>
        Truckpass <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'Truckpass'</span><span class="token punctuation">)</span>
        models<span class="token punctuation">.</span>db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>add<span class="token punctuation">(</span>
            models<span class="token punctuation">.</span>ShuJu<span class="token punctuation">(</span>
                name <span class="token operator">=</span> name<span class="token punctuation">,</span>
                nameid <span class="token operator">=</span> nameid<span class="token punctuation">,</span>
                types <span class="token operator">=</span> types<span class="token punctuation">,</span>
                gjc <span class="token operator">=</span> gjc<span class="token punctuation">,</span>
                fanshi <span class="token operator">=</span> fanshi<span class="token punctuation">,</span>
                chetype <span class="token operator">=</span> chetype<span class="token punctuation">,</span>
                driversnumber <span class="token operator">=</span> driversnumber<span class="token punctuation">,</span>
                platenumber <span class="token operator">=</span> platenumber<span class="token punctuation">,</span>
                Truckpass <span class="token operator">=</span> Truckpass
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        models<span class="token punctuation">.</span>db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string">u'新增成功'</span>


<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/up_project'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">up_project</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        <span class="token builtin">id</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span>
        data <span class="token operator">=</span> models<span class="token punctuation">.</span>ShuJu<span class="token punctuation">.</span>query<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'update_project.html'</span><span class="token punctuation">,</span> <span class="token operator">**</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>
        <span class="token builtin">id</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>form<span class="token punctuation">)</span>
        name <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span>
        nameid <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'nameid'</span><span class="token punctuation">)</span>
        types <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'types'</span><span class="token punctuation">)</span>
        gjc <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'gjc'</span><span class="token punctuation">)</span>
        fanshi <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'fanshi'</span><span class="token punctuation">)</span>
        chetype <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'chetype'</span><span class="token punctuation">)</span>
        driversnumber <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'driversnumber'</span><span class="token punctuation">)</span>
        platenumber <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'platenumber'</span><span class="token punctuation">)</span>
        Truckpass <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'Truckpass'</span><span class="token punctuation">)</span>

        data <span class="token operator">=</span> models<span class="token punctuation">.</span>ShuJu<span class="token punctuation">.</span>query<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        data<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        data<span class="token punctuation">.</span>nameid <span class="token operator">=</span> nameid
        data<span class="token punctuation">.</span>types <span class="token operator">=</span> types
        data<span class="token punctuation">.</span>gjc <span class="token operator">=</span> gjc
        data<span class="token punctuation">.</span>fanshi <span class="token operator">=</span> fanshi
        data<span class="token punctuation">.</span>chetype <span class="token operator">=</span> chetype
        data<span class="token punctuation">.</span>driversnumber <span class="token operator">=</span> driversnumber
        data<span class="token punctuation">.</span>platenumber <span class="token operator">=</span> platenumber
        data<span class="token punctuation">.</span>Truckpass <span class="token operator">=</span> Truckpass
        models<span class="token punctuation">.</span>db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string">u'更新成功'</span>



<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/tail_more'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">tail_more</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        results <span class="token operator">=</span> models<span class="token punctuation">.</span>Case_item<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'tail_more.html'</span><span class="token punctuation">,</span> <span class="token operator">**</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/delete_project'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">delete_project</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        <span class="token builtin">id</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span>
        data <span class="token operator">=</span> models<span class="token punctuation">.</span>ShuJu<span class="token punctuation">.</span>query<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">)</span>
        models<span class="token punctuation">.</span>db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>delete<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        models<span class="token punctuation">.</span>db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'/table1'</span><span class="token punctuation">)</span>


<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/get_table_admin'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">get_table_admin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        name <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span>
        nameid <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'nameid'</span><span class="token punctuation">)</span>
        type1 <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'type1'</span><span class="token punctuation">)</span>
        chetype <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'chetype'</span><span class="token punctuation">)</span>
        driversnumber <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'driversnumber'</span><span class="token punctuation">)</span>
        platenumber <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'platenumber'</span><span class="token punctuation">)</span>
        results <span class="token operator">=</span> models<span class="token punctuation">.</span>ShuJu<span class="token punctuation">.</span>query
        <span class="token keyword">if</span> name<span class="token punctuation">:</span>
            results <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>ShuJu<span class="token punctuation">.</span>name<span class="token punctuation">.</span>like<span class="token punctuation">(</span><span class="token string">'%{}%'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> nameid<span class="token punctuation">:</span>
            results <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>ShuJu<span class="token punctuation">.</span>nameid<span class="token operator">==</span>nameid<span class="token punctuation">)</span>
        <span class="token keyword">if</span> type1<span class="token punctuation">:</span>
            results <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>ShuJu<span class="token punctuation">.</span>types <span class="token operator">==</span> type1<span class="token punctuation">)</span>
        <span class="token keyword">if</span> chetype<span class="token punctuation">:</span>
            results <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>ShuJu<span class="token punctuation">.</span>chetype <span class="token operator">==</span> chetype<span class="token punctuation">)</span>
        <span class="token keyword">if</span> driversnumber<span class="token punctuation">:</span>
            results <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>ShuJu<span class="token punctuation">.</span>driversnumber <span class="token operator">==</span> driversnumber<span class="token punctuation">)</span>
        <span class="token keyword">if</span> platenumber<span class="token punctuation">:</span>
            results <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>ShuJu<span class="token punctuation">.</span>platenumber <span class="token operator">==</span> platenumber<span class="token punctuation">)</span>

        results <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        info_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> item <span class="token keyword">in</span> results<span class="token punctuation">:</span>
            info_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"id"</span><span class="token punctuation">:</span>item<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">:</span>item<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token string">"type1"</span><span class="token punctuation">:</span>item<span class="token punctuation">.</span>types<span class="token punctuation">,</span>
                              <span class="token string">"chetype"</span><span class="token punctuation">:</span>item<span class="token punctuation">.</span>chetype<span class="token punctuation">,</span><span class="token string">"driversnumber"</span><span class="token punctuation">:</span>item<span class="token punctuation">.</span>driversnumber<span class="token punctuation">,</span>
                              <span class="token string">"platenumber"</span><span class="token punctuation">:</span>item<span class="token punctuation">.</span>platenumber

                              <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span>info_list<span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/signups'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">signup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    uuid <span class="token operator">=</span> current_user<span class="token punctuation">.</span>is_anonymous
    <span class="token keyword">print</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span>

    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'account/register.html'</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>
        user <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span>
        email <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'email'</span><span class="token punctuation">)</span>
        password <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> models<span class="token punctuation">.</span>User<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>User<span class="token punctuation">.</span>username <span class="token operator">==</span> user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'account/register.html'</span><span class="token punctuation">,</span> error<span class="token operator">=</span><span class="token string">'账号名已被注册'</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> user <span class="token operator">==</span> <span class="token string">''</span> <span class="token keyword">or</span> password <span class="token operator">==</span> <span class="token string">''</span> <span class="token keyword">or</span> email <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'account/register.html'</span><span class="token punctuation">,</span> error<span class="token operator">=</span><span class="token string">'输入不能为空'</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            new_user <span class="token operator">=</span> user_datastore<span class="token punctuation">.</span>create_user<span class="token punctuation">(</span>username<span class="token operator">=</span>user<span class="token punctuation">,</span>email<span class="token operator">=</span>email<span class="token punctuation">,</span> password<span class="token operator">=</span>password<span class="token punctuation">)</span>
            normal_role <span class="token operator">=</span> user_datastore<span class="token punctuation">.</span>find_role<span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">)</span>
            models<span class="token punctuation">.</span>db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>add<span class="token punctuation">(</span>new_user<span class="token punctuation">)</span>
            user_datastore<span class="token punctuation">.</span>add_role_to_user<span class="token punctuation">(</span>new_user<span class="token punctuation">,</span> normal_role<span class="token punctuation">)</span>
            models<span class="token punctuation">.</span>db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
            login_user<span class="token punctuation">(</span>new_user<span class="token punctuation">,</span> remember<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">from</span> flask_security<span class="token punctuation">.</span>utils <span class="token keyword">import</span> login_user<span class="token punctuation">,</span> logout_user
<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/logins'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">logins</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    uuid <span class="token operator">=</span> current_user<span class="token punctuation">.</span>is_anonymous
    <span class="token keyword">if</span> <span class="token keyword">not</span> uuid<span class="token punctuation">:</span>
        <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method<span class="token operator">==</span><span class="token string">'GET'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'account/index.html'</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> request<span class="token punctuation">.</span>method<span class="token operator">==</span><span class="token string">'POST'</span><span class="token punctuation">:</span>
        user <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span>
        password <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span>
        data <span class="token operator">=</span> models<span class="token punctuation">.</span>User<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>and_<span class="token punctuation">(</span>models<span class="token punctuation">.</span>User<span class="token punctuation">.</span>username<span class="token operator">==</span>user<span class="token punctuation">,</span>models<span class="token punctuation">.</span>User<span class="token punctuation">.</span>password<span class="token operator">==</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> data<span class="token punctuation">:</span>
            <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'account/index.html'</span><span class="token punctuation">,</span>error<span class="token operator">=</span><span class="token string">'账号密码错误'</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            login_user<span class="token punctuation">(</span>data<span class="token punctuation">,</span> remember<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> data<span class="token punctuation">.</span>is_authenticated<span class="token punctuation">:</span>
                <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'/admin'</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>



<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/loginsout'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">loginsout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method<span class="token operator">==</span><span class="token string">'GET'</span><span class="token punctuation">:</span>
        logout_user<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'logins'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> 
<h3><a id="5_371"></a>5、源码获取方式</h3> 
<blockquote> 
 <p>🍅<strong>由于篇幅限制，获取完整文章或源码、代做项目的，查看我的【用户名】、【专栏名称】、【顶部选题链接】就可以找到我啦</strong>🍅</p> 
 <p>感兴趣的可以先收藏起来，点赞、关注不迷路，<strong>下方查看</strong>👇🏻<strong>获取联系方式</strong>👇🏻</p> 
</blockquote> 
<div> 
 <div></div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7f18efed4be5f76771dba5cae39d59f2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【财会】企业财税核算</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3a1ede7b63aa656903584d275381dc46/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">智慧校园|智慧校园管理小程序|基于微信小程序的智慧校园管理系统设计与实现(源码&#43;数据库&#43;文档)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>