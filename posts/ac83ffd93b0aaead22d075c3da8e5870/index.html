<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Windows下配置ftp服务器，使用QT实现文件上传和下载 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/ac83ffd93b0aaead22d075c3da8e5870/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Windows下配置ftp服务器，使用QT实现文件上传和下载">
  <meta property="og:description" content="1、Windows下配置ftp服务器 1.1、windows自带的ftp服务器配置 准备工作：在本地计算机创建一个用户并设置用户密码，后面可以使用这个用户测试ftp是否正确配置并投入使用。创建用户的过程就不啰嗦了，不会的朋友可以去百度如何创建用户。当然这里可以使用本地计算机已经创建的其他用户。 下面介绍配置windows自带的ftp服务器的步骤： 1、打开控制面板，左边有一个“打开或关闭Windows功能”选项，单击该选项，在弹出的窗口中找到 “Internet 信息服务”， 展开可以找到“FTP服务器”并勾选该选项，然后确定即可，估计要等个几分钟才 能安装好ftp服务器。如图所示： 2、右键桌面的“计算机”，选择“管理”（快捷方式：“运行”里面输入“compmgmt.msc”命令，回车即可）， 在窗口的 左边找到“服务和应用程序”选项，选择 “服务和应用程序”下的“Internet信息服务(IIS)管理器”； 3、在第2步弹出的窗口中，在里面嵌套着4个“小窗口”，找到第2个名为“连接”的窗口，右键“网站”选择 “添加FTP站点...”； 在FTP名称中填写ftp服务器的名称：ftp_test（就是个名称，随你填），物理路径： D:\upld（填你需要上传或者下载的目 录路径，这个也是根据需要而填， 不过不能选一个不存在的路径 ） ，填写好了，单击下一步；在窗口中填写服务器的ip 地址（在命令提示符cmd里面输入ipconfig可以知道本 地ip地址），在SSL下选择“允许”，单击下一步；在窗口中，身份认 证中勾选“基本”前面的复选框，授权中 选择“所有用户”； 权限中勾选“读取”和“写入”，两个都要选 ；单击完成，部分图片如下： 4、至此，服务器配置完成！下面即可开始测试ftp服务器了。测试方法，打开浏览器，在地址栏输入 “ftp://192.168.0.50:21”，这里要换成你自己的ip地址，即把192.168.0.50替换成你的ip地址，后面的 21是端口号，是ftp服务器的通用端口号，一般不会被占用。输入地址之后回车，浏览器会弹出一个让 你输入用户名和密码的窗口，填写你在准备工作中添加的用户和密码(不局限，只要能登录服务器端 的windows系统的用户都可以)，测试成功则会显示第三步中设置的物理路径目录下的文件。如下图： 1.2、使用FileZilla作为ftp服务器 FileZilla是一个免费开源的FTP软件，分为客户端版本和服务器版本，具备所有的FTP软件功能。FileZilla软件可以到官网下载：https://filezilla-project.org/，FileZilla的安装和配置我就不一一细说了，你们可以去网上百度FileZilla的安装和配置，方法大同小异。提供一些参考网站：http://jingyan.baidu.com/article/6079ad0e67acf828ff86db3f.html和http://www.jiaocheng8.com/wangzhan/ftp/383.html； 2、使用QT实现文件上传和下载 配置好服务器之后，便可以使用QT或者其他工具实现文件上传和下载了。 关键代码如下： void ftp_upload::upload() { ftp = new QFtp(this); ftp-&amp;gt;connectToHost(&#34;192.168.0.50&#34;,21); //连接到服务器,填写你的ip地址，这里默认端口号为21 ftp-&amp;gt;login(&#34;test&#34;,&#34;testpasswd&#34;); //登录,填写响应的用户名和密码 //windows自带的ftp服务器，客户端上传文件到服务器 QFile *uploadFile = new QFile(&#34;D:/2014.txt&#34;);//要上传到服务器的的文件位置：D盘下的2014.txt文档，该文档存在于客户端 QString des = &#34;2014_uploadToServer.txt&#34;;//ftp服务器“收到”客户端上传的文档位置：物理路径根目录下的文档2014_upload.txt uploadFile-&amp;gt;open(QIODevice::ReadWrite); ftp-&amp;gt;put(uploadFile,des); //windows自带的ftp服务器，从服务器下载文件到客户端 QFile *download = new QFile(&#34;D:/downloadFromServer.txt&#34;); download-&amp;gt;open(QIODevice::ReadWrite); ftp-&amp;gt;get(&#34;download.txt&#34;,download);//把服务器物理路径根目录下的download.txt下载到本地D盘根目录 } 源码打包csdn下载地址：http://download.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2014-07-16T17:35:29+08:00">
    <meta property="article:modified_time" content="2014-07-16T17:35:29+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Windows下配置ftp服务器，使用QT实现文件上传和下载</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1、Windows下配置ftp服务器</h2> 
<h3>1.1、windows自带的ftp服务器配置</h3> 
<div> 
 <span style="font-size:14px"><span style="white-space:pre"></span>准备工作：在本地计算机创建一个用户并设置用户密码，后面可以使用这个用户测试ftp是否正确配置并投入使用。创建用户的过程就不啰嗦了，不会的朋友可以去百度如何创建用户。当然这里可以使用本地计算机已经创建的其他用户。</span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px">下面介绍配置windows自带的ftp服务器的步骤：</span></span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="white-space:pre"></span>1、打开控制面板，左边有一个“<span style="color:#ff6666"><strong>打开或关闭Windows功能</strong></span>”选项，单击该选项，在弹出的窗口中找到</span></span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px">“Internet 信息服务”，</span></span> 
 <span style="font-size:14px; white-space:pre">展开可以找到“FTP服务器”并勾选该选项，然后确定即可，估计要等个几分钟才</span> 
</div> 
<div> 
 <span style="font-size:14px; white-space:pre">能安装好ftp服务器。如图所示：</span> 
</div> 
<div style="text-align:center"> 
 <span style="white-space:pre"><span style="font-size:14px"><img src="https://images2.imgbox.com/5d/17/dK1bMdlc_o.png" align="middle" alt=""><br> </span></span> 
</div> 
<div style="text-align:center"> 
 <span style="white-space:pre"><span style="font-size:14px"><img src="https://images2.imgbox.com/10/db/Oka6EJEp_o.png" align="middle" alt=""><br> </span></span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="white-space:pre"></span>2、右键桌面的“计算机”，选择“管理”（快捷方式：“运行”里面输入“<span style="font-family:Tahoma,Arial,Helvetica,sans-serif,SimSun; font-size:14px; line-height:26.600000381469727px; white-space:pre-wrap">compmgmt.msc</span>”命令，回车即可），</span></span> 
 <span style="font-size:14px; white-space:pre">在窗口的</span> 
</div> 
<div> 
 <span style="font-size:14px; white-space:pre">左边找到“服务和应用程序”选项，选择</span> 
 <span style="font-size:14px; white-space:pre">“服务和应用程序”下的“Internet信息服务(IIS)管理器”；</span> 
</div> 
<div> 
 <span style="font-size:14px; white-space:pre"><br> </span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><span style="white-space:pre"></span>3、在第2步弹出的窗口中，在里面嵌套着4个“小窗口”，找到第2个名为“连接”的窗口，右键“网站”选择</span></span></span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre">“添加FTP站点...”；</span></span></span> 
 <span style="font-size:14px; white-space:pre">在FTP名称中填写ftp服务器的名称：ftp_test（就是个名称，随你填），物理路径：</span> 
</div> 
<div> 
 <span style="font-size:14px; white-space:pre">D:\upld（填你需要上传或者下载的目</span> 
 <span style="font-size:14px; white-space:pre">录路径，这个也是根据需要而填，</span> 
 <span style="font-size:14px; white-space:pre; color:rgb(255,0,0)"><strong>不过不能选一个不存在的路径</strong></span> 
 <span style="font-size:14px; white-space:pre">）</span> 
</div> 
<div> 
 <span style="font-size:14px; white-space:pre">，填写好了，单击下一步；在窗口中填写服务器的ip</span> 
 <span style="font-size:14px; white-space:pre">地址（在命令提示符cmd里面输入ipconfig可以知道本</span> 
</div> 
<div> 
 <span style="font-size:14px; white-space:pre">地ip地址），在SSL下选择“允许”，单击下一步；在窗口中，身份认</span> 
 <span style="font-size:14px; white-space:pre">证中勾选“基本”前面的复选框，授权中</span> 
</div> 
<div> 
 <span style="font-size:14px; white-space:pre">选择“所有用户”；</span> 
 <span style="font-size:14px; white-space:pre; color:rgb(255,0,0)"><strong>权限中勾选“读取”和“写入”，两个都要选</strong></span> 
 <span style="font-size:14px; white-space:pre">；单击完成，部分图片如下：</span> 
</div> 
<div style="text-align:center"> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><img src="https://images2.imgbox.com/c6/08/ZKKowJo0_o.png" alt=""><br> </span></span></span> 
</div> 
<div style="text-align:center"> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><img src="https://images2.imgbox.com/99/12/fu0E0Yf4_o.png" align="middle" alt=""><br> </span></span></span> 
</div> 
<div style="text-align:center"> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><img src="https://images2.imgbox.com/cc/c8/cfJ9W9EI_o.png" align="middle" alt=""><br> </span></span></span> 
</div> 
<div style="text-align:center"> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><img src="https://images2.imgbox.com/ee/93/aLBMUujH_o.png" align="middle" alt=""><br> </span></span></span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><br> </span></span></span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><span style="white-space:pre"></span>4、至此，服务器配置完成！下面即可开始测试ftp服务器了。测试方法，打开浏览器，在地址栏输入</span></span></span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre">“ftp://192.168.0.50:21”，这里要换成你自己的ip地址，即把<span style="font-size:14px; white-space:pre">192.168.0.50替换成你的ip地址，后面的</span></span></span></span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><span style="font-size:14px; white-space:pre">21是端口号，是ftp服务器的通用端口号，一般不会被占用。输入地址之后回车，浏览器会弹出一个让</span></span></span></span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><span style="font-size:14px; white-space:pre">你输入用户名和密码的窗口，填写你在<span style="color:#ff0000"><strong>准备工作</strong></span>中添加的用户和密码(不局限，只要能登录服务器端</span></span></span></span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><span style="font-size:14px; white-space:pre">的windows系统的用户都可以)，测试成功则会显示第三步中设置的物理路径目录下的文件。如下图：</span></span></span></span> 
</div> 
<div style="text-align:center"> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><span style="font-size:14px; white-space:pre"><img src="https://images2.imgbox.com/98/79/q6zdhu0p_o.png" align="middle" alt=""><br> </span></span></span></span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><span style="font-size:14px; white-space:pre"><br> </span></span></span></span> 
</div> 
<div> 
 <span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><span style="font-size:14px; white-space:pre"><br> </span></span></span></span> 
</div> 
<h3><span style="white-space:pre"><span style="font-size:14px"><span style="font-size:14px; white-space:pre"><span style="font-size:14px; white-space:pre">1.2、使用FileZilla作为ftp服务器</span></span></span></span></h3> 
<div> 
 <span style="font-size:14px"><span style="white-space:pre">FileZilla是一个免费开源的FTP软件，分为客户端版本和服务器版本，具备所有的FTP软件功能。</span>FileZilla软件可以到官网下载：https://filezilla-project.org/，<span style="font-size:14px; white-space:pre">FileZilla</span>的安装和配置我就不一一细说了，你们可以去网上百度<span style="font-size:14px; white-space:pre">FileZilla</span>的安装和配置，方法大同小异。提供一些参考网站：<a target="_blank" href="http://jingyan.baidu.com/article/6079ad0e67acf828ff86db3f.html" rel="nofollow noopener noreferrer">http://jingyan.baidu.com/article/6079ad0e67acf828ff86db3f.html</a>和<a target="_blank" href="http://www.jiaocheng8.com/wangzhan/ftp/383.html" rel="nofollow noopener noreferrer">http://www.jiaocheng8.com/wangzhan/ftp/383.html</a>；</span> 
 <br> 
</div> 
<div> 
 <h2>2、使用QT实现文件上传和下载</h2> 
</div> 
<div> 
 <span style="font-size:14px"><span style="white-space:pre"></span>配置好服务器之后，便可以使用QT或者其他工具实现文件上传和下载了。</span> 
</div> 
<div> 
 <span style="font-size:14px"><span style="white-space:pre"></span>关键代码如下：</span> 
</div> 
<div> 
 <span style="font-size:14px"><span style="white-space:pre"></span></span> 
 <pre><code class="language-cpp">void ftp_upload::upload()
{
	ftp = new QFtp(this);
    ftp-&gt;connectToHost("192.168.0.50",21); //连接到服务器,填写你的ip地址，这里默认端口号为21
    ftp-&gt;login("test","testpasswd");   //登录,填写响应的用户名和密码
	

//windows自带的ftp服务器，客户端上传文件到服务器
	QFile *uploadFile = new QFile("D:/2014.txt");//要上传到服务器的的文件位置：D盘下的2014.txt文档，该文档存在于客户端
	QString des = "2014_uploadToServer.txt";//ftp服务器“收到”客户端上传的文档位置：物理路径根目录下的文档2014_upload.txt
	uploadFile-&gt;open(QIODevice::ReadWrite);
	ftp-&gt;put(uploadFile,des);


//windows自带的ftp服务器，从服务器下载文件到客户端
	QFile *download = new QFile("D:/downloadFromServer.txt");
	download-&gt;open(QIODevice::ReadWrite);
	ftp-&gt;get("download.txt",download);//把服务器物理路径根目录下的download.txt下载到本地D盘根目录

}</code></pre> 
 <br> 
</div> 
<div> 
 <span style="font-size:14px">源码打包csdn下载地址：<a target="_blank" href="http://download.csdn.net/detail/xuzewei_2/7643087" rel="noopener noreferrer">http://download.csdn.net/detail/xuzewei_2/7643087</a></span> 
</div> 
<div> 
 <br> 
</div> 
<div> 
 <span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">注：本文版权归作者和CSDN所有，转载注明出处：<a target="_blank" href="http://blog.csdn.net/thebestdavid/article/details/37877393" rel="noopener noreferrer">http://blog.csdn.net/thebestdavid/article/details/37877393</a>！</span> 
 <br> 
</div> 
<div> 
 <br> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2aa0c4abb99c9dda71b6d5a5607ff6ab/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">初识 Cloudera Impala</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2cf11cf7c40cf8b2dfe9698dc2e4bf4b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Impala ODBC 安装笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>