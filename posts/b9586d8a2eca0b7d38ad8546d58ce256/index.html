<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python 中Dataframe初步理解，探讨参数Data，切片函数loc和iloc含义和应用，适合初学者 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/b9586d8a2eca0b7d38ad8546d58ce256/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Python 中Dataframe初步理解，探讨参数Data，切片函数loc和iloc含义和应用，适合初学者">
  <meta property="og:description" content="Dataframe是pandas的模块最具代表的数据结果，其作用之强大溢于言表，下面我们分几个最常用的说一下.
Dataframe中的切片loc，iloc； import pandas as pd
我们先说loc，基本上loc会了，iloc知道原理后自然就会了， 他们俩是一致的；
Dataframe的定义和初始话,直接上几个例子更直接：
---------------------------------------------------------------1----------------------------------------------------------------------------------------------------------------
source=[[1,2,3],[4,5,6],[7,8,9]] col_arr=[‘a’,&#39;b&#39;,&#39;c&#39;]
row_arr = [&#39;aa&#39;,&#39;bb&#39;,&#39;cc&#39;] df = pd.Dataframe(data=source,columns=col_arr,index=row_arr)
abcaa123bb456cc789 ---------------------------------------------------------------2----------------------------------------------------------------
df = pd.Dataframe(data=source,columns=col_arr)
如果没有设置行索引或者列所以，Dataframe将会自动用0,1,2,3...作为自动的行列索引
abc012314562789 ---------------------------------------------------------------3----------------------------------------------------------------
df = pd.Dataframe(data=source)
012012314562789 Dataframe的data参数，有一下几个类型：元组，列表，字典
当是一维元组的时候：df = pd.Dataframe(data=(1,2,3))
当是一维列表的时候：df = pd.Dataframe(data=[1,2,3])
当是二维元组的时候：df = pd.Dataframe(data=((1,2,3)))
当是二维列表的时候：df = pd.Dataframe(data=[[1,2,3]])
可以看出当都是一维的时候，参数data是元组还是列表，他俩构成的Dataframe都是一致的，可以混用
但是当都是二维的时候，元组表现出来的还是一列，但是列表确实一行，这就是区别，知道区别了，自己慢慢体会下，((1,2,3),(4,5,6)) 和[[1,2,3],[4,5,6]]分别可以构成什么样的矩阵呢？大家可以自己试一下。
让大家纳闷的是，结果并不是按照上面能推理出来的，二维的元组和列表构建成的Dataframe的矩阵看起来又是一样的。记住，知道怎么用就OK了，没必要知道为什么。-_-
在说一下参数data是字典的情况： pd.DataFrame(data={&#39;a&#39;:[1,2,3],&#39;b&#39;:[4,5,6],&#39;c&#39;:[7,8,9]})
对于这种{&#39;a&#39;:xx,&#39;b&#39;:xx}字段作为data的参数，字典的key就是列索引名，如果没有指定index的话，行所以就是默认的0,1,2,3...
提醒一下，这个时候就不能指定列索引(columns)了，否则会error
还有一些list和Dictionary，元组混合作为参数的，大家有兴趣可以自己试一下
初始化讲完了，我们来看下具体用法。
Dataframe可以理解为是二维矩阵，或者说是一个二维数组，loc最大的作用就是标记了这个二维矩阵行索引和列索引，因为可以更好的对这个二维数字进行分析和切割；
loc的定义是 loc[rows_index,columns_index]
如果想取矩阵中某一个元素， df.loc[&#39;aa&#39;,&#39;b&#39;] #返回 2
我们列举了一下几个功能：拿上面初始化第一个例子说一下
abcaa123bb456cc789 取一行数据 df.loc[&#39;aa&#39;] #返回的是series类型的数据集 df.loc[&#39;aa&#39;,] #返回的是series类型的数据集 df.loc[&#39;aa&#39;,:] #返回的是series类型的数据集 df.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-12-02T16:12:06+08:00">
    <meta property="article:modified_time" content="2021-12-02T16:12:06+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python 中Dataframe初步理解，探讨参数Data，切片函数loc和iloc含义和应用，适合初学者</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>Dataframe是pandas的模块最具代表的数据结果，其作用之强大溢于言表，下面我们分几个最常用的说一下.</strong></p> 
<h3><strong> Dataframe中的切片loc，iloc；</strong></h3> 
<p>        import pandas as pd</p> 
<p>        我们先说loc，基本上loc会了，iloc知道原理后自然就会了， 他们俩是一致的；</p> 
<p>        Dataframe的定义和初始话,直接上几个例子更直接：</p> 
<p>---------------------------------------------------------------1----------------------------------------------------------------------------------------------------------------</p> 
<p>              <span style="color:#4da8ee;">  </span><span style="color:#1a439c;">source=[[1,2,3],[4,5,6],[7,8,9]]  </span></p> 
<p><span style="color:#1a439c;">                col_arr=[‘a’,'b','c']</span></p> 
<p><span style="color:#1a439c;">                row_arr = ['aa','bb','cc']    </span></p> 
<p><span style="color:#1a439c;">                df = pd.Dataframe(data=source,columns=col_arr,index=row_arr)</span></p> 
<p><span style="color:#1a439c;">           </span></p> 
<table cellspacing="0" style="width:192pt;"><tbody><tr><td style="text-align:left;vertical-align:bottom;width:48pt;"></td><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;width:48pt;"><span style="color:#000000;">a</span></td><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;width:48pt;"><span style="color:#000000;">b</span></td><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;width:48pt;"><span style="color:#000000;">c</span></td></tr><tr><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;"><span style="color:#000000;">aa</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">1</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">2</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">3</span></td></tr><tr><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;"><span style="color:#000000;">bb</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">4</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">5</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">6</span></td></tr><tr><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;"><span style="color:#000000;">cc</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">7</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">8</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">9</span></td></tr></tbody></table> 
<p>---------------------------------------------------------------2----------------------------------------------------------------</p> 
<p>            d<span style="color:#1a439c;">f = pd.Dataframe(data=source,columns=col_arr)</span></p> 
<p><span style="color:#1a439c;">        如果没有设置行索引或者列所以，Dataframe将会自动用0,1,2,3...作为自动的行列索引</span></p> 
<p><span style="color:#1a439c;">                </span></p> 
<table cellspacing="0" style="width:192pt;"><tbody><tr><td style="vertical-align:bottom;width:48pt;"></td><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;width:48pt;"><span style="color:#000000;">a</span></td><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;width:48pt;"><span style="color:#000000;">b</span></td><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;width:48pt;"><span style="color:#000000;">c</span></td></tr><tr><td style="background-color:#8db4e2;vertical-align:bottom;"><span style="color:#000000;">0</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">1</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">2</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">3</span></td></tr><tr><td style="background-color:#8db4e2;vertical-align:bottom;"><span style="color:#000000;">1</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">4</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">5</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">6</span></td></tr><tr><td style="background-color:#8db4e2;vertical-align:bottom;"><span style="color:#000000;">2</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">7</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">8</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">9</span></td></tr></tbody></table> 
<p>---------------------------------------------------------------3----------------------------------------------------------------</p> 
<p>        d<span style="color:#1a439c;">f = pd.Dataframe(data=source)</span></p> 
<table cellspacing="0" style="width:192pt;"><tbody><tr><td style="vertical-align:bottom;width:48pt;"></td><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;width:48pt;"><span style="color:#000000;">0</span></td><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;width:48pt;"><span style="color:#000000;">1</span></td><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;width:48pt;"><span style="color:#000000;">2</span></td></tr><tr><td style="background-color:#8db4e2;vertical-align:bottom;"><span style="color:#000000;">0</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">1</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">2</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">3</span></td></tr><tr><td style="background-color:#8db4e2;vertical-align:bottom;"><span style="color:#000000;">1</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">4</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">5</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">6</span></td></tr><tr><td style="background-color:#8db4e2;vertical-align:bottom;"><span style="color:#000000;">2</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">7</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">8</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">9</span></td></tr></tbody></table> 
<p><span style="color:#1a439c;">        Dataframe的data参数，有一下几个类型：元组，列表，字典</span></p> 
<p>        当是一维元组的时候：d<span style="color:#1a439c;">f = pd.Dataframe(data=<strong>(1,2,3)</strong>)</span><img alt="" height="101" src="https://images2.imgbox.com/cc/00/vKUQlZ2H_o.png" width="248"></p> 
<p>        当是一维列表的时候：d<span style="color:#1a439c;">f = pd.Dataframe(data=<strong>[1,2,3]</strong>)</span><img alt="" height="98" src="https://images2.imgbox.com/01/57/sNS1YrPA_o.png" width="244"></p> 
<p>        当是二维元组的时候：d<span style="color:#1a439c;">f = pd.Dataframe(data=<strong>((1,2,3))</strong>)</span><img alt="" height="93" src="https://images2.imgbox.com/24/49/qgmsb8DG_o.png" width="248"></p> 
<p>        当是二维列表的时候：d<span style="color:#1a439c;">f = pd.Dataframe(data=<strong>[[1,2,3]]</strong>)</span><img alt="" height="73" src="https://images2.imgbox.com/95/35/z0tj4a5j_o.png" width="253"></p> 
<p> <strong>可以看出当都是一维的时候，参数data是元组还是列表，他俩构成的Dataframe都是一致的，可以混用</strong></p> 
<p><strong>但是当都是二维的时候，元组表现出来的还是一列，但是列表确实一行，这就是区别，知道区别了，自己慢慢体会下，((1,2,3),(4,5,6)) 和[[1,2,3],[4,5,6]]分别可以构成什么样的矩阵呢？大家可以自己试一下。</strong></p> 
<p> <img alt="" height="155" src="https://images2.imgbox.com/b0/65/hWhTas4z_o.png" width="325"></p> 
<p><strong>让大家纳闷的是，结果并不是按照上面能推理出来的，二维的元组和列表构建成的Dataframe的矩阵看起来又是一样的。记住，知道怎么用就OK了，没必要知道为什么。-_-</strong></p> 
<h3><strong>在说一下参数data是字典的情况：</strong></h3> 
<p>        pd.DataFrame(data={'a':[1,2,3],'b':[4,5,6],'c':[7,8,9]})</p> 
<p><img alt="" height="94" src="https://images2.imgbox.com/54/89/NwiKfmpd_o.png" width="459"></p> 
<p>对于这种{'a':xx,'b':xx}字段作为data的参数，字典的key就是列索引名，如果没有指定index的话，行所以就是默认的0,1,2,3...</p> 
<p>提醒一下，这个时候就不能指定列索引(columns)了，否则会error</p> 
<p> 还有一些list和Dictionary，元组混合作为参数的，大家有兴趣可以自己试一下</p> 
<p>初始化讲完了，我们来看下具体用法。</p> 
<p>        Dataframe可以理解为是二维矩阵，或者说是一个二维数组，loc<strong>最大的作用</strong>就是标记了这个二维矩阵<strong>行索引</strong>和<strong>列索引，因为可以更好的对这个二维数字进行分析和切割；</strong></p> 
<p>loc的定义是 loc[rows_index,columns_index]</p> 
<p>如果想取矩阵中某一个元素， df.loc['aa','b']  #返回 2</p> 
<p>我们列举了一下几个功能：拿上面初始化第一个例子说一下</p> 
<table cellspacing="0" style="width:192pt;"><tbody><tr><td style="text-align:left;vertical-align:bottom;width:48pt;"></td><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;width:48pt;"><span style="color:#000000;">a</span></td><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;width:48pt;"><span style="color:#000000;">b</span></td><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;width:48pt;"><span style="color:#000000;">c</span></td></tr><tr><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;"><span style="color:#000000;">aa</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">1</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">2</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">3</span></td></tr><tr><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;"><span style="color:#000000;">bb</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">4</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">5</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">6</span></td></tr><tr><td style="background-color:#8db4e2;text-align:left;vertical-align:bottom;"><span style="color:#000000;">cc</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">7</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">8</span></td><td style="text-align:left;vertical-align:bottom;"><span style="color:#000000;">9</span></td></tr></tbody></table> 
<p>       <strong> 取一行数据  </strong></p> 
<pre><code>df.loc['aa']  #返回的是series类型的数据集
df.loc['aa',] #返回的是series类型的数据集
df.loc['aa',:] #返回的是series类型的数据集
df.loc[['aa']] #返回的是Dataframe类型的数据集
df.loc[['aa'],] #返回的是Dataframe类型的数据集
df.loc[['aa'],:] #返回的是Dataframe类型的数据集</code></pre> 
<p> <strong>看code找规律，我想这个很简单，总结一下就是</strong></p> 
<p><strong>                1.        loc只有第一个参数，第二个参数是空，或者： 表示是取一行的数据，第一个参数就是行索引的索引名</strong></p> 
<p><strong>                2.        第一个参数是单索引名，返回时series类型的数据集，当时用[]list集合时，返回的是Dataframe的数据集</strong></p> 
<p>   <strong>同样的方法我们取一列:</strong></p> 
<pre><code>df.loc[:,'a'] #返回的是series类型的数据集
df.loc[:,['a']] #返回的是Dataframe类型的数据集</code></pre> 
<p>           <strong>同样找到一些规律：</strong></p> 
<p><strong>                1.        第一个参数一定要有：，表示是所有的行</strong></p> 
<p><strong>                2.        第二个参数可以是一个单索引名，返回时series类型的数据集，   当时用[]list集合时，返回的是Dataframe的数据集  </strong></p> 
<p></p> 
<p>单行单列都知道怎么取，那多行多列更简单了，无非就是用[]list,多加行或者列的索引，因为是list作为参数，取出来的是Dataframe类型的数据集</p> 
<p>例如：</p> 
<pre><code>df.loc[['aa'，'bb']] #返回的是aa,bb两行组合Dataframe类型的数据集
df.loc[['aa'，'bb'],：] #同上
df.loc[,['a','b']] #返回的是a,a两列组合Dataframe类型的数据集
df.loc[:,['a','b']] #同上</code></pre> 
<p>说完loc，大致有点了解，那么iloc就容易多了</p> 
<p>我们知道loc是通过用户自定义行或者系统自定义列索引来进行对矩阵做分析和处理的，那iloc则不是，他是通过0,1,2,3...数字的形式</p> 
<pre><code>df = pd.Dataframe(data=[[1,2,3],[4,5,6],[7,8,9]],columns=['a','b','c'],index=['aa','bb','cc'])
	a	b	c
aa	1	2	3
bb	4	5	6
cc	7	8	9

取一行数据：
#loc 是用自定义的索引取数据
    pf.loc['a']
    pf.loc[['a']] 
#loc 是0,1,2,3...来取索引，即使你定义df的时候定义了行（index）和列（colnmns） 也不会用，仍然用 0,1,2,3...当作索引值 
    pf.iloc[0]
    pf.iloc[[0]]</code></pre> 
<p><strong><span style="background-color:#fbd4d0;">Dataframe的支持点很多，具体还是要实体操作一下才知道他的强大，本人第一次写东西记录一下，有错误的地方希望给与指出，一起进步，谢谢-__- </span></strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/904498bf1a5906aa1eb944bb7c51f558/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">计算机组成原理cache例题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1013c7c920e497faf3dee582d1da04d6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java8 对象转map时重复key Duplicate key 该如何解决？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>