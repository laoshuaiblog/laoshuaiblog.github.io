<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>用python爬github上星级排名前列的项目报错AttributeError: &#39;NoneType&#39; object has no attribute &#39;decode&#39; - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/03db02b0793601d6c9ecca1fb513e501/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="用python爬github上星级排名前列的项目报错AttributeError: &#39;NoneType&#39; object has no attribute &#39;decode&#39;">
  <meta property="og:description" content="代码： import requests import pygal from pygal.style import LightenStyle as ls,LightColorizedStyle as lcs #执行api调用并存储相应 url = &#39;https://api.github.com/search/repositories?q=language:python&amp;amp;sort=stars&#39; r = requests.get(url) print(r.status_code) #响应存储在变量中 response_dic = r.json() #print(response_dic.keys()) print(&#34;total:&#34;&#43;str(response_dic[&#34;total_count&#34;])) #respon_dic :所有仓库，是一个列表，有很多字典 respon_dics = response_dic[&#34;items&#34;] print(&#34;dics:&#34;&#43;str(len(respon_dics))) &#34;&#34;&#34;找出第一个字典 respon_dic = respon_dics[0] print(&#34;\nkeys:&#34;&#43;str(len(respon_dic))) for key in sorted(respon_dic.keys()): print(key)&#34;&#34;&#34; names,plot_dicts = [],[] for respon_dic in respon_dics: names.append(respon_dic[&#39;name&#39;]) plot_dict = { &#39;value&#39;:respon_dic[&#39;stargazers_count&#39;], &#39;label&#39;:respon_dic[&#39;description&#39;] } plot_dicts.append(plot_dict) #plot_dicts.append(respon_dic[&#39;stargazers_count&#39;]) #可视化 my_style= ls(&#39;#333366&#39;,base_style = lcs) my_config = pygal.Config() my_config.x_label_rotation = 45 my_config.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2017-08-29T21:48:45+08:00">
    <meta property="article:modified_time" content="2017-08-29T21:48:45+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">用python爬github上星级排名前列的项目报错AttributeError: &#39;NoneType&#39; object has no attribute &#39;decode&#39;</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <pre><code class="language-python">代码：</code></pre> 
<pre><code class="language-python">import requests
import pygal
from pygal.style import LightenStyle as ls,LightColorizedStyle as lcs
#执行api调用并存储相应
url = 'https://api.github.com/search/repositories?q=language:python&amp;sort=stars'
r = requests.get(url)
print(r.status_code)
#响应存储在变量中
response_dic = r.json()
#print(response_dic.keys())
print("total:"+str(response_dic["total_count"]))

#respon_dic :所有仓库，是一个列表，有很多字典
respon_dics = response_dic["items"]
print("dics:"+str(len(respon_dics)))
"""找出第一个字典
respon_dic = respon_dics[0]
print("\nkeys:"+str(len(respon_dic)))
for key in sorted(respon_dic.keys()):
    print(key)"""

names,plot_dicts = [],[]
for respon_dic in respon_dics:
    names.append(respon_dic['name'])
    plot_dict = {
        'value':respon_dic['stargazers_count'],
        'label':respon_dic['description']
        }
    plot_dicts.append(plot_dict)
    #plot_dicts.append(respon_dic['stargazers_count'])
#可视化
my_style= ls('#333366',base_style = lcs)

my_config = pygal.Config()
my_config.x_label_rotation = 45
my_config.show_legend = False
my_config.title_font_size = 24
my_config.label_font_size = 14
my_config.major_label_font_size = 18
my_config.truncate_label = 15
my_config.show_y_guides = False
my_config.width = 1000

chart = pygal.Bar(my_config,style = my_style)
chart.title = "most stared python projects on github"
chart.x_labels= names

chart.add('',plot_dicts)
chart.render_to_file("python_respon.svg")</code></pre> 
<p>报错：</p> 
<p>Traceback (most recent call last):<br>   File "F:\workspace\python\api\python_request.py", line 62, in &lt;module&gt;<br>     chart.render_to_file("python_respon.svg")<br>   File "C:\Users\zawdcxs\AppData\Local\Programs\Python\Python36\lib\site-packages\pygal\graph\public.py", line 114, in render_to_file<br>     f.write(self.render(is_unicode=True, **kwargs))<br>   File "C:\Users\zawdcxs\AppData\Local\Programs\Python\Python36\lib\site-packages\pygal\graph\public.py", line 52, in render<br>     self.setup(**kwargs)<br>   File "C:\Users\zawdcxs\AppData\Local\Programs\Python\Python36\lib\site-packages\pygal\graph\base.py", line 217, in setup<br>     self._draw()<br>   File "C:\Users\zawdcxs\AppData\Local\Programs\Python\Python36\lib\site-packages\pygal\graph\graph.py", line 933, in _draw<br>     self._plot()<br>   File "C:\Users\zawdcxs\AppData\Local\Programs\Python\Python36\lib\site-packages\pygal\graph\bar.py", line 146, in _plot<br>     self.bar(serie)<br>   File "C:\Users\zawdcxs\AppData\Local\Programs\Python\Python36\lib\site-packages\pygal\graph\bar.py", line 116, in bar<br>     metadata)<br>   File "C:\Users\zawdcxs\AppData\Local\Programs\Python\Python36\lib\site-packages\pygal\util.py", line 233, in decorate<br>     metadata['label'])<br>   File "C:\Users\zawdcxs\AppData\Local\Programs\Python\Python36\lib\site-packages\pygal\_compat.py", line 61, in to_unicode<br>     return string.decode('utf-8')<br> AttributeError: 'NoneType' object has no attribute 'decode'<br> 仔细校对和书上的对比过都打的一样了，还是报错。。</p> 
<p>最后看到关键3行：</p> 
<p>metadata['label'])</p> 
<p>return string.decode('utf-8')<br> AttributeError: 'NoneType' object has no attribute 'decode'</p> 
<p>”空类型“对象没有属性“decode”</p> 
<p>应该是label属性 期望是个字符串？</p> 
<p>for respon_dic in respon_dics:<br>     names.append(respon_dic['name'])<br>     plot_dict = {<!-- --><br>         'value':respon_dic['stargazers_count'],<br>         'label':respon_dic['description']<br>         }<br>     plot_dicts.append(plot_dict)<br>     #plot_dicts.append(respon_dic['stargazers_count'])<br> 里面'label':respon_dic['description']改为'label':str(respon_dic['description'])</p> 
<p>搞定。</p> 
<p>效果：</p> 
<p><img src="https://images2.imgbox.com/8d/18/P9amrXQM_o.jpg" alt=""><br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/11ca5049ea580a0d5e6144a653b82013/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Python3.6爬虫学习记录】（一）爬取简单的静态网页图片</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4a7c350798150dd95b04de942b347c2a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python3.6爬取网站图片</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>