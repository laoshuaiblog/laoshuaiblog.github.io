<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python||判断K-Means聚类最佳数量 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/f131b83461f37aa9aad286d0ed446951/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="python||判断K-Means聚类最佳数量">
  <meta property="og:description" content="在进行K均值聚类之前，不知道聚成几类效果是最好的，经过查资料，发现有两种常用的方式。分别是：
1.肘方法
2.轮廓系数法
这篇文章记录使用肘方法判断聚类最佳数量，肘方法的原理是什么呢？
这是来自一个博友的解释，我一个没学过理科的人也看不懂。接下来直接开始操作：
这是我的原始数据：
看一下python代码实现：
import pandas as pd #导入pandas库 import numpy as np from sklearn.cluster import KMeans #导入k均值函数 import matplotlib.pyplot as plt import xlrd file_path=xlrd.open_workbook(&#34;cluster_MinMax.xls&#34;) #读取文件 table = file_path.sheets()[0] #读取文件，获取第一个sheet页，赋值给table my_data=[] #创建一个空列表 for i in range(table.nrows): #nrows为表的行数，遍历nrows的行数 if i == 0: #忽略第一行 continue else: my_data.append(table.row_values(i)[0:]) #把第i行的数据添加到data列表里去 featureList = [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;,&#39;3&#39;,&#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;] #创建了一个特征列表，这是我原始表格里的特征名 mdl = pd.DataFrame.from_records(my_data, columns=featureList) #把my_data里的数据放进来，列的名称=featurelist # &#39;利用SSE选择k&#39; SSE = [] # 存放每次结果的误差平方和 for i in range(1, 8): #尝试要聚成的类数 estimator = KMeans(n_clusters=i) # 构造聚类器 estimator.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-09-08T11:37:42+08:00">
    <meta property="article:modified_time" content="2021-09-08T11:37:42+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python||判断K-Means聚类最佳数量</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在进行K均值聚类之前，不知道聚成几类效果是最好的，经过查资料，发现有两种常用的方式。分别是：</p> 
<p>1.肘方法</p> 
<p>2.轮廓系数法</p> 
<p>这篇文章记录使用肘方法判断聚类最佳数量，肘方法的原理是什么呢？</p> 
<p><img alt="" height="184" src="https://images2.imgbox.com/80/c3/QNZJUEX1_o.png" width="1192"></p> 
<p>这是来自一个博友的解释，我一个没学过理科的人也看不懂。接下来直接开始操作：</p> 
<p>这是我的原始数据：</p> 
<p><img alt="" height="257" src="https://images2.imgbox.com/90/15/d2U5AfQE_o.png" width="327"></p> 
<p> 看一下python代码实现：</p> 
<pre><code class="language-python">import pandas as pd #导入pandas库
import numpy as np
from sklearn.cluster import KMeans #导入k均值函数
import matplotlib.pyplot as plt
import xlrd


file_path=xlrd.open_workbook("cluster_MinMax.xls") #读取文件
table = file_path.sheets()[0]  #读取文件，获取第一个sheet页，赋值给table
my_data=[] #创建一个空列表
for i in range(table.nrows):  #nrows为表的行数，遍历nrows的行数
    if i == 0: #忽略第一行
        continue
    else:
        my_data.append(table.row_values(i)[0:]) #把第i行的数据添加到data列表里去

featureList = ['0', '1', '2','3','4','5','6','7'] #创建了一个特征列表，这是我原始表格里的特征名
mdl = pd.DataFrame.from_records(my_data, columns=featureList) 
#把my_data里的数据放进来，列的名称=featurelist

# '利用SSE选择k'
SSE = []  # 存放每次结果的误差平方和
for i in range(1, 8): #尝试要聚成的类数
    estimator = KMeans(n_clusters=i)  # 构造聚类器
    estimator.fit(np.array(mdl[['0', '1', '2','3','4','5','6','7']]))
    SSE.append(estimator.inertia_)
X = range(1, 8) #跟k值要一样
plt.xlabel('i')
plt.ylabel('SSE')
plt.plot(X, SSE, 'o-')
plt.show() #画出图
</code></pre> 
<p>运行之后，出现了这个图：</p> 
<p><img alt="" height="234" src="https://images2.imgbox.com/d9/ae/2ba2xT63_o.png" width="383"></p> 
<p> </p> 
<p>拐肘最明显的数字就代表了聚类的最佳数量，对于我这个数据集来说，最佳聚类数量是3类。</p> 
<p>但是在实现这个肘方法的过程中我遇到了不少问题，也一并记录下来：</p> 
<p><strong>一.xlsx文件无法读取的问题</strong></p> 
<p><img alt="" height="78" src="https://images2.imgbox.com/1a/95/3HhLZDUV_o.png" width="643"></p> 
<p>报错： </p> 
<p><img alt="" height="108" src="https://images2.imgbox.com/c3/8f/mVRWIJGn_o.png" width="879"></p> 
<p> 出现这个问题的原因是xlrd1.2.0之后的版本不支持xlsx格式的excel文件，有两种方式可以解决：</p> 
<p><strong>1.改xlrd版本，改到1.2.0版本</strong></p> 
<p>在anaconda prompt里卸载当前xlrd，安装xlrd1.2.0:</p> 
<p>pip uninstall xlrd</p> 
<p>pip install xlrd==1.2.0</p> 
<p><strong>2.改excel文件格式</strong></p> 
<p>把xlsx改到xls即可，改完之后就可以读取了</p> 
<p><img alt="" height="30" src="https://images2.imgbox.com/03/db/iZAIUjGm_o.png" width="588"></p> 
<p> </p> 
<p> 做的过程中参考了这篇博文：</p> 
<p><a href="https://blog.csdn.net/xyisv/article/details/82430107?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-0.control&amp;spm=1001.2101.3001.4242">https://blog.csdn.net/xyisv/article/details/82430107?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-0.control&amp;spm=1001.2101.3001.4242</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e4bc19fb3fe1cbfa330a6e4ea3753667/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">HTML&#43;CSS&#43;JavaScript 超具创意的网页生日快乐祝福网页模板</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ac43ad9528bc8e34b3616e7c6cef546d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">latex报错|Undefined control sequence \subfloat</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>