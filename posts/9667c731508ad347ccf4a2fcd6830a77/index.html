<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>WPF 八（ UserControl 与 CustomControl区别总结） - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/9667c731508ad347ccf4a2fcd6830a77/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="WPF 八（ UserControl 与 CustomControl区别总结）">
  <meta property="og:description" content="UserControl vs CustomControl区别 UserControl
将多个WPF控件(例如：TextBox，TextBlock，Button)进行组合成一个可复用的控件组；
由XAML和Code Behind代码组成；
不支持样式/模板重写，其不支持重写是自己本页面不支持重写，但是页面内可以嵌套自定义控件；
由一个xaml和对应的后台组合而成
继承自UserControl；
下面创建的一个RGBControl由3个TextBlock，3个TextBox，1个Rectangle组成。我们可以在WPF的任意窗体/Page上面复用该UserControl。
XAML Code: &amp;lt;Grid Background=&#34;LightGray&#34;&amp;gt; &amp;lt;Grid.RowDefinitions&amp;gt; &amp;lt;RowDefinition /&amp;gt; &amp;lt;RowDefinition /&amp;gt; &amp;lt;RowDefinition /&amp;gt; &amp;lt;/Grid.RowDefinitions&amp;gt; &amp;lt;Grid.ColumnDefinitions&amp;gt; &amp;lt;ColumnDefinition Width=&#34;*&#34; /&amp;gt; &amp;lt;ColumnDefinition Width=&#34;*&#34; /&amp;gt; &amp;lt;ColumnDefinition Width=&#34;2*&#34; /&amp;gt; &amp;lt;/Grid.ColumnDefinitions&amp;gt; &amp;lt;TextBlock Text=&#34;Red&#34; /&amp;gt; &amp;lt;TextBlock Text=&#34;Green&#34; Grid.Row=&#34;1&#34; /&amp;gt; &amp;lt;TextBlock Text=&#34;Blue&#34; Grid.Row=&#34;2&#34; /&amp;gt; &amp;lt;TextBox Text=&#34;{Binding Red, UpdateSourceTrigger=PropertyChanged}&#34; VerticalContentAlignment=&#34;Center&#34; Grid.Column=&#34;1&#34; Height=&#34;25&#34; Width=&#34;80&#34; Margin=&#34;0,5&#34; /&amp;gt; &amp;lt;TextBox Text=&#34;{Binding Green, UpdateSourceTrigger=PropertyChanged}&#34; VerticalContentAlignment=&#34;Center&#34; Grid.Row=&#34;1&#34; Grid.Column=&#34;1&#34; Height=&#34;25&#34; Width=&#34;80&#34; Margin=&#34;0,5&#34; /&amp;gt; &amp;lt;TextBox Text=&#34;{Binding Blue, UpdateSourceTrigger=PropertyChanged}&#34;">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-09-03T10:38:18+08:00">
    <meta property="article:modified_time" content="2022-09-03T10:38:18+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">WPF 八（ UserControl 与 CustomControl区别总结）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="UserControl_vs_CustomControl_0"></a>UserControl vs CustomControl区别</h3> 
<p><strong>UserControl</strong><br> 将多个WPF控件(例如：TextBox，TextBlock，Button)进行组合成一个可复用的控件组；<br> 由XAML和Code Behind代码组成；<br> <strong>不支持样式/模板重写，其不支持重写是自己本页面不支持重写，但是页面内可以嵌套自定义控件</strong>；<br> 由一个xaml和对应的后台组合而成<br> 继承自UserControl；<br> 下面创建的一个RGBControl由3个TextBlock，3个TextBox，1个Rectangle组成。我们可以在WPF的任意窗体/Page上面复用该UserControl。<br> <img src="https://images2.imgbox.com/87/f9/9IIzwEIJ_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-csharp"><span class="token class-name">XAML</span> Code<span class="token punctuation">:</span>

<span class="token operator">&lt;</span><span class="token class-name">Grid</span> Background<span class="token operator">=</span><span class="token string">"LightGray"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Grid<span class="token punctuation">.</span>RowDefinitions<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>RowDefinition <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>RowDefinition <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>RowDefinition <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token punctuation">.</span>RowDefinitions<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Grid<span class="token punctuation">.</span>ColumnDefinitions<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">ColumnDefinition</span> Width<span class="token operator">=</span><span class="token string">"*"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">ColumnDefinition</span> Width<span class="token operator">=</span><span class="token string">"*"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">ColumnDefinition</span> Width<span class="token operator">=</span><span class="token string">"2*"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token punctuation">.</span>ColumnDefinitions<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token class-name">TextBlock</span> Text<span class="token operator">=</span><span class="token string">"Red"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">TextBlock</span> Text<span class="token operator">=</span><span class="token string">"Green"</span> Grid<span class="token punctuation">.</span>Row<span class="token operator">=</span><span class="token string">"1"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">TextBlock</span> Text<span class="token operator">=</span><span class="token string">"Blue"</span> Grid<span class="token punctuation">.</span>Row<span class="token operator">=</span><span class="token string">"2"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token class-name">TextBox</span> Text<span class="token operator">=</span><span class="token string">"{Binding Red, UpdateSourceTrigger=PropertyChanged}"</span> 
             VerticalContentAlignment<span class="token operator">=</span><span class="token string">"Center"</span> Grid<span class="token punctuation">.</span>Column<span class="token operator">=</span><span class="token string">"1"</span> Height<span class="token operator">=</span><span class="token string">"25"</span> Width<span class="token operator">=</span><span class="token string">"80"</span> Margin<span class="token operator">=</span><span class="token string">"0,5"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">TextBox</span> Text<span class="token operator">=</span><span class="token string">"{Binding Green, UpdateSourceTrigger=PropertyChanged}"</span> 
             VerticalContentAlignment<span class="token operator">=</span><span class="token string">"Center"</span> Grid<span class="token punctuation">.</span>Row<span class="token operator">=</span><span class="token string">"1"</span> Grid<span class="token punctuation">.</span>Column<span class="token operator">=</span><span class="token string">"1"</span> Height<span class="token operator">=</span><span class="token string">"25"</span> Width<span class="token operator">=</span><span class="token string">"80"</span> Margin<span class="token operator">=</span><span class="token string">"0,5"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">TextBox</span> Text<span class="token operator">=</span><span class="token string">"{Binding Blue, UpdateSourceTrigger=PropertyChanged}"</span> 
             VerticalContentAlignment<span class="token operator">=</span><span class="token string">"Center"</span> Grid<span class="token punctuation">.</span>Row<span class="token operator">=</span><span class="token string">"2"</span> Grid<span class="token punctuation">.</span>Column<span class="token operator">=</span><span class="token string">"1"</span> Height<span class="token operator">=</span><span class="token string">"25"</span> Width<span class="token operator">=</span><span class="token string">"80"</span> Margin<span class="token operator">=</span><span class="token string">"0,5"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token class-name">Rectangle</span> Fill<span class="token operator">=</span><span class="token string">"{Binding Color, Converter={StaticResource ColorToSolidBrushConverter}}"</span> 
               Grid<span class="token punctuation">.</span>Column<span class="token operator">=</span><span class="token string">"2"</span> Grid<span class="token punctuation">.</span>RowSpan<span class="token operator">=</span><span class="token string">"3"</span> Margin<span class="token operator">=</span><span class="token string">"10, 5"</span> Width<span class="token operator">=</span><span class="token string">"100"</span> Height<span class="token operator">=</span><span class="token string">"100"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token operator">&gt;</span>
C# Code


<span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">RGBControl</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">UserControl</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token function">RGBControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>DataContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RGBViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RGBViewModel</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObservableObject</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">byte</span></span> _red <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">byte</span></span> Red
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">get</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _red<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>_red <span class="token operator">!=</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                _red <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
                <span class="token function">RaisePropertyChanged</span><span class="token punctuation">(</span><span class="token string">"Red"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">RaiseColorChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">byte</span></span> _green <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">byte</span></span> Green
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">get</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _green<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>_green <span class="token operator">!=</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                _green <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
                <span class="token function">RaisePropertyChanged</span><span class="token punctuation">(</span><span class="token string">"Green"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">RaiseColorChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">byte</span></span> _blue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">byte</span></span> Blue
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">get</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _blue<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>_blue <span class="token operator">!=</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                _blue <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
                <span class="token function">RaisePropertyChanged</span><span class="token punctuation">(</span><span class="token string">"Blue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">RaiseColorChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Color</span> _color<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Color</span> Color
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">get</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _color<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">RaiseColorChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">RaiseColorChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        _color <span class="token operator">=</span> Color<span class="token punctuation">.</span><span class="token function">FromRgb</span><span class="token punctuation">(</span>Red<span class="token punctuation">,</span> Green<span class="token punctuation">,</span> Blue<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">RaisePropertyChanged</span><span class="token punctuation">(</span><span class="token string">"Color"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ObservableObject</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">INotifyPropertyChanged</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">event</span> <span class="token class-name">PropertyChangedEventHandler</span> PropertyChanged<span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">RaisePropertyChanged</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> propertyName<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        PropertyChanged<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PropertyChangedEventArgs</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ColorToSolidBrushConverter</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IValueConverter</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Convert</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token class-name">Type</span> targetType<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">object</span></span> parameter<span class="token punctuation">,</span> <span class="token class-name">CultureInfo</span> culture<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Color</span> color <span class="token operator">=</span> <span class="token punctuation">(</span>Color<span class="token punctuation">)</span><span class="token keyword">value</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SolidColorBrush</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">ConvertBack</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token class-name">Type</span> targetType<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">object</span></span> parameter<span class="token punctuation">,</span> <span class="token class-name">CultureInfo</span> culture<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
View Code
使用RGBControl：

<span class="token operator">&lt;</span>Grid<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>local<span class="token punctuation">:</span><span class="token class-name">RGBControl</span> Width<span class="token operator">=</span><span class="token string">"320"</span> Height<span class="token operator">=</span><span class="token string">"120"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token operator">&gt;</span>
</code></pre> 
<p><strong>CustomControl</strong><br> 自定义控件，扩展自一个已经存在的控件，并添加新的功能/特性；<br> 由C#/VB.NET Code和样式文件组成(Themes/Generic.xaml)；<br> 支持样式/模板重写；<br> 包括一个自定义的控件类和默认的自定义主题样式文件<br> 继承于要实现的相关控件基类；<br> <strong>自定义控件与当前页面进行实现数据传输需要进行创建依赖属性，达到复用原则；</strong><br> 以下是基于 TextBox实现的自定义控件<br> <img src="https://images2.imgbox.com/14/91/O6eD30mX_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-csharp">C# Code<span class="token punctuation">:</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">TemplatePart</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> UpButtonKey<span class="token punctuation">,</span> Type <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Button</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">TemplatePart</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> DownButtonKey<span class="token punctuation">,</span> Type <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Button</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NumericTextBox</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">TextBox</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> UpButtonKey <span class="token operator">=</span> <span class="token string">"PART_UpButton"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> DownButtonKey <span class="token operator">=</span> <span class="token string">"PART_DownButton"</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Button</span> _btnUp <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Button</span> _btnDown <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token function">NumericTextBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        DefaultStyleKeyProperty<span class="token punctuation">.</span><span class="token function">OverrideMetadata</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">NumericTextBox</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FrameworkPropertyMetadata</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">NumericTextBox</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnApplyTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnApplyTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        _btnUp <span class="token operator">=</span> Template<span class="token punctuation">.</span><span class="token function">FindName</span><span class="token punctuation">(</span>UpButtonKey<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">Button</span><span class="token punctuation">;</span>
        _btnDown <span class="token operator">=</span> Template<span class="token punctuation">.</span><span class="token function">FindName</span><span class="token punctuation">(</span>DownButtonKey<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">Button</span><span class="token punctuation">;</span>

        _btnUp<span class="token punctuation">.</span>Click <span class="token operator">+=</span> <span class="token keyword">delegate</span> <span class="token punctuation">{<!-- --></span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        _btnDown<span class="token punctuation">.</span>Click <span class="token operator">+=</span> <span class="token keyword">delegate</span> <span class="token punctuation">{<!-- --></span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> operation<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token keyword">int</span></span> input <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token punctuation">,</span> <span class="token keyword">out</span> input<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>operation <span class="token operator">==</span> <span class="token string">"+"</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token punctuation">(</span>input <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token punctuation">(</span>input <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Style</span> Code<span class="token punctuation">:</span>

<span class="token operator">&lt;</span><span class="token class-name">Style</span> TargetType<span class="token operator">=</span><span class="token string">"{x:Type local:NumericTextBox}"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"SnapsToDevicePixels"</span> Value<span class="token operator">=</span><span class="token string">"True"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"FontSize"</span> Value<span class="token operator">=</span><span class="token string">"12"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"Height"</span> Value<span class="token operator">=</span><span class="token string">"40"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    
    <span class="token operator">&lt;</span><span class="token class-name">Setter</span> Property<span class="token operator">=</span><span class="token string">"Template"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Setter<span class="token punctuation">.</span>Value<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">ControlTemplate</span> TargetType<span class="token operator">=</span><span class="token string">"{x:Type local:NumericTextBox}"</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">Border</span> x<span class="token punctuation">:</span>Name<span class="token operator">=</span><span class="token string">"OuterBorder"</span> BorderBrush<span class="token operator">=</span><span class="token string">"LightGray"</span> BorderThickness<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Grid<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>Grid<span class="token punctuation">.</span>RowDefinitions<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>RowDefinition <span class="token operator">/</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>RowDefinition <span class="token operator">/</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token punctuation">.</span>RowDefinitions<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>Grid<span class="token punctuation">.</span>ColumnDefinitions<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">ColumnDefinition</span> Width<span class="token operator">=</span><span class="token string">"*"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">ColumnDefinition</span> Width<span class="token operator">=</span><span class="token string">"30"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token punctuation">.</span>ColumnDefinitions<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>Border Grid<span class="token punctuation">.</span>ColumnSpan<span class="token operator">=</span><span class="token string">"2"</span> Grid<span class="token punctuation">.</span>RowSpan<span class="token operator">=</span><span class="token string">"2"</span> Background<span class="token operator">=</span><span class="token string">"White"</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">ScrollViewer</span> x<span class="token punctuation">:</span>Name<span class="token operator">=</span><span class="token string">"PART_ContentHost"</span> Margin<span class="token operator">=</span><span class="token string">"5,0"</span> VerticalAlignment<span class="token operator">=</span><span class="token string">"Center"</span> FontSize<span class="token operator">=</span><span class="token string">"12"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>Border<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">Button</span> x<span class="token punctuation">:</span>Name<span class="token operator">=</span><span class="token string">"PART_UpButton"</span> Grid<span class="token punctuation">.</span>Column<span class="token operator">=</span><span class="token string">"1"</span> Content<span class="token operator">=</span><span class="token string">"+"</span> VerticalContentAlignment<span class="token operator">=</span><span class="token string">"Center"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">Button</span> x<span class="token punctuation">:</span>Name<span class="token operator">=</span><span class="token string">"PART_DownButton"</span> Grid<span class="token punctuation">.</span>Row<span class="token operator">=</span><span class="token string">"1"</span> Grid<span class="token punctuation">.</span>Column<span class="token operator">=</span><span class="token string">"1"</span> Content<span class="token operator">=</span><span class="token string">"-"</span> VerticalContentAlignment<span class="token operator">=</span><span class="token string">"Center"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Border<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ControlTemplate<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Setter<span class="token punctuation">.</span>Value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Setter<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Style<span class="token operator">&gt;</span>
使用：

<span class="token operator">&lt;</span>StackPanel<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>custom<span class="token punctuation">:</span><span class="token class-name">NumericTextBox</span> Width<span class="token operator">=</span><span class="token string">"200"</span> Text<span class="token operator">=</span><span class="token string">"1"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>StackPanel<span class="token operator">&gt;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/733417650f8400741c13ab2bbd880af5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深度学习——Batch Normalization</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f62dffb5b601f54a63c312516cfa2f90/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CentOS下载</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>