<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>docker实践教程，nginx中使用数据卷映射修改前端网页（一） - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/aa4fd2ef4507997644faa88d48b85f16/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="docker实践教程，nginx中使用数据卷映射修改前端网页（一）">
  <meta property="og:description" content="小白专用docker教程，图文介绍要怎么在docker中使用nginx修改配置前端网页
docker基础 Docker Hub (https://hub.docker.com)
Docker 官网：https://www.docker.com
不懂docker的搭配菜鸟教程食用更佳，个人觉得菜鸟教程说得太简单了，看了还是云里雾里，只适合刚开始对docker有个基本了解，不适合实际应用，所以我搭配了一个具体实践来说明docker的使用
获取nginx镜像 到Docker Hub查看nginx对应的使用方法、配置、及具体介绍等内容
输入对应下载镜像的pull命令下载镜像 （nginx后不接版本号默认下载latest版本，即最新版本）
docker pull nginx 查看本地的镜像 docker images 其他命令 删除镜像 docker rmi nginx:latest 打包镜像为压缩包nginx.tar docker sava -o nginx.tar nginx:latest save ------ 打包命令，可通过docker save --help查看可添加的参数及具体使用方法
-o ------ 打包成一个文件，后接文件名
nginx ------要打包的镜像，后接版本号（latest）
使用打包的镜像文件 docker load -i nginx.tar 根据已有镜像创建容器 根据已有的nginx镜像运行一个nginx容器,或者说创建出一个新的nginx容器
（每次运行run命令都会运行创建出一个新的容器） docker run -d --name nginx -p 80:80 nginx -d ------ 参数默认不会进入容器，想要进入容器需要使用指令 docker exec
-p ------- 端口映射，其中两个端口是（宿主机端口：容器端口），代表把宿主机端口映射到容器端口上。
–name ----- 容器命名，后接你对该容器的命名（此处是nginx为容器名）
（第二个nginx代表指定使用的镜像，不加版本号默认是latest版本，不要把两个nginx混淆了）
查看已有容器 docker ps 启动已有的容器 docker start nginx 此时正常情况是在浏览器输入网址可以看见运行的网页（浏览器输入的网址是：宿主机ip&#43;映射的宿主机端口）">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-20T14:05:50+08:00">
    <meta property="article:modified_time" content="2024-03-20T14:05:50+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">docker实践教程，nginx中使用数据卷映射修改前端网页（一）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>小白专用docker教程，图文介绍要怎么在docker中使用nginx修改配置前端网页</p> 
<h2><a id="docker_1"></a>docker基础</h2> 
<p>Docker Hub (<a href="https://hub.docker.com" rel="nofollow">https://hub.docker.com</a>)<br> Docker 官网：<a href="https://www.docker.com" rel="nofollow">https://www.docker.com</a><br> 不懂docker的搭配<a href="https://www.runoob.com/docker/docker-tutorial.html" rel="nofollow">菜鸟教程</a>食用更佳，个人觉得菜鸟教程说得太简单了，看了还是云里雾里，只适合刚开始对docker有个基本了解，不适合实际应用，所以我搭配了一个具体实践来说明docker的使用</p> 
<p><img src="https://images2.imgbox.com/46/af/LSifIMxu_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="nginx_10"></a>获取nginx镜像</h2> 
<p>到Docker Hub查看nginx对应的使用方法、配置、及具体介绍等内容<br> <img src="https://images2.imgbox.com/72/a1/p84LeUMD_o.png" alt="在这里插入图片描述"></p> 
<ul><li>输入对应下载镜像的pull命令下载镜像</li></ul> 
<p>（nginx后不接版本号默认下载latest版本，即最新版本）</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> pull nginx
</code></pre> 
<ul><li>查看本地的镜像</li></ul> 
<pre><code class="prism language-bash"><span class="token function">docker</span> images
</code></pre> 
<h3><a id="_29"></a>其他命令</h3> 
<ul><li>删除镜像</li></ul> 
<pre><code class="prism language-bash"><span class="token function">docker</span> rmi nginx:latest
</code></pre> 
<ul><li>打包镜像为压缩包nginx.tar</li></ul> 
<pre><code class="prism language-bash"><span class="token function">docker</span> sava <span class="token parameter variable">-o</span> nginx.tar nginx:latest
</code></pre> 
<p>save ------ 打包命令，可通过docker save --help查看可添加的参数及具体使用方法<br> -o ------ 打包成一个文件，后接文件名<br> nginx ------要打包的镜像，后接版本号（latest）</p> 
<ul><li>使用打包的镜像文件</li></ul> 
<pre><code class="prism language-bash"><span class="token function">docker</span> load <span class="token parameter variable">-i</span> nginx.tar
</code></pre> 
<h2><a id="_53"></a>根据已有镜像创建容器</h2> 
<ul><li>根据已有的nginx镜像运行一个nginx容器,或者说创建出一个新的nginx容器<br> （每次运行run命令都会运行创建出一个新的容器）</li></ul> 
<pre><code class="prism language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 nginx
</code></pre> 
<p>-d ------ 参数默认不会进入容器，想要进入容器需要使用指令 docker exec<br> -p ------- 端口映射，其中两个端口是（<strong>宿主机端口：容器端口</strong>），代表把宿主机端口映射到容器端口上。<br> –name ----- 容器命名，后接你对该容器的命名（此处是nginx为容器名）<br> （第二个nginx代表指定使用的镜像，不加版本号默认是latest版本，不要把两个nginx混淆了）</p> 
<ul><li>查看已有容器</li></ul> 
<pre><code class="prism language-bash"><span class="token function">docker</span> <span class="token function">ps</span>
</code></pre> 
<ul><li>启动已有的容器</li></ul> 
<pre><code class="prism language-bash"><span class="token function">docker</span> start nginx
</code></pre> 
<p>此时正常情况是在浏览器输入网址可以看见运行的网页（浏览器输入的网址是：宿主机ip+映射的宿主机端口）<br> <img src="https://images2.imgbox.com/0f/6c/dT90oN2t_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_82"></a>其他命令</h3> 
<ul><li>停止已运行的容器</li></ul> 
<pre><code class="prism language-bash"><span class="token function">docker</span> stop nginx
</code></pre> 
<ul><li>删除容器</li></ul> 
<pre><code class="prism language-bash"><span class="token function">docker</span> <span class="token function">rm</span> nginx
</code></pre> 
<ul><li>查看日志</li></ul> 
<pre><code class="prism language-bash"><span class="token function">docker</span> logs nginx（查看已有的日志）
<span class="token function">docker</span> logs <span class="token parameter variable">-f</span> nginx（不退出一直监听日志，这个时候访问nginx内网页什么的操作都会被监听到）
</code></pre> 
<ul><li>进入容器内部（exit退出）</li></ul> 
<pre><code class="prism language-bash"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> nginx <span class="token function">bash</span>
</code></pre> 
<p>-i ------ 交互式操作。<br> -t ------ 终端。<br> bash ------ 用bash命令进行交互</p> 
<h2><a id="_114"></a>修改网页文件</h2> 
<p>当不知道怎么用的时候，上Docker Hub 看看<br> <img src="https://images2.imgbox.com/8c/8f/71rMDxB3_o.png" alt="在这里插入图片描述"></p> 
<p>我们从Docker Hub 中nginx的介绍可以知道，在docker中，nginx默认的静态网页文件在 <code>/usr/share/nginx/html</code>目录下。（配置文件什么的都这样找！！！！）</p> 
<p>我们先来个简单一点，去修改这个默认的网页文件。</p> 
<h3><a id="nginx_122"></a>进入nginx容器内部</h3> 
<p>使用exec命令进入nginx容器内部，<code>ls</code>命令后，会发现容器内部有自己的文件系统（下图截取不完全）。<br> 会发现ll、vi的命令用不了，因为docker中下载的镜像只准备了当前应用程序运行的必备最小系统函数库，不是和平时使用的Linux系统一样有很多自带的小工具的。那我们应该怎么修改文件内容呢<img src="https://images2.imgbox.com/7a/0d/wJXld7eg_o.png" alt="在这里插入图片描述"><br> 这个时候我们就需要数据卷了</p> 
<h3><a id="_128"></a>数据卷</h3> 
<p>数据卷（volume）是一个虚拟目录，是<strong>容器内目录</strong>与<strong>宿主机</strong>之间映射的桥梁。<br> <img src="https://images2.imgbox.com/5b/01/hUFbXDlZ_o.png" alt="在这里插入图片描述"><br> 数据卷是双向绑定的，挂载之后，每次当我们如果要修改容器内的目录文件，相当于只要修改宿主机内对应的文件就可以了，容器内的目录文件会被自动映射</p> 
<p><strong>数据卷对应命令：</strong><br> 创建数据卷</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> volume create
</code></pre> 
<p>查看所有数据卷</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> volume <span class="token function">ls</span>
</code></pre> 
<p>删除指定数据卷</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> volume <span class="token function">rm</span>
</code></pre> 
<p>查看某个数据卷详情</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> volume inspect
</code></pre> 
<p>清除未使用的数据卷</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> volume prune
</code></pre> 
<p><strong>小知识：</strong><br> 输入<code>docker volume --help</code>就可以获取所有volume下具体的命令，volume可以替换成任何一个你想知道的docker命令<br> <img src="https://images2.imgbox.com/b5/28/teuZwD0R_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_168"></a>数据卷挂载</h3> 
<p>在执行docker run命令创建容器时，使用 <code>-v 数据卷:容器目录</code>就可以完成数据卷挂载。<br> 当创建容器时如果挂载了数据卷，但是数据卷不存在，系统会自动创建这个数据卷（数据卷不要重名）。<br> 如果容器已经创建了，就没办法挂载数据卷了（前面创建的容器要删除了哈哈哈哈哈哈哈，没事，当熟悉一下命令了）</p> 
<p>按下图操作，删除nginx容器（删除之前需要先停止），再在创建容器时挂载数据卷。<br> <img src="https://images2.imgbox.com/b6/78/AFSKYKOM_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">-v</span> html:/usr/share/nginx/html  nginx
</code></pre> 
<p>就可以看见我们的容器和数据卷了<br> <img src="https://images2.imgbox.com/cc/7b/QSCG5JIM_o.png" alt="在这里插入图片描述"><br> 使用<code>docker volume inspect html</code>查看html这个数据卷的详细信息，就可以找到该数据卷对应的宿主机文件目录了<img src="https://images2.imgbox.com/42/a4/iB99qFUZ_o.png" alt="在这里插入图片描述"><br> 此时去浏览器刷新网页，应该是和原来一样的。<br> 现在就可以去修改文件内容了，可以用vi编辑器也可以用MobaXterm等其他工具（推荐下载一个MobaXterm，双击文件打开就可以修改了）<br> <img src="https://images2.imgbox.com/9b/a9/EiCKeaqH_o.png" alt="在这里插入图片描述"><br> 改个Hello,World!!!上去试一下，刷新网页，可以看见网页已经修改成功了<br> <img src="https://images2.imgbox.com/19/78/XFKeFQS0_o.png" alt="在这里插入图片描述"><br> 我们也可以把自己的网页文件放进来，有index.html文件就行</p> 
<h3><a id="_191"></a>查看容器数据卷挂载信息</h3> 
<ul><li>查看nginx容器详细</li></ul> 
<pre><code class="prism language-bash"><span class="token function">docker</span> inspect nginx
</code></pre> 
<p>在其中的mounts（挂载）项中，可查看到<br> 数据卷方式挂载，<br> 名称是html，<br> 宿主机目录/var/lib/docker/volumes/html/_data，<br> 容器目录/usr/share/nginx/html，</p> 
<p><img src="https://images2.imgbox.com/28/7e/5xr2kwzi_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/675ac6ddf53204e3082bd161cf432c49/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在异步操作中，未能正确处理错误或者错误处理逻辑不清晰。 举例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5b5a4c1854f42cd4539247c6397b5609/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用 node.js 开发前端跨域代理服务</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>