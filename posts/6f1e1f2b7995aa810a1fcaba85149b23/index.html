<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>React路由V6技术文档 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/6f1e1f2b7995aa810a1fcaba85149b23/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="React路由V6技术文档">
  <meta property="og:description" content="React Router 6 快速上手 1.概述 React Router 以三个不同的包发布到 npm 上，它们分别为：
react-router: 路由的核心库，提供了很多的：组件、钩子。react-router-dom: 包含react-router所有内容，并添加一些专门用于 DOM 的组件，例如 &amp;lt;BrowserRouter&amp;gt;等 。react-router-native: 包括react-router所有内容，并添加一些专门用于ReactNative的API，例如:&amp;lt;NativeRouter&amp;gt;等。 与React Router 5.x 版本相比，改变了什么？
内置组件的变化：移除&amp;lt;Switch/&amp;gt; ，新增 &amp;lt;Routes/&amp;gt;等。
语法的变化：component={About} 变为 element={&amp;lt;About/&amp;gt;}等。
新增多个hook：useParams、useNavigate、useMatch等。
官方明确推荐函数式组件了！！！
…
2.Component 1. &amp;lt;BrowserRouter&amp;gt; 说明：&amp;lt;BrowserRouter&amp;gt;用于包裹整个应用。
示例代码：
import React from &#34;react&#34;; import ReactDOM from &#34;react-dom&#34;; import { BrowserRouter } from &#34;react-router-dom&#34;; ReactDOM.render( &amp;lt;BrowserRouter&amp;gt; {/* 整体结构（通常为App组件） */} &amp;lt;/BrowserRouter&amp;gt;,root ); 2. &amp;lt;HashRouter&amp;gt; 说明：作用与&amp;lt;BrowserRouter&amp;gt;一样，但&amp;lt;HashRouter&amp;gt;修改的是地址栏的hash值。备注：6.x版本中&amp;lt;HashRouter&amp;gt;、&amp;lt;BrowserRouter&amp;gt; 的用法与 5.x 相同。 3. &amp;lt;Routes/&amp;gt; 与 &amp;lt;Route/&amp;gt; v6版本中移出了先前的&amp;lt;Switch&amp;gt;，引入了新的替代者：&amp;lt;Routes&amp;gt;。
&amp;lt;Routes&amp;gt; 和 &amp;lt;Route&amp;gt;要配合使用，且必须要用&amp;lt;Routes&amp;gt;包裹&amp;lt;Route&amp;gt;。">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-04-01T13:49:51+08:00">
    <meta property="article:modified_time" content="2022-04-01T13:49:51+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">React路由V6技术文档</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="img_srchttpsftpbmpovhimgs202202f86f98dd6ff7d01bpng_stylewidth50marginleft50transformtranslateX50__0"></a><img src="https://images2.imgbox.com/9d/95/lkN6Slnl_o.png"></h2> 
<h2><a id="React_Router_6__2"></a>React Router 6 快速上手</h2> 
<h3><a id="1_4"></a>1.概述</h3> 
<ol><li> <p>React Router 以三个不同的包发布到 npm 上，它们分别为：</p> 
  <ol><li>react-router: 路由的核心库，提供了很多的：组件、钩子。</li><li><strong><strong>react-router-dom:</strong></strong> <strong>包含react-router所有内容，并添加一些专门用于 DOM 的组件，例如 <code>&lt;BrowserRouter&gt;</code>等 </strong>。</li><li>react-router-native: 包括react-router所有内容，并添加一些专门用于ReactNative的API，例如:<code>&lt;NativeRouter&gt;</code>等。</li></ol> </li><li> <p>与React Router 5.x 版本相比，改变了什么？</p> 
  <ol><li> <p>内置组件的变化：移除<code>&lt;Switch/&gt;</code> ，新增 <code>&lt;Routes/&gt;</code>等。</p> </li><li> <p>语法的变化：<code>component={About}</code> 变为 <code>element={&lt;About/&gt;}</code>等。</p> </li><li> <p>新增多个hook：<code>useParams</code>、<code>useNavigate</code>、<code>useMatch</code>等。</p> </li><li> <p><strong>官方明确推荐函数式组件了！！！</strong></p> <p>…</p> </li></ol> </li></ol> 
<h3><a id="2Component_24"></a>2.Component</h3> 
<h4><a id="1_BrowserRouter_26"></a>1. <code>&lt;BrowserRouter&gt;</code></h4> 
<ol><li> <p>说明：<code>&lt;BrowserRouter&gt;</code>用于包裹整个应用。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">import React from "react";
import ReactDOM from "react-dom";
import { BrowserRouter } from "react-router-dom";

ReactDOM.render(
  &lt;BrowserRouter&gt;
    {/* 整体结构（通常为App组件） */}
  &lt;/BrowserRouter&gt;,root
);
</code></pre> </li></ol> 
<h4><a id="2_HashRouter_44"></a>2. <code>&lt;HashRouter&gt;</code></h4> 
<ol><li>说明：作用与<code>&lt;BrowserRouter&gt;</code>一样，但<code>&lt;HashRouter&gt;</code>修改的是地址栏的hash值。</li><li>备注：6.x版本中<code>&lt;HashRouter&gt;</code>、<code>&lt;BrowserRouter&gt;</code> 的用法与 5.x 相同。</li></ol> 
<h4><a id="3_Routes__Route_49"></a>3. <code>&lt;Routes/&gt; 与 &lt;Route/&gt;</code></h4> 
<ol><li> <p>v6版本中移出了先前的<code>&lt;Switch&gt;</code>，引入了新的替代者：<code>&lt;Routes&gt;</code>。</p> </li><li> <p><code>&lt;Routes&gt;</code> 和 <code>&lt;Route&gt;</code>要配合使用，且必须要用<code>&lt;Routes&gt;</code>包裹<code>&lt;Route&gt;</code>。</p> </li><li> <p><code>&lt;Route&gt;</code> 相当于一个 if 语句，如果其路径与当前 URL 匹配，则呈现其对应的组件。</p> </li><li> <p><code>&lt;Route caseSensitive&gt;</code> 属性用于指定：匹配时是否区分大小写（默认为 false）。</p> </li><li> <p>当URL发生变化时，<code>&lt;Routes&gt;</code>都会查看其所有子<code>&lt;Route&gt;</code> 元素以找到最佳匹配并呈现组件 。</p> </li><li> <p><code>&lt;Route&gt;</code> 也可以嵌套使用，且可配合<code>useRoutes()</code>配置 “路由表” ，但需要通过 <code>&lt;Outlet&gt;</code> 组件来渲染其子路由。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">&lt;Routes&gt;
    /*path属性用于定义路径，element属性用于定义当前路径所对应的组件*/
    &lt;Route path="/login" element={&lt;Login /&gt;}&gt;&lt;/Route&gt;

		/*用于定义嵌套路由，home是一级路由，对应的路径/home*/
    &lt;Route path="home" element={&lt;Home /&gt;}&gt;
       /*test1 和 test2 是二级路由,对应的路径是/home/test1 或 /home/test2*/
      &lt;Route path="test1" element={&lt;Test/&gt;}&gt;&lt;/Route&gt;
      &lt;Route path="test2" element={&lt;Test2/&gt;}&gt;&lt;/Route&gt;
		&lt;/Route&gt;
	
		//Route也可以不写element属性, 这时就是用于展示嵌套的路由 .所对应的路径是/users/xxx
    &lt;Route path="users"&gt;
       &lt;Route path="xxx" element={&lt;Demo /&gt;} /&gt;
    &lt;/Route&gt;
&lt;/Routes&gt;
</code></pre> </li></ol> 
<h4><a id="4_Link_84"></a>4. <code>&lt;Link&gt;</code></h4> 
<ol><li> <p>作用: 修改URL，且不发送网络请求（路由链接）。</p> </li><li> <p>注意: 外侧需要用<code>&lt;BrowserRouter&gt;</code>或<code>&lt;HashRouter&gt;</code>包裹。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">import { Link } from "react-router-dom";

function Test() {
  return (
    &lt;div&gt;
    	&lt;Link to="/路径"&gt;按钮&lt;/Link&gt;
    &lt;/div&gt;
  );
}
</code></pre> </li></ol> 
<h4><a id="5_NavLink_104"></a>5. <code>&lt;NavLink&gt;</code></h4> 
<ol><li> <p>作用: 与<code>&lt;Link&gt;</code>组件类似，且可实现导航的“高亮”效果。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">// 注意: NavLink默认类名是active，下面是指定自定义的class

//自定义样式
&lt;NavLink
    to="login"
    className={({ isActive }) =&gt; {
        console.log('home', isActive)
        return isActive ? 'base one' : 'base'
    }}
&gt;login&lt;/NavLink&gt;

/*
	默认情况下，当Home的子组件匹配成功，Home的导航也会高亮，
	当NavLink上添加了end属性后，若Home的子组件匹配成功，则Home的导航没有高亮效果。
*/
&lt;NavLink to="home" end &gt;home&lt;/NavLink&gt;
</code></pre> </li></ol> 
<h4><a id="6_Navigate_129"></a>6. <code>&lt;Navigate&gt;</code></h4> 
<ol><li> <p>作用：只要<code>&lt;Navigate&gt;</code>组件被渲染，就会修改路径，切换视图。</p> </li><li> <p><code>replace</code>属性用于控制跳转模式（push 或 replace，默认是push）。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">import React,{useState} from 'react'
import {Navigate} from 'react-router-dom'

export default function Home() {
	const [sum,setSum] = useState(1)
	return (
		&lt;div&gt;
			&lt;h3&gt;我是Home的内容&lt;/h3&gt;
			{/* 根据sum的值决定是否切换视图 */}
			{sum === 1 ? &lt;h4&gt;sum的值为{sum}&lt;/h4&gt; : &lt;Navigate to="/about" replace={true}/&gt;}
			&lt;button onClick={()=&gt;setSum(2)}&gt;点我将sum变为2&lt;/button&gt;
		&lt;/div&gt;
	)
}
</code></pre> </li></ol> 
<h4><a id="7_Outlet_154"></a>7. <code>&lt;Outlet&gt;</code></h4> 
<ol><li> <p>当<code>&lt;Route&gt;</code>产生嵌套时，渲染其对应的后续子路由。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">//根据路由表生成对应的路由规则
const element = useRoutes([
  {
    path:'/about',
    element:&lt;About/&gt;
  },
  {
    path:'/home',
    element:&lt;Home/&gt;,
    children:[
      {
        path:'news',
        element:&lt;News/&gt;
      },
      {
        path:'message',
        element:&lt;Message/&gt;,
      }
    ]
  }
])

//Home.js
import React from 'react'
import {NavLink,Outlet} from 'react-router-dom'

export default function Home() {
	return (
		&lt;div&gt;
			&lt;h2&gt;Home组件内容&lt;/h2&gt;
			&lt;div&gt;
				&lt;ul className="nav nav-tabs"&gt;
					&lt;li&gt;
						&lt;NavLink className="list-group-item" to="news"&gt;News&lt;/NavLink&gt;
					&lt;/li&gt;
					&lt;li&gt;
						&lt;NavLink className="list-group-item" to="message"&gt;Message&lt;/NavLink&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				{/* 指定路由组件呈现的位置 */}
				&lt;Outlet /&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	)
}

</code></pre> </li></ol> 
<h3><a id="3Hooks_209"></a>3.Hooks</h3> 
<h4><a id="1_useRoutes_211"></a>1. useRoutes()</h4> 
<ol><li> <p>作用：根据路由表，动态创建<code>&lt;Routes&gt;</code>和<code>&lt;Route&gt;</code>。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">//路由表配置：src/routes/index.js
import About from '../pages/About'
import Home from '../pages/Home'
import {Navigate} from 'react-router-dom'

export default [
	{
		path:'/about',
		element:&lt;About/&gt;
	},
	{
		path:'/home',
		element:&lt;Home/&gt;
	},
	{
		path:'/',
		element:&lt;Navigate to="/about"/&gt;
	}
]

//App.jsx
import React from 'react'
import {NavLink,useRoutes} from 'react-router-dom'
import routes from './routes'

export default function App() {
	//根据路由表生成对应的路由规则
	const element = useRoutes(routes)
	return (
		&lt;div&gt;
			......
      {/* 注册路由 */}
      {element}
		  ......
		&lt;/div&gt;
	)
}

</code></pre> </li></ol> 
<h4><a id="2_useNavigate_258"></a>2. useNavigate()</h4> 
<ol><li> <p>作用：返回一个函数用来实现编程式导航。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">import React from 'react'
import {useNavigate} from 'react-router-dom'

export default function Demo() {
  const navigate = useNavigate()
  const handle = () =&gt; {
    //第一种使用方式：指定具体的路径
    navigate('/login', {
      replace: false,
      state: {a:1, b:2}
    }) 
    //第二种使用方式：传入数值进行前进或后退，类似于5.x中的 history.go()方法
    navigate(-1)
  }
  
  return (
    &lt;div&gt;
      &lt;button onClick={handle}&gt;按钮&lt;/button&gt;
    &lt;/div&gt;
  )
}
</code></pre> </li></ol> 
<h4><a id="3_useParams_288"></a>3. useParams()</h4> 
<ol><li> <p>作用：回当前匹配路由的<code>params</code>参数，类似于5.x中的<code>match.params</code>。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">import React from 'react';
import { Routes, Route, useParams } from 'react-router-dom';
import User from './pages/User.jsx'

function ProfilePage() {
  // 获取URL中携带过来的params参数
  let { id } = useParams();
}

function App() {
  return (
    &lt;Routes&gt;
      &lt;Route path="users/:id" element={&lt;User /&gt;}/&gt;
    &lt;/Routes&gt;
  );
}
</code></pre> </li></ol> 
<h4><a id="4_useSearchParams_313"></a>4. useSearchParams()</h4> 
<ol><li> <p>作用：用于读取和修改当前位置的 URL 中的查询字符串。</p> </li><li> <p>返回一个包含两个值的数组，内容分别为：当前的seaech参数、更新search的函数。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">import React from 'react'
import {useSearchParams} from 'react-router-dom'

export default function Detail() {
	const [search,setSearch] = useSearchParams()
	const id = search.get('id')
	const title = search.get('title')
	const content = search.get('content')
	return (
		&lt;ul&gt;
			&lt;li&gt;
				&lt;button onClick={()=&gt;setSearch('id=008&amp;title=哈哈&amp;content=嘻嘻')}&gt;点我更新一下收到的search参数&lt;/button&gt;
			&lt;/li&gt;
			&lt;li&gt;消息编号：{id}&lt;/li&gt;
			&lt;li&gt;消息标题：{title}&lt;/li&gt;
			&lt;li&gt;消息内容：{content}&lt;/li&gt;
		&lt;/ul&gt;
	)
}

</code></pre> </li></ol> 
<h4><a id="5_useLocation_344"></a>5. useLocation()</h4> 
<ol><li> <p>作用：获取当前 location 信息，对标5.x中的路由组件的<code>location</code>属性。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">import React from 'react'
import {useLocation} from 'react-router-dom'

export default function Detail() {
	const x = useLocation()
	console.log('@',x)
  // x就是location对象: 
	/*
		{
      hash: "",
      key: "ah9nv6sz",
      pathname: "/login",
      search: "?name=zs&amp;age=18",
      state: {a: 1, b: 2}
    }
	*/
	return (
		&lt;ul&gt;
			&lt;li&gt;消息编号：{id}&lt;/li&gt;
			&lt;li&gt;消息标题：{title}&lt;/li&gt;
			&lt;li&gt;消息内容：{content}&lt;/li&gt;
		&lt;/ul&gt;
	)
}

  


</code></pre> </li></ol> 
<h4><a id="6_useMatch_381"></a>6. useMatch()</h4> 
<ol><li> <p>作用：返回当前匹配信息，对标5.x中的路由组件的<code>match</code>属性。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">&lt;Route path="/login/:page/:pageSize" element={&lt;Login /&gt;}/&gt;
&lt;NavLink to="/login/1/10"&gt;登录&lt;/NavLink&gt;

export default function Login() {
  const match = useMatch('/login/:x/:y')
  console.log(match) //输出match对象
  //match对象内容如下：
  /*
  	{
      params: {x: '1', y: '10'}
      pathname: "/LoGin/1/10"  
      pathnameBase: "/LoGin/1/10"
      pattern: {
      	path: '/login/:x/:y', 
      	caseSensitive: false, 
      	end: false
      }
    }
  */
  return (
  	&lt;div&gt;
      &lt;h1&gt;Login&lt;/h1&gt;
    &lt;/div&gt;
  )
}
</code></pre> </li></ol> 
<h4><a id="7_useInRouterContext_415"></a>7. useInRouterContext()</h4> 
<p>​ 作用：如果组件在 <code>&lt;Router&gt;</code> 的上下文中呈现，则 <code>useInRouterContext</code> 钩子返回 true，否则返回 false。</p> 
<h4><a id="8_useNavigationType_419"></a>8. useNavigationType()</h4> 
<ol><li>作用：返回当前的导航类型（用户是如何来到当前页面的）。</li><li>返回值：<code>POP</code>、<code>PUSH</code>、<code>REPLACE</code>。</li><li>备注：<code>POP</code>是指在浏览器中直接打开了这个路由组件（刷新页面）。</li></ol> 
<h4><a id="9_useOutlet_425"></a>9. useOutlet()</h4> 
<ol><li> <p>作用：用来呈现当前组件中渲染的嵌套路由。</p> </li><li> <p>示例代码：</p> <pre><code class="prism language-jsx">const result = useOutlet()
console.log(result)
// 如果嵌套路由没有挂载,则result为null
// 如果嵌套路由已经挂载,则展示嵌套的路由对象
</code></pre> </li></ol> 
<h4><a id="10useResolvedPath_438"></a>10.useResolvedPath()</h4> 
<ol><li>作用：给定一个 URL值，解析其中的：path、search、hash值。</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/46ac0ab92453a43946e31cdba63a1f11/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">软件测试技术课后习题：第6章单元测试与集成测试-广东高等教育出版社，主编杨胜利</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/262efed5c08af6fbe375330785d34295/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring 特性</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>