<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于STL的演讲比赛流程管理 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/7ec2abb6952e952f9bb3e627338ad9f1/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="基于STL的演讲比赛流程管理">
  <meta property="og:description" content="比赛规则: ·学校举行一场演讲比赛，共有12个人参加。比赛共两轮，第一轮为淘汰赛，第二轮为决赛。·每名选手都有对应的编号，如10001~10012 ·比赛方式:分组比赛，每组6个人；
·第一轮分为两个小组，整体按照选手编号进行抽签后顺序演讲。 ·十个评委分别给每名选手打分，去除最高分和最低分，求的平均分为本轮选手的成绩·当小组演讲完后，淘汰组内排名最后的三个选手，前三名晋级，进入下一轮的比赛。 ·第二轮为决赛，前三名胜出·每轮比赛过后需要显示晋级选手的信息 程序功能: ·开始演讲比赛:完成整届比赛的流程，每个比赛阶段需要给用户一个提示，用户按任意键后继续下一个阶段 ·查看往届记录:查看之前比赛前三名结果，每次比赛都会记录到文件中，文件用.csV后缀名保存 ·清空比赛记录:将文件中数据清空 ·退出比赛程序:可以退出当前程序 一.头文件 1.speaker.h #pragma once #include &amp;lt;iostream&amp;gt; using namespace std; //选手类 class Speaker { public: string m_Name;//姓名 double m_Score[2];//分数 最多有两轮得分 }; 2.speechManager.h #pragma once #include &amp;lt;iostream&amp;gt; using namespace std; #include &amp;lt;vector&amp;gt; #include &amp;lt;map&amp;gt; #include &#34;speaker.h&#34; #include &amp;lt;algorithm&amp;gt; #include &amp;lt;numeric&amp;gt; //设计演讲管理类 class SpeechManager { public: //构造函数 SpeechManager(); //菜单功能 void show_Menu(); //退出系统 void exitSystem(); //析构函数 ~SpeechManager(); //初始化容器 void initSpeech(); //创建12名选手 void createSpeaker(); //开始比赛 比赛整个流程控制函数 void startSpeech(); //抽签 void speechDraw(); //成员属性 //保存第一轮比赛选手的编号容器 vector&amp;lt;int&amp;gt;v1; //第一轮晋级选手编号容器 vector&amp;lt;int&amp;gt;v2; //胜出前三名选手编号容器 vector&amp;lt;int&amp;gt;vVictory; //存放编号以及对应具体选手容器 map&amp;lt;int, Speaker&amp;gt;m_Speaker; //比赛 void speechContest(); //记录比赛轮次 int m_Index; //显示比赛结果 void showScore(); //保存记录 void saveRecord(); //读取记录 void loadRecord(); //显示往届记录 void showRecord(); //判断文件是否为空 bool fileIsEmpty; map&amp;lt;int, vector&amp;lt;string&amp;gt;&amp;gt;m_Record; //清空文件 void clearRecord(); }; 二.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-06-29T15:34:43+08:00">
    <meta property="article:modified_time" content="2023-06-29T15:34:43+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于STL的演讲比赛流程管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>比赛规则:</h2> 
<h3>·学校举行一场演讲比赛，共有12个人参加。比赛共两轮，第一轮为淘汰赛，第二轮为决赛。·每名选手都有对应的编号，如10001~10012 ·比赛方式:分组比赛，每组6个人；<br> ·第一轮分为两个小组，整体按照选手编号进行抽签后顺序演讲。</h3> 
<h3>·十个评委分别给每名选手打分，去除最高分和最低分，求的平均分为本轮选手的成绩·当小组演讲完后，淘汰组内排名最后的三个选手，前三名晋级，进入下一轮的比赛。</h3> 
<h3>·第二轮为决赛，前三名胜出·每轮比赛过后需要显示晋级选手的信息</h3> 
<h2>程序功能:</h2> 
<h3>·开始演讲比赛:完成整届比赛的流程，每个比赛阶段需要给用户一个提示，用户按任意键后继续下一个阶段</h3> 
<h3>·查看往届记录:查看之前比赛前三名结果，每次比赛都会记录到文件中，文件用.csV后缀名保存</h3> 
<h3>·清空比赛记录:将文件中数据清空</h3> 
<h3>·退出比赛程序:可以退出当前程序 </h3> 
<h2>一.头文件</h2> 
<h3>1.speaker.h</h3> 
<pre><code class="language-cpp">#pragma once
#include &lt;iostream&gt;
using namespace std;

//选手类
class Speaker
{
public:
	string m_Name;//姓名
	double m_Score[2];//分数 最多有两轮得分
};</code></pre> 
<h3>2.speechManager.h</h3> 
<pre><code class="language-cpp">#pragma once
#include &lt;iostream&gt;
using namespace std;
#include &lt;vector&gt;
#include &lt;map&gt;
#include "speaker.h"
#include &lt;algorithm&gt;
#include &lt;numeric&gt;

//设计演讲管理类
class SpeechManager
{
public:
	//构造函数
	SpeechManager();

	//菜单功能
	void show_Menu();
	
	//退出系统
	void exitSystem();

	//析构函数
	~SpeechManager();

	//初始化容器
	void initSpeech();

	//创建12名选手
	void createSpeaker();

	//开始比赛 比赛整个流程控制函数
	void startSpeech();

	//抽签
	void speechDraw();

	//成员属性
	//保存第一轮比赛选手的编号容器
	vector&lt;int&gt;v1;

	//第一轮晋级选手编号容器
	vector&lt;int&gt;v2;

	//胜出前三名选手编号容器
	vector&lt;int&gt;vVictory;

	//存放编号以及对应具体选手容器
	map&lt;int, Speaker&gt;m_Speaker;

	//比赛
	void speechContest();

	//记录比赛轮次
	int m_Index;

	//显示比赛结果
	void showScore();

	//保存记录
	void saveRecord();

	//读取记录
	void loadRecord();

	//显示往届记录
	void showRecord();

	//判断文件是否为空
	bool fileIsEmpty;
	map&lt;int, vector&lt;string&gt;&gt;m_Record;

	//清空文件
	void clearRecord();
};</code></pre> 
<h2>二.源文件</h2> 
<h3>1.speechManager.cpp</h3> 
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include "speechManager.h"
using namespace std;
#include "speaker.h"
#include &lt;string&gt;
#include &lt;deque&gt;
#include &lt;functional&gt;
#include &lt;fstream&gt;

//构造函数
SpeechManager::SpeechManager()
{
	//初始化容器和属性
	this-&gt;initSpeech();

	//创建12名选手
	this-&gt;createSpeaker();

	//加载往届记录
	this-&gt;loadRecord();
}

//菜单功能
void SpeechManager::show_Menu()
{
	cout &lt;&lt; "*********************************************" &lt;&lt; endl;
	cout &lt;&lt; "*************** 欢迎参加演讲比赛 ************" &lt;&lt; endl;
	cout &lt;&lt; "*************** 1.开始演讲比赛 **************" &lt;&lt; endl;
	cout &lt;&lt; "*************** 2.查看往届记录 **************" &lt;&lt; endl;
	cout &lt;&lt; "*************** 3.清空比赛记录 **************" &lt;&lt; endl;
	cout &lt;&lt; "*************** 0.退出比赛程序 **************" &lt;&lt; endl;
	cout &lt;&lt; "*********************************************" &lt;&lt; endl;
	cout &lt;&lt; endl;
}

//退出系统
void SpeechManager::exitSystem()
{
	cout &lt;&lt; "欢迎下次使用" &lt;&lt; endl;
	system("pause");
	exit(0);
}

//初始化容器
void SpeechManager::initSpeech()
{
	//容器都置空
	this-&gt;v1.clear();
	this-&gt;v2.clear();
	this-&gt;vVictory.clear();
	this-&gt;m_Speaker.clear();

	//初始化比赛轮次
	this-&gt;m_Index = 1;

	//初始化记录器
	this-&gt;m_Record.clear();
}

//创建12名选手
void SpeechManager::createSpeaker()
{
	string nameSeed = "ABCDEFGHIJKL";
	for (int i = 0; i &lt; nameSeed.size(); i++)
	{
		string name = "选手";
		name += nameSeed[i];
		//创建具体选手
		Speaker sp;
		sp.m_Name = name;
		for (int j = 0; j &lt; 2; j++)
		{
			sp.m_Score[j] = 0;
		}
		//创建选手编号 并且放入到v1容器中
		this-&gt;v1.push_back(i + 10001);
		//选手编号以及对应选手 放入到map容器中
		this-&gt;m_Speaker.insert(make_pair(i + 10001, sp));
	}
}

//开始比赛 比赛整个流程控制函数
void SpeechManager::startSpeech()
{
	//第一轮开始比赛

	//1.抽签
	this-&gt;speechDraw();
	//2.比赛
	this-&gt;speechContest();
	//3.显示晋级结果
	this-&gt;showScore();
	//第二轮开始比赛
	this-&gt;m_Index++;
	//1.抽签
	this-&gt;speechDraw();
	//2.比赛
	speechContest();
	//3.显示最终结果
	this-&gt;showScore();
	//4.保存分数到文件中
	this-&gt;saveRecord();
	//重置比赛
	//初始化属性
	this-&gt;initSpeech();

	//创建选手
	this-&gt;createSpeaker();

	//获取往届记录
	this-&gt;loadRecord();

	cout &lt;&lt; "本届比赛完毕" &lt;&lt; endl;
	system("pause");
	system("cls");
}

//抽签
void SpeechManager::speechDraw()
{
	cout &lt;&lt; "第 &lt;&lt; " &lt;&lt; this-&gt;m_Index &lt;&lt; " &gt;&gt; 轮比赛选手正在抽签" &lt;&lt; endl;
	cout &lt;&lt; "----------------------------" &lt;&lt; endl;
	cout &lt;&lt; "抽签后演讲顺序如下: " &lt;&lt; endl;
	if (this-&gt;m_Index == 1)
	{
		//第一轮比赛
		random_shuffle(v1.begin(), v1.end());
		for (vector&lt;int&gt;::iterator it = v1.begin(); it != v1.end(); it++)
		{
			cout &lt;&lt; *it &lt;&lt; " ";
		}
		cout &lt;&lt; endl;
	}
	else
	{
		//第二轮比赛
		random_shuffle(v2.begin(), v2.end());
		for (vector&lt;int&gt;::iterator it = v2.begin(); it != v2.end(); it++)
		{
			cout &lt;&lt; *it &lt;&lt; " ";
		}		
		cout &lt;&lt; endl;
	}
	cout &lt;&lt; "----------------------------" &lt;&lt; endl;
	system("pause");
}

//比赛
void SpeechManager::speechContest()
{
	cout &lt;&lt; "-----------------第" &lt;&lt; this-&gt;m_Index &lt;&lt; "轮正式比赛开始: --------------" &lt;&lt; endl;
	multimap&lt;double, int, greater&lt;double&gt;&gt; groupScore;//临时容器,保存key分数 value选手编号
	int num = 0;//记录人员个数 6个为1组

	vector&lt;int&gt;v_Src;//比赛的人员容器
	if (this-&gt;m_Index == 1)
	{
		v_Src = v1;
	}
	else
	{
		v_Src = v2;
	}

	//遍历所有参赛选手
	for (vector&lt;int&gt;::iterator it = v_Src.begin(); it != v_Src.end(); it++)
	{
		num++;

		//评委打分
		deque&lt;double&gt;d;
		for (int i = 0; i &lt; 10; i++)
		{
			double score = (rand() % 401 + 600) / 10.f;//600~1000
			//cout &lt;&lt; score &lt;&lt; " ";
			d.push_back(score);
		}
		//cout &lt;&lt; endl;
		sort(d.begin(), d.end(), greater&lt;double&gt;());//排序
		d.pop_front();//去掉最高分
		d.pop_back();//去掉最低分

		double sum = accumulate(d.begin(), d.end(), 0.0f);//获取总分
		double avg = sum / (double)d.size();//获取平均分

		//将平均分放入map容器中
		this-&gt;m_Speaker[*it].m_Score[this-&gt;m_Index - 1] = avg;

		//6个人一组 用临时容器保存
		groupScore.insert(make_pair(avg, *it));
		if (num % 6 == 0)
		{
			cout &lt;&lt; "第" &lt;&lt; num / 6 &lt;&lt; "小组比赛名次: " &lt;&lt; endl;
			for (multimap&lt;double, int, greater&lt;double&gt;&gt;::iterator it = groupScore.begin(); it != groupScore.end(); it++)
			{
				cout &lt;&lt; "编号: " &lt;&lt; it-&gt;second &lt;&lt; " 姓名: " &lt;&lt; this-&gt;m_Speaker[it-&gt;second].m_Name
					&lt;&lt; " 成绩: " &lt;&lt; this-&gt;m_Speaker[it-&gt;second].m_Score[this-&gt;m_Index - 1] &lt;&lt; endl;
			}

			int count = 0;
			//取前三名
			for (multimap&lt;double, int, greater&lt;double&gt;&gt;::iterator it = groupScore.begin(); it != groupScore.end() &amp;&amp; count &lt; 3; it++,count++)
			{
				if (this-&gt;m_Index == 1)
				{
					v2.push_back((*it).second);
				}
				else
				{
					vVictory.push_back((*it).second);
				}
			}
			groupScore.clear();
			cout &lt;&lt; endl;
		}
	}
	cout &lt;&lt; "-----------------第" &lt;&lt; this-&gt;m_Index &lt;&lt; "轮比赛完毕--------------" &lt;&lt; endl;
	system("pause");
}

//显示比赛结果
void SpeechManager::showScore()
{
	cout &lt;&lt; "----------------第" &lt;&lt; this-&gt;m_Index &lt;&lt; "轮晋级选手信息如下:---------------" &lt;&lt; endl;
	vector&lt;int&gt;v;
	if (this-&gt;m_Index == 1)
	{
		v = v2;
	}
	else
	{
		v = vVictory;
	}

	for (vector&lt;int&gt;::iterator it = v.begin(); it != v.end(); it++)
	{
		cout &lt;&lt; "选手编号: " &lt;&lt; *it &lt;&lt; " 姓名: " &lt;&lt;this-&gt;m_Speaker[*it].m_Name 
			&lt;&lt; " 得分: " &lt;&lt; this-&gt;m_Speaker[*it].m_Score[this-&gt;m_Index - 1] &lt;&lt; endl;
	}
	cout &lt;&lt; endl;
	system("pause");
	system("cls");
	this-&gt;show_Menu();
}

//保存记录
void SpeechManager::saveRecord()
{
	ofstream ofs;
	ofs.open("speech.csv", ios::out | ios::app);//用追加的方式写文件

	//将每个选手数据写入到文件中
	for (vector&lt;int&gt;::iterator it = vVictory.begin(); it != vVictory.end(); it++)
	{
		ofs &lt;&lt; *it &lt;&lt; "," &lt;&lt; this-&gt;m_Speaker[*it].m_Score[1] &lt;&lt; ",";
	}
	ofs &lt;&lt; endl;

	//关闭
	ofs.close();
	cout &lt;&lt; "文件已保存" &lt;&lt; endl;

	//更改文件不为空状态
	this-&gt;fileIsEmpty = false;
}

//读取记录
void SpeechManager::loadRecord()
{
	ifstream ifs("speech.csv", ios::in);//读文件

	if (!ifs.is_open())
	{
		this-&gt;fileIsEmpty = true;
		cout &lt;&lt; "文件不存在" &lt;&lt; endl;
		ifs.close();
		return;
	}

	//文件清空
	char ch;
	ifs &gt;&gt; ch;
	if (ifs.eof())
	{
		cout &lt;&lt; "文件为空" &lt;&lt; endl;
		this-&gt;fileIsEmpty = true;
		ifs.close();
		return;
	}

	//文件不为空
	this-&gt;fileIsEmpty = false;

	ifs.putback(ch);//将上面读取的单个字符放回来

	string data;
	int index = 0;

	while (ifs &gt;&gt; data)
	{
		//cout &lt;&lt; data &lt;&lt; endl;
		vector&lt;string&gt;v;
		int pos = -1;//查到","的位置
		int start = 0;
		while (true)
		{
			pos = data.find(",", start);
			if (pos == -1)
			{
				//没有找到的情况
				break;
			}
			string temp = data.substr(start, pos - start);
			v.push_back(temp);
			start = pos + 1;
		}
		this-&gt;m_Record.insert(make_pair(index, v));
		index++;
	}
	ifs.close();
	//system("pause");
}

//显示往届记录
void SpeechManager::showRecord()
{
	if (this-&gt;fileIsEmpty)
	{
		cout &lt;&lt; "文件不存在,或记录为空!" &lt;&lt; endl;
	}
	else
	{
		for (int i = 0; i &lt; this-&gt;m_Record.size(); i++)
		{
			cout &lt;&lt; "第" &lt;&lt; i + 1 &lt;&lt; "届 "
				&lt;&lt; "冠军编号: " &lt;&lt; this-&gt;m_Record[i][0] &lt;&lt; " 得分: " &lt;&lt; this-&gt;m_Record[i][1] &lt;&lt; " "
				&lt;&lt; "亚军编号: " &lt;&lt; this-&gt;m_Record[i][2] &lt;&lt; " 得分: " &lt;&lt; this-&gt;m_Record[i][3] &lt;&lt; " "
				&lt;&lt; "季军编号: " &lt;&lt; this-&gt;m_Record[i][4] &lt;&lt; " 得分: " &lt;&lt; this-&gt;m_Record[i][5] &lt;&lt; endl;
		}
	}
	system("pause");
	system("cls");
}

//清空文件
void SpeechManager::clearRecord()
{
	cout &lt;&lt; "是否确认清空文件?" &lt;&lt; endl;
	cout &lt;&lt; "1.是" &lt;&lt; endl;
	cout &lt;&lt; "2.否" &lt;&lt; endl;

	int select = 0;
	cin &gt;&gt; select;
	if (select == 1)
	{
		//确认清空
		ofstream ofs("speech.csv", ios::trunc);
		ofs.close();
		//初始化容器和属性
		this-&gt;initSpeech();

		//创建12名选手
		this-&gt;createSpeaker();

		//加载往届记录
		this-&gt;loadRecord();

		cout &lt;&lt; "清空成功!" &lt;&lt; endl;
	}

	system("pause");
	system("cls");
}

//析构函数
SpeechManager::~SpeechManager()
{

}</code></pre> 
<h3>2.演讲比赛流程管理系统.cpp</h3> 
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include"speechManager.h"
using namespace std;
#include &lt;ctime&gt;

int main()
{
	//随机数种子
	srand((unsigned int)time(NULL));
	//创建管理类对象
	SpeechManager sm;
	int choice = 0;
	while (true)
	{
		sm.show_Menu();

		cout &lt;&lt; "请输入您的选择: " &lt;&lt; endl;
		cin &gt;&gt; choice;//接受用户的选项

		switch (choice)
		{
		case 1://开始比赛
			sm.startSpeech();
			break;
		case 2://查看记录
			sm.showRecord();
			break;
		case 3://清空记录
			sm.clearRecord();
			break;
		case 0://退出系统
			sm.exitSystem();
			break;
		default:
			system("cls");//清屏
			break;
		}
	}

	system("pause");
	return 0;
}</code></pre> 
<h2> 三.程序效果图</h2> 
<h2><img alt="" height="884" src="https://images2.imgbox.com/15/0c/qdk96ns4_o.jpg" width="1200"></h2> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f6eff16f1cbb4b30d3c5b6251fa94884/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">image to base64/md5</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ce2b9ac17c72b0188d5ce3d4ddf673a2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">三维GIS智慧城市大数据可视化系统实现流程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>