<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CDH报错 agent异常 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/46cc2e586c2447afe170c157cd36f1f2/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="CDH报错 agent异常">
  <meta property="og:description" content="在我添加agen节点的时候报错， 查看日志是报错信息如下 查看agent 节点日志
tail -f /opt/cloudera-manager/cm-5.8.0/log/cloudera-scm-agent/cloudera-scm-agent.log [18/Dec/2018 13:53:44 &#43;0000] 1686 MainThread agent ERROR Failed to handle Heartbeat Response: {u&#39;firehoses&#39;: [{u&#39;roletype&#39;: u&#39;SERVICEMONITOR&#39;, u&#39;rolename&#39;: u&#39;mgmt-SERVICEMONITOR-8b7
30cb62f5e53e3e0421dd1c6d53975&#39;, u&#39;port&#39;: 9997, u&#39;report_interval&#39;: 60, u&#39;address&#39;: u&#39;master&#39;}, {u&#39;roletype&#39;: u&#39;HOSTMONITOR&#39;, u&#39;rolename&#39;: u&#39;mgmt-HOSTMONITOR-8b730cb62f5e53e3e0421dd1c6d53975&#39;,
u&#39;port&#39;: 9995, u&#39;report_interval&#39;: 60, u&#39;address&#39;: u&#39;master&#39;}], u&#39;rm_enabled&#39;: False, u&#39;client_configs&#39;: [], u&#39;create_parcel_symlinks&#39;: True, u&#39;server_managed_parcels&#39;: [], u&#39;extra_configs&#39;:
None, u&#39;host_collection_config_data&#39;: [{u&#39;config_name&#39;: u&#39;host_network_interface_collection_filter&#39;, u&#39;config_value&#39;: u&#39;^lo$&#39;}, {u&#39;config_name&#39;: u&#39;host_disk_collection_filter&#39;, u&#39;config_valu
e&#39;: u&#39;^$&#39;}, {u&#39;config_name&#39;: u&#39;host_fs_collection_filter&#39;, u&#39;config_value&#39;: u&#39;^$&#39;}, {u&#39;config_name&#39;: u&#39;host_log_tailing_config&#39;, u&#39;config_value&#39;: u&#39;{}\n&#39;}, {u&#39;config_name&#39;: u&#39;host_dns_resolut">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2018-12-18T14:16:45+08:00">
    <meta property="article:modified_time" content="2018-12-18T14:16:45+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CDH报错 agent异常</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在我添加agen节点的时候报错， 查看日志是报错信息如下 </p> 
<p>查看agent 节点日志</p> 
<p>tail -f  /opt/cloudera-manager/cm-5.8.0/log/cloudera-scm-agent/cloudera-scm-agent.log <br>  </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p>[18/Dec/2018 13:53:44 +0000] 1686 MainThread agent        ERROR    Failed to handle Heartbeat Response: {u'firehoses': [{u'roletype': u'SERVICEMONITOR', u'rolename': u'mgmt-SERVICEMONITOR-8b7<br> 30cb62f5e53e3e0421dd1c6d53975', u'port': 9997, u'report_interval': 60, u'address': u'master'}, {u'roletype': u'HOSTMONITOR', u'rolename': u'mgmt-HOSTMONITOR-8b730cb62f5e53e3e0421dd1c6d53975',<br>  u'port': 9995, u'report_interval': 60, u'address': u'master'}], u'rm_enabled': False, u'client_configs': [], u'create_parcel_symlinks': True, u'server_managed_parcels': [], u'extra_configs':<br>  None, u'host_collection_config_data': [{u'config_name': u'host_network_interface_collection_filter', u'config_value': u'^lo$'}, {u'config_name': u'host_disk_collection_filter', u'config_valu<br> e': u'^$'}, {u'config_name': u'host_fs_collection_filter', u'config_value': u'^$'}, {u'config_name': u'host_log_tailing_config', u'config_value': u'{}\n'}, {u'config_name': u'host_dns_resolut<br> ion_duration_thresholds', u'config_value': u'{"critical":"never","warning":"1000.0"}'}, {u'config_name': u'host_dns_resolution_enabled', u'config_value': u'true'}, {u'config_name': u'host_clo<br> ck_offset_thresholds', u'config_value': u'{"warning":30000,"critical":60000}'}], u'apply_parcel_users_groups_permissions': True, u'flood_torrent_port': 7191, u'log_tailing_config': u'{}\n', u<br> 'active_parcels': {}, u'flood_rack_peers': [u'192.168.1.183:7191', u'192.168.1.184:7191', u'192.168.1.182:7191', u'192.168.1.181:7191'], u'retain_parcels_in_cache': True, u'processes': [], u'<br> server_manages_parcels': True, u'heartbeat_interval': 15, u'parcels_directory': u'/opt/cloudera/parcels', u'host_id': u'85a8796e-d5e0-42ee-a0d7-ea89eb0ac09e', u'eventserver_host': u'master', <br> u'enabled_metric_reporters': [u'ACCUMULO-ACCUMULO_MASTER', u'ACCUMULO_MASTER', u'ZOOKEEPER-SERVER', u'SERVER', u'SENTRY', u'SENTRY', u'SPARK-SPARK_HISTORY_SERVER', u'SPARK_HISTORY_SERVER', u'<br> HUE-KT_RENEWER', u'KT_RENEWER', u'ISILON', u'ISILON', u'MAPREDUCE-JOBTRACKER', u'JOBTRACKER', u'SQOOP', u'SQOOP', u'HUE-BEESWAX_SERVER', u'BEESWAX_SERVER', u'KAFKA-KAFKA_BROKER', u'KAFKA_BROK<br> ER', u'HDFS-NFSGATEWAY', u'NFSGATEWAY', u'KAFKA-KAFKA_MIRROR_MAKER', u'KAFKA_MIRROR_MAKER', u'KEYTRUSTEE_SERVER-DB_ACTIVE', u'DB_ACTIVE', u'HDFS-JOURNALNODE', u'JOURNALNODE', u'HBASE-HBASETHR<br> IFTSERVER', u'HBASETHRIFTSERVER', u'MGMT-EVENTSERVER', u'EVENTSERVER', u'HDFS-NAMENODE', u'NAMENODE', u'OOZIE', u'OOZIE', u'FLUME-AGENT', u'AGENT', u'HUE-HUE_LOAD_BALANCER', u'HUE_LOAD_BALANC<br> ER', u'KEYTRUSTEE_SERVER-DB_PASSIVE', u'DB_PASSIVE', u'ACCUMULO16-ACCUMULO16_TRACER', u'ACCUMULO16_TRACER', u'HBASE', u'HBASE', u'SENTRY-SENTRY_SERVER', u'SENTRY_SERVER', u'SQOOP-SQOOP_SERVER<br> ', u'SQOOP_SERVER', u'MGMT-REPORTSMANAGER', u'REPORTSMANAGER', u'ACCUMULO16-ACCUMULO16_TSERVER', u'ACCUMULO16_TSERVER', u'MGMT', u'MGMT', u'IMPALA-CATALOGSERVER', u'CATALOGSERVER', u'MAPREDUC<br> E-FAILOVERCONTROLLER', u'FAILOVERCONTROLLER', u'IMPALA-LLAMA', u'LLAMA', u'IMPALA', u'IMPALA', u'HBASE-HBASERESTSERVER', u'HBASERESTSERVER', u'MGMT-ACTIVITYMONITOR', u'ACTIVITYMONITOR', u'HOS<br> T', u'MGMT-ALERTPUBLISHER', u'ALERTPUBLISHER', u'MGMT-SERVICEMONITOR', u'SERVICEMONITOR', u'MGMT-NAVIGATORMETASERVER', u'NAVIGATORMETASERVER', u'MAPREDUCE-TASKTRACKER', u'TASKTRACKER', u'SPAR<br> K', u'SPARK', u'KS_INDEXER', u'KS_INDEXER', u'MAPREDUCE', u'MAPREDUCE', u'YARN-JOBHISTORY', u'JOBHISTORY', u'SPARK-SPARK_MASTER', u'SPARK_MASTER', u'IMPALA-IMPALAD', u'IMPALAD', u'HDFS-DSSDDA<br> TANODE', u'DSSDDATANODE', u'KEYTRUSTEE_SERVER-KEYTRUSTEE_ACTIVE_SERVER', u'KEYTRUSTEE_ACTIVE_SERVER', u'SPARK-SPARK_WORKER', u'SPARK_WORKER', u'YARN', u'YARN', u'HIVE-WEBHCAT', u'WEBHCAT', u'<br> YARN-NODEMANAGER', u'NODEMANAGER', u'HDFS-HTTPFS', u'HTTPFS', u'ACCUMULO-ACCUMULO_LOGGER', u'ACCUMULO_LOGGER', u'HDFS-SECONDARYNAMENODE', u'SECONDARYNAMENODE', u'SOLR-SOLR_SERVER', u'SOLR_SER<br> VER', u'ACCUMULO-ACCUMULO_MONITOR', u'ACCUMULO_MONITOR', u'ACCUMULO-ACCUMULO_TSERVER', u'ACCUMULO_TSERVER', u'KMS-KMS', u'KMS', u'SPARK_ON_YARN', u'SPARK_ON_YARN', u'ACCUMULO16-ACCUMULO16_MON<br> ITOR', u'ACCUMULO16_MONITOR', u'HBASE-REGIONSERVER', u'REGIONSERVER', u'HUE-HUE_SERVER', u'HUE_SERVER', u'HIVE-HIVEMETASTORE', u'HIVEMETASTORE', u'ZOOKEEPER', u'ZOOKEEPER', u'IMPALA-STATESTOR<br> E', u'STATESTORE', u'HBASE-MASTER', u'MASTER', u'ACCUMULO16', u'ACCUMULO16', u'KAFKA', u'KAFKA', u'SQOOP_CLIENT', u'SQOOP_CLIENT', u'FLUME', u'FLUME', u'KS_INDEXER-HBASE_INDEXER', u'HBASE_IND<br> EXER', u'KEYTRUSTEE-KMS_KEYTRUSTEE', u'KMS_KEYTRUSTEE', u'ACCUMULO-ACCUMULO_GC', u'ACCUMULO_GC', u'SPARK2_ON_YARN', u'SPARK2_ON_YARN', u'MGMT-NAVIGATOR', u'NAVIGATOR', u'KMS', u'KMS', u'KEYTR<br> USTEE_SERVER', u'KEYTRUSTEE_SERVER', u'SPARK2_ON_YARN-SPARK2_YARN_HISTORY_SERVER', u'SPARK2_YARN_HISTORY_SERVER', u'HDFS-FAILOVERCONTROLLER', u'FAILOVERCONTROLLER', u'KEYTRUSTEE_SERVER-KEYTRU<br> STEE_PASSIVE_SERVER', u'KEYTRUSTEE_PASSIVE_SERVER', u'HUE', u'HUE', u'MGMT-HOSTMONITOR', u'HOSTMONITOR', u'ACCUMULO-ACCUMULO_TRACER', u'ACCUMULO_TRACER', u'SOLR', u'SOLR', u'ACCUMULO', u'ACCU<br> MULO', u'HIVE', u'HIVE', u'HDFS', u'HDFS', u'ACCUMULO16-ACCUMULO16_GC', u'ACCUMULO16_GC', u'KEYTRUSTEE', u'KEYTRUSTEE', u'OOZIE-OOZIE_SERVER', u'OOZIE_SERVER', u'YARN-RESOURCEMANAGER', u'RESO<br> URCEMANAGER', u'SPARK_ON_YARN-SPARK_YARN_HISTORY_SERVER', u'SPARK_YARN_HISTORY_SERVER', u'ACCUMULO16-ACCUMULO16_MASTER', u'ACCUMULO16_MASTER', u'HIVE-HIVESERVER2', u'HIVESERVER2', u'HDFS-DATA<br> NODE', u'DATANODE'], u'flood_seed_timeout': 95, u'eventserver_port': 7185}<br> Traceback (most recent call last):<br>   File "/opt/cloudera-manager/cm-5.8.0/lib64/cmf/agent/build/env/lib/python2.6/site-packages/cmf-5.8.0-py2.6.egg/cmf/agent.py", line 1337, in handle_heartbeat_response<br>     self._handle_heartbeat_response(response)<br>   File "/opt/cloudera-manager/cm-5.8.0/lib64/cmf/agent/build/env/lib/python2.6/site-packages/cmf-5.8.0-py2.6.egg/cmf/agent.py", line 1359, in _handle_heartbeat_response<br>     response["flood_torrent_port"])<br>   File "/opt/cloudera-manager/cm-5.8.0/lib64/cmf/agent/build/env/lib/python2.6/site-packages/cmf-5.8.0-py2.6.egg/cmf/agent.py", line 1789, in handle_heartbeat_flood<br>     flood_dir)<br>   File "/opt/cloudera-manager/cm-5.8.0/lib64/cmf/agent/build/env/lib/python2.6/site-packages/cmf-5.8.0-py2.6.egg/cmf/downloader.py", line 179, in __init__<br>     self.client = TorrentRPCClient(server)<br>   File "/opt/cloudera-manager/cm-5.8.0/lib64/cmf/agent/build/env/lib/python2.6/site-packages/cmf-5.8.0-py2.6.egg/flood/util/rpc.py", line 118, in __init__<br>     server = resolveHostPort(server, self.DEFAULT_RPC_PORT)<br>   File "/opt/cloudera-manager/cm-5.8.0/lib64/cmf/agent/build/env/lib/python2.6/site-packages/cmf-5.8.0-py2.6.egg/flood/util/rpc.py", line 33, in resolveHostPort<br>     return HostPort(socket.gethostbyname(w[0]), port)<br> gaierror: [Errno -2] Name or service not known<br>  </p> 
<p> </p> 
<p>经过分析，原因可能是由于无法和server 通信，导致 报错异常</p> 
<p> </p> 
<p>解决办法：</p> 
<p> vi /etc/hosts<br> 添加：<br> 127.0.0.1    localhost.localdomain   localhost<br> ::1   localhost6.localdomain6 localhost6<br> 127.0.0.1 localhost.node1</p> 
<p>如图：<br><img alt="" class="has" height="151" src="https://images2.imgbox.com/f1/1e/R4YavVeE_o.png" width="407"></p> 
<p>重启 网卡</p> 
<p>service  network restart<br>  </p> 
<p>重启agent</p> 
<p>/opt/cloudera-manager/cm-5.8.0/etc/init.d/cloudera-scm-agent stop</p> 
<p>/opt/cloudera-manager/cm-5.8.0/etc/init.d/cloudera-scm-agent start</p> 
<p>查看日志信息</p> 
<p> </p> 
<p>tail -f  /opt/cloudera-manager/cm-5.8.0/log/cloudera-scm-agent/cloudera-scm-agent.log <br>  </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2d052f8f7ad416fa09c223bd7b55866c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C&#43;&#43; const的详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d8263282df239c2c10150d9825febce4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【hive】中的concat函数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>