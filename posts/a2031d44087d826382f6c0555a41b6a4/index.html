<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python pandas.DataFrame.loc函数使用详解 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/a2031d44087d826382f6c0555a41b6a4/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="python pandas.DataFrame.loc函数使用详解">
  <meta property="og:description" content="官方函数
DataFrame.loc
Access a group of rows and columns by label(s) or a boolean array.
.loc[] is primarily label based, but may also be used with a boolean array.
# 可以使用label值，但是也可以使用布尔值
Allowed inputs are: # 可以接受单个的label，多个label的列表，多个label的切片A single label, e.g. 5 or ‘a&#34;, (note that 5 is interpreted as a label of the index, and never as an integer position along the index). #这里的5不是数值指定的位置，而是label值A list or array of labels, e.g. [‘a&#34;">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-02-19T11:59:32+08:00">
    <meta property="article:modified_time" content="2021-02-19T11:59:32+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python pandas.DataFrame.loc函数使用详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>官方函数</strong></p> 
<blockquote> 
 <p>DataFrame.loc<br> Access a group of rows and columns by label(s) or a boolean array.<br> .loc[] is primarily label based, but may also be used with a boolean array.<br> # 可以使用label值，但是也可以使用布尔值</p> 
</blockquote> 
<ul><li>Allowed inputs are: # 可以接受单个的label，多个label的列表，多个label的切片</li><li>A single label, e.g. 5 or ‘a", (note that 5 is interpreted as a label of the index, and never as an integer position along the index). #这里的5不是数值指定的位置，而是label值</li><li>A list or array of labels, e.g. [‘a", ‘b", ‘c"].</li></ul> 
<p>slice object with labels, e.g. ‘a":"f".</p> 
<p><strong>Warning: #如果使用多个label的切片，那么切片的起始位置都是包含的</strong></p> 
<p>Note that contrary to usual python slices, both the start and the stop are included</p> 
<ul><li>A boolean array of the same length as the axis being sliced, e.g. [True, False, True].</li></ul> 
<p><strong>实例详解</strong></p> 
<p><strong>一、选择数值</strong></p> 
<p>1、生成df</p> 
<pre>df = pd.DataFrame([[1, 2], [4, 5], [7, 8]],
...   index=["cobra", "viper", "sidewinder"],
...   columns=["max_speed", "shield"])

df
Out[15]: 
      max_speed shield
cobra        1    2
viper        4    5
sidewinder     7    8</pre> 
<p>2、Single label. 单个 row_label 返回的Series</p> 
<pre>df.loc["viper"]
Out[17]: 
max_speed  4
shield    5
Name: viper, dtype: int64</pre> 
<p>2、List of labels. 列表 row_label 返回的DataFrame</p> 
<pre>df.loc[["cobra","viper"]]
Out[20]: 
    max_speed shield
cobra     1    2
viper     4    5</pre> 
<p>3、Single label for row and column 同时选定行和列</p> 
<pre>df.loc["cobra", "shield"]
Out[24]: 2</pre> 
<p>4、Slice with labels for row and single label for column. As mentioned above, note that both the start and stop of the slice are included. 同时选定多个行和单个列，注意的是通过列表选定多个row label 时，首位均是选定的。</p> 
<pre>df.loc["cobra":"viper", "max_speed"]
Out[25]: 
cobra  1
viper  4
Name: max_speed, dtype: int64</pre> 
<p>5、Boolean list with the same length as the row axis 布尔列表选择row label<br> 布尔值列表是根据某个位置的True or False 来选定，如果某个位置的布尔值是True，则选定该row</p> 
<pre>df
Out[30]: 
      max_speed shield
cobra        1    2
viper        4    5
sidewinder     7    8

df.loc[[True]]
Out[31]: 
    max_speed shield
cobra     1    2

df.loc[[True,False]]
Out[32]: 
    max_speed shield
cobra     1    2

df.loc[[True,False,True]]
Out[33]: 
      max_speed shield
cobra        1    2
sidewinder     7    8</pre> 
<p>6、Conditional that returns a boolean Series 条件布尔值</p> 
<pre>df.loc[df["shield"] &gt; 6]
Out[34]: 
      max_speed shield
sidewinder     7    8</pre> 
<p>7、Conditional that returns a boolean Series with column labels specified 条件布尔值和具体某列的数据</p> 
<pre>df.loc[df["shield"] &gt; 6, ["max_speed"]]
Out[35]: 
      max_speed
sidewinder     7
</pre> 
<p>8、Callable that returns a boolean Series 通过函数得到布尔结果选定数据</p> 
<pre>df
Out[37]: 
      max_speed shield
cobra        1    2
viper        4    5
sidewinder     7    8

df.loc[lambda df: df["shield"] == 8]
Out[38]: 
      max_speed shield
sidewinder     7    8</pre> 
<p><strong>二、赋值</strong></p> 
<p>1、Set value for all items matching the list of labels 根据某列表选定的row 及某列 column 赋值</p> 
<pre>df.loc[["viper", "sidewinder"], ["shield"]] = 50

df
Out[43]: 
      max_speed shield
cobra        1    2
viper        4   50
sidewinder     7   50
</pre> 
<p>2、Set value for an entire row 将某行row的数据全部赋值</p> 
<pre>df.loc["cobra"] =10

df
Out[48]: 
      max_speed shield
cobra       10   10
viper        4   50
sidewinder     7   50

</pre> 
<p>3、Set value for an entire column 将某列的数据完全赋值</p> 
<pre>df.loc[:, "max_speed"] = 30

df
Out[50]: 
      max_speed shield
cobra       30   10
viper       30   50
sidewinder     30   50

</pre> 
<p>4、Set value for rows matching callable condition 条件选定rows赋值</p> 
<pre>df.loc[df["shield"] &gt; 35] = 0

df
Out[52]: 
      max_speed shield
cobra       30   10
viper        0    0
sidewinder     0    0
</pre> 
<p><strong>三、行索引是数值</strong></p> 
<pre>df = pd.DataFrame([[1, 2], [4, 5], [7, 8]],
...   index=[7, 8, 9], columns=["max_speed", "shield"])

df
Out[54]: 
  max_speed shield
7     1    2
8     4    5
9     7    8</pre> 
<p>通过 行 rows的切片的方式取多个：</p> 
<pre>df.loc[7:9]
Out[55]: 
  max_speed shield
7     1    2
8     4    5
9     7    8</pre> 
<p><strong>四、多维索引</strong></p> 
<p><strong>1、生成多维索引</strong></p> 
<pre>tuples = [
...  ("cobra", "mark i"), ("cobra", "mark ii"),
...  ("sidewinder", "mark i"), ("sidewinder", "mark ii"),
...  ("viper", "mark ii"), ("viper", "mark iii")
... ]
index = pd.MultiIndex.from_tuples(tuples)
values = [[12, 2], [0, 4], [10, 20],
...     [1, 4], [7, 1], [16, 36]]
df = pd.DataFrame(values, columns=["max_speed", "shield"], index=index)


df
Out[57]: 
           max_speed shield
cobra   mark i      12    2
      mark ii      0    4
sidewinder mark i      10   20
      mark ii      1    4
viper   mark ii      7    1
      mark iii     16   36</pre> 
<p>2、Single label. 传入的就是最外层的row label，返回DataFrame</p> 
<pre>df.loc["cobra"]
Out[58]: 
     max_speed shield
mark i     12    2
mark ii     0    4
</pre> 
<p>3、Single index tuple.传入的是索引元组，返回Series</p> 
<pre>df.loc[("cobra", "mark ii")]
Out[59]: 
max_speed  0
shield    4
Name: (cobra, mark ii), dtype: int64</pre> 
<p>4、Single label for row and column.如果传入的是row和column，和传入tuple是类似的，返回Series</p> 
<pre>df.loc["cobra", "mark i"]
Out[60]: 
max_speed  12
shield    2
Name: (cobra, mark i), dtype: int64
</pre> 
<p>5、Single tuple. Note using [[ ]] returns a DataFrame.传入一个数组，返回一个DataFrame</p> 
<pre>df.loc[[("cobra", "mark ii")]]
Out[61]: 
        max_speed shield
cobra mark ii     0    4</pre> 
<p>6、Single tuple for the index with a single label for the column 获取某个colum的某row的数据，需要左边传入多维索引的tuple，然后再传入column</p> 
<pre>df.loc[("cobra", "mark i"), "shield"]
Out[62]: 2
</pre> 
<p>7、传入多维索引和单个索引的切片：</p> 
<pre>df.loc[("cobra", "mark i"):"viper"]
Out[63]: 
           max_speed shield
cobra   mark i      12    2
      mark ii      0    4
sidewinder mark i      10   20
      mark ii      1    4
viper   mark ii      7    1
      mark iii     16   36

df.loc[("cobra", "mark i"):"sidewinder"]
Out[64]: 
          max_speed shield
cobra   mark i     12    2
      mark ii     0    4
sidewinder mark i     10   20
      mark ii     1    4

df.loc[("cobra", "mark i"):("sidewinder","mark i")]
Out[65]: 
          max_speed shield
cobra   mark i     12    2
      mark ii     0    4
sidewinder mark i     10   20</pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c0eaf347b83e40ed31cb30856107d619/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java必须会js么_JavaScript和Java之间有什么关系？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/abaec2668dc1e24c25702b3313ef177b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">常见查找和排序算法汇总</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>