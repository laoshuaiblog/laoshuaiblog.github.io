<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>存储系统Cache（知识点&#43;例题） - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/e7198c1652ea8e9e15e0c61426ea267c/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="存储系统Cache（知识点&#43;例题）">
  <meta property="og:description" content="存储系统 前言一、存储系统的结构层次与分类1.Cache存储系统(Cache-主存存储层次)2.虚拟存储系统(主存-辅存存储层次)3.存储器分类4.练习 二、高速缓冲存储器(Cache)1.局部性原理2.Cache的基本结构及工作原理3.Cache地址监听4.替换算法 三、地址映像1.直接映像2.全相联映像3.组相联映像4.Cache映像总结 四、虚拟存储器1.段式管理2.页式管理（类比Cache地址映像）3.段页式管理4.存储管理部件MMU 五、巩固练习总结 前言 本章内容较长但干货满满，如果耐心看完，定会有所收获。
一、存储系统的结构层次与分类 存储器三个主要特性的关系
存储系统：计算机中由存放程序和数据的各种存储设备（Cache、内存、硬盘等）、控制部件（SATA控
制器、内存控制器）以及管理信息调度的硬件设备（MMU，地址转换）和算法（块或段页替换算法）
所组成的系统。
概念结构：
1.Cache存储系统(Cache-主存存储层次) 注意：Cache存储的内容是主存部分内容的副本
Cache-主存存储层次对系统程序员和应用程序员都是透明的，在这里的透明指的是看不见，不公开的意思。
2.虚拟存储系统(主存-辅存存储层次) 虚拟存储系统(主存-辅存存储层次)对系统程序员是不透明的，即系统程序员可以对此层次进行修改。
3.存储器分类 作用(层次)
主存储器(主存、内存):使用DRAM和ROM
高速缓冲存储器(Cache):使用SRAM
辅助存储器(辅存、外存)存储介质
磁芯存储器
磁表面存储器:磁盘、磁带
半导体存储器
光存储器存取方式
（1）随机存取:RAM(DRAM、SRAM),ROM
任何一个存储所需时间都相同，与存储单元所在的物理位置无关
（2）串行访问:顺序存取(磁带)、直接存取(磁盘)
读写某个存储单元所需时间与存储单元的物理位置有关
（3）按内容访问：相联存储器（CAM）
可以按照内容检索到存储位置进行读写，&#34;快表&#34;就是一种相联存储器信息可保存性
断电后存储信息是否消失:易失性(RAM)、非易失性（磁盘，光盘）
读出是否破坏信息:破坏性读出(DRAM)、非破坏性读出（SRAM,磁盘，光盘） 4.练习 解析：Cache中存储的是主存部分内容的副本，实际上该存储系统的容量就是主存的容量为12MB，故选B。
二、高速缓冲存储器(Cache) 1.局部性原理 ➢ 时间局部性
在最近的未来要用到的信息,很可能是现在正在使用的信息。
➢ 空间局部性
在最近的未来要用到的信息(指令和数据),很可能与现在正在使用的信息在存储空间上是邻近的。
2.Cache的基本结构及工作原理 cache块/行包括有效位（占1位）、主存标记位和数据位，当采用回写策略时还要考虑标志位（占1位）。
➢ 地址映像：为把信息存放与Cache，应用某种函数把主存地址映像到Cache，称为地址映像。（直接映像、全相联映像、组相联映像）
➢ 命中率：CPU欲访问的信息已在Cache中的比率。Cache的容量和块的大小影响命中率。
➢ 替换策略：从主存读出新的字块调入Cache时，如遇到Cache中相应位置已被占用，则需要替换掉旧的字块，此时采用的替换规则为替换策略。（随机算法、先进先出算法、近期最少使用算法）
例题：
读操作：
写操作：
➢原则：保持Cache与主存内容一致性问题
➢命中的两种写方式：
• 标志交换方式flag-swap(写回法/回写法write-back)：只把数据写入Cache，当Cache数据被替换出去时，才写回内存。需要标志位。写操作时间就是访问 Cache 的时间。
• 通过式写write-throgh(写通法)：数据既写入Cache又写入内存。写操作时间就是访问主存的时间。
➢ 未命中的两种写方式：只对主存写；加载该块到Cache，再更新Cache
◆ 需要增加一位标记有效位（刚加电后所有标记位都为0）">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-07-14T17:50:35+08:00">
    <meta property="article:modified_time" content="2022-07-14T17:50:35+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">存储系统Cache（知识点&#43;例题）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>存储系统</h4> 
 <ul><li><a href="#_6" rel="nofollow">前言</a></li><li><a href="#_11" rel="nofollow">一、存储系统的结构层次与分类</a></li><li><ul><li><a href="#1CacheCache_21" rel="nofollow">1.Cache存储系统(Cache-主存存储层次)</a></li><li><a href="#2_25" rel="nofollow">2.虚拟存储系统(主存-辅存存储层次)</a></li><li><a href="#3_28" rel="nofollow">3.存储器分类</a></li><li><a href="#4_48" rel="nofollow">4.练习</a></li></ul> 
  </li><li><a href="#Cache_52" rel="nofollow">二、高速缓冲存储器(Cache)</a></li><li><ul><li><a href="#1_55" rel="nofollow">1.局部性原理</a></li><li><a href="#2Cache_62" rel="nofollow">2.Cache的基本结构及工作原理</a></li><li><a href="#3Cache_86" rel="nofollow">3.Cache地址监听</a></li><li><a href="#4_88" rel="nofollow">4.替换算法</a></li></ul> 
  </li><li><a href="#_90" rel="nofollow">三、地址映像</a></li><li><ul><li><a href="#1_92" rel="nofollow">1.直接映像</a></li><li><a href="#2_96" rel="nofollow">2.全相联映像</a></li><li><a href="#3_100" rel="nofollow">3.组相联映像</a></li><li><a href="#4Cache_104" rel="nofollow">4.Cache映像总结</a></li></ul> 
  </li><li><a href="#_113" rel="nofollow">四、虚拟存储器</a></li><li><ul><li><a href="#1_137" rel="nofollow">1.段式管理</a></li><li><a href="#2Cache_147" rel="nofollow">2.页式管理（类比Cache地址映像）</a></li><li><a href="#3_156" rel="nofollow">3.段页式管理</a></li><li><a href="#4MMU_160" rel="nofollow">4.存储管理部件MMU</a></li></ul> 
  </li><li><a href="#_164" rel="nofollow">五、巩固练习</a></li><li><a href="#_207" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_6"></a>前言</h2> 
<p>本章内容较长但干货满满，如果耐心看完，定会有所收获。</p> 
<hr> 
<h2><a id="_11"></a>一、存储系统的结构层次与分类</h2> 
<p>存储器三个主要特性的关系<br> <img src="https://images2.imgbox.com/c9/2c/VWLpO69F_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2e/27/RkPyvWOU_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>存储系统：计算机中由存放程序和数据的各种存储设备（Cache、内存、硬盘等）、控制部件（SATA控<br> 制器、内存控制器）以及管理信息调度的硬件设备（MMU，地址转换）和算法（块或段页替换算法）<br> 所组成的系统。</p> 
</blockquote> 
<p>概念结构：<br> <img src="https://images2.imgbox.com/c2/22/wgRlHJoB_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="1CacheCache_21"></a>1.Cache存储系统(Cache-主存存储层次)</h3> 
<p><img src="https://images2.imgbox.com/1e/52/DcvIgZle_o.png" alt="在这里插入图片描述"><br> <strong>注意：Cache存储的内容是主存部分内容的副本</strong><br> Cache-主存存储层次对系统程序员和应用程序员都是透明的，在这里的透明指的是看不见，不公开的意思。</p> 
<h3><a id="2_25"></a>2.虚拟存储系统(主存-辅存存储层次)</h3> 
<p><img src="https://images2.imgbox.com/26/29/QyzNaykZ_o.png" alt="在这里插入图片描述"><br> 虚拟存储系统(主存-辅存存储层次)对系统程序员是不透明的，即系统程序员可以对此层次进行修改。</p> 
<h3><a id="3_28"></a>3.存储器分类</h3> 
<ol><li><strong>作用(层次)</strong><br> 主存储器(主存、内存):使用DRAM和ROM<br> 高速缓冲存储器(Cache):使用SRAM<br> 辅助存储器(辅存、外存)</li><li><strong>存储介质</strong><br> 磁芯存储器<br> 磁表面存储器:磁盘、磁带<br> 半导体存储器<br> 光存储器</li><li><strong>存取方式</strong><br> （1）随机存取:RAM(DRAM、SRAM),ROM<br> 任何一个<strong>存储所需时间都相同</strong>，与存储单元所在的物理位置无关<br> （2）串行访问:顺序存取(磁带)、直接存取(磁盘)<br> 读写某个存储单元所需时间与存储单元的物理位置有关<br> （3）按内容访问：相联存储器（CAM）<br> 可以按照内容<strong>检索到存储位置</strong>进行读写，"快表"就是一种相联存储器</li><li><strong>信息可保存性</strong><br> 断电后存储信息是否消失:易失性(RAM)、非易失性（磁盘，光盘）<br> 读出是否破坏信息:破坏性读出(DRAM)、非破坏性读出（SRAM,磁盘，光盘）</li></ol> 
<h3><a id="4_48"></a>4.练习</h3> 
<p><img src="https://images2.imgbox.com/b4/56/3Fsp4sjH_o.png" alt="在这里插入图片描述"><br> 解析：Cache中存储的是主存部分内容的副本，实际上该存储系统的容量就是主存的容量为12MB，故选B。</p> 
<h2><a id="Cache_52"></a>二、高速缓冲存储器(Cache)</h2> 
<p><img src="https://images2.imgbox.com/89/28/7nbld8qF_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="1_55"></a>1.局部性原理</h3> 
<p>➢ 时间局部性<br> 在最近的未来要用到的信息,很可能是现在正在使用的信息。<br> ➢ 空间局部性<br> 在最近的未来要用到的信息(指令和数据),很可能与现在正在使用的信息<strong>在存储空间上是邻近的</strong>。<br> <img src="https://images2.imgbox.com/2d/4a/VFzA4jpM_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2Cache_62"></a>2.Cache的基本结构及工作原理</h3> 
<p><img src="https://images2.imgbox.com/9f/18/Xz3HUJa1_o.png" alt="在这里插入图片描述"><br> cache块/行包括有效位（占1位）、主存标记位和数据位，<strong>当采用回写策略时还要考虑标志位（占1位）</strong>。</p> 
<blockquote> 
 <p>➢ <strong>地址映像</strong>：为把信息存放与Cache，应用某种函数把主存地址映像到Cache，称为地址映像。（直接映像、全相联映像、组相联映像）<br> ➢ <strong>命中率</strong>：CPU欲访问的信息已在Cache中的比率。Cache的容量和块的大小影响命中率。<br> ➢ <strong>替换策略</strong>：从主存读出新的字块调入Cache时，如遇到Cache中相应位置已被占用，则需要替换掉旧的字块，此时采用的替换规则为替换策略。（随机算法、先进先出算法、近期最少使用算法）</p> 
</blockquote> 
<p>例题：<br> <img src="https://images2.imgbox.com/0c/75/hCwNXIHC_o.png" alt="在这里插入图片描述"><br> 读操作：<br> <img src="https://images2.imgbox.com/0f/21/mj5UoDiY_o.png" alt="在这里插入图片描述"><br> 写操作：</p> 
<blockquote> 
 <p>➢<strong>原则：保持Cache与主存内容一致性问题</strong><br> ➢命中的两种写方式：<br> • 标志交换方式flag-swap(写回法/回写法write-back)：只把数据写入Cache，当Cache数据被替换出去时，才写回内存。<strong>需要标志位。写操作时间就是访问 Cache 的时间。</strong><br> • 通过式写write-throgh(写通法)：数据既写入Cache又写入内存。<strong>写操作时间就是访问主存的时间。</strong><br> ➢ 未命中的两种写方式：只对主存写；加载该块到Cache，再更新Cache<br> ◆ 需要增加一位标记有效位（刚加电后所有标记位都为0）<br> ◆ <strong>具有Cache的存储器，平均存取时间与命中率h有关（平均存取时间 ta= h*tc + (1-h) * (tc + tm)）</strong></p> 
</blockquote> 
<p><strong>以下公式适用于写回法（Cache先被访问，如果不命中，内存后被访问）：</strong><br> <img src="https://images2.imgbox.com/af/62/uWIP8rR5_o.png" alt="在这里插入图片描述"><br> 性能对比分析：<br> <img src="https://images2.imgbox.com/74/ef/hCojXD9A_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3Cache_86"></a>3.Cache地址监听</h3> 
<p>I/O设备可以直接访问存储器，一般数据只写入存储器，不写入Cache。为保证Cache和主存相应单元内容的一致性，需要不断监听，通常采用将Cache相应单元标记有效位清0方法。</p> 
<h3><a id="4_88"></a>4.替换算法</h3> 
<p><img src="https://images2.imgbox.com/54/21/CGyemTli_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_90"></a>三、地址映像</h2> 
<h3><a id="1_92"></a>1.直接映像</h3> 
<p><img src="https://images2.imgbox.com/3f/4a/WMxZGk9g_o.png" alt="在这里插入图片描述"><br> 每个缓存块 i 可以和若干个主存块对应，每个主存块 j 只能和一个缓存块对应。</p> 
<h3><a id="2_96"></a>2.全相联映像</h3> 
<p><img src="https://images2.imgbox.com/83/a5/FZq7mVfA_o.png" alt="在这里插入图片描述"><br> 主存中的任一块可以映射到缓存中的任一块（类似于全排列）。</p> 
<h3><a id="3_100"></a>3.组相联映像</h3> 
<p><img src="https://images2.imgbox.com/03/6b/HaltnCQ6_o.png" alt="在这里插入图片描述"><br> （i=j mod Q）某一主存块 j 按模 Q 映射到缓存的第 i 组中的任意一块，某一 主存块只能映射到某一缓存组中的任一块。<br> <img src="https://images2.imgbox.com/fa/3f/EnxLE9oy_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4Cache_104"></a>4.Cache映像总结</h3> 
<p>◆ 直接映像<br> ➢ 某一主存块只能固定映射到某一缓冲块<br> ◆ 全相联映像<br> ➢ 某一主存块能映射到任一缓冲块<br> ◆ 组相联<br> ➢ 某一主存块只能映射到某一缓冲组中的任一块</p> 
<blockquote> 
 <p>靠近CPU的Cache要求高速，采用直接相联或路数较少的组相联；中间层次采用组相联；距离CPU最远的Cache采用全相联，对利用率强调越高。</p> 
</blockquote> 
<h2><a id="_113"></a>四、虚拟存储器</h2> 
<p>◆ 主存-辅存层次<br> ◆ 在虚拟地址空间编程<br>     ➢ 虚拟地址(虚地址):(对应主存逻辑空间)由编译程序生成的，是程序的<strong>逻辑地址</strong><br>     ➢ 物理地址(实地址):(对应主存物理空间)由CPU地址引脚送出，用于访问主存的地址<br>     ➢ CPU理解虚拟地址，并将其转换成物理地址</p> 
<p><strong>主存-辅存层次与Cache-主存层次的比较</strong></p> 
<blockquote> 
 <p><strong>区别（重点）</strong><br> ➢ Cache-主存的控制完全由硬件实现；虚拟存储器的控制是软硬件结合的。 （该层次虚拟存储器的控制软件即操作系统）<br> ➢ 主存/Cache存储器的访问“时间比”较小，典型的是10:1；每次传送的基本信息单元也比较小。而辅存-主存的访问时间比要大得多。<br> <strong>相同点</strong><br> ➢ 基本原理相似<br> ➢ 类似的地址映像、地址变换、替换策略(最早应用于虚拟存储系统中)</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/ff/ab/RYtFNZpv_o.png" alt="在这里插入图片描述"></p> 
<p><strong>主存-辅存层次信息传送单位和存储管理</strong></p> 
<blockquote> 
 <p>◆ 信息传送单位可采用段、页或段页<br> ◆ 存储管理<br> ➢ 段式管理<br> ➢ 页式管理<br> ➢ 段页式管理</p> 
</blockquote> 
<h3><a id="1_137"></a>1.段式管理</h3> 
<p>➢ 把主存按段分配的存储管理方式。<br> ➢ 段以软件为基础, 利用程序的模块化性质, 按照程序的逻辑结构划分成的多个相对独立部分。<br> ➢ 过程(函数)、子程序、数据表、阵列等。<br> ➢ 特点：大小不一！可以被其他程序段调用。<br> <img src="https://images2.imgbox.com/0a/14/EsglE7PQ_o.png" alt="在这里插入图片描述"></p> 
<p><strong>段式管理优缺点分析</strong></p> 
<blockquote> 
 <p>➢ 优点：段的分界与程序的自然分界相对应；段的逻辑独立性使它易于编译、管理、修改和保护，也便于多道程序共享。<br> ➢ 缺点：容易在段间留下许多空余的零碎存储空间不好利用，造成浪费。</p> 
</blockquote> 
<h3><a id="2Cache_147"></a>2.页式管理（类比Cache地址映像）</h3> 
<p>➢ 把主存按页分配的存储管理方式。<br> ➢ 主存的物理空间也被划分为等长的固定区域，称为页面。<br> ➢ 新页调入主存也很容易掌握，只要有空白页面就可。<br> <img src="https://images2.imgbox.com/40/51/875CMHU5_o.png" alt="在这里插入图片描述"><br> <strong>页式管理优缺点分析</strong></p> 
<blockquote> 
 <p>➢ 优点：可能造成浪费的是程序最后一页的零头，它比段式管理系统的空间浪费要小得多。<br> ➢ 缺点：由于页不是逻辑上独立的实体，所以处理、保护和共享都不及段式来得方便。</p> 
</blockquote> 
<h3><a id="3_156"></a>3.段页式管理</h3> 
<p>➢ 程序按模块分段，段内再分页。<br> ➢ 出入主存仍以页为信息传送单位。<br> ➢ 用段表和页表(每段一个页表)进行两级管理。</p> 
<h3><a id="4MMU_160"></a>4.存储管理部件MMU</h3> 
<p>➢ MMU：由硬件实现的存储管理部件。<br> ➢ 作用：实现逻辑地址到物理地址的转换，并在页面失效时进入操作系统环境。<br> ➢ 整个虚拟存储器的管理是由MMU部件与操作系统共同完成的。</p> 
<h2><a id="_164"></a>五、巩固练习</h2> 
<p>例1：<br> <img src="https://images2.imgbox.com/66/d9/p5yYg0vf_o.png" alt="在这里插入图片描述"><br> 解析：首先要明确不同方式下主存地址格式的形式有何异同，<strong>Cache字块地址为为Cache组数（<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           2 
          
         
           c 
          
         
        
       
         2^{c} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.664392em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">c</span></span></span></span></span></span></span></span></span></span></span></span></span>）所占位数（c位）字块内地址要看块长字数（<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           2 
          
         
           b 
          
         
        
       
         2^{b} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.849108em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.849108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span></span></span></span></span></span></span></span></span></span></span></span></span> ）所占位数（b位）主存字块标记 t =主存总位数-c-b。</strong><br> 直接映像方式：<br> <img src="https://images2.imgbox.com/e6/f9/QD9sqElh_o.png" alt="在这里插入图片描述"><br> 全相联映像方式：<br> <img src="https://images2.imgbox.com/59/20/O2Ghdlpx_o.png" alt="在这里插入图片描述"><br> 组相联映像方式：r位为几路组相联的路数（<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          2 
         
        
          r 
         
        
       
      
        2^{r} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.664392em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">r</span></span></span></span></span></span></span></span></span></span></span></span></span>）所占位数。<br> <img src="https://images2.imgbox.com/c0/e3/aSchT47G_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/99/ff/aEwROvIT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ce/85/1vs1JC3t_o.png" alt="在这里插入图片描述"><br> <strong>例2：某计算机的Cache共有16块，采用二路组相联映射方式。每个主存块大小为32B，按字节编址，主存129号单元所在主存块应装入到的Cache组号是（ ）。（2009年联考真题）<br> A. 0 B.2 C.4 D.6</strong><br> 解析：由题意知Cache共有16块，采用二路组相联映射方式，表示共16/2=8组，每组2块。因为每个主存块大小为32B，按字节编址，即每个单元都是一个字节，主存129号单元即为129/32=4.03&gt;4，即在第5块。按照下表可以清晰了解到第五块对应第一路的4，即在第4组，选C。</p> 
<table><thead><tr><th align="center">Cache组号</th><th align="right">第一路</th><th align="right">第二路</th></tr></thead><tbody><tr><td align="center">0</td><td align="right">0</td><td align="right">8</td></tr><tr><td align="center">1</td><td align="right">1</td><td align="right">9</td></tr><tr><td align="center">2</td><td align="right">2</td><td align="right">10</td></tr><tr><td align="center">3</td><td align="right">3</td><td align="right">11</td></tr><tr><td align="center">4</td><td align="right">4</td><td align="right">12</td></tr><tr><td align="center">5</td><td align="right">5</td><td align="right">13</td></tr><tr><td align="center">6</td><td align="right">6</td><td align="right">14</td></tr><tr><td align="center">7</td><td align="right">7</td><td align="right">15</td></tr></tbody></table> 
<p><strong>例3：若计算机主存地址为32位，按字节编址，Cache数据区大小为32KB，主存块大小为32B，采用直接映射方式和回写（write back）策略，则Cache行的位数至少是（）？（2021年联考原题）<br> A. 275 B. 274 C. 258 D. 257</strong><br> 解析：首先本题需要明确cache块/行包括有效位（占1位）、主存标记位和数据位，<strong>当采用回写策略时还要考虑标志位（占1位）</strong>。分析题目可知：（1）主存有32位地址（2）Cache块数据区有32KB（3）主存块大小为32B（Cache块和主存块的大小一致）（4）直接映像的方式主存地址的分布可知<br> <strong>直接映像方式：</strong><br> <img src="https://images2.imgbox.com/a7/20/ZPaol6Z7_o.png" alt="在这里插入图片描述"><br> 由（2）（3）可知Cache块有32KB/32B=1K块，共占10位；32个字节（<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          2 
         
        
          5 
         
        
       
      
        2^{5} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></span></span>），按字节编址，块内地址占5位；故主存标记t=32-10-5=17位。块内数据占32B，即32x8=256位；有效位占1位；采用回写策略要考虑标志位占1位；故17+256+1+1=275位，选A。<br> 例4：<br> <img src="https://images2.imgbox.com/50/5a/xn55mQjt_o.png" alt="在这里插入图片描述"><br> 例5：<br> <img src="https://images2.imgbox.com/c0/6c/avbXUV0M_o.png" alt="在这里插入图片描述"><br> 解析：（1）Cache由64个储存块组成，即Cache块内地址占6位；Cache块与主存块的大小一致，每块由32个字组成，即块内字地址占5位；故Cache地址占6+5=11位。主存由8192=<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          2 
         
        
          13 
         
        
       
      
        2^{13} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span></span>个储存块组成，主存地址占13+5=18位。每组包含4个储存块，即4路组相联。综上所述，主存地址18位，Cache地址11位，4路组相联。<br> （2）由（1）得主存地址共18位，主存标记（区号）：18-11=7位；组号：Cache共64/4=16组，占4位；块号：每组包含4个储存块，占2位；块内地址：每块由32个字组成，即块内字地址占5位。综上所述，区号7位，组号4位，块号2位，块内地址5位。</p> 
<p><strong>例6：某32位计算机按字节编址，Cache容量为16KB，Cache行的大小为16B，若主存与Cache地址映像采用直接映像方式，则主存地址为1234E8F8H的单元装入Cache的地址是什么？</strong><br> 解析：由题可知主存地址为32位，Cache容量为16KB，Cache行的大小为16B（代表块内字存储空间大小），故16KB/16B=1K，16B=<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          2 
         
        
          4 
         
        
       
      
        2^{4} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></span>B，即Cache块内地址占10位，块内字地址占4位；综上得Cache的地址共占14位（二进制，占用主存低位），将16进制地址后四位先转化为二进制地址1110 1000 1111 1000，再取后14位地址为10 1000 1111 1000。</p> 
<h2><a id="_207"></a>总结</h2> 
<p>本章内容细节满满，做题时更是有很多要注意的细节，比如主存地址在不同地址映像下的形式，cache块/行包括有效位（占1位）、主存标记位和数据位，当采用回写策略时还要考虑标志位（占1位），主存块与Cache块的大小一致，主存-辅存层次与Cache-主存层次的区别等等。本章为重点章节，有时刷题1000不如理解一遍，希望大家在理解的基础上做题巩固，本篇对你有帮助的话记得点赞支持一下哦。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/148b0fd4f0c7b7e3ffc36e69209b8d91/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python实现股票数据接口</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/94c8b766dc3307f9714f26a693dfc4fc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">知识单元三 面向对象-2</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>