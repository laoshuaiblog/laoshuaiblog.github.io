<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>centos7 安装部署kafka - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/a8f58f07eafa8764a9fb5cc4580edaaa/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="centos7 安装部署kafka">
  <meta property="og:description" content="一、下载 官网地址： https://kafka.apache.org/downloads
kafka 在 2.8 版本开始脱离 zookeeper，本文示例版本为 2.7.2。
选择图中标记的版本下载。
kafka-2.7.2.src.tgz 是源码格式，需要编译。kafka_2.12-2.7.2.tgz、kafka_2.13-2.7.2.tgz 是二进制格式，其中 2.12 和 2.13 代表 scala 的版本。 二、解压 将下载的文件放到linux的 /usr/local 目录下，然后解压：
cd /usr/local tar -zxvf kafka_2.13-2.7.2.tgz 三、配置 进入 kafka 的 config 目录下
cd /usr/local/kafka_2.12-2.7.2/config ll consumer.properties 是消费者的相关配置producer.properties 是生产者的相关配置server.properties 是 kafka 服务的配置zookeeper.properties 是 zookeeper 的相关配置 zookeeper 中记录kafka的broker等信息 修改 server.properties 的配置。
vim /usr/local/kafka_2.12-2.7.2/config/server.properties 修改 zookeeper.properties 的配置
vim /usr/local/kafka_2.12-2.7.2/config/zookeeper.properties 修改完成保存退出
四、启动 进入 kafka 的安装目录
cd /usr/local/kafka_2.12-2.7.2/ 启动 zookeeper
./bin/zookeeper-server-start.sh -daemon config/zookeeper.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-21T11:09:25+08:00">
    <meta property="article:modified_time" content="2023-12-21T11:09:25+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">centos7 安装部署kafka</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>一、下载</h2> 
<p>官网地址： https://kafka.apache.org/downloads<br> kafka 在 2.8 版本开始脱离 zookeeper，本文示例版本为 2.7.2。<br> <img src="https://images2.imgbox.com/dc/98/qPCHAORw_o.png" alt="kafka"><br> 选择图中标记的版本下载。</p> 
<ul><li>kafka-2.7.2.src.tgz 是源码格式，需要编译。</li><li>kafka_2.12-2.7.2.tgz、kafka_2.13-2.7.2.tgz 是二进制格式，其中 2.12 和 2.13 代表 scala 的版本。</li></ul> 
<h2><a id="_7"></a>二、解压</h2> 
<p>将下载的文件放到linux的 /usr/local 目录下，然后解压：</p> 
<pre><code>cd /usr/local
tar -zxvf kafka_2.13-2.7.2.tgz
</code></pre> 
<h2><a id="_13"></a>三、配置</h2> 
<p>进入 kafka 的 config 目录下</p> 
<pre><code>cd /usr/local/kafka_2.12-2.7.2/config
ll
</code></pre> 
<p><img src="https://images2.imgbox.com/12/98/ionmUohH_o.png" alt="kafka的配置文件目录"></p> 
<ul><li>consumer.properties 是消费者的相关配置</li><li>producer.properties 是生产者的相关配置</li><li>server.properties 是 kafka 服务的配置</li><li>zookeeper.properties 是 zookeeper 的相关配置 
  <ul><li>zookeeper 中记录kafka的broker等信息</li></ul> </li></ul> 
<p>修改 server.properties 的配置。</p> 
<pre><code>vim /usr/local/kafka_2.12-2.7.2/config/server.properties
</code></pre> 
<p><img src="https://images2.imgbox.com/7a/33/Wemt6rCl_o.png" alt="kafka server.properties 配置"><br> <img src="https://images2.imgbox.com/44/27/rhgKFgKI_o.png" alt="kafka server.properties 配置"><br> 修改 zookeeper.properties 的配置</p> 
<pre><code>vim /usr/local/kafka_2.12-2.7.2/config/zookeeper.properties
</code></pre> 
<p><img src="https://images2.imgbox.com/29/3d/oJ1dYY4e_o.png" alt="kafka zookeeper配置"><br> 修改完成保存退出</p> 
<h2><a id="_38"></a>四、启动</h2> 
<p>进入 kafka 的安装目录</p> 
<pre><code>cd /usr/local/kafka_2.12-2.7.2/
</code></pre> 
<p>启动 zookeeper</p> 
<pre><code>./bin/zookeeper-server-start.sh -daemon config/zookeeper.properties
</code></pre> 
<p>启动 kafka</p> 
<pre><code>./bin/kafka-server-start.sh -daemon config/server.properties
</code></pre> 
<p>查看是否启动成功</p> 
<pre><code>jps -l
或
ps -ef | grep zookeeper
ps -ef | grep kafka
</code></pre> 
<p><img src="https://images2.imgbox.com/be/9c/pxcgPpG4_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="kafka__59"></a>五、kafka 操作</h2> 
<p>kafka/bin 目录：<br> <img src="https://images2.imgbox.com/93/7b/GFjUTJ3P_o.png" alt="kafka /bin 目录"><br> kafka 整体有三大模块，分别为生产者producer、消费者consumer 和主题topic，其中 topic 是保存在kafka集群中的，producer 和 consumer 向集群中的 topic 中添加 events 以及消费 events，而针对这三大模块，在kafka的bin目录下，分别有对应的可执行脚本。</p> 
<h3><a id="51_kafkatopicssh_63"></a>5.1 kafka-topics.sh</h3> 
<table><thead><tr><th align="center">参数</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">–bootstrap-server &lt;String: server to connect to&gt;</td><td align="center">连接的kafka的broker的主机名称和端口号</td></tr><tr><td align="center">–topic &lt;String: topic&gt;</td><td align="center">操作的topic的名称</td></tr><tr><td align="center">–create</td><td align="center">创建topic</td></tr><tr><td align="center">–delete</td><td align="center">删除主题</td></tr><tr><td align="center">–alter</td><td align="center">修改主题</td></tr><tr><td align="center">–list</td><td align="center">查看所有主题</td></tr><tr><td align="center">–describe</td><td align="center">查看主题详细描述</td></tr><tr><td align="center">–partitions &lt;Integer: # of partitions&gt;</td><td align="center">设置分区数</td></tr><tr><td align="center">–replication-factor &lt;Integer:replication factor&gt;</td><td align="center">分区副本数，一般跟kafka节点数相同</td></tr><tr><td align="center">–config &lt;String: name=value&gt;</td><td align="center">更新系统默认的配置</td></tr></tbody></table> 
<p>使用 topic 控制台创建一个 topic</p> 
<pre><code>cd /usr/local/kafka_2.12-2.72/
./bin/kafka-topics.sh --bootstrap-server loaclhost:9092 --create --topic testTopic --partitions 1 --replication-factory 1
	# --bootstrap-server 表示要连接到哪台机器上
	# --create 表示要创建一个 topic
	# --topic 表示要创建的topic的名称，这里是 testTopic
	# --partitions 表示分区数
	# --replication-factory 表示副本数，不能大于 kafka 的节点数
</code></pre> 
<h3><a id="52_kafkaconsoleconsumersh_87"></a>5.2 kafka-console-consumer.sh</h3> 
<p>使用 consumer 控制台订阅 topic</p> 
<pre><code>cd /usr/local/kafka_2.12-2.72/
./bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic testTopic
	# --from-beginning 消费者订阅topic之前，生产者如果已经发布了一个event，这时消费者是拿不到这个event的，如果想要拿到之前已经发布的event，就加上该参数。
</code></pre> 
<h3><a id="53_kafkaconsoleproducersh_94"></a>5.3 kafka-console-producer.sh</h3> 
<p>使用 producer 控制台发布 event</p> 
<pre><code>cd /usr/local/kafka_2.12-2.72/
./bin/kafka-console-producer.sh --bootstrap-server localhost:9092 --topic testTopic
	# 在箭头后输入要发送的 event，每行代表一个 event
</code></pre> 
<p>在 producer 中发布的 event，topic 的订阅者会接收到。<br> <img src="https://images2.imgbox.com/91/18/MDQhPLXz_o.png" alt="生产者发送event"><br> <img src="https://images2.imgbox.com/3a/56/2aUK6E18_o.png" alt="消费者接收到event"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e663da88b8bde8c8d457c055c1835ce2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C&#43;&#43;命名空间（超详细)using namespace std</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a38f8e512a8319e91ef72efbfcd16d32/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VMware NAT网络为虚拟机设置固定IP</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>