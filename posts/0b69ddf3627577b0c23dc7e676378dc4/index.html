<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python文件 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/0b69ddf3627577b0c23dc7e676378dc4/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Python文件">
  <meta property="og:description" content="Python文件 1 文件与文件路径1.1 什么是文件和文件路径1.2 绝对路径1.3 相对路径 2 文件的基本操作2.1 路径检查方法2.2 目录操作方法2.3 信息获取方法 3 文件读写3.1 打开文件3.2 读取文件3.3 文件写入3.4 关闭文件3.5 示例3.6 with as 上下文语法 4 文件复制4.1 复制文件4.2 复制目录 5 文件移动5.1 移动文件5.2 移动目录5.3 重命名文件或目录 6 文件删除6.1 删除非空目录 7 文件压缩和解压缩7.1 文件压缩7.2 文件解压缩 8 编码知识 1 文件与文件路径 1.1 什么是文件和文件路径 文件就是一种存储在存储设备上的信息集合，文件路径就是文件在计算机上的存储位置，文件路径有绝对路径和相对路径。
1.2 绝对路径 就是绝对不变的路径，比如在目录 D:\user\001 下有一个文件 a.txt，那么‘D:\user\001’就是该文件的绝对路径，绝对路径也可以说是从根目录开始描述的路径。
1.3 相对路径 是相对与当前路径开始描述的路径，一个点 . 表示当前目录，两个点 … 表示上级目录。
2 文件的基本操作 在Python中对文件进行操作，主要使用两个模块，os模块和os.path模块。
2.1 路径检查方法 判断文件或路径是否存在 os.path.exists(path) # 若path文件或目录存在返回True，否则返回False
判断是否绝对路径 os.path.isabs(path) # 若path为绝对路径返回True，否则返回False">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-20T23:14:47+08:00">
    <meta property="article:modified_time" content="2024-03-20T23:14:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python文件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Python文件</h4> 
 <ul><li><a href="#1__1" rel="nofollow">1 文件与文件路径</a></li><li><ul><li><a href="#11__2" rel="nofollow">1.1 什么是文件和文件路径</a></li><li><a href="#12__4" rel="nofollow">1.2 绝对路径</a></li><li><a href="#13__6" rel="nofollow">1.3 相对路径</a></li></ul> 
  </li><li><a href="#2__8" rel="nofollow">2 文件的基本操作</a></li><li><ul><li><a href="#21__10" rel="nofollow">2.1 路径检查方法</a></li><li><a href="#22__19" rel="nofollow">2.2 目录操作方法</a></li><li><a href="#23__37" rel="nofollow">2.3 信息获取方法</a></li></ul> 
  </li><li><a href="#3__62" rel="nofollow">3 文件读写</a></li><li><ul><li><a href="#31__64" rel="nofollow">3.1 打开文件</a></li><li><a href="#32__72" rel="nofollow">3.2 读取文件</a></li><li><a href="#33__75" rel="nofollow">3.3 文件写入</a></li><li><a href="#34__78" rel="nofollow">3.4 关闭文件</a></li><li><a href="#35__80" rel="nofollow">3.5 示例</a></li><li><a href="#36_with_as__97" rel="nofollow">3.6 with as 上下文语法</a></li></ul> 
  </li><li><a href="#4__105" rel="nofollow">4 文件复制</a></li><li><ul><li><a href="#41__107" rel="nofollow">4.1 复制文件</a></li><li><a href="#42__111" rel="nofollow">4.2 复制目录</a></li></ul> 
  </li><li><a href="#5__115" rel="nofollow">5 文件移动</a></li><li><ul><li><a href="#51__116" rel="nofollow">5.1 移动文件</a></li><li><a href="#52__123" rel="nofollow">5.2 移动目录</a></li><li><a href="#53__125" rel="nofollow">5.3 重命名文件或目录</a></li></ul> 
  </li><li><a href="#6__127" rel="nofollow">6 文件删除</a></li><li><ul><li><a href="#61__128" rel="nofollow">6.1 删除非空目录</a></li></ul> 
  </li><li><a href="#7__131" rel="nofollow">7 文件压缩和解压缩</a></li><li><ul><li><a href="#71__133" rel="nofollow">7.1 文件压缩</a></li><li><a href="#72__159" rel="nofollow">7.2 文件解压缩</a></li></ul> 
  </li><li><a href="#8__175" rel="nofollow">8 编码知识</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1__1"></a>1 文件与文件路径</h2> 
<h3><a id="11__2"></a>1.1 什么是文件和文件路径</h3> 
<p>文件就是一种存储在存储设备上的信息集合，文件路径就是文件在计算机上的存储位置，文件路径有绝对路径和相对路径。</p> 
<h3><a id="12__4"></a>1.2 绝对路径</h3> 
<p>就是绝对不变的路径，比如在目录 D:\user\001 下有一个文件 a.txt，那么‘D:\user\001’就是该文件的绝对路径，绝对路径也可以说是从根目录开始描述的路径。</p> 
<h3><a id="13__6"></a>1.3 相对路径</h3> 
<p>是相对与当前路径开始描述的路径，一个点 . 表示当前目录，两个点 … 表示上级目录。</p> 
<h2><a id="2__8"></a>2 文件的基本操作</h2> 
<p>在Python中对文件进行操作，主要使用两个模块，os模块和os.path模块。</p> 
<h3><a id="21__10"></a>2.1 路径检查方法</h3> 
<ul><li>判断文件或路径是否存在</li></ul> 
<blockquote> 
 <p>os.path.exists(path) # 若path文件或目录存在返回True，否则返回False</p> 
</blockquote> 
<ul><li>判断是否绝对路径</li></ul> 
<blockquote> 
 <p>os.path.isabs(path) # 若path为绝对路径返回True，否则返回False</p> 
</blockquote> 
<ul><li>判断是否是目录</li></ul> 
<blockquote> 
 <p>os.path.isdir(path) # 若path为目录返回True，否则返回False</p> 
</blockquote> 
<ul><li>判断是否是文件</li></ul> 
<blockquote> 
 <p>os.path.isfile(path) # 若path为文件返回True，否则返回False</p> 
</blockquote> 
<h3><a id="22__19"></a>2.2 目录操作方法</h3> 
<ul><li>创建目录</li></ul> 
<blockquote> 
 <p>os.mkdir(path)</p> 
</blockquote> 
<ul><li>删除目录</li></ul> 
<blockquote> 
 <p>os.rmdir(path) # 删除非空目录</p> 
</blockquote> 
<ul><li>切换到指定目录</li></ul> 
<blockquote> 
 <p>os.chdir(path)</p> 
</blockquote> 
<ul><li>删除文件</li></ul> 
<blockquote> 
 <p>os.remove(path) # 若path是一个目录会报错，提示权限不足</p> 
</blockquote> 
<ul><li>路径在各操作系统上通用方法示例</li></ul> 
<pre><code class="prism language-bash"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> path_str <span class="token operator">=</span> <span class="token string">'c:\\windows\\system'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> path_list <span class="token operator">=</span> path_str.split<span class="token punctuation">(</span>os.path.seq<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'c:'</span>,<span class="token string">'windows'</span>,<span class="token string">'system'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> os.path.seq.join<span class="token punctuation">(</span>path_list<span class="token punctuation">)</span>
<span class="token string">'c:\\windows\\system'</span>
</code></pre> 
<h3><a id="23__37"></a>2.3 信息获取方法</h3> 
<ul><li>获取Python当前工作目录</li></ul> 
<blockquote> 
 <p>os.getcwd()</p> 
</blockquote> 
<ul><li>获取文件绝对路径</li></ul> 
<blockquote> 
 <p>os.path.abspath(path)</p> 
</blockquote> 
<ul><li>获取文件相对路径</li></ul> 
<blockquote> 
 <p>os.path.relpath(path, start) # path：要获取路径的文件或目录，start：一个相对值</p> 
</blockquote> 
<ul><li>获取文件大小</li></ul> 
<blockquote> 
 <p>os.path.getsize(file) # file为要获取大小的文件，返回字节大小</p> 
</blockquote> 
<ul><li>获取path中的路径</li></ul> 
<blockquote> 
 <p>os.path.dirname(path)</p> 
</blockquote> 
<ul><li>获取path中的名字</li></ul> 
<blockquote> 
 <p>os.path.basename(path)</p> 
</blockquote> 
<ul><li>获取正确的路径分隔斜杠</li></ul> 
<blockquote> 
 <p>os.path.seq # 变量：windows下值为‘\’，linux下值为‘/’</p> 
</blockquote> 
<ul><li>获取目录下所有内容</li></ul> 
<blockquote> 
 <p>os.listdir(path)<br> 输出结果为一个列表<br> [‘.ipynb_checkpoints’, ‘1.txt’, ‘python01-test.ipynb’, ‘Untitled.ipynb’]</p> 
</blockquote> 
<ul><li>遍历目录下所有内容</li></ul> 
<blockquote> 
 <p>os.walk(path)<br> 功能：遍历path目录下所有文件和目录，包括子目录和文件，在循环的每次迭代时都返回3个值：</p> 
 <ol><li>当前文件夹名称</li><li>当前文件夹下子文件夹的字符串列表</li><li>当前文件夹下文件的字符串列表</li></ol> 
</blockquote> 
<h2><a id="3__62"></a>3 文件读写</h2> 
<p>Python读写文件的方式与其他语言类似，一般分三步：打开文件、读取或写入文件、关闭文件。</p> 
<h3><a id="31__64"></a>3.1 打开文件</h3> 
<blockquote> 
 <p>open(filename, [‘r’|‘w’|‘a’], encoding=“utf-8”)<br> 功能：打开filename指定的文件，返回一个File对象，filename可以是绝对路径或相对路径<br> 参数：<br> ---------r：读模式打开文件，不允许对文件进行修改，默认读模式打开文件<br> --------w：写模式打开文件，对文件进行覆盖式修改<br> --------a：添加模式打开文件，在文件未尾添加写入文件<br> 返回：File对象</p> 
</blockquote> 
<h3><a id="32__72"></a>3.2 读取文件</h3> 
<blockquote> 
 <p>File.read() # 将文件内容全部读出为一个大字符串<br> File.readline() # 将文件内容全部读出为一个字符串列表，列表中的每一项为文件中的一行</p> 
</blockquote> 
<h3><a id="33__75"></a>3.3 文件写入</h3> 
<blockquote> 
 <p>File.write()</p> 
</blockquote> 
<h3><a id="34__78"></a>3.4 关闭文件</h3> 
<blockquote> 
 <p>File.close()</p> 
</blockquote> 
<h3><a id="35__80"></a>3.5 示例</h3> 
<pre><code class="prism language-bash"><span class="token comment"># 硬盘上存在的一个文件</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">file</span> <span class="token operator">=</span> <span class="token string">"d:<span class="token entity" title="\\">\\</span>study<span class="token entity" title="\\">\\</span>test.txt"</span>
<span class="token comment"># 打开文件</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> open<span class="token punctuation">(</span>file, <span class="token assign-left variable">encoding</span><span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>
<span class="token comment"># 读取文件全部内容为一个字符串</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> str <span class="token operator">=</span> f.read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 读取文件全部内容为一个字符串列表，列表中的每一项为文件中的一行</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> str_list <span class="token operator">=</span> f.readline<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 逐行读取文件</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">for</span> <span class="token for-or-select variable">line</span> <span class="token keyword">in</span> f:
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>     print<span class="token punctuation">(</span>line<span class="token punctuation">)</span>
<span class="token comment"># 关闭文件</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f.close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="36_with_as__97"></a>3.6 with as 上下文语法</h3> 
<p>文件打开操作后都要进行关闭操作，如果忘记关闭就会出现问题，为了避免忘记关闭的情况出现，Python提供了一个with as 语法来解决此问题，使用示例如下：</p> 
<pre><code class="prism language-bash"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">file</span> <span class="token operator">=</span> <span class="token string">"d:<span class="token entity" title="\\">\\</span>study<span class="token entity" title="\\">\\</span>test.txt"</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> with open<span class="token punctuation">(</span>file, <span class="token assign-left variable">encoding</span><span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span> as f:
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>     str <span class="token operator">=</span> f.read<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="4__105"></a>4 文件复制</h2> 
<p>shutil模块（或称shell工具），该模块中包含函数能让我们在Python中对文件进行复制、移动、修改和删除操作。</p> 
<h3><a id="41__107"></a>4.1 复制文件</h3> 
<blockquote> 
 <p>shutil.copy(source, destination)<br> 功能：复制一个文件，将source处的文件复制到destination（路径或文件）处，若destination是路径则将文件复制到该路径下，若是文件则作为复制文件的新名称，source和destination都为字符串。<br> 返回：被复制文件的路径</p> 
</blockquote> 
<h3><a id="42__111"></a>4.2 复制目录</h3> 
<blockquote> 
 <p>shutil.copytree(source, destination)<br> 功能：复制整个文件夹包括子文件夹和文件，将source处的文件夹（包括子文件夹和文件）复制到destination下。<br> 返回：新文件夹路径</p> 
</blockquote> 
<h2><a id="5__115"></a>5 文件移动</h2> 
<h3><a id="51__116"></a>5.1 移动文件</h3> 
<blockquote> 
 <p>shutil.move(source, destination)<br> 功能：移动一个文件，将source处的文件移动至destination，<br> … … …若destination文件夹存在，source文件移至该文件夹下，如该文件夹下有同名的文件会被覆盖<br> … … …若destination文件夹不存在，则当作文件处理，source处文件被重新命名为该名字<br> … … …构成目的地的文件夹必须存在，否则Python会抛出异常<br> 返回：返回移动后文件的绝对路径字符串</p> 
</blockquote> 
<h3><a id="52__123"></a>5.2 移动目录</h3> 
<blockquote> 
 <p>shutil.move(source, destination) 方法中如果source是目录的话就是移动目录</p> 
</blockquote> 
<h3><a id="53__125"></a>5.3 重命名文件或目录</h3> 
<blockquote> 
 <p>shutil.move(source, destination) 方法中如果destination是不存在的目录或文件，就实现重命名的效果</p> 
</blockquote> 
<h2><a id="6__127"></a>6 文件删除</h2> 
<h3><a id="61__128"></a>6.1 删除非空目录</h3> 
<blockquote> 
 <p>shutil.rmtree(path)<br> 功能：删除path处文件夹，包括子文件夹和文件</p> 
</blockquote> 
<h2><a id="7__131"></a>7 文件压缩和解压缩</h2> 
<p>利用zipfile模块提供的函数，可对文件或文件夹进行压缩和解压缩处理。</p> 
<h3><a id="71__133"></a>7.1 文件压缩</h3> 
<blockquote> 
 <p>zipfile.ZipFile(zip文件名)<br> 功能：读取zip文件返回一个ZipFile对象<br> 返回：ZipFile对象<br> 示例：将路径：‘d:\2024’ 下的文件进行压缩处理，代码如下：</p> 
</blockquote> 
<pre><code class="prism language-bash"><span class="token function">import</span> os,zipfile
os.chdir<span class="token punctuation">(</span><span class="token string">'d:\\2024'</span><span class="token punctuation">)</span>
zip1 <span class="token operator">=</span> zipfile.ZipFile<span class="token punctuation">(</span><span class="token string">'2024.zip'</span><span class="token punctuation">)</span>

<span class="token comment"># ZipFile对象的namelist方法，返回zip文件中所有文件和文件夹的字符串列表</span>
zip1.namelist<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'202401/'</span>, <span class="token string">'202402/'</span>, <span class="token string">'a.txt'</span>, <span class="token string">'b.txt'</span><span class="token punctuation">]</span>

<span class="token comment"># ZipFile对象的getinfo方法，返回一个关于特定文件的ZipInfo对象，该对象有自己的属性。</span>
<span class="token comment"># 如表示字节数的file_size（原文件大小）和compress（压缩后文件大小）。</span>
<span class="token comment"># ZipFile对象表示整个归档对象，而zipinfo则保存归档文件中每个文件有用的信息。</span>
zipinfo1 <span class="token operator">=</span> zip1.getinfo<span class="token punctuation">(</span><span class="token string">'a.txt'</span><span class="token punctuation">)</span>
zipinfo1.file_size
<span class="token number">13001</span>
zipinfo1.compress_size
<span class="token number">3820</span>

zip1.close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="72__159"></a>7.2 文件解压缩</h3> 
<blockquote> 
 <p>zipfile.extractall()<br> 功能：从zip文件中解压缩所有文件和文件夹，放在当前工作目录中，可向该函数传入一个文件夹参数，则将文件解压到该文件夹下，如传入的目录不存在会自动创建。</p> 
</blockquote> 
<blockquote> 
 <p>zipfile.extract(文件名称)<br> 功能：解压单个文件，可传第二个参数将文件解压到指定目录而不是当前目录。</p> 
</blockquote> 
<blockquote> 
 <p>zipfile.ZipFile(‘zip文件名’, ‘w’)<br> 功能：创建或添加zip文件，以写模式打开ZipFile对象，然后用write方法传入一路径，Python就会压缩该路径指定的文件，示例如下：</p> 
</blockquote> 
<pre><code class="prism language-bash"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> zip2 <span class="token operator">=</span> zipfile.ZipFile<span class="token punctuation">(</span><span class="token string">'new.zip'</span>, <span class="token string">'w'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> zip2.write<span class="token punctuation">(</span><span class="token string">'1.txt'</span>, <span class="token assign-left variable">compress_type</span><span class="token operator">=</span>zipfile.ZIP_DEFLATED<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> zip2.close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>以上代码与写文件一样，'w’模式将擦除zip文件中原有内容，如果要添加内容则用’a’添加模式。</p> 
<h2><a id="8__175"></a>8 编码知识</h2> 
<p>open 函数的 encoding 参数值设置为了 utf-8，因为设置为该值可以解决很多程序中潜在的编码 BUG。</p> 
<blockquote> 
 <p>utf-8 不区分大小写，大写小写都行<br> utf-8中有个BOM文件头，若有发现utf-8还解决不了编码的问题，可以试着设置为 utf-8-sig尝试解决。</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d45609b664c5f792bf31e2945509873b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">dom元素&#43;CSS实现阶梯动画效果</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3a868c436226938fd0a64dfefc9aae83/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">收集一些PostgreSQL的题目</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>