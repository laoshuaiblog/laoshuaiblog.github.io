<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring Boot 之事件（Event） - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/bdf2f592b7781be860aa256d7efacb86/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Spring Boot 之事件（Event）">
  <meta property="og:description" content="Spring 官方文档翻译如下 ：
ApplicationContext 通过 ApplicationEvent 类和 ApplicationListener 接口进行事件处理。 如果将实现 ApplicationListener 接口的 bean 注入到上下文中，则每次使用 ApplicationContext 发布 ApplicationEvent 时，都会通知该 bean。 本质上，这是标准的观察者设计模式。
Spring的事件（Application Event）其实就是一个观察者设计模式，一个 Bean 处理完成任务后希望通知其它 Bean 或者说 一个Bean 想观察监听另一个Bean的行为。
Spring 事件只需要几步：
自定义事件，继承 ApplicationEvent定义监听器，实现 ApplicationListener 或者通过 @EventListener 注解到方法上定义发布者，通过 ApplicationEventPublisher 代码示例：
1. 自定义Event @Data public class DemoEvent extends ApplicationEvent { private Long id; private String message; public DemoEvent(Object source, Long id, String message) { super(source); this.id = id; this.message = message; } } 复制代码 2.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2019-03-05T05:19:48+08:00">
    <meta property="article:modified_time" content="2019-03-05T05:19:48+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring Boot 之事件（Event）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="article-content"> 
 <p>Spring 官方文档翻译如下 ：</p> 
 <p><em>ApplicationContext 通过 ApplicationEvent 类和 ApplicationListener 接口进行事件处理。 如果将实现 ApplicationListener 接口的 bean 注入到上下文中，则每次使用 ApplicationContext 发布 ApplicationEvent 时，都会通知该 bean。 本质上，这是标准的观察者设计模式。</em></p> 
 <p>Spring的事件（Application Event）其实就是一个观察者设计模式，一个 Bean 处理完成任务后希望通知其它 Bean 或者说 一个Bean 想观察监听另一个Bean的行为。</p> 
 <p>Spring 事件只需要几步：</p> 
 <ul><li>自定义事件，继承 ApplicationEvent</li><li>定义监听器，实现 ApplicationListener 或者通过 @EventListener 注解到方法上</li><li>定义发布者，通过 ApplicationEventPublisher</li></ul> 
 <p>代码示例：</p> 
 <h5 class="heading">1. 自定义Event</h5> 
 <pre><code class="hljs java copyable"><span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ApplicationEvent</span> </span>{
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String message;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">DemoEvent</span><span class="hljs-params">(Object source, Long id, String message)</span> </span>{
        <span class="hljs-keyword">super</span>(source);
        <span class="hljs-keyword">this</span>.id = id;
        <span class="hljs-keyword">this</span>.message = message;
    }
}
<span class="copy-code-btn">复制代码</span></code></pre> 
 <h5 class="heading">2. 监听器</h5> 
 <ul><li>实现ApplicationListener 接口</li></ul> 
 <pre><code class="hljs java copyable">
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ApplicationListener</span>&lt;<span class="hljs-title">DemoEvent</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onApplicationEvent</span><span class="hljs-params">(DemoEvent demoEvent)</span> </span>{
        System.out.println(<span class="hljs-string">"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;DemoListener&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;"</span>);
        System.out.println(<span class="hljs-string">"收到了："</span> + demoEvent.getSource() + <span class="hljs-string">"消息;时间："</span> + demoEvent.getTimestamp());
        System.out.println(<span class="hljs-string">"消息："</span> + demoEvent.getId() + <span class="hljs-string">":"</span> + demoEvent.getMessage());
    }
}
<span class="copy-code-btn">复制代码</span></code></pre> 
 <blockquote> 
  <p>泛型为需要监听的事件类型</p> 
 </blockquote> 
 <ul><li>@EventListener</li></ul> 
 <pre><code class="hljs java copyable"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoListener2</span> </span>{

    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onApplicationEvent</span><span class="hljs-params">(DemoEvent demoEvent)</span> </span>{
        System.out.println(<span class="hljs-string">"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;DemoListener2&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;"</span>);
        System.out.println(<span class="hljs-string">"收到了："</span> + demoEvent.getSource() + <span class="hljs-string">"消息;时间："</span> + demoEvent.getTimestamp());
        System.out.println(<span class="hljs-string">"消息："</span> + demoEvent.getId() + <span class="hljs-string">":"</span> + demoEvent.getMessage());
    }
}

<span class="copy-code-btn">复制代码</span></code></pre> 
 <blockquote> 
  <p>参数为需要监听的事件类型</p> 
 </blockquote> 
 <h5 class="heading">3. 消息发布者</h5> 
 <pre><code class="hljs java copyable"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoPublisher</span> </span>{

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ApplicationContext applicationContext;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">DemoPublisher</span><span class="hljs-params">(ApplicationContext applicationContext)</span> </span>{
        <span class="hljs-keyword">this</span>.applicationContext = applicationContext;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">publish</span><span class="hljs-params">(<span class="hljs-keyword">long</span> id, String message)</span> </span>{
        applicationContext.publishEvent(<span class="hljs-keyword">new</span> DemoEvent(<span class="hljs-keyword">this</span>, id, message));
    }

}
<span class="copy-code-btn">复制代码</span></code></pre> 
 <h5 class="heading">4. 测试方法</h5> 
 <pre><code class="hljs java copyable"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">publisherTest</span><span class="hljs-params">()</span> </span>{
    demoPublisher.publish(<span class="hljs-number">1L</span>, <span class="hljs-string">"成功了！"</span>);
}
<span class="copy-code-btn">复制代码</span></code></pre> 
 <h5 class="heading">5.结果</h5> 
 <pre><code class="hljs test copyable">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;DemoListener2&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
收到了：com.jiuxian.publisher.DemoPublisher@3a62c01e消息;时间：1551762322376
消息：1:成功了！
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;DemoListener&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
收到了：com.jiuxian.publisher.DemoPublisher@3a62c01e消息;时间：1551762322376
消息：1:成功了！

<span class="copy-code-btn">复制代码</span></code></pre> 
 <h5 class="heading">6. 示例源码</h5> 
 <p><a href="https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2FZejun-Liu%2FSpringBoot2.0%2Ftree%2Fmaster%2Fspringboot-event" rel="nofollow">GitHub https://github.com/Zejun-Liu/SpringBoot2.0/tree/master/springboot-event</a></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/24f9ddb70caff9ba298986d611df1223/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python 安装&#43;open cv</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b24a13527ecc89ff04980b9375eec3b0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">300道Python面试题，备战春招！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>