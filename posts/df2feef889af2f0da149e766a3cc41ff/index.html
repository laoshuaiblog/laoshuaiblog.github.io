<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>股票交易系统的服务器,股标交易传输系统 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/df2feef889af2f0da149e766a3cc41ff/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="股票交易系统的服务器,股标交易传输系统">
  <meta property="og:description" content="本词条缺少概述图，补充相关内容使词条更完整，还能快速升级，赶紧来编辑吧！
股标交易传输系统在Windows 环境下将原有的传输和显示系统进行改进， 使它们在 Windows 环境下可以并发执行。 而且可以和其它应用 程序协调地共享资源。这不仅实现了多任务机制， 而 且也充分利用了Window s 的图形界面优点。 行情显示部分用 Foxpro forWindows 215 实现。
中文名
股标交易传输系统
概 述
现有的股标交易传输系统简 介
安 全性考虑,一般要进行数据校验
显示部分
Foxpro forWindows 215 实现
股标交易传输系统概述
编辑
语音
现有的股标交易传输系统, 多数是在DOS 下工作的。系统设计是单任务工作型, 一般是把传输 和显示分开实现。这种设计的缺点一般有: 浪费系统 资源; 界面不友好; 操作不方便。 考虑和以前DOS版本的兼容以及开发的速度, 行情 显示和行情传输两模块之间采用文件接口方式。即传 输模块把接收到的数据按dbf 文件格式存放。而显示 部分则直接读取dbf 文件。这样接口方式简单。便于 分组开发设计。传输模块则是在Windows 下通过串 行口对Modem 进行操作。Window s 311 提供了一组 通讯函数(见附录A ) , 利用这些函数以及Window s的多任务机制, 可以方便地设计一个具有实时响应和 多任务能力的传输系统。 MODEM 有一个标准的A T 命令集。在命令 (COMMAND)状态时, 给MODEM 发一个A T 命令, 执行完毕后,MODEM 要返回一个状态码, 表示该命 令的执行情况。也就是说, 在给MODEM 发命令和 MODEM 返回状态码这两个事件之间是有时间延迟 的。为了正确地接收到MODEM 的状态返回码, 一般 的DOS 应用程序是采用查询或中断的发式读MODEM。而在Windows 下, 利用其多任务机制和Win2dows 的通讯函数可以随时给MODEM 发命令, 而且 只在MODEM 的状态码返回之后, 应用程序才去读 返回码, 不必循环等待, 这样就实现了系统的多任务 机制。">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-08-05T14:57:45+08:00">
    <meta property="article:modified_time" content="2021-08-05T14:57:45+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">股票交易系统的服务器,股标交易传输系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>本词条缺少概述图，补充相关内容使词条更完整，还能快速升级，赶紧来编辑吧！</p> 
 <p>股标交易传输系统在Windows 环境下将原有的传输和显示系统进行改进， 使它们在 Windows 环境下可以并发执行。 而且可以和其它应用 程序协调地共享资源。这不仅实现了多任务机制， 而 且也充分利用了Window s 的图形界面优点。 行情显示部分用 Foxpro forWindows 215 实现。</p> 
 <p>中文名</p> 
 <p>股标交易传输系统</p> 
 <p>概    述</p> 
 <p>现有的股标交易传输系统简    介</p> 
 <p>安 全性考虑,一般要进行数据校验</p> 
 <p>显示部分</p> 
 <p>Foxpro forWindows 215 实现</p> 
 <p>股标交易传输系统概述</p> 
 <p>编辑</p> 
 <p>语音</p> 
 <p>现有的股标交易传输系统, 多数是在DOS 下工作的。系统设计是单任务工作型, 一般是把传输 和显示分开实现。这种设计的缺点一般有: 浪费系统 资源; 界面不友好; 操作不方便。 考虑和以前DOS版本的兼容以及开发的速度, 行情 显示和行情传输两模块之间采用文件接口方式。即传 输模块把接收到的数据按dbf 文件格式存放。而显示 部分则直接读取dbf 文件。这样接口方式简单。便于 分组开发设计。传输模块则是在Windows 下通过串 行口对Modem 进行操作。Window s 311 提供了一组 通讯函数(见附录A ) , 利用这些函数以及Window s的多任务机制, 可以方便地设计一个具有实时响应和 多任务能力的传输系统。 MODEM 有一个标准的A T 命令集。在命令 (COMMAND)状态时, 给MODEM 发一个A T 命令, 执行完毕后,MODEM 要返回一个状态码, 表示该命 令的执行情况。也就是说, 在给MODEM 发命令和 MODEM 返回状态码这两个事件之间是有时间延迟 的。为了正确地接收到MODEM 的状态返回码, 一般 的DOS 应用程序是采用查询或中断的发式读MODEM。而在Windows 下, 利用其多任务机制和Win2dows 的通讯函数可以随时给MODEM 发命令, 而且 只在MODEM 的状态码返回之后, 应用程序才去读 返回码, 不必循环等待, 这样就实现了系统的多任务 机制。</p> 
 <p>当MODEM 在数据(DATA )状态(即MODEM 正通过电话线路传输数据)时, 也可以按类似的原理 来操作。MODEM 传输数据都有规定的协议, 为了安 全性考虑, 一般要进行数据校验。采取的方法一般是 发送方发送一帧数据时, 在其中加入校验码, 接收方 收到数据后, 按预先规定的算法对接收到的数据进行 校验。若结果和发送过来的检验码相符, 则数据正确; 否则, 数据在传输过程中出现错误。校验完毕之后, 接 收方给发送方返回一个状态码, 表明接收到数据的正 确与否。而发送方则依据这个状态码来决定下一步的 工作。 同命令状态一样, 数据状态时的发送方在送完数 据和接收到返回码两事件之间, 也是有时间延迟的。 (一般规定为 3 秒钟, 超过 3 秒钟则认为线路出错)。 所以发送方在发送完一帧数据后, 就出让Windows 的系统控制权, 当有状态码返回时, 应用程序再去读 返回码并作进一步的处理。这样就可以对通讯事件实时响应(有事件时立即响应) , 并且具备多任务能力 (事件处理完毕立即出让系统控制权)。这也是我们这 个股票交易传输系统的设计思想。</p> 
 <p>股标交易传输系统传输数据帧结构</p> 
 <p>编辑</p> 
 <p>语音</p> 
 <p>由于本系统对数据安全性要求较高, 而且数据量 不是很大, 所以选用高级数据链路控制规程(HDLC) 的校验方法和帧结</p> 
 <p align="center"><img src="https://images2.imgbox.com/68/dc/ErTipu2m_o.png" alt="2d6c99bb9b8781feffd887f283adbe43.png">构。数据按帧发送, 每帧数据长度 为 1024 字节(帧结构见图 1) ; 每一帧发出后, 3 秒内 没有回应或响应为错误, 认为出现线路故障或其它错 误。发送方重发3 次, 以确定故障是否排除, 若没有排 除则系统自动重启动。每一帧送出后, 若响应正确则 续发下一帧直到数据完毕。对这个标准的HDLC 帧 略作修改, 主要在帧头和帧尾, 见图 2。其中数据字段用来存放软件握手信号(数据传输前后) , 而在传输数 据过程中则存放具体的传输数据, 双方根据 HDLC 帧的 16 比特FCS 校验方法计算该帧的 FCS, 用作校 验之用。本系统中帧的最大长度为 1024 字节。</p> 
 <p>股标交易传输系统传输过程的描述</p> 
 <p>编辑</p> 
 <p>语音</p> 
 <p>传输过程首先起始于MODEM 的拨号, 当设好 波特率等一系列参数后(作为外部参数设定) , 起动系 统时, 先引导初始化模块, 该模块根据系统参数给 MODEM 一条条发命令。每一条命令执行成功后, 就 取下一条命令执行, 直到执行完毕。</p> 
 <p align="center"><img src="https://images2.imgbox.com/eb/83/H8QYnhsd_o.png" alt="8ef5e49a718dccf58bebc088d8a33372.png">这样就完成了初 始化工作。初始模块引导完毕, 则本系统通过MODEM 发一个申请帧, 请求和远方交易中心的服务器 建立联结。这部分称为联结模块。具体方法是本地 MODEM 自动拨对方电话号码, 等待服务器端的响 应。双方MODEM 响应后系统向服务器发送一个申 请联结帧。服务器收到后若同意申请, 则回送一个同 意申请帧。这[1]</p> 
 <p>样双方就完成了联结工作。</p> 
 <p>本系统的传输共有 3 种数据类型: Ⅰ 股票行情 的文件传送(服务器发送)。Ⅱ 委托报盘的记录传送 (本地买卖股票后由本地系统发送)。Ⅲ 成交回报的 记录传送(股票买卖情况的回送, 由本地申请, 服务器 发送)。</p> 
 <p>每种数据传输都是由本地机发起的, 它向服务器 发送一个申请帧(不同数据类型, 代码不同)服务器根 据情况做出回应。若收到同意传送的帧, 则本地机回 送一个帧已收到的信息, 然后由发送方开始发送数 据。接收方接收数据并检验正确, 则回送一个接收正 确帧。发送方则继续发送, 错误则回送一个接收错误 帧, 由发送方重发刚才的数据帧(若一帧数据 3 次发 送后仍然不正确, 则认为出现致命错误。系统中止当 前工作, 重新启动) , 这样直到数据发送完毕。此时发 送方发送一个数据结束帧。在收到回应后, 结束双方 的收发工作。</p> 
 <p align="center"><img src="https://images2.imgbox.com/a3/c4/jun37J1E_o.png" alt="a7dbd00ea3d7323aaff259d572456eee.png">要说明的是, 每次本地机向服务器申请时, 我们 设计一个循环的方式: (1)先申请行情文件(看股票行 情是否更新; 更新则请求行情数据) ; (2)传送委托报 盘记录, (若有股票的买卖, 则本地机请求向服务器发 送数据) ; (3)成交回报记录的传送(若有成交回报, 则 由服务器将成交回报发送过来)。这 3 个过程完成之 后, 启动定时器, 在设定时间(如3分钟)之后再启动。</p> 
 <p>参考资料</p> 
 <p>1.</p> 
 <p>《股票行情实时传输系统》姚彬</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6184e96db6a40530fc6a1816ad4a0b9c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C&#43;&#43; Mutable</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a53603087f56618c8b259d0432d65fa4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ajax没有回发的原因,没有回应ajax请求</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>