<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Matlab&#43;Webots联合仿真记录 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/786246568ff8c0f4cccd0ceb1a9998e2/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Matlab&#43;Webots联合仿真记录">
  <meta property="og:description" content="Matlab&#43;Webots联合仿真错误和问题记录 Matlab版本 2023b （需要下载支持包，matlab附加功能中MinGW-w64 C/C&#43;&#43;）
Webots版本 2023b 后续回退版本到2023a
win10
1.Webots资源加载不出来 由于网络原因导致不能顺利打开Webots资源。故下载github中对应版本的assets资源包。参考官方文档，解压到下述目录中（修改电脑对应用户名，如下&#34;he&#34;）：
C:\Users\“he”\AppData\Local\Cyberbotics\Webots\cache\assets
2.联合仿真时Matlab界面不能启动并调试 Webots2023b启动Matlab控制器由之前的nodesktop方式，变为了banch方式，导致Matlab的桌面不能正常启动，Github中已有该问题且提出了一种解决方案，期待后续版本中可以修正：
Cannot open Matlab desktop when using “batch” option #6362
https://github.com/cyberbotics/webots/issues/6362#issuecomment-1695794195
根据回答需采用extern外部控制的方式，启动matlab控制器并解决Matlab代码调试的问题，参考如下：
https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?version=master#running-a-matlab-extern-robot-controller
https://www.cyberbotics.com/doc/guide/matlab?version=master&amp;amp;tab-os=windows
https://github.com/cyberbotics/webots/pull/6366
详细步骤如下，供参考：
Cmd 窗口下切换到webots安装目录下(此时需要更新webots2023rev1，2024a未尝试)，例：cd /d D:\soft\Webots\msys64\mingw64\bin运行webots-controller.exe并设置一些参数(需要指定matlab.exe路径)，启动&#34;yourname&#34;.m(绝对路径)文件，例：webots-controller.exe --interactive --matlab-path=D:\soft\MATLAB\R2023b\bin\win64\MATLAB.exe D:\bots_test\controllers\mpc_controller\mpc_controller.mm文件中添加代码desktop;keyboard;，此时就可以在matlab界面中进行单步调试。 后续：此方法打开Matlab后仍会闪退，此类BUG还是等更新大版本后看官方文档解决吧。本人回退2023a版本。
另外，运用uiopen函数，可将simulink当做ui界面打开，皆可以无缝仿真，中间不用过于卡顿。uiopen函数前面使用的地址是控制器文件夹中的simulink模型的地址(未在2023b版本尝试此方法打开simulink)：
zhuanlan.zhihu.com/p/513545274?utm_id=0
uiopen(‘Full_model’,1);
3.Matlab/Simulink &#43; Webots时间同步 修改Simulink设置为定步长，步长时间与webots时间步一致，如0.032s。
4.Matlab/Simulink &#43; Webots API函数报错 使用联合仿真时，需要对每个API函数加入相应的调用代码，有那个函数就添加哪行，例：
coder.extrinsic(‘calllib’);
coder.extrinsic(‘setdatatype’);
其它参考链接 webots与Matlab联合仿真中的错误记录(1)
https://miracle.blog.csdn.net/article/details/104686998?spm=1001.2101.3001.6650.1&amp;amp;utm_medium=distribute.pc_relevant.none-task-blog-2defaultCTRLISTdefault-1.nonecase&amp;amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2defaultCTRLISTdefault-1.nonecase
我matlab退出调试_开发经验分享(3) - Webots &#43; Matlab/Simulink联合仿真方法
https://blog.csdn.net/weixin_39842237/article/details/109914823?spm=1001.2101.3001.6650.2&amp;amp;utm_medium=distribute.pc_relevant.none-task-blog-2defaultCTRLISTdefault-2.no_search_link&amp;amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2defaultCTRLISTdefault-2.no_search_link">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-22T17:30:35+08:00">
    <meta property="article:modified_time" content="2024-01-22T17:30:35+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Matlab&#43;Webots联合仿真记录</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="MatlabWebots_0"></a>Matlab+Webots联合仿真错误和问题记录</h2> 
<p>Matlab版本 2023b （需要下载支持包，matlab附加功能中MinGW-w64 C/C++）<br> Webots版本 2023b 后续回退版本到2023a<br> win10</p> 
<h3><a id="1Webots_4"></a>1.Webots资源加载不出来</h3> 
<p>由于网络原因导致不能顺利打开Webots资源。故下载github中对应版本的assets资源包。参考官方文档，解压到下述目录中（修改电脑对应用户名，如下"he"）：</p> 
<blockquote> 
 <p>C:\Users\“he”\AppData\Local\Cyberbotics\Webots\cache\assets</p> 
</blockquote> 
<h3><a id="2Matlab_10"></a>2.联合仿真时Matlab界面不能启动并调试</h3> 
<p>Webots2023b启动Matlab控制器由之前的<em>nodesktop</em>方式，变为了<em>banch</em>方式，导致Matlab的桌面不能正常启动，Github中已有该问题且提出了一种解决方案，期待后续版本中可以修正：</p> 
<blockquote> 
 <p>Cannot open Matlab desktop when using “batch” option #6362<br> https://github.com/cyberbotics/webots/issues/6362#issuecomment-1695794195</p> 
</blockquote> 
<p>根据回答需采用<em>extern</em>外部控制的方式，启动matlab控制器并解决Matlab代码调试的问题，参考如下：</p> 
<blockquote> 
 <p>https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?version=master#running-a-matlab-extern-robot-controller<br> https://www.cyberbotics.com/doc/guide/matlab?version=master&amp;tab-os=windows<br> https://github.com/cyberbotics/webots/pull/6366</p> 
</blockquote> 
<p>详细步骤如下，供参考：</p> 
<ol><li>Cmd 窗口下切换到webots安装目录下(此时需要更新webots2023rev1，2024a未尝试)，例：cd /d D:\soft\Webots\msys64\mingw64\bin</li><li>运行webots-controller.exe并设置一些参数(需要指定matlab.exe路径)，启动"yourname".m(绝对路径)文件，例：webots-controller.exe --interactive --matlab-path=D:\soft\MATLAB\R2023b\bin\win64\MATLAB.exe D:\bots_test\controllers\mpc_controller\mpc_controller.m</li><li>m文件中添加代码desktop;keyboard;，此时就可以在matlab界面中进行单步调试。</li></ol> 
<p>后续：此方法打开Matlab后仍会闪退，此类BUG还是等更新大版本后看官方文档解决吧。本人回退2023a版本。</p> 
<p>另外，运用uiopen函数，可将simulink当做ui界面打开，皆可以无缝仿真，中间不用过于卡顿。uiopen函数前面使用的地址是控制器文件夹中的simulink模型的地址(未在2023b版本尝试此方法打开simulink)：</p> 
<blockquote> 
 <p>zhuanlan.zhihu.com/p/513545274?utm_id=0<br> uiopen(‘Full_model’,1);</p> 
</blockquote> 
<h3><a id="3MatlabSimulink__Webots_35"></a>3.Matlab/Simulink + Webots时间同步</h3> 
<p>修改Simulink设置为定步长，步长时间与webots时间步一致，如0.032s。</p> 
<h3><a id="4MatlabSimulink__Webots_API_37"></a>4.Matlab/Simulink + Webots API函数报错</h3> 
<p>使用联合仿真时，需要对每个API函数加入相应的调用代码，有那个函数就添加哪行，例：</p> 
<blockquote> 
 <p>coder.extrinsic(‘calllib’);<br> coder.extrinsic(‘setdatatype’);</p> 
</blockquote> 
<h3><a id="_42"></a>其它参考链接</h3> 
<blockquote> 
 <p>webots与Matlab联合仿真中的错误记录(1)<br> https://miracle.blog.csdn.net/article/details/104686998?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2<sub>default</sub>CTRLIST<sub>default-1.nonecase&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2</sub>default<sub>CTRLIST</sub>default-1.nonecase</p> 
</blockquote> 
<blockquote> 
 <p>我matlab退出调试_开发经验分享(3) - Webots + Matlab/Simulink联合仿真方法<br> https://blog.csdn.net/weixin_39842237/article/details/109914823?spm=1001.2101.3001.6650.2&amp;utm_medium=distribute.pc_relevant.none-task-blog-2<sub>default</sub>CTRLIST<sub>default-2.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2</sub>default<sub>CTRLIST</sub>default-2.no_search_link</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f85c9a1edf8ec044c1c069131260725e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java程序员转到AI大模型开发的路线</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bf488801ec29d9f30fa835a7f9cacd36/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一文解读Python的五种常见算法，清晰易懂~</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>