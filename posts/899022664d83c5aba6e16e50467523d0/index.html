<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言进阶 —— 枚举与联合 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/899022664d83c5aba6e16e50467523d0/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="C语言进阶 —— 枚举与联合">
  <meta property="og:description" content="文章目录 前言一、枚举1.1 枚举类型的定义1.2 枚举的优点1.3 枚举的使用 二、联合体（共用体）2.1联合类型的定义2.2 联合的特点2.3 联合大小的计算 总结 前言 今天我们会给大家介绍一下枚举和联合体这两个概念，这两者我们其实和结构体结合起来对比学习，三者之间都有其相似之处，当然也有不小的区别，我们今天将会从枚举和联合体的基本定义入手，剖析二者的使用和功能。
一、枚举 我们先讲枚举，从字面意义上来说，枚举的意思就是一一列举
即把所有有可能的值一一列举
比如说：一月份一共有31天，这是有限的，我们是可以一一列举的
又如：性别只有三种情况，男、女或者保密，我们也可以一一列举
等等…
诸如此类，我们都可以称其为列举
在这种情况下我们就可以使用枚举了
1.1 枚举类型的定义 先来看几个例子:
enum Day //星期 { Mon, Tues, Wed, Thur, Fri, Sat, Sun }; enum Sex //性别 { MALE, FEMALE, SECRET }; 以上定义的 enum Day，enum Sex都是枚举类型。
{}中的内容是枚举类型的可能取值，也叫枚举常量 。
那如果现在我们想描述一下星期应该怎么用代码表达出来呢？我们可以这样做：
int main() { enum Day d = Fri; return 0; } 以此类推，其他的枚举类型也是如此
在这里可能有人会问了，既然大括号内的内容叫做枚举常量，那么枚举常量有没有值呢？
在这里我可以很明确的告诉大家，这些枚举常量都是有值的，大家可以尝试用printf函数将所有的枚举常量的值一一打印出来比对一下，
我们很容易就可以发现一个有趣的规律：我们枚举的可能取值都是从0开始的，依次往下递增1，当然这里的前提是默认情况下。
那么我们是否可以修改它们的值呢？比如我希望第一个枚举常量从1开始，其实这是很容易实现的，只需将&#34;Mon&#34;改为&#34;Mon = 1&#34;即可。
后面的枚举常量也和默认情况下一样依次递增1。
1.2 枚举的优点 为什么使用枚举？使用枚举的好处是什么？">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-07-29T00:53:13+08:00">
    <meta property="article:modified_time" content="2022-07-29T00:53:13+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言进阶 —— 枚举与联合</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言</a></li><li><a href="#_5" rel="nofollow">一、枚举</a></li><li><ul><li><a href="#11__21" rel="nofollow">1.1 枚举类型的定义</a></li><li><a href="#12__73" rel="nofollow">1.2 枚举的优点</a></li><li><a href="#13__101" rel="nofollow">1.3 枚举的使用</a></li></ul> 
  </li><li><a href="#_119" rel="nofollow">二、联合体（共用体）</a></li><li><ul><li><a href="#21_121" rel="nofollow">2.1联合类型的定义</a></li><li><a href="#22__169" rel="nofollow">2.2 联合的特点</a></li><li><a href="#23__179" rel="nofollow">2.3 联合大小的计算</a></li></ul> 
  </li><li><a href="#_210" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言</h2> 
<p>今天我们会给大家介绍一下枚举和联合体这两个概念，这两者我们其实和结构体结合起来对比学习，三者之间都有其相似之处，当然也有不小的区别，我们今天将会从枚举和联合体的基本定义入手，剖析二者的使用和功能。</p> 
<h2><a id="_5"></a>一、枚举</h2> 
<p>我们先讲枚举，从字面意义上来说，枚举的意思就是一一列举</p> 
<p>即把所有有可能的值一一列举</p> 
<p>比如说：一月份一共有31天，这是有限的，我们是可以一一列举的</p> 
<p>又如：性别只有三种情况，男、女或者保密，我们也可以一一列举</p> 
<p>等等…</p> 
<p>诸如此类，我们都可以称其为列举</p> 
<p>在这种情况下我们就可以使用枚举了</p> 
<h3><a id="11__21"></a>1.1 枚举类型的定义</h3> 
<p>先来看几个例子:</p> 
<pre><code class="prism language-c"><span class="token keyword">enum</span> <span class="token class-name">Day</span>  <span class="token comment">//星期</span>
<span class="token punctuation">{<!-- --></span>
    Mon<span class="token punctuation">,</span>
    Tues<span class="token punctuation">,</span>
    Wed<span class="token punctuation">,</span>
    Thur<span class="token punctuation">,</span>
    Fri<span class="token punctuation">,</span>
    Sat<span class="token punctuation">,</span>
    Sun
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> <span class="token class-name">Sex</span>  <span class="token comment">//性别</span>
<span class="token punctuation">{<!-- --></span>
    MALE<span class="token punctuation">,</span>
    FEMALE<span class="token punctuation">,</span>
    SECRET
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>以上定义的 enum Day，enum Sex都是枚举类型。<br> {}中的内容是枚举类型的可能取值，也叫枚举常量 。</p> 
<p>那如果现在我们想描述一下星期应该怎么用代码表达出来呢？我们可以这样做：</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">enum</span> <span class="token class-name">Day</span> d <span class="token operator">=</span> Fri<span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>以此类推，其他的枚举类型也是如此</p> 
<p>在这里可能有人会问了，既然大括号内的内容叫做枚举常量，那么枚举常量有没有值呢？</p> 
<p>在这里我可以很明确的告诉大家，这些枚举常量都是有值的，大家可以尝试用printf函数将所有的枚举常量的值一一打印出来比对一下，</p> 
<p>我们很容易就可以发现一个有趣的规律：我们枚举的可能取值都是从0开始的，依次往下递增1，当然这里的前提是默认情况下。</p> 
<p>那么我们是否可以修改它们的值呢？比如我希望第一个枚举常量从1开始，其实这是很容易实现的，只需将"Mon"改为"Mon = 1"即可。</p> 
<p>后面的枚举常量也和默认情况下一样依次递增1。</p> 
<h3><a id="12__73"></a>1.2 枚举的优点</h3> 
<blockquote> 
 <p>为什么使用枚举？使用枚举的好处是什么？</p> 
</blockquote> 
<p>首先我们知道，除了使用枚举，我们还可以使用#define定义常量，如：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">Mon</span> <span class="token expression"><span class="token number">1</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">Tues</span> <span class="token expression"><span class="token number">2</span></span></span>
<span class="token comment">//....</span>
</code></pre> 
<p>既然我们也可以使用define来定义一个常量，那相较于它而言，枚举的优势在哪里呢？</p> 
<p>我们来看看枚举的优点：</p> 
<ol><li> <p>增加代码的可读性和可维护性。</p> </li><li> <p>和#define定义的标识符比较枚举有类型检查，更加严谨。</p> </li><li> <p>防止了命名污染</p> </li><li> <p>便于调试</p> </li><li> <p>使用方便，一次可以定义多个常量</p> </li></ol> 
<h3><a id="13__101"></a>1.3 枚举的使用</h3> 
<p>看一个简单的例子大家就明白了：</p> 
<pre><code class="prism language-c"><span class="token keyword">enum</span> <span class="token class-name">Color</span> <span class="token comment">//颜色</span>
<span class="token punctuation">{<!-- --></span>
    RED <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    GREEN <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    BLUE <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> <span class="token class-name">Color</span> clr <span class="token operator">=</span> GREEN<span class="token punctuation">;</span>   <span class="token comment">//只能拿枚举常量个枚举变量赋值，才不会出现类型的差异</span>
clr <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="_119"></a>二、联合体（共用体）</h2> 
<h3><a id="21_121"></a>2.1联合类型的定义</h3> 
<p>联合也是一种特殊的自定义类型</p> 
<p>这种类型定义的变量也包含一系列成员，特征是这些成员公用同一块空间（所以联合体也叫共用体）</p> 
<p>比如：</p> 
<pre><code class="prism language-c"><span class="token keyword">union</span> Un
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">int</span> a<span class="token punctuation">;</span>
  <span class="token keyword">char</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>那我们要怎么理解这个共用呢？我们可以进行下面这个操作：</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> main
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">union</span> Un u<span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>按照我们惯有的思维习惯，一个整型＋一个字符型至少也得占用5个字节</p> 
<p>可是当我们执行程序后发现，只占用了4个字节，这就充分体现出了共用这一个特点。</p> 
<p>我们可以再来看看二者的地址：</p> 
<pre><code class="prism language-c"><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>执行后我们可以发现，这三个地址是一模一样的，我们该如何解释呢？</p> 
<p>其实解释起来非常简单：<br> <img src="https://images2.imgbox.com/91/e0/rBWZo9yn_o.png" alt="在这里插入图片描述"></p> 
<p>我们先画出四个字节的空间，黄色部分就是a所占用的空间，而褐色部分就是b所占用的空间，他覆盖了a的一部分空间，但是二者是共存的，并不会有互斥的现象，这和共用体的名字也非常合拍。</p> 
<h3><a id="22__169"></a>2.2 联合的特点</h3> 
<blockquote> 
 <p>联合的成员是共用同一块内存空间的，这样一个联合变量的大小，至少是最大成员的大小（因为联合体至少得有能力保存最大的那位成员）。</p> 
</blockquote> 
<p>我们在上文提到了共用这一概念。那有人就会提出问题，两者的地址是一样的，当你对其中一个变量进行改变时 ，另一个变量在内存中也会被改变，这就会产生问题了啊。</p> 
<p>正是因为有这样的问题，所以我们要在实际使用时，我们在同一时间， 只使用其中一个变量，用了其中一个变量就不用另外的变量，这样就可以避免这个问题。</p> 
<h3><a id="23__179"></a>2.3 联合大小的计算</h3> 
<ul><li>联合的大小至少是最大成员的大小。</li><li>当最大成员大小不是最大对齐数的整数倍的时候，就要对齐到最大对齐数的整数倍。</li></ul> 
<p>来看一个例子：</p> 
<pre><code class="prism language-c"><span class="token keyword">union</span> Un1
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> c<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">union</span> Un2
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">short</span> c<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//下面输出的结果是什么？</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">union</span> Un1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">union</span> Un2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>执行程序后我们发现，结果分别是8和16。这是为什么呢？</p> 
<p>对于un1，当有数组的时候，最大对齐数为数组成员，un1中为char ，对齐数就是1，int 为4是un1中最大对齐数，故结果为8。</p> 
<p>un2同理,short为2，数组共14，但是最大对齐数为4，整数倍故为16。</p> 
<h2><a id="_210"></a>总结</h2> 
<p><img src="https://images2.imgbox.com/8a/52/1dy1SreA_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/deaa39e4775f186e3a73388219ef22d3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于form表单的回显问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7d92573f055bcbb3bfcf024d2b8f7e3a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决问题：Key is invalid. You must supply a key in OpenSSH public key format</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>