<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Oracle/PLSQL常用操作语句 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/5dc592ba586ebed4400b074b4270cdf1/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Oracle/PLSQL常用操作语句">
  <meta property="og:description" content="SQL
–创建表
create table 表名(字段名 字段类型);
create table user(
id number,
name varcahr2(20),
sex vrachr2(1)
);
–删除表
drop table 表名;
drop table user;
–添加主键
alter table 表名 add constraint 约束名 primary key(id);
alter table user add constraint pk_user primary key(id);
–删除主键
alter table 表名 drop constraint 约束名;
alter table user drop constraint pk_user;
–创建一般索引
create index 索引名 on user(创建索引的字段);
create index in_user on user(name);
–创建唯一索引（主键oracle默认为其创建唯一索引）
create unique 索引名 on user(创建索引的字段);">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-05-16T17:35:18+08:00">
    <meta property="article:modified_time" content="2023-05-16T17:35:18+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Oracle/PLSQL常用操作语句</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>SQL<br> –创建表<br> create table 表名(字段名 字段类型);<br> create table user(<br> id number,<br> name varcahr2(20),<br> sex vrachr2(1)<br> );</p> 
<p>–删除表<br> drop table 表名;<br> drop table user;</p> 
<p>–添加主键<br> alter table 表名 add constraint 约束名 primary key(id);<br> alter table user add constraint pk_user primary key(id);</p> 
<p>–删除主键<br> alter table 表名 drop constraint 约束名;<br> alter table user drop constraint pk_user;</p> 
<p>–创建一般索引<br> create index 索引名 on user(创建索引的字段);<br> create index in_user on user(name);</p> 
<p>–创建唯一索引（主键oracle默认为其创建唯一索引）<br> create unique 索引名 on user(创建索引的字段);<br> create unique index in_user_o on user(id);</p> 
<p>–删除索引<br> drop index 索引名;<br> drop index in_user_o;</p> 
<p>–表名注释<br> comment on table user is ‘用户’;</p> 
<p>–字段注释<br> comment on column user.name is ‘用户名’；</p> 
<p>–插入数据<br> insert into user(id,name) values(1,‘Jack’);<br> insert into user values(2,‘Jack’,‘M’);</p> 
<p>–更新数据<br> update user set name = ‘Jet’ where id = 1;</p> 
<p>–删除数据</p> 
<p>delete from user where name = ‘Jet’;</p> 
<p>–删除所有数据<br> truncate table user;<br> delete from user;</p> 
<p>–增加字段<br> alter table user add (createdate date);</p> 
<p>–修改字段类型<br> alter table user modify(createdate varchar2(20));</p> 
<p>–删除字段<br> alter table user drop column createdate;</p> 
<p>–修改字段名称<br> alter table user rename column name to username;</p> 
<p>–创建序列<br> create sequence s_user_id start with 1 increment by 1 nomaxvalue nominvalue nocycle nocache;–自增序列</p> 
<p>–删除序列<br> drop sequence s_user_id;</p> 
<p>–查询序列<br> —直接用会报为在当前会话中定义<br> select s_user_id.currval from dual;<br> /*<br> currval 表示序列的当前值，新序列必须使用一次nextval 才能获取到值，否则会报错<br> nextval 表示序列的下一个值。新序列首次使用时获取的是该序列的初始值，从第二次使用时开始按照设置的步进递增<br> */<br> –truncate(数据特多情况)<br> truncate table user;<br> —不可回滚<br> –DML(如update，delete，insert等)语句在为commit前可以回滚，DDL(create,drop,truncate等)语句不可回滚，因在执行后数据库自动为其提交一个commit;<br> create table ad(num1 int);<br> insert into ad values(1);<br> select * from ad;<br> savepoint s_1;–创建回滚点1<br> insert into ad values(2);<br> savepoint s_2;–创建回滚点1<br> select * from ad;<br> insert into ad values(3);<br> rollback to s_2;–回滚<br> select * from ad;<br> commit;<br> –排序函数dense_rank() over (partition by xxxx(以某个字段作为分组) order by xxxx(以某个字段作为排序))<br> select h_sc.student_no,<br> h_sc.course_no,<br> h_sc.core,<br> dense_rank() over(partition by h_sc.course_no order by h_sc.core desc) rk from hand_student_core h_sc<br> select trunc(add_months(sysdate,-1),‘month’)from dual 查询上月第一天<br> Select trunc(last_day(add_months(sysdate,-1))) from dual<br> 查询上月最后一天</p> 
<p>PLSQL<br> –创建游标<br> CURSOR emp_ded IS<br> SELECT e.department_id<br> FROM employees e;</p> 
<p>–ref coursor 定义变量为游标类型<br> –不可用for rec in c_cursor 遍历，可以用loop … end loop;<br> type c_cursor is ref cursor;</p> 
<p>–循环遍历游标<br> FOR rec IN emp_ded<br> LOOP<br> emp_d := rec.department_id;<br> emp_test(emp_d,<br> nup,<br> isalary,<br> asalary);<br> IF nup = 0<br> OR nup IS NULL THEN<br> RAISE ex;<br> ELSE<br> dbms_output.put_line(emp_d || ’ num is ’ || nup);<br> END IF;<br> END LOOP;</p> 
<p>–Group BY 分组函数<br> SELECT AVG(salary)<br> ,department_id<br> FROM employees<br> GROUP BY department_id<br> having AVG(salary) &gt; 10000;</p> 
<p>having 后面跟限定条件</p> 
<p>–创建存储过程<br> PROCEDURE emp_test(emp_did IN employees.department_id%TYPE,<br> np OUT NUMBER,<br> misalary OUT employees.salary%TYPE,<br> masalary OUT employees.salary%TYPE) IS<br> BEGIN<br> SELECT COUNT(*) AS nup,<br> MIN(e.salary),<br> MAX(e.salary)<br> INTO np,<br> misalary,<br> masalary<br> FROM employees e<br> WHERE e.department_id = emp_did;<br> END emp_test;</p> 
<p>–创建FUNCTION<br> FUNCTION area(side_one IN INTEGER,<br> side_two IN INTEGER,<br> side_three IN INTEGER) RETURN INTEGER IS<br> z INTEGER;<br> m INTEGER;<br> BEGIN<br> z := 0.5 * (side_one + side_two + side_three);<br> m := sqrt(z * (z - side_one) * (z - side_two) * (z - side_three));<br> RETURN m;<br> END area;</p> 
<p>–创建自定义异常处理<br> PROCEDURE in_emp IS<br> ex EXCEPTION;<br> begin<br> EXCEPTION<br> WHEN ex THEN<br> dbms_output.put_line(emp_d);<br> END in_emp;<br> –数据库自带异常处理</p> 
<p>–常用函数</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/dd/04/UhNMbINi_o.png"></p> 
<p> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/c4/af/5zoM7eGI_o.png"><img alt="在这里插入图片描述" src="https://images2.imgbox.com/3d/c1/lKZ698Ix_o.png"></p> 
<p> </p> 
<p> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/70/55/WnJh6dqB_o.png"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a28e78bf40be23af4c723eab8cd6f138/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Matlab &amp; Python 如何在figure上画出表格【优化】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/685bccaa845d3f3a3f9cb52ee1c07b90/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言实现rsa加密</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>