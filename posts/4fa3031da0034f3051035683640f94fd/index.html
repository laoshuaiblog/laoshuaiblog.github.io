<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ECMAScript 2024ï¼ˆES15ï¼‰å°†å¸¦æ¥è¶…å®ç”¨çš„æ–°ç‰¹æ€§ - è€å¸…çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/4fa3031da0034f3051035683640f94fd/">
  <meta property="og:site_name" content="è€å¸…çš„åšå®¢">
  <meta property="og:title" content="ECMAScript 2024ï¼ˆES15ï¼‰å°†å¸¦æ¥è¶…å®ç”¨çš„æ–°ç‰¹æ€§">
  <meta property="og:description" content="ECMAScriptè¯­è¨€è§„èŒƒæ¯å¹´éƒ½ä¼šè¿›è¡Œä¸€æ¬¡æ›´æ–°ï¼Œè€Œå¤‡å—æœŸå¾…çš„ ECMAScript 2024 å°†äº 2024 å¹´ 6 æœˆæ­£å¼äº®ç›¸ã€‚ç›®å‰ï¼ŒECMAScript 2024 çš„å€™é€‰ç‰ˆæœ¬å·²ç»å‘å¸ƒï¼Œä¸ºæˆ‘ä»¬å¸¦æ¥äº†ä¸€ç³»åˆ—å®ç”¨çš„æ–°åŠŸèƒ½ã€‚æ¥ä¸‹æ¥ï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·å…ˆç¹ä¸ºå¿«å§ï¼
å…¨æ–‡æ¦‚è§ˆï¼š
Promise.withResolversObject.groupBy / Map.groupByArrayBuffer.prototype.resizeArrayBuffer.prototype.transferString.prototype.isWellFormedString.prototype.toWellFormedAtomics.waitAsyncæ­£åˆ™è¡¨è¾¾å¼ v æ ‡å¿— Promise.withResolvers() Promise.withResolvers() å…è®¸åˆ›å»ºä¸€ä¸ªæ–°çš„ Promiseï¼Œå¹¶åŒæ—¶è·å¾— resolve å’Œ reject å‡½æ•°ã€‚è¿™åœ¨æŸäº›åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯å½“éœ€è¦åŒæ—¶è®¿é—®åˆ° Promise çš„ resolve å’Œ reject å‡½æ•°æ—¶ã€‚
Promise.withResolvers() å®Œå…¨ç­‰åŒäºä»¥ä¸‹ä»£ç ï¼š
let resolve, reject; const promise = new Promise((res, rej) =&amp;gt; { resolve = res; reject = rej; }); é€šå¸¸ï¼Œå½“åˆ›å»ºä¸€ä¸ªæ–°çš„ Promise æ—¶ï¼Œä¼šä¼ é€’ä¸€ä¸ªæ‰§è¡Œå™¨å‡½æ•°ç»™ Promise æ„é€ å‡½æ•°ï¼Œè¿™ä¸ªæ‰§è¡Œå™¨å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šresolve å’Œ reject å‡½æ•°ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½æƒ³è¦åœ¨ Promise åˆ›å»ºä¹‹åä»ç„¶èƒ½å¤Ÿè®¿é—®åˆ°è¿™ä¸¤ä¸ªå‡½æ•°ã€‚è¿™å°±æ˜¯ Promise.withResolvers() çš„ç”¨æ­¦ä¹‹åœ°ã€‚
ä½¿ç”¨ Promise.withResolvers() çš„ä¸€ä¸ªä¾‹å­ï¼š
const { promise, resolve, reject } = Promise.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-19T17:18:10+08:00">
    <meta property="article:modified_time" content="2024-02-19T17:18:10+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="è€å¸…çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">è€å¸…çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ECMAScript 2024ï¼ˆES15ï¼‰å°†å¸¦æ¥è¶…å®ç”¨çš„æ–°ç‰¹æ€§</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><code>ECMAScript</code>è¯­è¨€è§„èŒƒæ¯å¹´éƒ½ä¼šè¿›è¡Œä¸€æ¬¡æ›´æ–°ï¼Œè€Œå¤‡å—æœŸå¾…çš„ ECMAScript 2024 å°†äº 2024 å¹´ 6 æœˆæ­£å¼äº®ç›¸ã€‚ç›®å‰ï¼ŒECMAScript 2024 çš„å€™é€‰ç‰ˆæœ¬å·²ç»å‘å¸ƒï¼Œä¸ºæˆ‘ä»¬å¸¦æ¥äº†ä¸€ç³»åˆ—å®ç”¨çš„æ–°åŠŸèƒ½ã€‚æ¥ä¸‹æ¥ï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·å…ˆç¹ä¸ºå¿«å§ï¼<br> <img src="https://images2.imgbox.com/2b/2e/9h1bTZ6w_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> å…¨æ–‡æ¦‚è§ˆï¼š</p> 
<ul><li>Promise.withResolvers</li><li>Object.groupBy / Map.groupBy</li><li>ArrayBuffer.prototype.resize</li><li>ArrayBuffer.prototype.transfer</li><li>String.prototype.isWellFormed</li><li>String.prototype.toWellFormed</li><li>Atomics.waitAsync</li><li>æ­£åˆ™è¡¨è¾¾å¼ v æ ‡å¿—</li></ul> 
<h3><a id="PromisewithResolvers_12"></a>Promise.withResolvers()</h3> 
<p>Promise.withResolvers() å…è®¸åˆ›å»ºä¸€ä¸ªæ–°çš„ Promiseï¼Œå¹¶åŒæ—¶è·å¾— resolve å’Œ reject å‡½æ•°ã€‚è¿™åœ¨æŸäº›åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯å½“éœ€è¦åŒæ—¶è®¿é—®åˆ° Promise çš„ resolve å’Œ reject å‡½æ•°æ—¶ã€‚</p> 
<p>Promise.withResolvers() å®Œå…¨ç­‰åŒäºä»¥ä¸‹ä»£ç ï¼š</p> 
<pre><code class="prism language-javascript"><span class="token keyword">let</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">;</span>
<span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  resolve <span class="token operator">=</span> res<span class="token punctuation">;</span>
  reject <span class="token operator">=</span> rej<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>é€šå¸¸ï¼Œå½“åˆ›å»ºä¸€ä¸ªæ–°çš„ Promise æ—¶ï¼Œä¼šä¼ é€’ä¸€ä¸ªæ‰§è¡Œå™¨å‡½æ•°ç»™ Promise æ„é€ å‡½æ•°ï¼Œè¿™ä¸ªæ‰§è¡Œå™¨å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šresolve å’Œ reject å‡½æ•°ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½æƒ³è¦åœ¨ Promise åˆ›å»ºä¹‹åä»ç„¶èƒ½å¤Ÿè®¿é—®åˆ°è¿™ä¸¤ä¸ªå‡½æ•°ã€‚è¿™å°±æ˜¯ Promise.withResolvers() çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p> 
<p>ä½¿ç”¨ Promise.withResolvers() çš„ä¸€ä¸ªä¾‹å­ï¼š</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> promise<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject <span class="token punctuation">}</span> <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">withResolvers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
<span class="token comment">// åœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨ resolve å’Œ reject å‡½æ•°  </span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'æˆåŠŸï¼'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>  
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡º: æˆåŠŸï¼  </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé¦–å…ˆé€šè¿‡ Promise.withResolvers() åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Promiseï¼Œå¹¶åŒæ—¶è·å¾—äº† resolve å’Œ reject å‡½æ•°ã€‚ç„¶åï¼Œåœ¨ setTimeout å›è°ƒä¸­ä½¿ç”¨ resolve å‡½æ•°æ¥è§£æè¿™ä¸ª Promiseã€‚æœ€åï¼Œæ·»åŠ äº†ä¸€ä¸ª .then å¤„ç†ç¨‹åºæ¥å¤„ç† Promise è§£æåçš„å€¼ã€‚</p> 
<p>ä½¿ç”¨ Promise.withResolvers() å…³é”®çš„åŒºåˆ«åœ¨äºè§£å†³å’Œæ‹’ç»å‡½æ•°ç°åœ¨ä¸ Promise æœ¬èº«å¤„äºåŒä¸€ä½œç”¨åŸŸï¼Œè€Œä¸æ˜¯åœ¨æ‰§è¡Œå™¨ä¸­è¢«åˆ›å»ºå’Œä¸€æ¬¡æ€§ä½¿ç”¨ã€‚è¿™å¯èƒ½ä½¿å¾—ä¸€äº›æ›´é«˜çº§çš„ç”¨ä¾‹æˆä¸ºå¯èƒ½ï¼Œä¾‹å¦‚åœ¨é‡å¤äº‹ä»¶ä¸­é‡ç”¨å®ƒä»¬ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†æµå’Œé˜Ÿåˆ—æ—¶ã€‚è¿™é€šå¸¸ä¹Ÿæ„å‘³ç€ç›¸æ¯”åœ¨æ‰§è¡Œå™¨å†…åŒ…è£…å¤§é‡é€»è¾‘ï¼ŒåµŒå¥—ä¼šæ›´å°‘ã€‚</p> 
<p>è¿™ä¸ªåŠŸèƒ½å¯¹äºé‚£äº›éœ€è¦æ›´ç»†ç²’åº¦æ§åˆ¶ Promise çš„çŠ¶æ€ï¼Œæˆ–è€…åœ¨ Promise åˆ›å»ºåä»ç„¶éœ€è¦è®¿é—® resolve å’Œ reject å‡½æ•°çš„åœºæ™¯æ¥è¯´éå¸¸æœ‰ç”¨ã€‚</p> 
<h3><a id="ObjectgroupBy__MapgroupBy_43"></a>Object.groupBy / Map.groupBy</h3> 
<p>Object.groupBy å’Œ Map.groupBy æ–¹æ³•ç”¨äºæ•°ç»„åˆ†ç»„ã€‚</p> 
<p>å‡è®¾æœ‰ä¸€ä¸ªç”±è¡¨ç¤ºäººå‘˜çš„å¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œéœ€è¦æŒ‰ç…§å¹´é¾„è¿›è¡Œåˆ†ç»„ã€‚å¯ä»¥ä½¿ç”¨forEachå¾ªç¯æ¥å®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Alice"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">28</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Bob"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Eve"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">28</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> peopleByAge <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

people<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> age <span class="token operator">=</span> person<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>peopleByAge<span class="token punctuation">[</span>age<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    peopleByAge<span class="token punctuation">[</span>age<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  peopleByAge<span class="token punctuation">[</span>age<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>peopleByAge<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"28"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string-property property">"name"</span><span class="token operator">:</span><span class="token string">"Alice"</span><span class="token punctuation">,</span><span class="token string-property property">"age"</span><span class="token operator">:</span><span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string-property property">"name"</span><span class="token operator">:</span><span class="token string">"Eve"</span><span class="token punctuation">,</span><span class="token string-property property">"age"</span><span class="token operator">:</span><span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">"30"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string-property property">"name"</span><span class="token operator">:</span><span class="token string">"Bob"</span><span class="token punctuation">,</span><span class="token string-property property">"age"</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨reduceæ–¹æ³•ï¼š</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> peopleByAge <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> person</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> age <span class="token operator">=</span> person<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>acc<span class="token punctuation">[</span>age<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    acc<span class="token punctuation">[</span>age<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  acc<span class="token punctuation">[</span>age<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>æ— è®ºå“ªç§æ–¹å¼ï¼Œä»£ç éƒ½ç•¥æ˜¾ç¹çã€‚æ¯æ¬¡éƒ½è¦æ£€æŸ¥å¯¹è±¡ï¼Œçœ‹åˆ†ç»„é”®æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„ï¼Œå¹¶å°†é¡¹ç›®æ·»åŠ åˆ°è¯¥æ•°ç»„ä¸­ã€‚</p> 
<h3><a id="_ObjectgroupBy__90"></a>ä½¿ç”¨ Object.groupBy åˆ†ç»„</h3> 
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥ä½¿ç”¨æ–°çš„Object.groupByæ–¹æ³•ï¼š</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> peopleByAge <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span>people<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>å¯ä»¥çœ‹åˆ°ï¼Œä»£ç éå¸¸ç®€æ´ï¼</p> 
<p>ä¸è¿‡éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨Object.groupByæ–¹æ³•è¿”å›ä¸€ä¸ªæ²¡æœ‰åŸå‹ï¼ˆå³æ²¡æœ‰ç»§æ‰¿ä»»ä½•å±æ€§å’Œæ–¹æ³•ï¼‰çš„å¯¹è±¡ã€‚è¿™æ„å‘³ç€è¯¥å¯¹è±¡ä¸ä¼šç»§æ‰¿Object.prototypeä¸Šçš„ä»»ä½•å±æ€§æˆ–æ–¹æ³•ï¼Œä¾‹å¦‚hasOwnPropertyæˆ–toStringç­‰ã€‚è™½ç„¶è¿™æ ·åšå¯ä»¥é¿å…æ„å¤–è¦†ç›–Object.prototypeä¸Šçš„å±æ€§ï¼Œä½†ä¹Ÿæ„å‘³ç€ä¸èƒ½ä½¿ç”¨ä¸€äº›ä¸å¯¹è±¡ç›¸å…³çš„æ–¹æ³•ã€‚</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> peopleByAge <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span>people<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>peopleByAge<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">"28"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// TypeError: peopleByAge.hasOwnProperty is not a function</span>
</code></pre> 
<p>åœ¨è°ƒç”¨Object.groupByæ—¶ï¼Œä¼ é€’ç»™å®ƒçš„å›è°ƒå‡½æ•°åº”è¯¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æˆ– Symbol ç±»å‹çš„å€¼ã€‚å¦‚æœå›è°ƒå‡½æ•°è¿”å›å…¶ä»–ç±»å‹çš„å€¼ï¼Œå®ƒå°†è¢«å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p> 
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå›è°ƒå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°å­—ç±»å‹çš„ageå±æ€§å€¼ï¼Œä½†ç”±äºObject.groupByæ–¹æ³•è¦æ±‚é”®å¿…é¡»æ˜¯å­—ç¬¦ä¸²æˆ– Symbol ç±»å‹ï¼Œæ‰€ä»¥è¯¥æ•°å­—ä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚</p> 
<pre><code class="prism language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>peopleByAge<span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [{"name":"Alice","age":28}, {"name":"Eve","age":28}]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>peopleByAge<span class="token punctuation">[</span><span class="token string">"28"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [{"name":"Alice","age":28}, {"name":"Eve","age":28}]</span>
</code></pre> 
<h3><a id="_MapgroupBy__115"></a>ä½¿ç”¨ Map.groupBy åˆ†ç»„</h3> 
<p>Map.groupByå’ŒObject.groupByå‡ ä¹åšçš„æ˜¯ç›¸åŒçš„äº‹æƒ…ï¼Œåªæ˜¯è¿”å›çš„ç»“æœç±»å‹ä¸åŒã€‚Map.groupByè¿”å›ä¸€ä¸ªMapå¯¹è±¡ï¼Œè€Œä¸æ˜¯åƒObject.groupByè¿”å›ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ã€‚</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> ceo <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Jamie"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token literal-property property">reportsTo</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> manager <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Alice"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token literal-property property">reportsTo</span><span class="token operator">:</span> ceo <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  ceo
  manager<span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Bob"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token literal-property property">reportsTo</span><span class="token operator">:</span> manager <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Eve"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token literal-property property">reportsTo</span><span class="token operator">:</span> ceo <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> peopleByManager <span class="token operator">=</span> Map<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span>people<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>reportsTo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿™é‡Œæ ¹æ®äººçš„æ±‡æŠ¥ä¸Šçº§å°†ä»–ä»¬è¿›è¡Œäº†åˆ†ç»„ã€‚å¦‚æœæƒ³é€šè¿‡å¯¹è±¡æ¥ä»è¿™ä¸ªMapä¸­è·å–æ•°æ®ï¼Œé‚£ä¹ˆè¦æ±‚è¿™äº›å¯¹è±¡å…·æœ‰ç›¸åŒçš„èº«ä»½æˆ–å¼•ç”¨ã€‚è¿™æ˜¯å› ä¸ºMapåœ¨æ¯”è¾ƒé”®æ—¶ä½¿ç”¨çš„æ˜¯ä¸¥æ ¼ç›¸ç­‰ï¼ˆ===ï¼‰ï¼Œåªæœ‰ä¸¤ä¸ªå¯¹è±¡å…·æœ‰ç›¸åŒçš„å¼•ç”¨ï¼Œæ‰èƒ½è¢«è®¤ä¸ºæ˜¯ç›¸åŒçš„é”®ã€‚</p> 
<pre><code class="prism language-javascript">peopleByManager<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>ceo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [{ name: "Alice", age: 28, reportsTo: ceo }, { name: "Eve", age: 28, reportsTo: ceo }]</span>
peopleByManager<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Jamie"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token literal-property property">reportsTo</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; undefined</span>
</code></pre> 
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœå°è¯•ä½¿ç”¨ä¸ceoå¯¹è±¡ç±»ä¼¼çš„å¯¹è±¡ä½œä¸ºé”®å»è®¿é—®Mapä¸­çš„é¡¹ï¼Œç”±äºè¿™ä¸ªå¯¹è±¡ä¸ä¹‹å‰å­˜å‚¨åœ¨Mapä¸­çš„ceoå¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥æ— æ³•æ£€ç´¢åˆ°å¯¹åº”çš„å€¼ã€‚</p> 
<h3><a id="ArrayBufferprototyperesize_140"></a>ArrayBuffer.prototype.resize</h3> 
<p>ArrayBuffer å®ä¾‹çš„ resize() æ–¹æ³•å°† ArrayBuffer è°ƒæ•´ä¸ºæŒ‡å®šçš„å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œå‰ææ˜¯è¯¥ ArrayBuffer æ˜¯å¯è°ƒæ•´å¤§å°çš„å¹¶ä¸”æ–°çš„å¤§å°å°äºæˆ–ç­‰äºè¯¥ ArrayBuffer çš„ maxByteLengthã€‚</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">maxByteLength</span><span class="token operator">:</span> <span class="token number">16</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span>byteLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 8</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>buffer<span class="token punctuation">.</span>resizable<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"ç¼“å†²åŒºå¤§å°æ˜¯å¯è°ƒæ•´çš„ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  buffer<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æ³¨æ„ï¼š</p> 
<ul><li> <p>å¦‚æœ ArrayBuffer å·²åˆ†ç¦»æˆ–ä¸å¯è°ƒæ•´å¤§å°ï¼Œåˆ™æŠ›å‡ºè¯¥é”™è¯¯ã€‚</p> </li><li> <p>å¦‚æœ newLength å¤§äºè¯¥ ArrayBuffer çš„ maxByteLengthï¼Œåˆ™æŠ›å‡ºè¯¥é”™è¯¯ã€‚</p> </li></ul> 
<h3><a id="ArrayBufferprototypetransfer_160"></a>ArrayBuffer.prototype.transfer</h3> 
<p>transfer() æ–¹æ³•æ‰§è¡Œä¸ç»“æ„åŒ–å…‹éš†ç®—æ³•ç›¸åŒçš„æ“ä½œã€‚å®ƒå°†å½“å‰ ArrayBuffer çš„å­—èŠ‚å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„ ArrayBuffer å¯¹è±¡ä¸­ï¼Œç„¶ååˆ†ç¦»å½“å‰ ArrayBuffer å¯¹è±¡ï¼Œä¿ç•™äº†å½“å‰ ArrayBuffer çš„å¤§å°å¯è°ƒæ•´æ€§ã€‚</p> 
<pre><code class="prism language-javascript"><span class="token comment">// åˆ›å»ºä¸€ä¸ª ArrayBuffer å¹¶å†™å…¥ä¸€äº›å­—èŠ‚</span>
<span class="token keyword">const</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
view<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
view<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

<span class="token comment">// å°†ç¼“å†²åŒºå¤åˆ¶åˆ°å¦ä¸€ä¸ªç›¸åŒå¤§å°çš„ç¼“å†²åŒº</span>
<span class="token keyword">const</span> buffer2 <span class="token operator">=</span> buffer<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span>detached<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer2<span class="token punctuation">.</span>byteLength<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
<span class="token keyword">const</span> view2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>buffer2<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>view2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>view2<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>

<span class="token comment">// å°†ç¼“å†²åŒºå¤åˆ¶åˆ°ä¸€ä¸ªæ›´å°çš„ç¼“å†²åŒº</span>
<span class="token keyword">const</span> buffer3 <span class="token operator">=</span> buffer2<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer3<span class="token punctuation">.</span>byteLength<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
<span class="token keyword">const</span> view3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>buffer3<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>view3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>view3<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

<span class="token comment">// å°†ç¼“å†²åŒºå¤åˆ¶åˆ°ä¸€ä¸ªæ›´å¤§çš„ç¼“å†²åŒº</span>
<span class="token keyword">const</span> buffer4 <span class="token operator">=</span> buffer3<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer4<span class="token punctuation">.</span>byteLength<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
<span class="token keyword">const</span> view4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>buffer4<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>view4<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>view4<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>

<span class="token comment">// å·²ç»åˆ†ç¦»ï¼ŒæŠ›å‡º TypeError</span>
buffer<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError: Cannot perform ArrayBuffer.prototype.transfer on a detached ArrayBuffer</span>
</code></pre> 
<h3><a id="StringprototypeisWellFormed_195"></a>String.prototype.isWellFormed()</h3> 
<p>isWellFormed() æ–¹æ³•è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å•ç‹¬ä»£ç†é¡¹çš„å¸ƒå°”å€¼ã€‚</p> 
<p>JavaScript ä¸­çš„å­—ç¬¦ä¸²æ˜¯ UTF-16 ç¼–ç çš„ã€‚UTF-16 ç¼–ç ä¸­çš„ä»£ç†å¯¹æ˜¯æŒ‡ï¼š</p> 
<blockquote> 
 <p>åœ¨UTF-16ç¼–ç ä¸­ï¼Œä»£ç†å¯¹ï¼ˆSurrogate Pairï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç¼–ç æœºåˆ¶ï¼Œç”¨äºè¡¨ç¤ºé‚£äº›è¶…å‡ºåŸºæœ¬å¤šæ–‡ç§å¹³é¢ï¼ˆBMPï¼‰çš„Unicodeå­—ç¬¦ã€‚è¿™äº›å­—ç¬¦çš„Unicodeç ç‚¹é«˜äºU+FFFFï¼Œå› æ­¤æ— æ³•ç”¨ä¸€ä¸ª16ä½çš„UTF-16ç å…ƒæ¥è¡¨ç¤ºã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒUTF-16å¼•å…¥äº†ä»£ç†å¯¹æœºåˆ¶ã€‚<br> ä»£ç†å¯¹æ˜¯ç”±ä¸¤ä¸ª16ä½çš„ç å…ƒç»„æˆçš„ï¼Œä¸€ä¸ªç§°ä¸ºé«˜ä»£ç†ï¼ˆæˆ–é«˜ä»£ç†ç å…ƒï¼‰ï¼Œå…¶ç ç‚¹èŒƒå›´åœ¨U+D800åˆ°U+DBFFä¹‹é—´ï¼›å¦ä¸€ä¸ªç§°ä¸ºä½ä»£ç†ï¼ˆæˆ–ä½ä»£ç†ç å…ƒï¼‰ï¼Œå…¶ç ç‚¹èŒƒå›´åœ¨U+DC00åˆ°U+DFFFä¹‹é—´ã€‚è¿™ä¸¤ä¸ªç å…ƒåˆåœ¨ä¸€èµ·ï¼Œå¯ä»¥è¡¨ç¤ºä¸€ä¸ªè¶…å‡ºBMPçš„Unicodeå­—ç¬¦ã€‚<br> ä¾‹å¦‚ï¼ŒUnicodeç ç‚¹U+10000ï¼ˆè¿™æ˜¯BMPä¹‹å¤–çš„ç¬¬ä¸€ä¸ªç ç‚¹ï¼‰åœ¨UTF-16ä¸­çš„ç¼–ç å°±æ˜¯é«˜ä»£ç†ç å…ƒU+D800å’Œä½ä»£ç†ç å…ƒU+DC00çš„ç»„åˆï¼Œå³â€œD800 DC00â€ã€‚åŒæ ·ï¼Œç ç‚¹U+10001çš„UTF-16ç¼–ç å°±æ˜¯â€œD800 DC01â€ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br> é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒUTF-16ç¼–ç èƒ½å¤Ÿå®Œå…¨è¡¨ç¤ºæ‰€æœ‰Unicodeå­—ç¬¦ï¼Œæ— è®ºæ˜¯BMPå†…çš„è¿˜æ˜¯BMPå¤–çš„ã€‚è¿™ç§ä»£ç†å¯¹æœºåˆ¶æ˜¯UTF-16ç¼–ç æ–¹æ¡ˆçš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä½¿å¾—UTF-16æˆä¸ºä¸€ç§èƒ½å¤Ÿçµæ´»å¤„ç†å„ç§è¯­è¨€å­—ç¬¦çš„ç¼–ç æ–¹å¼ã€‚</p> 
</blockquote> 
<p>isWellFormed() è®©ä½ èƒ½å¤Ÿæµ‹è¯•ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯æ ¼å¼æ­£ç¡®çš„ï¼ˆå³ä¸åŒ…å«å•ç‹¬ä»£ç†é¡¹ï¼‰ã€‚ç”±äºå¼•æ“èƒ½å¤Ÿç›´æ¥è®¿é—®å­—ç¬¦ä¸²çš„å†…éƒ¨è¡¨ç¤ºï¼Œä¸è‡ªå®šä¹‰å®ç°ç›¸æ¯” isWellFormed() æ›´é«˜æ•ˆã€‚å¦‚æœéœ€è¦å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ ¼å¼æ­£ç¡®çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ toWellFormed() æ–¹æ³•ã€‚isWellFormed() è®©ä½ å¯ä»¥å¯¹æ ¼å¼æ­£ç¡®å’Œæ ¼å¼é”™è¯¯çš„å­—ç¬¦ä¸²è¿›è¡Œä¸åŒçš„å¤„ç†ï¼Œæ¯”å¦‚æŠ›å‡ºä¸€ä¸ªé”™è¯¯æˆ–å°†å…¶æ ‡è®°ä¸ºæ— æ•ˆã€‚</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> strings <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// å•ç‹¬çš„å‰å¯¼ä»£ç†</span>
  <span class="token string">"ab\uD800"</span><span class="token punctuation">,</span>
  <span class="token string">"ab\uD800c"</span><span class="token punctuation">,</span>
  <span class="token comment">// å•ç‹¬çš„åå°¾ä»£ç†</span>
  <span class="token string">"\uDFFFab"</span><span class="token punctuation">,</span>
  <span class="token string">"c\uDFFFab"</span><span class="token punctuation">,</span>
  <span class="token comment">// æ ¼å¼æ­£ç¡®</span>
  <span class="token string">"abc"</span><span class="token punctuation">,</span>
  <span class="token string">"ab\uD83D\uDE04c"</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> str <span class="token keyword">of</span> strings<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">isWellFormed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// è¾“å‡ºï¼š</span>
<span class="token comment">// false</span>
<span class="token comment">// false</span>
<span class="token comment">// false</span>
<span class="token comment">// false</span>
<span class="token comment">// true</span>
<span class="token comment">// true</span>
</code></pre> 
<p>å¦‚æœä¼ é€’çš„å­—ç¬¦ä¸²æ ¼å¼ä¸æ­£ç¡®ï¼Œ encodeURI ä¼šæŠ›å‡ºé”™è¯¯ã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨ isWellFormed() åœ¨å°†å­—ç¬¦ä¸²ä¼ é€’ç»™ encodeURI() ä¹‹å‰æµ‹è¯•å­—ç¬¦ä¸²æ¥é¿å…è¿™ç§æƒ…å†µã€‚</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> illFormed <span class="token operator">=</span> <span class="token string">"https://example.com/search?q=\uD800"</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">encodeURI</span><span class="token punctuation">(</span>illFormed<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// URIError: URI malformed</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>illFormed<span class="token punctuation">.</span><span class="token function">isWellFormed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURI</span><span class="token punctuation">(</span>illFormed<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"Ill-formed strings encountered."</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Ill-formed strings encountered.</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="StringprototypetoWellFormed_247"></a>String.prototype.toWellFormed()</h3> 
<p>toWellFormed() æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶ä¸­è¯¥å­—ç¬¦ä¸²çš„æ‰€æœ‰å•ç‹¬ä»£ç†é¡¹éƒ½è¢«æ›¿æ¢ä¸º Unicode æ›¿æ¢å­—ç¬¦ U+FFFDã€‚</p> 
<p>toWellFormed() è¿­ä»£å­—ç¬¦ä¸²çš„ç å…ƒï¼Œå¹¶å°†ä»»ä½•å•ç‹¬ä»£ç†é¡¹æ›¿æ¢ä¸º Unicode æ›¿æ¢å­—ç¬¦ U+FFFDã€‚è¿™ç¡®ä¿äº†è¿”å›çš„å­—ç¬¦ä¸²æ ¼å¼æ­£ç¡®å¹¶å¯ç”¨äºæœŸæœ›æ­£ç¡®æ ¼å¼å­—ç¬¦ä¸²çš„å‡½æ•°ï¼Œæ¯”å¦‚ encodeURIã€‚ç”±äºå¼•æ“èƒ½å¤Ÿç›´æ¥è®¿é—®å­—ç¬¦ä¸²çš„å†…éƒ¨è¡¨ç¤ºï¼Œä¸è‡ªå®šä¹‰å®ç°ç›¸æ¯” toWellFormed() æ›´é«˜æ•ˆã€‚</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> strings <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// å•ç‹¬çš„å‰å¯¼ä»£ç†</span>
  <span class="token string">"ab\uD800"</span><span class="token punctuation">,</span>
  <span class="token string">"ab\uD800c"</span><span class="token punctuation">,</span>
  <span class="token comment">// å•ç‹¬çš„åå°¾ä»£ç†</span>
  <span class="token string">"\uDFFFab"</span><span class="token punctuation">,</span>
  <span class="token string">"c\uDFFFab"</span><span class="token punctuation">,</span>
  <span class="token comment">// æ ¼å¼æ­£ç¡®</span>
  <span class="token string">"abc"</span><span class="token punctuation">,</span>
  <span class="token string">"ab\uD83D\uDE04c"</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> str <span class="token keyword">of</span> strings<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">toWellFormed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Logs:</span>
<span class="token comment">// "abï¿½"</span>
<span class="token comment">// "abï¿½c"</span>
<span class="token comment">// "ï¿½ab"</span>
<span class="token comment">// "cï¿½ab"</span>
<span class="token comment">// "abc"</span>
<span class="token comment">// "abğŸ˜„c"</span>

</code></pre> 
<p>å¦‚æœä¼ é€’çš„å­—ç¬¦ä¸²æ ¼å¼ä¸æ­£ç¡®ï¼Œ encodeURI ä¼šæŠ›å‡ºé”™è¯¯ã€‚å¯ä»¥å…ˆé€šè¿‡ä½¿ç”¨ toWellFormed() å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ ¼å¼æ­£ç¡®çš„å­—ç¬¦ä¸²æ¥é¿å…è¿™ç§æƒ…å†µã€‚</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> illFormed <span class="token operator">=</span> <span class="token string">"https://example.com/search?q=\uD800"</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">encodeURI</span><span class="token punctuation">(</span>illFormed<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// URIError: URI malformed</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURI</span><span class="token punctuation">(</span>illFormed<span class="token punctuation">.</span><span class="token function">toWellFormed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "https://example.com/search?q=%EF%BF%BD"</span>
</code></pre> 
<h3><a id="AtomicswaitAsync_290"></a>Atomics.waitAsync()</h3> 
<p>Atomics.waitAsync() é™æ€æ–¹æ³•å¼‚æ­¥ç­‰å¾…å…±äº«å†…å­˜çš„ç‰¹å®šä½ç½®å¹¶è¿”å›ä¸€ä¸ª Promiseã€‚ä¸ Atomics.wait() ä¸åŒï¼ŒwaitAsync æ˜¯éé˜»å¡çš„ä¸”å¯ç”¨äºä¸»çº¿ç¨‹ã€‚</p> 
<p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç»™å®šä¸€ä¸ªå…±äº«çš„ Int32Arrayã€‚</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> sab <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SharedArrayBuffer</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> int32 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Int32Array</span><span class="token punctuation">(</span>sab<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>ä»¤ä¸€ä¸ªè¯»å–çº¿ç¨‹ä¼‘çœ å¹¶åœ¨ä½ç½® 0 å¤„ç­‰å¾…ï¼Œé¢„æœŸè¯¥ä½ç½®çš„å€¼ä¸º 0ã€‚result.value å°†æ˜¯ä¸€ä¸ª promiseã€‚</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> result <span class="token operator">=</span> Atomics<span class="token punctuation">.</span><span class="token function">waitAsync</span><span class="token punctuation">(</span>int32<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { async: true, value: Promise {&lt;pending&gt;} }</span>
</code></pre> 
<p>åœ¨è¯¥è¯»å–çº¿ç¨‹æˆ–å¦ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œå¯¹å†…å­˜ä½ç½® 0 è°ƒç”¨ä»¥ä»¤è¯¥ promise è§£å†³ä¸º â€œokâ€ã€‚</p> 
<pre><code class="prism language-javascript">Atomics<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span>int32<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { async: true, value: Promise {&lt;fulfilled&gt;: 'ok'} }</span>
</code></pre> 
<p>å¦‚æœå®ƒæ²¡æœ‰è§£å†³ä¸º â€œokâ€ï¼Œåˆ™å…±äº«å†…å­˜è¯¥ä½ç½®çš„å€¼ä¸ç¬¦åˆé¢„æœŸï¼ˆvalue å°†æ˜¯ â€œnot-equalâ€ è€Œä¸æ˜¯ä¸€ä¸ª promiseï¼‰æˆ–å·²ç»è¶…æ—¶ï¼ˆè¯¥ promise å°†è§£å†³ä¸º â€œtime-outâ€ï¼‰ã€‚</p> 
<h3><a id="_v__313"></a>æ­£åˆ™è¡¨è¾¾å¼ v æ ‡å¿—</h3> 
<p>RegExp v æ ‡å¿—æ˜¯ u æ ‡å¿—çš„è¶…é›†ï¼Œå¹¶æä¾›äº†å¦å¤–ä¸¤ä¸ªåŠŸèƒ½ï¼š</p> 
<ul><li>å­—ç¬¦ä¸²çš„ Unicode å±æ€§ï¼š é€šè¿‡ Unicode å±æ€§è½¬ä¹‰ï¼Œå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²çš„å±æ€§ã€‚</li></ul> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\p{RGI_Emoji}$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">v</span></span><span class="token punctuation">;</span>

<span class="token comment">// åŒ¹é…ä»…åŒ…å« 1 ä¸ªä»£ç ç‚¹çš„è¡¨æƒ…ç¬¦å·ï¼š</span>
re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'âš½'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '\u26BD'</span>
<span class="token comment">// â†’ true âœ…</span>

<span class="token comment">// åŒ¹é…ç”±å¤šä¸ªä»£ç ç‚¹ç»„æˆçš„è¡¨æƒ…ç¬¦å·ï¼š</span>
re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'ğŸ‘¨ğŸ¾â€âš•ï¸'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '\u{1F468}\u{1F3FE}\u200D\u2695\uFE0F'</span>
<span class="token comment">// â†’ true âœ…</span>
</code></pre> 
<ul><li>è®¾ç½®ç¬¦å·ï¼š å…è®¸åœ¨å­—ç¬¦ç±»ä¹‹é—´è¿›è¡Œé›†åˆæ“ä½œã€‚</li></ul> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\p{White_Space}&amp;&amp;\p{ASCII}]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">v</span></span><span class="token punctuation">;</span>
re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// â†’ true</span>
re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'\u2028'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// â†’ false</span>
</code></pre> 
<p>åœ¨JavaScriptçš„æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œu æ ‡å¿—è¡¨ç¤ºâ€œUnicodeâ€æ¨¡å¼ã€‚å½“ä½ åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨è¿™ä¸ªæ ‡å¿—æ—¶ï¼Œå®ƒä¼šå°†æ¨¡å¼è§†ä¸ºUnicodeåºåˆ—çš„é›†åˆï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ç»„ASCIIå­—ç¬¦ã€‚è¿™æ„å‘³ç€æ­£åˆ™è¡¨è¾¾å¼ä¼šæ­£ç¡®åœ°å¤„ç†å››ä¸ªå­—èŠ‚çš„UTF-16ç¼–ç ã€‚</p> 
<p>å…·ä½“æ¥è¯´ï¼Œu æ ‡å¿—æœ‰ä»¥ä¸‹å‡ ä¸ªä½œç”¨ï¼š</p> 
<p>æ­£ç¡®å¤„ç†Unicodeå­—ç¬¦ï¼šä¸ä½¿ç”¨ u æ ‡å¿—æ—¶ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¯èƒ½æ— æ³•æ­£ç¡®å¤„ç†Unicodeå­—ç¬¦ï¼Œå°¤å…¶æ˜¯é‚£äº›è¶…å‡ºåŸºæœ¬å¤šæ–‡ç§å¹³é¢ï¼ˆBMPï¼‰çš„å­—ç¬¦ã€‚ä½¿ç”¨ u æ ‡å¿—åï¼Œä½ å¯ä»¥åŒ¹é…å’Œå¤„ç†ä»»ä½•æœ‰æ•ˆçš„Unicodeå­—ç¬¦ã€‚</p> 
<p>æ”¹å˜é‡è¯çš„è¡Œä¸ºï¼šåœ¨Unicodeæ¨¡å¼ä¸‹ï¼Œé‡è¯ï¼ˆå¦‚ *ã€+ã€?ã€{n}ã€{n,}ã€{n,m}ï¼‰ä¼šåŒ¹é…ä»»ä½•æœ‰æ•ˆçš„Unicodeå­—ç¬¦ï¼Œè€Œä¸ä»…ä»…æ˜¯ASCIIå­—ç¬¦ã€‚</p> 
<p>å…è®¸ä½¿ç”¨\p{â€¦} å’Œ \P{â€¦}ï¼šè¿™ä¸¤ä¸ªæ˜¯Unicodeå±æ€§è½¬ä¹‰ï¼Œå…è®¸åŒ¹é…æˆ–ä¸åŒ¹é…å…·æœ‰ç‰¹å®šUnicodeå±æ€§çš„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ\p{Script=Arabic} ä¼šåŒ¹é…ä»»ä½•é˜¿æ‹‰ä¼¯è„šæœ¬çš„å­—ç¬¦ã€‚</p> 
<p>æ­£ç¡®å¤„ç†Unicodeè½¬ä¹‰ï¼šåœ¨Unicodeæ¨¡å¼ä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ \u{â€¦} æ¥è¡¨ç¤ºä¸€ä¸ªUnicodeå­—ç¬¦ï¼Œå…¶ä¸­ {â€¦} æ˜¯ä¸€ä¸ªå››ä½çš„åå…­è¿›åˆ¶æ•°ã€‚</p> 
<p>ä¿®æ­£äº†æŸäº›æ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•çš„è¡Œä¸ºï¼šä¾‹å¦‚ï¼ŒString.prototype.match()ã€String.prototype.replace()ã€String.prototype.search() å’Œ RegExp.prototype.exec() ç­‰æ–¹æ³•åœ¨Unicodeæ¨¡å¼ä¸‹ä¼šè¿”å›æ›´å‡†ç¡®çš„ç»“æœã€‚</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/16163976467d2ae6fb570a743a4ca672/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ã€Reactã€‘ä½¿ç”¨lodashçš„debounceæœªç”Ÿæ•ˆ</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dcc7be6a374cf631cebc97fe4f25eff2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">shellè„šæœ¬æ–‡æœ¬ä¸‰å‰‘å®¢grepï¼Œsedï¼Œawk</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 è€å¸…çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>