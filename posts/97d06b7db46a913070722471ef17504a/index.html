<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>YOLO 划分数据集（训练集、验证集、测试集） - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/97d06b7db46a913070722471ef17504a/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="YOLO 划分数据集（训练集、验证集、测试集）">
  <meta property="og:description" content="目录 前言训练集、验证集（8:2）训练集、验证集、测试集（7:2:1） 前言 本博客是在我的另一篇博客 VOC 格式与 YOLO 格式的相互转换 的基础上进行的，有需要可以参考
以下代码亲测可以直接复制运行（以下所有的路径修改成自己对应的路径） {\color{Red} \mathbf{以下代码亲测可以直接复制运行 （以下所有的路径修改成自己对应的路径）}} 以下代码亲测可以直接复制运行（以下所有的路径修改成自己对应的路径）
训练集、验证集（8:2） split82.py 内容如下：
import os import shutil import random from tqdm import tqdm &#34;&#34;&#34; 标注文件是yolo格式（txt文件） 训练集：验证集 （8：2） &#34;&#34;&#34; def split_img(img_path, label_path, split_list): try: # 创建数据集文件夹 Data = &#39;./VOCdevkit/VOC2007/ImageSets&#39; # 这里我的文件夹./VOCdevkit/VOC2007/ImageSets提前创建好了，所以注释了下一行，否则会抛异常 # os.mkdir(Data) train_img_dir = Data &#43; &#39;/images/train&#39; val_img_dir = Data &#43; &#39;/images/val&#39; # test_img_dir = Data &#43; &#39;/images/test&#39; train_label_dir = Data &#43; &#39;/labels/train&#39; val_label_dir = Data &#43; &#39;/labels/val&#39; # test_label_dir = Data &#43; &#39;/labels/test&#39; # 创建文件夹 os.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-07-25T17:03:45+08:00">
    <meta property="article:modified_time" content="2023-07-25T17:03:45+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">YOLO 划分数据集（训练集、验证集、测试集）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言</a></li><li><a href="#82_7" rel="nofollow">训练集、验证集（8:2）</a></li><li><a href="#721_85" rel="nofollow">训练集、验证集、测试集（7:2:1）</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言</h2> 
<p>本博客是在我的另一篇博客 <a href="https://blog.csdn.net/hu_wei123/article/details/131869174">VOC 格式与 YOLO 格式的相互转换</a> 的基础上进行的，有需要可以参考</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           以下代码亲测可以直接复制运行（以下所有的路径修改成自己对应的路径） 
          
         
        
       
         {\color{Red} \mathbf{以下代码亲测可以直接复制运行 （以下所有的路径修改成自己对应的路径）}} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6861em;"></span><span class="mord"><span class="mord" style="color: red;"><span class="mord mathbf cjk_fallback" style="color: red;">以下代码亲测可以直接复制运行（以下所有的路径修改成自己对应的路径）</span></span></span></span></span></span></span></span></p> 
<h2><a id="82_7"></a>训练集、验证集（8:2）</h2> 
<p><code>split82.py</code> 内容如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> os
<span class="token keyword">import</span> shutil
<span class="token keyword">import</span> random
<span class="token keyword">from</span> tqdm <span class="token keyword">import</span> tqdm

<span class="token triple-quoted-string string">"""
标注文件是yolo格式（txt文件）
训练集：验证集 （8：2） 
"""</span>


<span class="token keyword">def</span> <span class="token function">split_img</span><span class="token punctuation">(</span>img_path<span class="token punctuation">,</span> label_path<span class="token punctuation">,</span> split_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>  <span class="token comment"># 创建数据集文件夹</span>
        Data <span class="token operator">=</span> <span class="token string">'./VOCdevkit/VOC2007/ImageSets'</span>
        <span class="token comment"># 这里我的文件夹./VOCdevkit/VOC2007/ImageSets提前创建好了，所以注释了下一行，否则会抛异常</span>
        <span class="token comment"># os.mkdir(Data)</span>

        train_img_dir <span class="token operator">=</span> Data <span class="token operator">+</span> <span class="token string">'/images/train'</span>
        val_img_dir <span class="token operator">=</span> Data <span class="token operator">+</span> <span class="token string">'/images/val'</span>
        <span class="token comment"># test_img_dir = Data + '/images/test'</span>

        train_label_dir <span class="token operator">=</span> Data <span class="token operator">+</span> <span class="token string">'/labels/train'</span>
        val_label_dir <span class="token operator">=</span> Data <span class="token operator">+</span> <span class="token string">'/labels/val'</span>
        <span class="token comment"># test_label_dir = Data + '/labels/test'</span>

        <span class="token comment"># 创建文件夹</span>
        os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>train_img_dir<span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>train_label_dir<span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>val_img_dir<span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>val_label_dir<span class="token punctuation">)</span>
        <span class="token comment"># os.makedirs(test_img_dir)</span>
        <span class="token comment"># os.makedirs(test_label_dir)</span>

    <span class="token keyword">except</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'文件目录已存在'</span><span class="token punctuation">)</span>

    train<span class="token punctuation">,</span> val <span class="token operator">=</span> split_list
    all_img <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>img_path<span class="token punctuation">)</span>
    all_img_path <span class="token operator">=</span> <span class="token punctuation">[</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>img_path<span class="token punctuation">,</span> img<span class="token punctuation">)</span> <span class="token keyword">for</span> img <span class="token keyword">in</span> all_img<span class="token punctuation">]</span>
    <span class="token comment"># all_label = os.listdir(label_path)</span>
    <span class="token comment"># all_label_path = [os.path.join(label_path, label) for label in all_label]</span>
    train_img <span class="token operator">=</span> random<span class="token punctuation">.</span>sample<span class="token punctuation">(</span>all_img_path<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>train <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>all_img_path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    train_img_copy <span class="token operator">=</span> <span class="token punctuation">[</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>train_img_dir<span class="token punctuation">,</span> img<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\\'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> img <span class="token keyword">in</span> train_img<span class="token punctuation">]</span>
    train_label <span class="token operator">=</span> <span class="token punctuation">[</span>toLabelPath<span class="token punctuation">(</span>img<span class="token punctuation">,</span> label_path<span class="token punctuation">)</span> <span class="token keyword">for</span> img <span class="token keyword">in</span> train_img<span class="token punctuation">]</span>
    train_label_copy <span class="token operator">=</span> <span class="token punctuation">[</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>train_label_dir<span class="token punctuation">,</span> label<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\\'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> label <span class="token keyword">in</span> train_label<span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> tqdm<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>train_img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> desc<span class="token operator">=</span><span class="token string">'train '</span><span class="token punctuation">,</span> ncols<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">,</span> unit<span class="token operator">=</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        _copy<span class="token punctuation">(</span>train_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> train_img_dir<span class="token punctuation">)</span>
        _copy<span class="token punctuation">(</span>train_label<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> train_label_dir<span class="token punctuation">)</span>
        all_img_path<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>train_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    val_img <span class="token operator">=</span> all_img_path
    val_label <span class="token operator">=</span> <span class="token punctuation">[</span>toLabelPath<span class="token punctuation">(</span>img<span class="token punctuation">,</span> label_path<span class="token punctuation">)</span> <span class="token keyword">for</span> img <span class="token keyword">in</span> val_img<span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> tqdm<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>val_img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> desc<span class="token operator">=</span><span class="token string">'val '</span><span class="token punctuation">,</span> ncols<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">,</span> unit<span class="token operator">=</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        _copy<span class="token punctuation">(</span>val_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> val_img_dir<span class="token punctuation">)</span>
        _copy<span class="token punctuation">(</span>val_label<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> val_label_dir<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">_copy</span><span class="token punctuation">(</span>from_path<span class="token punctuation">,</span> to_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    shutil<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>from_path<span class="token punctuation">,</span> to_path<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">toLabelPath</span><span class="token punctuation">(</span>img_path<span class="token punctuation">,</span> label_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    img <span class="token operator">=</span> img_path<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\\'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
    label <span class="token operator">=</span> img<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'.txt'</span>
    <span class="token keyword">return</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>label_path<span class="token punctuation">,</span> label<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    img_path <span class="token operator">=</span> <span class="token string">'./VOCdevkit/VOC2007/JPEGImages'</span>
    label_path <span class="token operator">=</span> <span class="token string">'./YoloLabels'</span>
    split_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span>  <span class="token comment"># 数据集划分比例[train:val]</span>
    split_img<span class="token punctuation">(</span>img_path<span class="token punctuation">,</span> label_path<span class="token punctuation">,</span> split_list<span class="token punctuation">)</span>
</code></pre> 
<h2><a id="721_85"></a>训练集、验证集、测试集（7:2:1）</h2> 
<p><code>split721.py</code>内容如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> os<span class="token punctuation">,</span> shutil<span class="token punctuation">,</span> random
<span class="token keyword">from</span> tqdm <span class="token keyword">import</span> tqdm

<span class="token triple-quoted-string string">"""
标注文件是yolo格式（txt文件）
训练集：验证集：测试集 （7：2：1） 
"""</span>


<span class="token keyword">def</span> <span class="token function">split_img</span><span class="token punctuation">(</span>img_path<span class="token punctuation">,</span> label_path<span class="token punctuation">,</span> split_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        Data <span class="token operator">=</span> <span class="token string">'./VOCdevkit/VOC2007/ImageSets'</span>
        <span class="token comment"># Data是你要将要创建的文件夹路径（路径一定是相对于你当前的这个脚本而言的）</span>
        <span class="token comment"># os.mkdir(Data)</span>

        train_img_dir <span class="token operator">=</span> Data <span class="token operator">+</span> <span class="token string">'/images/train'</span>
        val_img_dir <span class="token operator">=</span> Data <span class="token operator">+</span> <span class="token string">'/images/val'</span>
        test_img_dir <span class="token operator">=</span> Data <span class="token operator">+</span> <span class="token string">'/images/test'</span>

        train_label_dir <span class="token operator">=</span> Data <span class="token operator">+</span> <span class="token string">'/labels/train'</span>
        val_label_dir <span class="token operator">=</span> Data <span class="token operator">+</span> <span class="token string">'/labels/val'</span>
        test_label_dir <span class="token operator">=</span> Data <span class="token operator">+</span> <span class="token string">'/labels/test'</span>

        <span class="token comment"># 创建文件夹</span>
        os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>train_img_dir<span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>train_label_dir<span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>val_img_dir<span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>val_label_dir<span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>test_img_dir<span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>test_label_dir<span class="token punctuation">)</span>

    <span class="token keyword">except</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'文件目录已存在'</span><span class="token punctuation">)</span>

    train<span class="token punctuation">,</span> val<span class="token punctuation">,</span> test <span class="token operator">=</span> split_list
    all_img <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>img_path<span class="token punctuation">)</span>
    all_img_path <span class="token operator">=</span> <span class="token punctuation">[</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>img_path<span class="token punctuation">,</span> img<span class="token punctuation">)</span> <span class="token keyword">for</span> img <span class="token keyword">in</span> all_img<span class="token punctuation">]</span>
    <span class="token comment"># all_label = os.listdir(label_path)</span>
    <span class="token comment"># all_label_path = [os.path.join(label_path, label) for label in all_label]</span>
    train_img <span class="token operator">=</span> random<span class="token punctuation">.</span>sample<span class="token punctuation">(</span>all_img_path<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>train <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>all_img_path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    train_img_copy <span class="token operator">=</span> <span class="token punctuation">[</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>train_img_dir<span class="token punctuation">,</span> img<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\\'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> img <span class="token keyword">in</span> train_img<span class="token punctuation">]</span>
    train_label <span class="token operator">=</span> <span class="token punctuation">[</span>toLabelPath<span class="token punctuation">(</span>img<span class="token punctuation">,</span> label_path<span class="token punctuation">)</span> <span class="token keyword">for</span> img <span class="token keyword">in</span> train_img<span class="token punctuation">]</span>
    train_label_copy <span class="token operator">=</span> <span class="token punctuation">[</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>train_label_dir<span class="token punctuation">,</span> label<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\\'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> label <span class="token keyword">in</span> train_label<span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> tqdm<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>train_img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> desc<span class="token operator">=</span><span class="token string">'train '</span><span class="token punctuation">,</span> ncols<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">,</span> unit<span class="token operator">=</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        _copy<span class="token punctuation">(</span>train_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> train_img_dir<span class="token punctuation">)</span>
        _copy<span class="token punctuation">(</span>train_label<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> train_label_dir<span class="token punctuation">)</span>
        all_img_path<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>train_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    val_img <span class="token operator">=</span> random<span class="token punctuation">.</span>sample<span class="token punctuation">(</span>all_img_path<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>val <span class="token operator">/</span> <span class="token punctuation">(</span>val <span class="token operator">+</span> test<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>all_img_path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    val_label <span class="token operator">=</span> <span class="token punctuation">[</span>toLabelPath<span class="token punctuation">(</span>img<span class="token punctuation">,</span> label_path<span class="token punctuation">)</span> <span class="token keyword">for</span> img <span class="token keyword">in</span> val_img<span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> tqdm<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>val_img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> desc<span class="token operator">=</span><span class="token string">'val '</span><span class="token punctuation">,</span> ncols<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">,</span> unit<span class="token operator">=</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        _copy<span class="token punctuation">(</span>val_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> val_img_dir<span class="token punctuation">)</span>
        _copy<span class="token punctuation">(</span>val_label<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> val_label_dir<span class="token punctuation">)</span>
        all_img_path<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>val_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    test_img <span class="token operator">=</span> all_img_path
    test_label <span class="token operator">=</span> <span class="token punctuation">[</span>toLabelPath<span class="token punctuation">(</span>img<span class="token punctuation">,</span> label_path<span class="token punctuation">)</span> <span class="token keyword">for</span> img <span class="token keyword">in</span> test_img<span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> tqdm<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>test_img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> desc<span class="token operator">=</span><span class="token string">'test '</span><span class="token punctuation">,</span> ncols<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">,</span> unit<span class="token operator">=</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        _copy<span class="token punctuation">(</span>test_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> test_img_dir<span class="token punctuation">)</span>
        _copy<span class="token punctuation">(</span>test_label<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> test_label_dir<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">_copy</span><span class="token punctuation">(</span>from_path<span class="token punctuation">,</span> to_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    shutil<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>from_path<span class="token punctuation">,</span> to_path<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">toLabelPath</span><span class="token punctuation">(</span>img_path<span class="token punctuation">,</span> label_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    img <span class="token operator">=</span> img_path<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\\'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
    label <span class="token operator">=</span> img<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'.txt'</span>
    <span class="token keyword">return</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>label_path<span class="token punctuation">,</span> label<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    img_path <span class="token operator">=</span> <span class="token string">'./VOCdevkit/VOC2007/JPEGImages'</span>  <span class="token comment"># 你的图片存放的路径（路径一定是相对于你当前的这个脚本文件而言的）</span>
    label_path <span class="token operator">=</span> <span class="token string">'./YoloLabels'</span>  <span class="token comment"># 你的txt文件存放的路径（路径一定是相对于你当前的这个脚本文件而言的）</span>
    split_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">]</span>  <span class="token comment"># 数据集划分比例[train:val:test]</span>
    split_img<span class="token punctuation">(</span>img_path<span class="token punctuation">,</span> label_path<span class="token punctuation">,</span> split_list<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ad/2b/mSqTC6KV_o.png" alt="在这里插入图片描述"></p> 
<p>完成我的另一篇博客 <a href="https://blog.csdn.net/hu_wei123/article/details/131869174?spm=1001.2014.3001.5502">VOC 格式与 YOLO 格式的相互转换</a>以及本文<a href="https://blog.csdn.net/hu_wei123/article/details/131870063?spm=1001.2014.3001.5502">YOLO 划分数据集（训练集、验证集、测试集）</a>之后，我的整个项目结构如下图所示：</p> 
<p><img src="https://images2.imgbox.com/9e/3c/C31m22J1_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/72e4227e52f69b85c925fb92538d2322/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">BatchNorm, LayerNorm, InstanceNorm和GroupNorm</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7e7e65bdbd8532d9698e7976ab3757a3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">LeetCode刷题 --- 前缀和</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>