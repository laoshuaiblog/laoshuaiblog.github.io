<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>I2C、UART、SPI详解及区别 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/fc4d67e0f645f5a4e857f88a5b59fad8/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="I2C、UART、SPI详解及区别">
  <meta property="og:description" content="一、通讯 1. 通讯的概念
我们把计算机与外界的信息交换称之为通信。
2. 通讯方式分类
基本的通信方式有两种：并行通讯和串行通讯。
并行通信：所传送数据的各个位是同时发送或接收。速度快，占用引脚资源多
串行通信：所传送数据的各位按顺序一位一位地发送或接收。占用引脚资源少，速度相 对较慢
3. 串行通讯种类
串行通讯的种类有：异步通讯和同步通讯
1） 异步通讯：不带时钟同步信号，不是使用同一个时钟源。如UART、单总线
2） 异步通讯数据帧格式：一个起始位(低电平“0”)表示字符的开始；然后是 5～8 位数据 (D0-D7)，规定低位在前，高位在后；其 后是奇偶校验位；最后是停止位(高电平“1”)， 用以表示字符的结束。
3） 同步通讯：带时钟同步信号传输，通讯收发双方是受同一个时钟源控制。如IIC、SPI
4） 同步通讯数据帧格式：同步字符表示数据传输的开始(一般约定为1～2个字符)&#43;数据流。
4. 串行通讯的数据传输速度
串口传输的速率我们称为比特率也叫波特率，波特率是指一秒钟传输的位数。异步通信的数据传送速率一般为 50b/s～ 100kb/s，单片机常用的波特率是：115200，9600。
5. 串行通讯的方式，按照数据传送方向，分为：
1） 单工制式：数据在甲机和乙机之间只允许单方向传送。两机之间只需 1 条数据线。
2） 半双工制式：在半双工制式下，数据在甲机和乙机之间允许双方向传送，但它们之间只有一个通信回路，接收和发送不能同时进行，只能分时发送和接收，因而两机之间只需1 条数据线。
3） 全双工制式：在全双工制式下，甲、乙两机之间数据的发送和接收可以同时进行，称为“全双工传送”。全双工形式的串行通信必须使用 2 条数据线。
二、UART 1、基本协议
1）空闲位：当总线处于空闲状态时信号线的状态为‘1’，即高电平
2）起始位：开始进行数据传输时发送方要先发出一个低电平’0’来表示传输字符的开始。因为空闲位一直是高电平所以开始第一次通讯时先发送一个明显区别于空闲状态的信号即为低电平。
3）数据位：起始位之后就是要传输的数据，数据可以是5，6，7，8，9位，构成一个字符，一般都是8位。先发送最低位最后发送最高位。
4）奇偶校验位：数据位传送完成后，要进行奇偶校验，校验位其实是调整个数，串口校验分几种方式：
无校验（no parity）奇校验（odd parity）：如果数据位中’1’的数目是偶数，则校验位为’1’，如果’1’的数目是奇数，校验位为’0’。偶校验（even parity）：如果数据为中’1’的数目是偶数，则校验位为’0’，如果为奇数，校验位为’1’。mark parity：校验位始终为1space parity：校验位始终为0 5）停止位：数据结束标志，可以是1位，1.5位，2位的高电平。
2、数据帧格式：
一个起始位(低电平“0”)表示字符的开始；然后是 5～8 位数据 (D0-D7)，规定低位在前，高位在后；其后是奇偶校验位；最后是停止位(高电平“1”)，用以表示字符的结束。
3、需要定义的参数：
数据位（8位或者9位）奇偶校验位（第9位）停止位（1,1.5,2位）波特率设置 三、IIC 1. IIC 通讯概述
IIC 是飞利浦公司研发的两线式串行总线，分别为：串行数据 SDA（Serial Data）、串行时钟 SCL（Serial Clock）。总线数据传输速率在标准模式下可达 100kbit/s，快速模式下可达400kbit/s，高速模式下可达 3.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-08-03T20:31:18+08:00">
    <meta property="article:modified_time" content="2020-08-03T20:31:18+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">I2C、UART、SPI详解及区别</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>一、通讯</h4> 
<p style="margin-left:0pt;">1. 通讯的概念</p> 
<p style="margin-left:0pt;">    我们把计算机与外界的信息交换称之为通信。</p> 
<p style="margin-left:0pt;">2. 通讯方式分类</p> 
<p style="margin-left:0pt;">     基本的通信方式有两种：并行通讯和串行通讯。</p> 
<p style="margin-left:0pt;">     并行通信：所传送数据的各个位是同时发送或接收。速度快，占用引脚资源多</p> 
<p style="margin-left:0pt;">     串行通信：所传送数据的各位按顺序一位一位地发送或接收。占用引脚资源少，速度相  对较慢</p> 
<p style="margin-left:0pt;">3. 串行通讯种类</p> 
<p style="margin-left:0pt;">     串行通讯的种类有：异步通讯和同步通讯</p> 
<p style="margin-left:0pt;">1） <span style="color:#f33b45;"><strong>异步通讯：不带时钟同步信号，不是使用同一个时钟源。如UART、单总线</strong></span></p> 
<p style="margin-left:0pt;">2） 异步通讯数据帧格式：一个起始位(低电平“0”)表示字符的开始；然后是 5～8 位数据 (D0-D7)，规定低位在前，高位在后；其        后是奇偶校验位；最后是停止位(高电平“1”)， 用以表示字符的结束。</p> 
<p style="margin-left:0pt;">3） <strong><span style="color:#f33b45;">同步通讯：带时钟同步信号传输，通讯收发双方是受同一个时钟源控制。如IIC、SPI</span></strong></p> 
<p style="margin-left:0pt;">4） 同步通讯数据帧格式：同步字符表示数据传输的开始(一般约定为1～2个字符)+数据流。</p> 
<p style="margin-left:0pt;">4. 串行通讯的数据传输速度</p> 
<p style="margin-left:0pt;">    串口传输的速率我们称为比特率也叫波特率，波特率是指一秒钟传输的位数。异步通信的数据传送速率一般为 50b/s～  100kb/s，单片机常用的波特率是：115200，9600。</p> 
<p style="margin-left:0pt;">5. 串行通讯的方式，按照数据传送方向，分为：</p> 
<p style="margin-left:0pt;">1） 单工制式：数据在甲机和乙机之间只允许单方向传送。两机之间只需 1 条数据线。</p> 
<p style="margin-left:0pt;">2） 半双工制式：在半双工制式下，数据在甲机和乙机之间允许双方向传送，但它们之间只有一个通信回路，接收和发送不能同时进行，只能分时发送和接收，因而两机之间只需1 条数据线。</p> 
<p style="margin-left:0pt;">3） 全双工制式：在全双工制式下，甲、乙两机之间数据的发送和接收可以同时进行，称为“全双工传送”。全双工形式的串行通信必须使用 2 条数据线。</p> 
<p style="margin-left:0pt;"> </p> 
<h4 style="margin-left:0pt;">二、<strong><strong><strong>UART</strong></strong></strong></h4> 
<p style="margin-left:0pt;">1、基本协议</p> 
<p style="margin-left:0pt;">1）空闲位：当总线处于空闲状态时信号线的状态为‘1’，即高电平<br> 2）起始位：开始进行数据传输时发送方要先发出一个<span style="color:#f33b45;"><strong>低电平’0’</strong></span>来表示传输字符的开始。因为空闲位一直是高电平所以开始第一次通讯时先发送一个明显区别于空闲状态的信号即为低电平。<br> 3）数据位：起始位之后就是要传输的数据，数据可以是5，6，7，8，9位，构成一个字符，一般都是8位。先发送最低位最后发送最高位。<br> 4）奇偶校验位：数据位传送完成后，要进行奇偶校验，校验位其实是调整个数，串口校验分几种方式：</p> 
<ul><li style="margin-left:0pt;">无校验（no parity）</li><li style="margin-left:0pt;">奇校验（odd parity）：如果数据位中’1’的数目是偶数，则校验位为’1’，如果’1’的数目是奇数，校验位为’0’。</li><li style="margin-left:0pt;">偶校验（even parity）：如果数据为中’1’的数目是偶数，则校验位为’0’，如果为奇数，校验位为’1’。</li><li style="margin-left:0pt;">mark parity：校验位始终为1</li><li style="margin-left:0pt;">space parity：校验位始终为0</li></ul> 
<p style="margin-left:0pt;">5）停止位：数据结束标志，可以是1位，1.5位，2位的<span style="color:#f33b45;"><strong>高电平</strong></span>。</p> 
<p style="margin-left:0pt;">2、数据帧格式：</p> 
<p style="margin-left:0pt;">    一个起始位(低电平“0”)表示字符的开始；然后是 5～8 位数据 (D0-D7)，规定低位在前，高位在后；其后是奇偶校验位；最后是停止位(高电平“1”)，用以表示字符的结束。</p> 
<p style="margin-left:0pt;"><img alt="" height="93" src="https://images2.imgbox.com/52/ed/Q6G75m9F_o.png" width="700"></p> 
<p> 3、需要定义的参数：</p> 
<ul><li>数据位（8位或者9位）</li><li>奇偶校验位（第9位）</li><li>停止位（1,1.5,2位）</li><li>波特率设置</li></ul> 
<p> </p> 
<h4>三、IIC</h4> 
<p style="margin-left:0pt;">1. IIC 通讯概述</p> 
<p style="margin-left:0pt;">IIC 是飞利浦公司研发的两线式串行总线，分别为：串行数据 SDA（Serial Data）、串行时钟 SCL（Serial Clock）。总线数据传输速率在标准模式下可达 100kbit/s，快速模式下可达400kbit/s，高速模式下可达 3.4Mbit/s。</p> 
<p style="margin-left:0pt;">2. I²C 总线基本协议</p> 
<p style="margin-left:0pt;">1） 空闲状态：SCL 和 SDA 都保持着高电平。</p> 
<p style="margin-left:0pt;">2） 起始条件：总线在空闲状态时，SCL 和 SDA 都保持着高电平，当 SCL 为高电平期间而 SDA由高到低的跳变，表示产生一个起始条件。在起始条件产生后，总线处于忙状态，由本次数据传输的主从设备独占，其他 I2C 器件无法访问总线。</p> 
<p style="margin-left:0pt;">3） 停止条件：当 SCL 为高而 SDA 由低到高的跳变，表示产生一个停止条件。</p> 
<p style="margin-left:0pt;">4） 答应信号：每个字节传输完成后的下一个时钟信号，在 SCL 高电平期间，SDA 为低，则表示一个应答信号。</p> 
<p style="margin-left:0pt;">5） 非答应信号：每个字节传输完成后的下一个时钟信号，在 SCL 高电平期间，SDA 为高，则表示一个非应答信号</p> 
<p> <img alt="" height="288" src="https://images2.imgbox.com/db/3b/aKLKrlWX_o.png" width="452"></p> 
<p> </p> 
<p style="margin-left:0pt;">3. I²C 总线数据传输协议</p> 
<p style="margin-left:0pt;">当产生起始条件后，开始数据传输，这个阶段主设备在SCL线上的每一个脉冲，都会同时在SDA 线上传输一个数据位(数据发送顺序：先发高位，再发低位)，每个字节完成后，跟着一个应答位。当不想再进行数据传输时，主机产生一个停止信号。</p> 
<p style="margin-left:0pt;"><img alt="" height="270" src="https://images2.imgbox.com/9a/a1/HIisb9Fn_o.jpg" width="463"></p> 
<p style="margin-left:0pt;">4. I²C 寻址方式</p> 
<p style="margin-left:0pt;">I²C 总线上的每一个 I²C 设备都对应一个唯一的地址，主从设备之间的数据传输是建立在地址的基础上，主设备在传输有效数据之前要先指定从设备的地址。IIC 寻址方式为：固定地址（4 位）+  可编程地址（3 位）+读写控制位（1 位）。</p> 
<p style="margin-left:0pt;">5、<strong>I2C传输的要点就是：传输一个字节后面必然紧跟一个"响应"信号，这个响应信号可能来自主机，或者是从机，具体是谁，就要看传输方向。</strong></p> 
<p style="margin-left:0pt;">传输方向分两种情况(每种情况又有两种可能: A无应答和 B有应答)：</p> 
<p style="margin-left:0pt;">1.主机-&gt;从机，主机对从机发一个字节之后，主机要读取从机的响应信号(主机读SDA线)    </p> 
<p style="margin-left:0pt;">A) 主机读SDA为高电平，说明从机无应答</p> 
<p style="margin-left:0pt;">B) 主机读SDA为低电平，说明从机有应答</p> 
<p style="margin-left:0pt;">2.从机-&gt;主机， 主机读取从机一个字节之后，主机要向从机发送一个响应信号(主机写SDA线)   </p> 
<p style="margin-left:0pt;">A)  主机写SDA为高电平（即无应答信号），从机收到主机的无应答信号之后，从机停止传输，等待主机的停止信号。</p> 
<p style="margin-left:0pt;">B)  主机写SDA为低电平，从机收到主机的应答信号之后，从机继续输出下一字节。</p> 
<p style="margin-left:0pt;"><strong>注：起始和结束信号总是由主设备产生</strong></p> 
<p> </p> 
<h4>四、SPI</h4> 
<p style="margin-left:0pt;">         SPI 通讯协议是由 Motorola 公司开发的串行外围设备接口，是一种高速的，全双工，同步的通信总线。</p> 
<p style="margin-left:0pt;">1. SPI 数据传输</p> 
<p style="margin-left:0pt;">SPI 通讯协议规定传输的数据为 8 位，传输顺序是高位在前，低位在后。</p> 
<p style="margin-left:0pt;">2. SPI 总线工作方式</p> 
<p style="margin-left:0pt;">SPI 有四种传输方式：上升沿、下降沿、前沿、后沿。工作方式由串行同步时钟极性(CPOL)和时钟相位（CPHA）来共同决定。</p> 
<p style="margin-left:0pt;">3、SPI内部结构简明图</p> 
<p> <img alt="" height="338" src="https://images2.imgbox.com/41/00/JZpdWrfF_o.png" width="555"></p> 
<p style="margin-left:0pt;">SPI接口一般使用4条线通信：</p> 
<p style="margin-left:0pt;">MISO 主设备数据输入，从设备数据输出。</p> 
<p style="margin-left:0pt;">MOSI 主设备数据输出，从设备数据输入。</p> 
<p style="margin-left:0pt;">SCLK时钟信号，由主设备产生。</p> 
<p style="margin-left:0pt;">CS从设备片选信号，由主设备控制。</p> 
<p style="margin-left:0pt;">4、通信方式</p> 
<p style="margin-left:0pt;">SPI是一个环形总线结构，由CS、SCLK、MISO、MOSI构成，其时序其实很简单，主要是在SCLK的控制下，<span style="color:#f33b45;"><strong>两个双向移位寄存器进行数据交换</strong></span>。</p> 
<p style="margin-left:0pt;">1） 主机和从机都有一个串行移位寄存器，主机通过向它的SPI串行寄存器写入一个字节来发起一次传输。</p> 
<p style="margin-left:0pt;">2） 串行移位寄存器通过MOSI信号线将字节传送给从机，从机也将自己的串行移位寄存器中的内容通过MISO信号线返回给主机。这样，两个移位寄存器中的内容就被交换。</p> 
<p style="margin-left:0pt;">3） 外设的写操作和读操作是同步完成的。如果只进行写操作，主机只需忽略接收到的字节；反之，若主机要读取从机的一个字节，就必须发送一个空字节来引发从机的传输。</p> 
<p style="margin-left:0pt;">5、在点对点的通信中，SPI接口不需要进行寻址操作，且为全双工通信，显得简单高效。在多个从设备的系统中，每个从设备需要独立的使能信号CS，硬件上比I2C系统要稍微复杂一些。</p> 
<p style="margin-left:0pt;">最后，SPI接口的一个缺点：没有指定的流控制，没有应答机制确认是否接收到数据。</p> 
<p style="margin-left:0pt;"> </p> 
<h4 style="margin-left:0pt;">五、区别</h4> 
<p style="margin-left:0pt;">1、硬件上：</p> 
<p style="margin-left:0pt;">      SPI：四根线（MOSI、MISO、SCLK、CS）</p> 
<p style="margin-left:0pt;">      I2C：两根线（SCL、SDA）</p> 
<p style="margin-left:0pt;">      UART：三根线（TX、RX、GND）</p> 
<p style="margin-left:0pt;">2、I2C、SPI可挂载多个从设备，不同的是，I2C的从设备是通过地址来区分的，SPI的从设备是通过片选线来区分的</p> 
<p style="margin-left:0pt;">3、SPI、I2C同步通讯，UART异步通讯，因此一般比前两种同步串口的结构要复杂很多，一般由波特率产生器(产生的波特率等于传输波特率的16倍)、UART接收器、UART发送器组成。</p> 
<p style="margin-left:0pt;">4、SPI和UART可以实现全双工，但I2C不行；</p> 
<p style="margin-left:0pt;">5、速度上：SPI &gt; I2C &gt; UART</p> 
<p style="margin-left:0pt;">      I2C总线速度一般普遍慢于SPI，I2C一般的速度是100kbs、400kbps和1Mbps，而SPI的速度可以在几Mbps，也可以10+Mbps。UART和SPI、I2C不同，他是异步传输的，一般来说传输速度比较慢，传统的传输速度一般在115200bps或以下。</p> 
<p style="margin-left:0pt;">UART目前最常用的就是调试接口，因为UART比较简单，所以CPU输出log一般都通过一个UART口来输出。</p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4fcd040c8d12c982857efbdb492f1633/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">边沿检测--两种verilog代码写法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/57a7c49de303166828a34b337994d318/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">这一刻，我感觉一定要给。。。。</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>