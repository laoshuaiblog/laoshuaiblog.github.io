<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hadoop集群搭建文档 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/dc46e1cdf615166754e4859c968ddf57/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Hadoop集群搭建文档">
  <meta property="og:description" content="Hadoop集群搭建文档 以下为本文介绍目录:
1.环境搭建 2.常见安装问题以及解决思路 环境：
Linux系统Ubuntu12.0.4 64 bitJDKjdk-linux-i586.tar.gzHadoophadoop-1.2.1.tar.gz 一.环境搭建：
1.安装完成Ubuntu12.0.4，需要安装JDK，(注意：安装JDK需要处理一些其他问题，JDK必须是Linux版本的，还有就是JDK要和操作系统的位数相符合，比如32位、64位都有对应的安装包)：JDk的安装路径，我直接解压到/opt/jdk这个目录下；
2.安装完JDK需要配置环境变量，具体如下截图所示： 需要修改两个地方/etc/environment 和 /etc/profile文件； 3.由于Ubuntu中一般安装有默认的JDK，如openjdk，所以，为了使默认使用的是我们安装的jdk，还要进行如下工作。 //设置java对应的版本 sudo update-alternatives --install /usr/bin/java java /opt/jdk/jdk1.7.0_17/bin/java 300 sudo update-alternatives --install /usr/bin/javac javac/opt/jdk/jdk1.7.0_17/bin/javac 300 4.在终端输入
java –version / javac 测试安装JDK是否成功； 5.每当Ubuntu安装成功时，我们的机器名都默认为：Ubuntu，但为了以后集群中能够容易分辨各台服务器，需要给每台机器取个不同的名字。机器名由 /etc/hostname文件决定。输入此命令，在打开的文件中修改机器名，我的机器名是Master；
6 先关闭防火墙
sudo service iptables stop 或者 sudo ufw disable 安装SSH服务，实现无密码登陆；
sudo apt-get install ssh openssh-server 安装完成SSH后，可以查看SSH是否启动等； 7.安装SSH服务完成后就需要配置无密码登录，具体如下图所示： 进入安装目录： 刚开始可能没有authorized_keys和known_hosts文件，需要执行该命令；将产生的公钥加入到该文件中，可以打开看id_rsa.pub文件： 有关ssh公钥与密钥的具体问题可以百度；执行如下命令将authorized_keys文件分发给其他节点；注意每个节点都需要生成公钥，然后将三个节点的公钥合并在一个文件中，三个节点的authorized_keys必须一致。如下图所示： 注意文件的权限修改有可能导致ssh无密码登录配置失效，此处修改文件需要慎重；配置完成后就可实现无密码登陆；如下图所示： 8.安装hadoop，安装包拷贝到安装目录下 将安装包解压到该目录；执行如下命令：
tar -zxvf hadoop-1.2.1.tar.gz 9.安装完成后，需要配置hadoop，具体操作如下所示：需要修改的文件都在/opt/hadoop/hadoop-0.20.2/conf/目录下.
10.修改hadoop-env.sh文件： 加入JDK的路径；
11.修改core-site.xml: 12.修改hdfs-site.xml: 13.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2017-09-23T22:33:34+08:00">
    <meta property="article:modified_time" content="2017-09-23T22:33:34+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Hadoop集群搭建文档</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>Hadoop集群搭建文档</strong> <br> 以下为本文介绍目录:</p> 
<pre class="prettyprint"><code class=" hljs ">1.环境搭建
2.常见安装问题以及解决思路</code></pre> 
<p><strong>环境</strong>：</p> 
<table><thead><tr><th>Linux系统</th><th>Ubuntu12.0.4 64 bit</th></tr></thead><tbody><tr><td>JDK</td><td>jdk-linux-i586.tar.gz</td></tr><tr><td>Hadoop</td><td>hadoop-1.2.1.tar.gz</td></tr></tbody></table> 
<p><strong>一.环境搭建：</strong></p> 
<p><strong>1</strong>.安装完成Ubuntu12.0.4，需要安装JDK，(注意：安装JDK需要处理一些其他问题，JDK必须是Linux版本的，还有就是JDK要和操作系统的位数相符合，比如32位、64位都有对应的安装包)：JDk的安装路径，我直接解压到/opt/jdk这个目录下；</p> 
<p><strong>2</strong>.安装完JDK需要配置环境变量，具体如下截图所示： 需要修改两个地方/etc/environment 和 /etc/profile文件； <br> <img src="https://images2.imgbox.com/7e/f7/3Syv1iNS_o.png" alt="这里写图片描述" title=""> <br> <img src="https://images2.imgbox.com/4a/99/lRzCgIFl_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>3</strong>.由于Ubuntu中一般安装有默认的JDK，如openjdk，所以，为了使默认使用的是我们安装的jdk，还要进行如下工作。 </p> 
<pre class="prettyprint"><code class=" hljs lasso"><span class="hljs-comment">//设置java对应的版本</span>
sudo update<span class="hljs-attribute">-alternatives</span> <span class="hljs-subst">--</span>install /usr/bin/java java /opt/jdk/jdk1<span class="hljs-number">.7</span><span class="hljs-number">.0</span>_17/bin/java <span class="hljs-number">300</span>
sudo update<span class="hljs-attribute">-alternatives</span> <span class="hljs-subst">--</span>install /usr/bin/javac javac/opt/jdk/jdk1<span class="hljs-number">.7</span><span class="hljs-number">.0</span>_17/bin/javac <span class="hljs-number">300</span></code></pre> 
<p><strong>4</strong>.在终端输入</p> 
<pre class="prettyprint"><code class=" hljs livecodeserver">java –<span class="hljs-built_in">version</span> / javac</code></pre> 
<p>测试安装JDK是否成功； <br> <img src="https://images2.imgbox.com/bb/d1/nuG7RK2d_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>5</strong>.每当Ubuntu安装成功时，我们的机器名都默认为：Ubuntu，但为了以后集群中能够容易分辨各台服务器，需要给每台机器取个不同的名字。机器名由 /etc/hostname文件决定。输入此命令，在打开的文件中修改机器名，我的机器名是Master；</p> 
<p><strong>6</strong> <font color="#ff0000">先关闭防火墙</font></p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">sudo</span> service iptables stop
或者 <span class="hljs-built_in">sudo</span> ufw disable</code></pre> 
<p>安装SSH服务，实现无密码登陆；</p> 
<pre class="prettyprint"><code class=" hljs vbscript">sudo apt-<span class="hljs-keyword">get</span> install ssh openssh-<span class="hljs-built_in">server</span> </code></pre> 
<p>安装完成SSH后，可以查看SSH是否启动等； <br> <img src="https://images2.imgbox.com/28/3a/mVg1Cahx_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>7</strong>.安装SSH服务完成后就需要配置无密码登录，具体如下图所示： <br> <img src="https://images2.imgbox.com/1d/e3/NGqeNOOe_o.png" alt="这里写图片描述" title=""> <br> 进入安装目录： <br> <img src="https://images2.imgbox.com/94/6b/HYa8MOyd_o.png" alt="这里写图片描述" title=""> <br> 刚开始可能没有authorized_keys和known_hosts文件，需要执行该命令；将产生的公钥加入到该文件中，可以打开看id_rsa.pub文件： <br> <img src="https://images2.imgbox.com/93/69/4jWRPjlJ_o.png" alt="这里写图片描述" title=""> <br> 有关ssh公钥与密钥的具体问题可以百度；执行如下命令将authorized_keys文件分发给其他节点；注意每个节点都需要生成公钥，然后将三个节点的公钥合并在一个文件中，三个节点的authorized_keys必须一致。如下图所示： <br> <img src="https://images2.imgbox.com/85/b2/QcLNtMNs_o.png" alt="这里写图片描述" title=""> <br> 注意文件的权限修改有可能导致ssh无密码登录配置失效，此处修改文件需要慎重；配置完成后就可实现无密码登陆；如下图所示： <br> <img src="https://images2.imgbox.com/f3/f2/yiGNWVaD_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>8</strong>.安装hadoop，安装包拷贝到安装目录下 <br> 将安装包解压到该目录；执行如下命令：</p> 
<pre class="prettyprint"><code class=" hljs avrasm">tar -zxvf hadoop-<span class="hljs-number">1.2</span><span class="hljs-number">.1</span><span class="hljs-preprocessor">.tar</span><span class="hljs-preprocessor">.gz</span></code></pre> 
<p><strong>9</strong>.安装完成后，需要配置hadoop，具体操作如下所示：需要修改的文件都在/opt/hadoop/hadoop-0.20.2/conf/目录下.</p> 
<p><strong>10</strong>.修改hadoop-env.sh文件： <br> <img src="https://images2.imgbox.com/93/4c/DLbLKuVe_o.png" alt="这里写图片描述" title=""> <br> 加入JDK的路径；</p> 
<p><strong>11</strong>.修改core-site.xml: <br> <img src="https://images2.imgbox.com/2b/03/bHfAmiTh_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>12</strong>.修改hdfs-site.xml: <br> <img src="https://images2.imgbox.com/aa/70/sKWDzKdj_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>13</strong>.修改mapred-site.xml: <br> <img src="https://images2.imgbox.com/c0/23/nRj3fd4H_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>14</strong>.配置masters文件： <br> <img src="https://images2.imgbox.com/71/a8/wJOhwL85_o.png" alt="这里写图片描述" title=""> <br> 节点机上需要配置Slaves文件，与该文件类似；</p> 
<p><strong>15</strong>.此时已完成hadoop配置；</p> 
<p><strong>16</strong>.在虚拟机的Manager-Clone中克隆新的节点，也可以不克隆，自己安装，安装完成需要将Master中的JDK、hadoop的文件拷贝过去。</p> 
<p><strong>17</strong>.我采用的是分布式；一个电脑安装了一个虚拟机做为Master，另外一个电脑安装了虚拟机，在虚拟机上安装的两个Ubuntu，即该机器模拟了两个节点，此实验需要三个节点。</p> 
<table><thead><tr><th>机器名</th><th>ip地址</th></tr></thead><tbody><tr><td>Master</td><td>10.18.12.47</td></tr><tr><td>Slave1</td><td>10.18.12.48</td></tr><tr><td>Slave2</td><td>10.18.12.254</td></tr></tbody></table> 
<p><strong>18</strong>.虚拟机之间需要能ping通；此结果代表可以ping通； <br> <img src="https://images2.imgbox.com/8a/96/ZefuCKmF_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>19</strong>.做完所有的准备工作现在就可以启动hadoop集群，执行命令如下： <br> <img src="https://images2.imgbox.com/9f/6f/oY1CyE6W_o.png" alt="这里写图片描述" title=""> <br> 启动： <br> <img src="https://images2.imgbox.com/51/f8/6VwTOSVK_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>20</strong>.查看集群是否启动； <br> Master节点 <br> <img src="https://images2.imgbox.com/8b/6d/VIW9lT5E_o.png" alt="这里写图片描述" title=""> <br> Slave1节点 <br> <img src="https://images2.imgbox.com/8a/d3/x8pc2BFE_o.png" alt="这里写图片描述" title=""> <br> Slave2节点 <br> <img src="https://images2.imgbox.com/a2/f1/i3fJuXRU_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>21</strong>.也可以用该命令查看： <br> <img src="https://images2.imgbox.com/1d/f3/SaHHGTSx_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>22</strong>.通过jsp页面查看：<a href="hTTP://master:50030" rel="nofollow noopener noreferrer" target="_blank">hTTP://master:50030</a> <br> <a href="http://master:50070" rel="nofollow noopener noreferrer" target="_blank">http://master:50070</a></p> 
<p><img src="https://images2.imgbox.com/78/8b/RCu9LBHH_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/f1/a9/axdlh6pG_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>23</strong>.至此关于集群搭建结束。</p> 
<p><strong>二.常见问题及解决思路</strong></p> 
<p><strong>1</strong>.当重复多次安装时,务必将之前安装目录下namenode目录删除,否则可能出现文件系统序列号不一致的问题。</p> 
<p><strong>2</strong>.记得实验环境下，最好关闭本机防火墙,因为涉及到ssh远程登录访问的问题。</p> 
<p><strong>3</strong>.出现问题时,如果以上2个思路仍然不能解决问题时,我们需要到hadoop安装目录下找到log日志,在这里你可以看到所有节点上进程启动的信息,将找到的对应的错误信息baidu一下,基本可以找到解决方案。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/998122069c2af490e4224c48eaaca8f5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">弹窗地址1</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/45123279f1e8b600bb9b32526f0f5133/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">c# panel 自动调整大小</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>