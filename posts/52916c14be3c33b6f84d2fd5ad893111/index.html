<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>J2EE之java的注解 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/52916c14be3c33b6f84d2fd5ad893111/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="J2EE之java的注解">
  <meta property="og:description" content="J2EE之java的注解 例子： JDK自带的注解：
Person.java:
package com.ann.test; public interface Person { public String name(); public int age(); @Deprecated //表示方法过时 public void sing(); } Child.java:
package com.ann.test; public class Child implements Person{ @Override // 表示被重写 public String name() { // TODO Auto-generated method stub return null; } @Override public int age() { // TODO Auto-generated method stub return 0; } @Override public void sing() { // TODO Auto-generated method stub } } Test.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2016-10-25T14:05:45+08:00">
    <meta property="article:modified_time" content="2016-10-25T14:05:45+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">J2EE之java的注解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2 id="j2ee之java的注解">J2EE之java的注解</h2> 
<p><img src="https://images2.imgbox.com/4b/34/uWjrc4Hp_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/73/da/HBdyWxXz_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/fa/57/Wzomiwxo_o.png" alt="这里写图片描述" title=""></p> 
<h3 id="例子"><strong>例子：</strong></h3> 
<p><strong>JDK自带的注解：</strong></p> 
<p>Person.java:</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.ann.test;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Person</span> {<!-- --></span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">name</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">age</span>();


    <span class="hljs-annotation">@Deprecated</span>
    <span class="hljs-comment">//表示方法过时</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sing</span>();
}
</code></pre> 
<p>Child.java:</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.ann.test;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Person</span>{<!-- --></span>

    <span class="hljs-annotation">@Override</span>
<span class="hljs-comment">//  表示被重写</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">name</span>() {
        <span class="hljs-comment">// TODO Auto-generated method stub</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">age</span>() {
        <span class="hljs-comment">// TODO Auto-generated method stub</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sing</span>() {
        <span class="hljs-comment">// TODO Auto-generated method stub</span>

    }

}
</code></pre> 
<p>Test.java:</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.ann.test;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> {<!-- --></span>
<span class="hljs-comment">//  @SuppressWarnings("deprecation")：表示忽略警告</span>
    <span class="hljs-annotation">@SuppressWarnings</span>(<span class="hljs-string">"deprecation"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sing</span>(){
        Person p=<span class="hljs-keyword">new</span> Child();
        <span class="hljs-comment">//表示sing()方法已经过时了</span>
        p.sing();
    }
}
</code></pre> 
<p><strong>常见的第三方注解的优势，以@Autowired注解为例：</strong> <br> UserManagerImpl.java:</p> 
<pre class="prettyprint"><code class=" hljs axapta">package com.ann.test;


<span class="hljs-comment">//类的实现</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserManagerImpl</span> <span class="hljs-inheritance"><span class="hljs-keyword">implements</span></span> <span class="hljs-title">UserManager</span>{<!-- --></span>
    <span class="hljs-keyword">private</span> UserDao userDao;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> setUserDao(UserDao userDao){
        <span class="hljs-keyword">this</span>.userDao=userDao;
    }
    ....
}

<span class="hljs-comment">//配置文件</span>
&lt;bean id=<span class="hljs-string">"userManagerImpl"</span> <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">com</span>.<span class="hljs-title">ann</span>.<span class="hljs-title">test</span>.<span class="hljs-title">UserManagerImpl</span>"&gt;
    &lt;<span class="hljs-title">property</span> <span class="hljs-title">name</span>="<span class="hljs-title">userDao</span>" <span class="hljs-title">ref</span>="<span class="hljs-title">userDao</span>" /&gt;
&lt;/<span class="hljs-title">bean</span>&gt;
&lt;<span class="hljs-title">bean</span> <span class="hljs-title">id</span>="<span class="hljs-title">UserManager</span>" <span class="hljs-title">class</span>="<span class="hljs-title">com</span>.<span class="hljs-title">ann</span>.<span class="hljs-title">test</span>.<span class="hljs-title">UserManager</span>"&gt;
    &lt;<span class="hljs-title">property</span> <span class="hljs-title">name</span>="<span class="hljs-title">sessionFactory</span>" <span class="hljs-title">ref</span>="<span class="hljs-title">mySessionFactory</span>" /&gt;
&lt;/<span class="hljs-title">bean</span>&gt;


//引入@<span class="hljs-title">Autowired</span>注解
<span class="hljs-title">public</span> <span class="hljs-title">class</span> <span class="hljs-title">UserManagerImpl</span> <span class="hljs-inheritance"><span class="hljs-keyword">implements</span></span> <span class="hljs-title">UserManager</span>{<!-- --></span>
    @Autowired
    <span class="hljs-keyword">private</span> UserDao userDao;
    ...
}</code></pre> 
<h4 id="使用第三方注解会使代码变得简洁">使用第三方注解会使代码变得简洁</h4> 
<p><strong>注解的分类：</strong> <br> <img src="https://images2.imgbox.com/32/cf/3IBarbZr_o.png" alt="这里写图片描述" title=""> <br> <img src="https://images2.imgbox.com/71/39/12DhVHvH_o.png" alt="这里写图片描述" title=""> <br> <img src="https://images2.imgbox.com/5f/eb/GmTVinLs_o.png" alt="这里写图片描述" title=""> <br> <img src="https://images2.imgbox.com/72/ad/IDbvCUHB_o.png" alt="这里写图片描述" title=""></p> 
<h3 id="自定义注解">自定义注解：</h3> 
<h4 id="自定义注解的说明">自定义注解的说明：</h4> 
<p><img src="https://images2.imgbox.com/48/5e/7NqxtmJS_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/70/f0/Lbp6KIGo_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/db/5c/fgmbvRrP_o.png" alt="这里写图片描述" title=""></p> 
<h4 id="元注解的说明">元注解的说明：</h4> 
<p><img src="https://images2.imgbox.com/33/ae/3RsrjLWl_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/e5/f9/MmSfOpRj_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/f8/c8/QjWVtRGj_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/28/64/WK9016Ct_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/04/a9/6vABZtEI_o.png" alt="这里写图片描述" title=""></p> 
<h4 id="使用自定义注解">使用自定义注解：</h4> 
<p><img src="https://images2.imgbox.com/3e/9c/dUMGe8sX_o.png" alt="这里写图片描述" title=""></p> 
<p>代码： <br> Description.java：</p> 
<pre class="prettyprint"><code class=" hljs avrasm">package <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.ann</span><span class="hljs-preprocessor">.test</span><span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.annotation</span><span class="hljs-preprocessor">.Documented</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.annotation</span><span class="hljs-preprocessor">.ElementType</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.annotation</span><span class="hljs-preprocessor">.Inherited</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.annotation</span><span class="hljs-preprocessor">.Retention</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.annotation</span><span class="hljs-preprocessor">.RetentionPolicy</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.annotation</span><span class="hljs-preprocessor">.Target</span><span class="hljs-comment">;</span>

//METHOD：指定方法就只能用在方法上，TYPE：指定类只能用在类上
@Target({ElementType<span class="hljs-preprocessor">.METHOD</span>,ElementType<span class="hljs-preprocessor">.TYPE</span>})
@Retention(RetentionPolicy<span class="hljs-preprocessor">.RUNTIME</span>)
@Inherited
@Documented

public @interface Description {
//  两个参数
//  String desc()<span class="hljs-comment">;</span>
//  String author()<span class="hljs-comment">;</span>
//  int age() default <span class="hljs-number">18</span><span class="hljs-comment">;</span>
    String value()<span class="hljs-comment">;</span>
}
</code></pre> 
<p>Child.java:</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.ann.test;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Person</span>{<!-- --></span>

    <span class="hljs-annotation">@Override</span>
<span class="hljs-comment">//  @Description(desc="the name method" ,author="mooc boy") 一个参数</span>
    <span class="hljs-annotation">@Description</span>(<span class="hljs-string">"mooc boy"</span>)
<span class="hljs-comment">//  表示被重写</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">name</span>() {
        <span class="hljs-comment">// TODO Auto-generated method stub</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">age</span>() {
        <span class="hljs-comment">// TODO Auto-generated method stub</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sing</span>() {
        <span class="hljs-comment">// TODO Auto-generated method stub</span>

    }

}
</code></pre> 
<p>**</p> 
<h3 id="解析注解">解析注解：</h3> 
<p>** <br> <img src="https://images2.imgbox.com/e0/e9/ln4MUj3u_o.png" alt="这里写图片描述" title=""></p> 
<p>代码： <br> Person.java:</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.ann.test;

<span class="hljs-annotation">@Description</span>(<span class="hljs-string">"i am interface"</span>)<span class="hljs-comment">//会被继承</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Person</span> {<!-- --></span>

    <span class="hljs-annotation">@Description</span>(<span class="hljs-string">"i am interface method"</span>)<span class="hljs-comment">//不会被继承</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">name</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">age</span>();


    <span class="hljs-annotation">@Deprecated</span>
    <span class="hljs-comment">//表示方法过时</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sing</span>();
}
</code></pre> 
<p>Child.java:</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.ann.test;

<span class="hljs-comment">//@Description("I am class annotation")</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Person</span>{<!-- --></span>

    <span class="hljs-annotation">@Override</span>
<span class="hljs-comment">//  @Description(desc="the name method" ,author="mooc boy") 一个参数</span>
<span class="hljs-comment">//  @Description("I am method annotation")</span>
<span class="hljs-comment">//  表示被重写</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">name</span>() {
        <span class="hljs-comment">// TODO Auto-generated method stub</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">age</span>() {
        <span class="hljs-comment">// TODO Auto-generated method stub</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sing</span>() {
        <span class="hljs-comment">// TODO Auto-generated method stub</span>

    }

}
</code></pre> 
<p>Description.java:</p> 
<pre class="prettyprint"><code class=" hljs avrasm">package <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.ann</span><span class="hljs-preprocessor">.test</span><span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.annotation</span><span class="hljs-preprocessor">.Documented</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.annotation</span><span class="hljs-preprocessor">.ElementType</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.annotation</span><span class="hljs-preprocessor">.Inherited</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.annotation</span><span class="hljs-preprocessor">.Retention</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.annotation</span><span class="hljs-preprocessor">.RetentionPolicy</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.annotation</span><span class="hljs-preprocessor">.Target</span><span class="hljs-comment">;</span>

//METHOD：指定方法就只能用在方法上，TYPE：指定类只能用在类上
@Target({ElementType<span class="hljs-preprocessor">.METHOD</span>,ElementType<span class="hljs-preprocessor">.TYPE</span>})
@Retention(RetentionPolicy<span class="hljs-preprocessor">.RUNTIME</span>)
//@Retention(RetentionPolicy<span class="hljs-preprocessor">.SOURCE</span>)源码的时候存在，编译后看不在注解
//@Retention(RetentionPolicy<span class="hljs-preprocessor">.CLASS</span>)也取不到
@Inherited//继承
@Documented

public @interface Description {
//  两个参数
//  String desc()<span class="hljs-comment">;</span>
//  String author()<span class="hljs-comment">;</span>
//  int age() default <span class="hljs-number">18</span><span class="hljs-comment">;</span>
    String value()<span class="hljs-comment">;</span>
}
</code></pre> 
<p>PersonAnn.java:</p> 
<pre class="prettyprint"><code class=" hljs oxygene">package com.ann.test;

import java.lang.annotation.Annotation;
import java.lang.reflect.<span class="hljs-keyword">Method</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> PersonAnn <span class="hljs-comment">{
    public static void main(String[] args) {
        //1.使用类加载器加载类
        try {
            Class c=Class.forName("com.ann.test.Child");
            //2.找到类上面的注解
            boolean isExist=c.isAnnotationPresent(Description.class);
            if(isExist){
                //3.拿到注解实例
                Description d=(Description)c.getAnnotation(Description.class);
                System.out.println(d.value());
            }</span>

            <span class="hljs-comment">//4.找到方法上的注解</span>
            <span class="hljs-function"><span class="hljs-keyword">Method</span>[] <span class="hljs-title">ms</span>=<span class="hljs-title">c</span>.<span class="hljs-title">getMethods</span><span class="hljs-params">()</span>;</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-function"><span class="hljs-keyword">Method</span> <span class="hljs-title">method</span> :</span> ms) <span class="hljs-comment">{
                boolean isMExist=method.isAnnotationPresent(Description.class);
                if(isMExist){
                    Description d=(Description)method.getAnnotation(Description.class);
                    System.out.println(d.value());
                }</span>
            }


            <span class="hljs-comment">//另外一种解析方法</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-function"><span class="hljs-keyword">Method</span> <span class="hljs-title">method</span> :</span> ms) <span class="hljs-comment">{
                Annotation[] as=method.getAnnotations();
                for (Annotation annotation : as) {
                    if(annotation instanceof Description){
                        Description d=(Description)annotation;
                        System.out.println(d.value());
                    }</span>
                }
            }
        } catch (ClassNotFoundException e) <span class="hljs-comment">{
            e.printStackTrace();
        }</span>
    }
}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/da106a708ebf59b1efeb4d2dac090294/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JVM常见面试题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6b09f4d1eb31716c1b3a9025e9f90ac0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">J2EE之java自定义注解在项目中的使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>