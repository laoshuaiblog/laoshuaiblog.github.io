<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>转：python之qrcode模块生成二维码 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/502a538a4e10510f164a42199ad55fad/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="转：python之qrcode模块生成二维码">
  <meta property="og:description" content="用Python的qrcode包来生成二维码很简单
一、前期准备： pip install qrcode
qrcode 依赖 Image 这个包：
pip install Image
二、安装好之后就可以通过代码实现二维码了 1. 简单生成二维码： import qrcode # 模块导入 # 调用qrcode的make()方法传入url或者想要展示的内容 img = qrcode.make(&#39;http://www.baidu.com&#39;) # 写入文件 with open(&#39;test.png&#39;, &#39;wb&#39;) as f: img.save(f) 生成的二维码：
此处并没有使用add_data()添加数据，make_image()生成二维码，而是使用qrcode.make(data)的方式获取im对象。qrcode.make()是qrcode提供简单调用接口。
2. 正常生成二维码的步骤： 创建QRCode对象add_data()添加数据make_image()创建二维码（返回im类型的图片对象）自动打开图片，im.show() 3.QRCode参数详细说明： version: 一个整数，范围为1到40，表示二维码的大小（最小值是1，是个12×12的矩阵），如果想让程序自动生成，将值设置为 None 并使用 fit=True 参数即可。error_correction: 二维码的纠错范围，可以选择4个常量：
··1. ERROR_CORRECT_L 7%以下的错误会被纠正
··2. ERROR_CORRECT_M (default) 15%以下的错误会被纠正
··3. ERROR_CORRECT_Q 25 %以下的错误会被纠正
··4. ERROR_CORRECT_H. 30%以下的错误会被纠正boxsize: 每个点（方块）中的像素个数border: 二维码距图像外围边框距离，默认为4，而且相关规定最小为4 4.参数配置后生成自定制二维码 import qrcode data = &#39;http://www.baidu.com/&#39; img_file = r&#39;保存路径&#39; # 实例化QRCode生成qr对象 qr = qrcode.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-09-01T16:44:05+08:00">
    <meta property="article:modified_time" content="2022-09-01T16:44:05+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">转：python之qrcode模块生成二维码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>用Python的qrcode包来生成二维码很简单</p> 
<h2><a id="_1"></a>一、前期准备：</h2> 
<p><code>pip install qrcode</code><br> qrcode 依赖 Image 这个包：</p> 
<p><code>pip install Image</code></p> 
<h2><a id="_6"></a>二、安装好之后就可以通过代码实现二维码了</h2> 
<h3><a id="1__7"></a>1. 简单生成二维码：</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> qrcode   <span class="token comment"># 模块导入</span>
<span class="token comment"># 调用qrcode的make()方法传入url或者想要展示的内容</span>
img <span class="token operator">=</span> qrcode<span class="token punctuation">.</span>make<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com'</span><span class="token punctuation">)</span>
<span class="token comment"># 写入文件</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.png'</span><span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    img<span class="token punctuation">.</span>save<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
</code></pre> 
<p>生成的二维码：<br> <img src="https://images2.imgbox.com/38/46/zoOKJj91_o.png" alt="在这里插入图片描述"></p> 
<p>此处并没有使用add_data()添加数据，make_image()生成二维码，而是使用qrcode.make(data)的方式获取im对象。qrcode.make()是qrcode提供简单调用接口。</p> 
<h3><a id="2__21"></a>2. 正常生成二维码的步骤：</h3> 
<ol><li>创建QRCode对象</li><li>add_data()添加数据</li><li>make_image()创建二维码（返回im类型的图片对象）</li><li>自动打开图片，im.show()</li></ol> 
<h3><a id="3QRCode_28"></a>3.QRCode参数详细说明：</h3> 
<ul><li>version: 一个整数，范围为1到40，表示二维码的大小（最小值是1，是个12×12的矩阵），如果想让程序自动生成，将值设置为 None 并使用 fit=True 参数即可。</li><li>error_correction: 二维码的纠错范围，可以选择4个常量：<br> ··1. ERROR_CORRECT_L 7%以下的错误会被纠正<br> ··2. ERROR_CORRECT_M (default) 15%以下的错误会被纠正<br> ··3. ERROR_CORRECT_Q 25 %以下的错误会被纠正<br> ··4. ERROR_CORRECT_H. 30%以下的错误会被纠正</li><li>boxsize: 每个点（方块）中的像素个数</li><li>border: 二维码距图像外围边框距离，默认为4，而且相关规定最小为4</li></ul> 
<h3><a id="4_38"></a>4.参数配置后生成自定制二维码</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> qrcode
 
data <span class="token operator">=</span> <span class="token string">'http://www.baidu.com/'</span>
img_file <span class="token operator">=</span> <span class="token string">r'保存路径'</span>

<span class="token comment"># 实例化QRCode生成qr对象</span>
qr <span class="token operator">=</span> qrcode<span class="token punctuation">.</span>QRCode<span class="token punctuation">(</span>
    version<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
    error_correction<span class="token operator">=</span>qrcode<span class="token punctuation">.</span>constants<span class="token punctuation">.</span>ERROR_CORRECT_H<span class="token punctuation">,</span>
    box_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>
    border<span class="token operator">=</span><span class="token number">4</span>
<span class="token punctuation">)</span>

<span class="token comment"># 传入数据</span>
qr<span class="token punctuation">.</span>add_data<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
 
qr<span class="token punctuation">.</span>make<span class="token punctuation">(</span>fit<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
 
<span class="token comment"># 生成二维码</span>
img <span class="token operator">=</span> qr<span class="token punctuation">.</span>make_image<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
<span class="token comment"># 保存二维码</span>
img<span class="token punctuation">.</span>save<span class="token punctuation">(</span>img_file<span class="token punctuation">)</span>
<span class="token comment"># 展示二维码</span>
img<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_66"></a>三、额外添加</h2> 
<p>往往我们看到的二维码中间都有一张图片或者用户头像，如何才能生成这样一张二维码？</p> 
<blockquote> 
 <p>利用PIL库中image模块的paste函数<br> <code>img.paste(path,where,mask=None)</code><br> 其中，img为image对象；path为所添加图片；where为tuple,如：(x,y)，表示图片所在二维码的横纵坐标</p> 
</blockquote> 
<pre><code class="prism language-python"><span class="token keyword">import</span> qrcode
<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
 
 
<span class="token keyword">def</span> <span class="token function">getQRcode</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> file_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    qr <span class="token operator">=</span> qrcode<span class="token punctuation">.</span>QRCode<span class="token punctuation">(</span>
        version<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
        error_correction<span class="token operator">=</span>qrcode<span class="token punctuation">.</span>constants<span class="token punctuation">.</span>ERROR_CORRECT_H<span class="token punctuation">,</span>
        box_size<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>
        border<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
 
    <span class="token comment"># 添加数据</span>
    qr<span class="token punctuation">.</span>add_data<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token comment"># 填充数据</span>
    qr<span class="token punctuation">.</span>make<span class="token punctuation">(</span>fit<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token comment"># 生成图片</span>
    img <span class="token operator">=</span> qr<span class="token punctuation">.</span>make_image<span class="token punctuation">(</span>fill_color<span class="token operator">=</span><span class="token string">"green"</span><span class="token punctuation">,</span> back_color<span class="token operator">=</span><span class="token string">"white"</span><span class="token punctuation">)</span>
 
    <span class="token comment"># 添加logo，打开logo照片</span>
    icon <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"1.jpg"</span><span class="token punctuation">)</span>
    <span class="token comment"># 获取图片的宽高</span>
    img_w<span class="token punctuation">,</span> img_h <span class="token operator">=</span> img<span class="token punctuation">.</span>size
    <span class="token comment"># 参数设置logo的大小</span>
    factor <span class="token operator">=</span> <span class="token number">6</span>
    size_w <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>img_w <span class="token operator">/</span> factor<span class="token punctuation">)</span>
    size_h <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>img_h <span class="token operator">/</span> factor<span class="token punctuation">)</span>
    icon_w<span class="token punctuation">,</span> icon_h <span class="token operator">=</span> icon<span class="token punctuation">.</span>size
    <span class="token keyword">if</span> icon_w <span class="token operator">&gt;</span> size_w<span class="token punctuation">:</span>
        icon_w <span class="token operator">=</span> size_w
    <span class="token keyword">if</span> icon_h <span class="token operator">&gt;</span> size_h<span class="token punctuation">:</span>
        icon_h <span class="token operator">=</span> size_h
    <span class="token comment"># 重新设置logo的尺寸</span>
    icon <span class="token operator">=</span> icon<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span>icon_w<span class="token punctuation">,</span> icon_h<span class="token punctuation">)</span><span class="token punctuation">,</span> Image<span class="token punctuation">.</span>ANTIALIAS<span class="token punctuation">)</span>
    <span class="token comment"># 得到画图的x，y坐标，居中显示</span>
    w <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">(</span>img_w <span class="token operator">-</span> icon_w<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
    h <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">(</span>img_h <span class="token operator">-</span> icon_h<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token comment"># 黏贴logo照</span>
    img<span class="token punctuation">.</span>paste<span class="token punctuation">(</span>icon<span class="token punctuation">,</span> <span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">,</span> mask<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
    <span class="token comment"># 终端显示图片</span>
    plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 保存img</span>
    img<span class="token punctuation">.</span>save<span class="token punctuation">(</span>file_name<span class="token punctuation">)</span>
    <span class="token keyword">return</span> img
 
 
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    getQRcode<span class="token punctuation">(</span><span class="token string">"世情薄，人情恶，雨送黄昏花易落。晓风干，泪痕残，欲笺心事，独语斜阑。"</span>
              <span class="token string">"难，难，难！人成各，今非昨，病魂常似秋千索。角声寒，夜阑珊，怕人寻问，咽泪装欢。瞒，瞒，瞒！"</span><span class="token punctuation">,</span> <span class="token string">'my.png'</span><span class="token punctuation">)</span>

</code></pre> 
<p>最后，送你一首宋词，扫码免费得！！！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/590f622d737b3598bd76d9b91fa16525/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">操作系统—— I/O 相关知识</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5f5ae4f6e08447feb8a5ba81a020f198/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Putty连接登录Linux .ppk</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>