<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用log4j控制台报错 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/559a53110fd3f34ab6837fb949c146c4/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="使用log4j控制台报错">
  <meta property="og:description" content="log4j:ERROR Could not instantiate class [log4j].
java.lang.ClassNotFoundException: log4j
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:425)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:191)
at org.apache.log4j.helpers.Loader.loadClass(Loader.java:198)
at org.apache.log4j.helpers.OptionConverter.instantiateByClassName(OptionConverter.java:327)
at org.apache.log4j.helpers.OptionConverter.instantiateByKey(OptionConverter.java:124)
at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:785)
at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:768)
at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:648)
at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:514)
at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:580)
at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:526)
at org.apache.log4j.LogManager.&amp;lt;clinit&amp;gt;(LogManager.java:127)
at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:66)
at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:270)
at org.apache.ibatis.logging.slf4j.Slf4jImpl.&amp;lt;init&amp;gt;(Slf4jImpl.java:33)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:526)
at org.apache.ibatis.logging.LogFactory.setImplementation(LogFactory.java:127)
at org.apache.ibatis.logging.LogFactory.useSlf4jLogging(LogFactory.java:87)
at org.apache.ibatis.logging.LogFactory$1.run(LogFactory.java:36)">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2018-10-18T21:43:41+08:00">
    <meta property="article:modified_time" content="2018-10-18T21:43:41+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用log4j控制台报错</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>log4j:ERROR Could not instantiate class [log4j].<br> java.lang.ClassNotFoundException: log4j<br>     at java.net.URLClassLoader$1.run(URLClassLoader.java:366)<br>     at java.net.URLClassLoader$1.run(URLClassLoader.java:355)<br>     at java.security.AccessController.doPrivileged(Native Method)<br>     at java.net.URLClassLoader.findClass(URLClassLoader.java:354)<br>     at java.lang.ClassLoader.loadClass(ClassLoader.java:425)<br>     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)<br>     at java.lang.ClassLoader.loadClass(ClassLoader.java:358)<br>     at java.lang.Class.forName0(Native Method)<br>     at java.lang.Class.forName(Class.java:191)<br>     at org.apache.log4j.helpers.Loader.loadClass(Loader.java:198)<br>     at org.apache.log4j.helpers.OptionConverter.instantiateByClassName(OptionConverter.java:327)<br>     at org.apache.log4j.helpers.OptionConverter.instantiateByKey(OptionConverter.java:124)<br>     at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:785)<br>     at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:768)<br>     at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:648)<br>     at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:514)<br>     at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:580)<br>     at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:526)<br>     at org.apache.log4j.LogManager.&lt;clinit&gt;(LogManager.java:127)<br>     at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:66)<br>     at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:270)<br>     at org.apache.ibatis.logging.slf4j.Slf4jImpl.&lt;init&gt;(Slf4jImpl.java:33)<br>     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)<br>     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)<br>     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)<br>     at java.lang.reflect.Constructor.newInstance(Constructor.java:526)<br>     at org.apache.ibatis.logging.LogFactory.setImplementation(LogFactory.java:127)<br>     at org.apache.ibatis.logging.LogFactory.useSlf4jLogging(LogFactory.java:87)<br>     at org.apache.ibatis.logging.LogFactory$1.run(LogFactory.java:36)<br>     at org.apache.ibatis.logging.LogFactory.tryImplementation(LogFactory.java:117)<br>     at org.apache.ibatis.logging.LogFactory.&lt;clinit&gt;(LogFactory.java:34)<br>     at org.apache.ibatis.datasource.pooled.PooledDataSource.&lt;clinit&gt;(PooledDataSource.java:42)<br>     at org.apache.ibatis.datasource.pooled.PooledDataSourceFactory.&lt;init&gt;(PooledDataSourceFactory.java:26)<br>     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)<br>     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)<br>     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)<br>     at java.lang.reflect.Constructor.newInstance(Constructor.java:526)<br>     at java.lang.Class.newInstance(Class.java:379)<br>     at org.apache.ibatis.builder.xml.XMLConfigBuilder.dataSourceElement(XMLConfigBuilder.java:274)<br>     at org.apache.ibatis.builder.xml.XMLConfigBuilder.environmentsElement(XMLConfigBuilder.java:232)<br>     at org.apache.ibatis.builder.xml.XMLConfigBuilder.parseConfiguration(XMLConfigBuilder.java:104)<br>     at org.apache.ibatis.builder.xml.XMLConfigBuilder.parse(XMLConfigBuilder.java:92)<br>     at org.apache.ibatis.session.SqlSessionFactoryBuilder.build(SqlSessionFactoryBuilder.java:80)<br>     at org.apache.ibatis.session.SqlSessionManager.newInstance(SqlSessionManager.java:54)<br>     at com.tradition.demo.MybatisTest.main(MybatisTest.java:25)<br> log4j:ERROR Could not instantiate appender named "keyfile".</p> 
<p>[20:43:56.953] [DEBUG] org.apache.ibatis.logging.LogFactory.setImplementation(LogFactory.java:128) Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.</p> 
<p>报错上看是缺少log4j的类，我也引用了log4j的包了，为啥还会报错呢？而且类名也不完整，结合下面控制台日志打印，说明log4j.properties配置生效了，应该是在文件中打印日志配置有问题。经过检查发现第8行配置有误，应该是log4j.appender.keyfile=org.apache.log4j.FileAppender。</p> 
<p>随便从网上找的配置，果然还要自己理解一下，不然出错都不知道哪里的问题，第10行配置也有误，汗<img alt="" class="has" height="262" src="https://images2.imgbox.com/6e/9b/CzU53qOb_o.png" width="883"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ebf3a54f377fc1eded693e017f3ceb54/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">IIDEA主题更换(快速切换)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9bbeca2f2364f89c5bcfdb039f196ce1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JDK8: java.lang.IllegalStateException: Duplicate key 1</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>