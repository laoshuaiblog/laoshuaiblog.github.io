<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>结构体，联合体，枚举详解 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/6b3ee3129cbaaa6ddf60b6af15c65d2e/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="结构体，联合体，枚举详解">
  <meta property="og:description" content="结构体，联合体，枚举详解 目录 结构体联合体枚举常量 1.结构体 在C语言中，系统已经提供了一些数据类型，比如float，int，double，char等，但是我们有时会需要更复杂的类型来描述一个数据。假如我想描述一个学生，我需要知道他的学号，姓名，性别，那么我就需要三个类型来分别保存他的信息，到时候需要信息时还得分别查找，显然这是不方便的。因此有了结构体，我们可以根据自己所需来定义数据类型。
简言之，结构体是由不同的类型数据组成的组合型数据结构。
结构体类型的声明以及定义
struct 结构体名
{
成员列表；
}结构体变量名；
这就是结构体声明的一个基本形式，写个结构体给大家看看。
struct students { char name [20]; int xuehao[20]; char xinbie[5]; }a,b,c; struct students 为结构体名，这相当于，我们熟知的int ，char，float，就是类型的意思。
{ }括号里面的是成员列表，需要注意的是这是结构体声明，我们不可以在里面赋值，这从逻辑上就是错误的，我们想要赋值，只能给变量赋值，怎么能给类型赋值呢。
然后是，a，b，c 这是结构体变量名，我们可以对它们进行赋值。
还要提一嘴的是一种特殊的定义，就是不加结构体名。
struct { char a[20]; int b; }w,q; 这样定义会导致一种情况，就是无法再继续定义其他结构体变量，就是说有且仅有w，q两个变量。
结构体的初始化和引用
结构体的初始化有两种方式，一种是再定义结构体时进行初始化，一种是建立结构体变量，在去初始化。
struct students { char name [20]; int xuehao[20]; char xinbie[5]; }a={&#34;张三&#34;，12345667，&#34;男&#34;}; int main() { struct students b={&#34;李四&#34;，233244，&#34;男&#34;}； return 0; } 这两种方式都可以，唯一的区别在于，a是全局变量，b是临时变量。
结构体的引用也有两种方式一种是直接引用，另一种是通过指针来引用。
struct students { char name [20]; int xuehao[20]; char xinbie[5]; }a={&#34;">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-10-05T17:44:23+08:00">
    <meta property="article:modified_time" content="2021-10-05T17:44:23+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">结构体，联合体，枚举详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>结构体，联合体，枚举详解</h3> 
<h4><a id="_2"></a>目录</h4> 
<ol><li>结构体</li><li>联合体</li><li>枚举常量</li></ol> 
<hr> 
<h4><a id="1_10"></a>1.结构体</h4> 
<p>在C语言中，系统已经提供了一些数据类型，比如float，int，double，char等，但是我们有时会需要更复杂的类型来描述一个数据。假如我想描述一个学生，我需要知道他的学号，姓名，性别，那么我就需要三个类型来分别保存他的信息，到时候需要信息时还得分别查找，显然这是不方便的。因此有了结构体，我们可以根据自己所需来定义数据类型。</p> 
<p>简言之，结构体是由不同的类型数据组成的组合型数据结构。</p> 
<ul><li> <p>结构体类型的声明以及定义</p> <p>struct 结构体名</p> <p>{<!-- --></p> <p>成员列表；</p> <p>}结构体变量名；</p> <p>这就是结构体声明的一个基本形式，写个结构体给大家看看。</p> <pre><code class="prism language-c"><span class="token keyword">struct</span> <span class="token class-name">students</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> name <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> xuehao<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> xinbie<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">;</span>
</code></pre> <p>struct students 为结构体名，这相当于，我们熟知的int ，char，float，就是类型的意思。</p> <p>{ }括号里面的是成员列表，需要注意的是这是结构体声明，我们不可以在里面赋值，这从逻辑上就是错误的，我们想要赋值，只能给变量赋值，怎么能给类型赋值呢。</p> <p>然后是，a，b，c 这是结构体变量名，我们可以对它们进行赋值。</p> <p>还要提一嘴的是一种特殊的定义，就是不加结构体名。</p> <pre><code class="prism language-c"><span class="token keyword">struct</span> 
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">char</span> a<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>w<span class="token punctuation">,</span>q<span class="token punctuation">;</span>
</code></pre> <p>这样定义会导致一种情况，就是无法再继续定义其他结构体变量，就是说有且仅有w，q两个变量。</p> </li><li> <p>结构体的初始化和引用</p> <p>结构体的初始化有两种方式，一种是再定义结构体时进行初始化，一种是建立结构体变量，在去初始化。</p> <pre><code class="prism language-c"><span class="token keyword">struct</span> <span class="token class-name">students</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> name <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> xuehao<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> xinbie<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>a<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"张三"</span>，<span class="token number">12345667</span>，<span class="token string">"男"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">struct</span> <span class="token class-name">students</span> b<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"李四"</span>，<span class="token number">233244</span>，<span class="token string">"男"</span><span class="token punctuation">}</span>；
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <p>这两种方式都可以，唯一的区别在于，a是全局变量，b是临时变量。</p> <p>结构体的引用也有两种方式一种是直接引用，另一种是通过指针来引用。</p> <pre><code class="prism language-c"><span class="token keyword">struct</span> <span class="token class-name">students</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> name <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> xuehao<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> xinbie<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>a<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"张三"</span>，<span class="token number">12345667</span>，<span class="token string">"男"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">struct</span> <span class="token class-name">students</span> b<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"李四"</span>，<span class="token number">233244</span>，<span class="token string">"男"</span><span class="token punctuation">}</span>；
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %d %s"</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>name<span class="token punctuation">,</span>b<span class="token punctuation">.</span>xuehao<span class="token punctuation">,</span>b<span class="token punctuation">.</span>xinbie<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <p>这就是直接引用，通过 变量名.成员名 的方式来引用，. 这个点是解引用操作符。</p> <pre><code class="prism language-c"><span class="token keyword">struct</span> <span class="token class-name">students</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> name <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> xuehao<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> xinbie<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>a<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"张三"</span>，<span class="token number">12345667</span>，<span class="token string">"男"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">struct</span> <span class="token class-name">students</span> b<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"李四"</span>，<span class="token number">233244</span>，<span class="token string">"男"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">students</span> <span class="token operator">*</span>p<span class="token operator">=</span><span class="token operator">&amp;</span>b<span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %d %s"</span><span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>name<span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>xuehao<span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>xinbie<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <p>通过指针的形式也可以引用，只不过，需要换个操作符 -&gt;。</p> </li><li> <p>结构体内存对齐</p> <p>结构体的所占内存的大小取决于什么，我们如果不清楚结构体内存对齐，那么可能会直接将结构体的成员变量所占内存加起来。其实这是错误的。接下来我们就一步一步的解析。</p> <p>先上代码。</p> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">struct</span> <span class="token class-name">a</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">char</span> b<span class="token punctuation">;</span><span class="token comment">//1字节</span>
		<span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token comment">//4字节</span>
		<span class="token keyword">char</span> c<span class="token punctuation">;</span><span class="token comment">//1字节</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <p>大家可以想一波。</p> <p>运行结果如下：<br> <img src="https://images2.imgbox.com/e8/6c/8foa2NXe_o.png" alt="在这里插入图片描述"></p> <p>这就用到内存对齐的知识解决了。先说说内存对齐的规则：</p> 
  <ol><li>第一个成员变量在与结构体偏移量为0的地址处。</li><li>其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处。</li><li>结构体总大小为最大对齐数的整数倍。</li><li>嵌套了结构体的情况，结构体的总大小就是包括嵌套结构体成员变量的最大对齐数的整数倍。</li></ol> </li></ul> 
<p>对齐数=编译器默认的一个对齐数于该成员大小的较小值。</p> 
<p>vs环境下，对齐数的默认值为8。</p> 
<p>linux中的默认值为4。</p> 
<p>了解了规则，我们来说上题：</p> 
<p><img src="https://images2.imgbox.com/b6/cf/uj7ech2F_o.png" alt="在这里插入图片描述"></p> 
<p>首先首成员变量b，放在起始位置（偏移量为0），接下来是i，int i是4个字节，和vs环境默认的对齐数8比较取得较小值，所以对齐数4，要放在偏移量为4的倍数上，所以往下走就到了偏移量为4的位置处。此处浪费了3个字节。char c的字节是1，对齐数也是1，所以直接放在int i变量下面。加起来就是9字节，根据规则总大小为最大对齐数的整数倍，所以就是12字节。</p> 
<p>再来一道题，</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">struct</span> <span class="token class-name">a</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">char</span> b<span class="token punctuation">;</span><span class="token comment">//1字节</span>
		<span class="token keyword">char</span> c<span class="token punctuation">;</span><span class="token comment">//1字节</span>
        <span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token comment">//4字节</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0a/13/3MMB9ylz_o.png" alt="在这里插入图片描述"></p> 
<p>结果是8。<br> <img src="https://images2.imgbox.com/b0/64/nGwoegXZ_o.png" alt="在这里插入图片描述"><br> 加起来是6个字节，但是总大小为最大对齐数的整数倍，所以变成了8个字节。</p> 
<p>我们也可以自己设置默认对齐数</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token function">pack</span><span class="token punctuation">(</span>默认对齐数<span class="token punctuation">)</span></span><span class="token comment">//设置默认对齐数</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token function">pack</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token comment">//取消默认对齐数</span></span>
</code></pre> 
<ul><li> <p>结构体实现位段</p> <p>位段的声明与结构体的声明类似，但需要注意两点：</p> 
  <ol><li>位段的成员必须是int，unsigned int或char</li><li>位段的成员名后边有一个冒号和一个数字</li><li>位段的空间开辟是按照需要以4个字节或1个字节的方式来开辟的</li></ol> </li></ul> 
<pre><code class="prism language-c"><span class="token keyword">struct</span> <span class="token class-name">a</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">int</span> a<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> b<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> c<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> d<span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0a/2b/cpcXQTeG_o.png" alt="在这里插入图片描述"><br> 总共8个字节。解释一下 冒号加个数字 是啥意思，就是说那个整型只占冒号后数字个比特位，也就是只存取冒号后数字个比特位。</p> 
<p>那么，我们可以写个代码画画图，来解释一下位段是如何存储以及开辟空间的。</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">struct</span> <span class="token class-name">a</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">char</span> a <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>
		<span class="token keyword">char</span> b <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">;</span>
	    <span class="token keyword">char</span> c <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">;</span>
		<span class="token keyword">char</span> d <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//初始化一下位段</span>
	<span class="token keyword">struct</span> <span class="token class-name">a</span> s <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	s<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	s<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
	s<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
	s<span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>先文字描述一下，这个位段由四个char组成，a变量只占2bite，b变量占5bite，c变量占6bite，d变量占3bite。一个字节的方式来开辟，那么就是8个比特位的方式开辟。<br> <img src="https://images2.imgbox.com/f0/59/7GiUJae7_o.png" alt="在这里插入图片描述"><br> 根据这副图我们发现它是占了三个字节，并且在内存中储存的十六进制是32，07，07。我们调试一波看看结果。<br> <img src="https://images2.imgbox.com/c4/da/r4jbAisR_o.png" alt="在这里插入图片描述"><br> 发现确实如此，所以在vs下，位段的使用规则大致我们已经了解，我做一个概述，位段根据需要以1字节或者4字节来开辟内存，接着在开辟的空间里放数据，当一字节或4字节的空间不足以容纳下一个变量时，直接再开辟一个1字节或4字节的内存来容纳变量，依次类推。</p> 
<p>vs环境下，我们已经知道位段的存储方式，但是，位段是不跨平台的，在其他平台存储方式是不确定的。</p> 
<ul><li> <p>结构体传参</p> <p>结构体的传参，可以传值（传结构体），也可以传址（传结构体的地址）。函数传参是要压栈的，这就会占用内存，所以一般都用传址的方式进行结构体传参。函数压栈我之前的博客里有写，这里不做过多赘述。</p> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
 <span class="token keyword">struct</span> <span class="token class-name">a</span> 
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a<span class="token punctuation">;</span>
	<span class="token keyword">int</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">void</span> <span class="token function">print1</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">a</span> s<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
	 <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %d\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>a<span class="token punctuation">,</span> s<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">void</span> <span class="token function">print2</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">a</span><span class="token operator">*</span> p<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
	 <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %d\n"</span><span class="token punctuation">,</span> p<span class="token operator">-&gt;</span>a<span class="token punctuation">,</span> p<span class="token operator">-&gt;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">struct</span> <span class="token class-name">a</span> s <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">print1</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//传值调用</span>
	<span class="token function">print2</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//传址调用</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li></ul> 
<p><img src="https://images2.imgbox.com/4c/68/DPDT5hk4_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2_264"></a>2.联合体</h4> 
<p>联合体又称为共用体，意思就是几个变量共用一处地址。</p> 
<ul><li> <p>联合体的声明以及定义</p> <p>union 联合体名</p> <p>{<!-- --></p> <p>成员列表；</p> <p>}变量列表；</p> <p>这是联合体的基本形式，和结构体基本一致。定义变量也和结构体一样，可以在声明时的变量列表处定义 变量，也可以用union 联合体名 变量名 定义临时变量。</p> </li></ul> 
<pre><code class="prism language-c"><span class="token keyword">union</span> a
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">char</span> g<span class="token punctuation">;</span>
  <span class="token keyword">int</span> h<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d<span class="token punctuation">;</span><span class="token comment">//全局变量</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
 <span class="token keyword">union</span> a w<span class="token punctuation">;</span><span class="token comment">//局部变量</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li> <p>联合体的特点</p> 
  <ol><li> <p>联合体的大小为最大成员变量的整数倍。</p> </li><li> <p>联合体相当于同一个地址，被多个变量共用，整型，浮点型等变量，在内存中都是二进制01010110组成的，关键在于他的读取方式不同。到底要把它看成浮点型，还是整型就看你如何使用它了。</p> </li></ol> </li></ul> 
<pre><code class="prism language-c"><span class="token keyword">union</span> a
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">float</span> g<span class="token punctuation">;</span>
  <span class="token keyword">int</span> h<span class="token punctuation">;</span>
<span class="token punctuation">}</span>b<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    b<span class="token punctuation">.</span>g<span class="token operator">=</span><span class="token number">1.0</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%f\n"</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c4/bb/xcNXekPQ_o.png" alt="在这里插入图片描述"><br> 这是代码的运行结果，你将这段二进制看出浮点型和整型取决于你的使用。</p> 
<ol start="3"><li> <p>联合体变量赋值时，最后一次赋值为最终赋值，之前的赋值都被覆盖了。还有只能给一个成员变量赋值，不能多个同时赋值。</p> <pre><code class="prism language-c"><span class="token keyword">union</span> a
<span class="token punctuation">{<!-- --></span>
 <span class="token keyword">float</span> h<span class="token punctuation">;</span>
 <span class="token keyword">char</span> j<span class="token punctuation">;</span>
 <span class="token keyword">int</span> k<span class="token punctuation">;</span>   
<span class="token punctuation">}</span>b<span class="token punctuation">;</span>
b<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1.0</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//错误</span>
b<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//正确</span>

b<span class="token punctuation">.</span>h<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span>j<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span>k<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">//最终留下的是最后赋值的2</span>
</code></pre> </li></ol> 
<h4><a id="3_334"></a>3，枚举常量</h4> 
<p>枚举常量就是将一些（不看作常量）字符定义成常量。我们知道#define a 3，就是将a定义成立了常量3。枚举的出现使定义常量变得方便，一下可以定义一堆，而且也方便调试。</p> 
<ul><li> <p>枚举的定义</p> <p>enum 枚举名</p> <p>{<!-- --></p> <p>成员列表，（用逗号隔开）</p> <p>}变量列表；</p> </li><li> <p>枚举的特点</p> <p>枚举常量就是{ }括号里的内容，系统会默认从枚举常量的大小从0依次加1，我们也可以给成员赋值，没赋值的就比前一个大1。</p> </li></ul> 
<pre><code class="prism language-c"><span class="token keyword">enum</span> <span class="token class-name">day</span>
<span class="token punctuation">{<!-- --></span>
  mon<span class="token punctuation">,</span><span class="token comment">//0</span>
  tus<span class="token punctuation">,</span><span class="token comment">//1</span>
  wed<span class="token punctuation">,</span><span class="token comment">//2</span>
  thur<span class="token punctuation">,</span><span class="token comment">//3</span>
  fri<span class="token punctuation">,</span><span class="token comment">//4</span>
  sat<span class="token punctuation">,</span><span class="token comment">//5</span>
  sun<span class="token punctuation">,</span><span class="token comment">//6 </span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">enum</span> <span class="token class-name">a</span>
<span class="token punctuation">{<!-- --></span>
  h<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>
  i<span class="token punctuation">,</span><span class="token comment">//6</span>
  j<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>
  k<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">,</span>
  l<span class="token punctuation">;</span><span class="token comment">//19  </span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<p>以上就是本期内容，希望大家可以有所收获。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c25897d7fb073cce1605efe51ea2002a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">.NET Core 之 七 EF Core（五）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/07f1b75cc4a0c6d5356f37d4ca5ed725/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IDEA2021配置mapper映射文件标签提示</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>