<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>★★★ Ubuntu中安装TensorFlow-GPU【CUDA版本要和TensorFlow对应，否则一直False】/GLIBCXX_3.4.30‘ not found - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/dae748d0c2418053daf86c5ad438ad3d/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="★★★ Ubuntu中安装TensorFlow-GPU【CUDA版本要和TensorFlow对应，否则一直False】/GLIBCXX_3.4.30‘ not found">
  <meta property="og:description" content="安装Anoconda 直接看下面的教程就行了：
WSL中安装Anaconda3并建立独立环境_wsl安装anaconda_马鹏森的博客-CSDN博客
原来一直用pytorch，今天需要使用TensorFlow，结果死活装不上GPU版本，我无语了
查看是否可以使用TensorFlow-GPU：
import tensorflow as tf # import tensorflow.compat.v1 as tf # print(tf.__version__) print(tf.test.is_gpu_available()) print(tf.config.list_physical_devices(&#39;GPU&#39;)) 一、官网查看版本关系： CUDA与cuDNN 的对应关系一定要对
Build from source on Windows | TensorFlow
二、Ubuntu安装CUDA与cuDNN CUDA Toolkit Archive | NVIDIA Developer
打开官网：CUDA Toolkit 11.2 Downloads | NVIDIA Developer
运行：
wget https://developer.download.nvidia.com/compute/cuda/11.2.0/local_installers/cuda_11.2.0_460.27.04_linux.run sudo sh cuda_11.2.0_460.27.04_linux.run --override 一直安装就可以了
2、设置环境变量
vim ~/.bashrc
export PATH=/usr/bin:$PATH
export PATH=/usr/local/cuda-11.2/bin:$PATH
export LD_LIBRARY_PATH=/usr/local/cuda-11.2/lib64:$LD_LIBRARY_PATH
source ~/.bashrc
输入 nvcc -V 验证 显示
nvcc: NVIDIA (R) Cuda compiler driver">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-06-29T09:24:58+08:00">
    <meta property="article:modified_time" content="2023-06-29T09:24:58+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">★★★ Ubuntu中安装TensorFlow-GPU【CUDA版本要和TensorFlow对应，否则一直False】/GLIBCXX_3.4.30‘ not found</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>安装Anoconda</h2> 
<p>直接看下面的教程就行了：</p> 
<p><a href="https://blog.csdn.net/weixin_43135178/article/details/124290254?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168100231416800225597141%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=168100231416800225597141&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-19-124290254-null-null.blog_rank_default&amp;utm_term=cuda&amp;spm=1018.2226.3001.4450" title="WSL中安装Anaconda3并建立独立环境_wsl安装anaconda_马鹏森的博客-CSDN博客">WSL中安装Anaconda3并建立独立环境_wsl安装anaconda_马鹏森的博客-CSDN博客</a></p> 
<hr> 
<p></p> 
<p>原来一直用pytorch，今天需要使用TensorFlow，结果死活装不上GPU版本，我无语了</p> 
<hr> 
<p>查看是否可以使用TensorFlow-GPU：</p> 
<pre><code class="language-python">import tensorflow as tf
# import tensorflow.compat.v1 as tf

# print(tf.__version__)
print(tf.test.is_gpu_available())
print(tf.config.list_physical_devices('GPU'))
</code></pre> 
<hr> 
<h2>一、官网查看版本关系：</h2> 
<p>CUDA与cuDNN 的对应关系一定要对</p> 
<p><a href="https://tensorflow.google.cn/install/source_windows?hl=en#gpu" rel="nofollow" title="Build from source on Windows  |  TensorFlow">Build from source on Windows  |  TensorFlow</a></p> 
<p><img alt="" height="450" src="https://images2.imgbox.com/8c/02/jPX8OGPd_o.png" width="574"></p> 
<p></p> 
<h2> 二、Ubuntu安装CUDA与cuDNN</h2> 
<p><a href="https://developer.nvidia.com/cuda-toolkit-archive" rel="nofollow" title="CUDA Toolkit Archive | NVIDIA Developer">CUDA Toolkit Archive | NVIDIA Developer</a></p> 
<p>打开官网：<a href="https://developer.nvidia.com/cuda-11.2.0-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=WSLUbuntu&amp;target_version=20&amp;target_type=runfilelocal" rel="nofollow" title="CUDA Toolkit 11.2 Downloads | NVIDIA Developer">CUDA Toolkit 11.2 Downloads | NVIDIA Developer</a></p> 
<p><img alt="" height="809" src="https://images2.imgbox.com/58/d9/GveKuu9h_o.png" width="850"></p> 
<p> 运行：</p> 
<pre><code class="language-python">wget https://developer.download.nvidia.com/compute/cuda/11.2.0/local_installers/cuda_11.2.0_460.27.04_linux.run</code></pre> 
<pre><code class="language-python">sudo sh cuda_11.2.0_460.27.04_linux.run --override</code></pre> 
<p>一直安装就可以了</p> 
<p><strong>2、设置环境变量</strong></p> 
<p>vim ~/.bashrc</p> 
<p>export PATH=/usr/bin:$PATH<br> export PATH=/usr/local/cuda-11.2/bin:$PATH<br> export LD_LIBRARY_PATH=/usr/local/cuda-11.2/lib64:$LD_LIBRARY_PATH</p> 
<p>source ~/.bashrc</p> 
<p></p> 
<p>输入 nvcc -V 验证 显示</p> 
<blockquote> 
 <p>nvcc: NVIDIA (R) Cuda compiler driver<br> Copyright (c) 2005-2020 NVIDIA Corporation<br> Built on Mon_Nov_30_19:08:53_PST_2020<br> Cuda compilation tools, release 11.2, V11.2.67<br> Build cuda_11.2.r11.2/compiler.29373293_0</p> 
</blockquote> 
<p></p> 
<p></p> 
<h2>二、安装cudnn8.2.1</h2> 
<p><a name="t6"></a><a id="_114"></a>打开官网：<a class="link-info" href="https://developer.nvidia.com/rdp/cudnn-archive" rel="nofollow" title="https://developer.nvidia.com/rdp/cudnn-archive">https://developer.nvidia.com/rdp/cudnn-archive</a></p> 
<p><img alt="" height="520" src="https://images2.imgbox.com/6d/10/lNq0DTj3_o.png" width="816"></p> 
<p></p> 
<p><strong> 解压cudnn</strong></p> 
<p>根据官网，和CUDA11.1配套的是CUDNN8.1.1，下载下来的是一个tar文件，那么首先需要解压这个文件，解压之后得到一个cuda文件夹，里面有lib64、include还有一个不知道什么用的文档</p> 
<p>【下面的文件夹要根据实际的情况改变】 </p> 
<pre><code class="language-python">tar -xvf cudnn-11.2-linux-x64-v8.1.1.33.tgz</code></pre> 
<pre><code class="language-python">sudo cp cuda/include/cudnn*.h /usr/local/cuda/include/</code></pre> 
<pre><code class="language-python">sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64/</code></pre> 
<p></p> 
<p>sudo cp cuda/lib64<span style="color:#fe2c24;"><strong>【这里可能是lib64或lib】</strong></span>/libcudnn* /usr/local/cuda/<span style="color:#fe2c24;"><strong>lib64【这里一定是lib64】</strong></span>/</p> 
<p></p> 
<p>查看版本号：</p> 
<pre><code class="language-python">cat /usr/local/cuda/include/cudnn_version.h | grep CUDNN_MAJOR -A 2</code></pre> 
<p><img alt="" height="156" src="https://images2.imgbox.com/4b/d2/pAZnzx3i_o.png" width="893"></p> 
<p><span style="color:#fe2c24;"><strong> 8.1.1</strong></span></p> 
<p></p> 
<hr> 
<p>下面直接pip就可以了，需要什么pip install tensorflow-gpu，因为pip install tensorflow就包含了GPU了</p> 
<pre><code class="language-python">pip install tensorflow==2.6.0</code></pre> 
<p></p> 
<hr> 
<p>如果出现了下面的问题：</p> 
<h2><a href="https://stackoverflow.com/questions/72540359/glibcxx-3-4-30-not-found-for-librosa-in-conda-virtual-environment-after-tryin" rel="nofollow" title="'GLIBCXX_3.4.30' not found for librosa ">'GLIBCXX_3.4.30' not found for librosa </a></h2> 
<p>问题解决：<a href="https://stackoverflow.com/questions/72540359/glibcxx-3-4-30-not-found-for-librosa-in-conda-virtual-environment-after-tryin" rel="nofollow" title="https://stackoverflow.com/questions/72540359/glibcxx-3-4-30-not-found-for-librosa-in-conda-virtual-environment-after-tryin">https://stackoverflow.com/questions/72540359/glibcxx-3-4-30-not-found-for-librosa-in-conda-virtual-environment-after-tryin</a></p> 
<pre><code>conda install -c anaconda scipy==1.9.1 </code></pre> 
<p>如果上述方法不起作用，那么使用下面方法解决：</p> 
<p><a href="https://blog.csdn.net/act50/article/details/127273947" title="解决ImportError: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.30‘ not found_act50的博客-CSDN博客 ">解决ImportError: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.30‘ not found_act50的博客-CSDN博客</a></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/998c8f8196c01c0f43bff5962014940e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Tomcat及项目部署</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4163e28d91b58bd88fc038debbc9b468/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">前端图标库（收藏备用）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>