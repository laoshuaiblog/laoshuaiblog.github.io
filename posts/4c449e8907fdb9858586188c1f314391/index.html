<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Shell脚本之流程控制语句 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/4c449e8907fdb9858586188c1f314391/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Shell脚本之流程控制语句">
  <meta property="og:description" content="条件测试语句 格式 格式1：test 条件表达式
格式2：[ 条件表达式 ]
类型 文件测试 常用的测试操作符 -d：测试是否为目录（Directory） -e：测试目录或文件是否存在（Exist） -f：测试是否为文件（File） -r：测试当前用户是否有权限读取（Read） -w：测试当前用户是否有权限写入（Write） -x：测试当前用户是否有权限执行（eXcute） 整数值比较 常用的测试操作符 -eq：等于（Equal） -ne：不等于（Not Equal） -gt：大于（Greater Than） -lt：小于（Lesser Than） -le：小于或等于（Lesser or Equal） -ge：大于或等于（Greater or Equal） 字符串比较 常用的测试操作符 =：字符串内容相同 !=：字符串内容不同，! 号表示相反的意思 -z：字符串内容为空 逻辑测试 常用的测试操作符 -a或&amp;amp;&amp;amp;：逻辑与，“而且”的意思 -o或||：逻辑或，“或者”的意思 !：逻辑否 if条件语句 格式： 单分支 if 条件测试操作 then 命令序列 fi 多分支 if 条件测试操作 then 命令序列1 else 命令序列2 fi 案例：判断学生成绩 # if 语句可以直接对命令状态进行判断，就省去了获取$?这一步！ # 如果第一个条件符合就不再向下匹配 #!/bin/bash # this check grade shell grade=$1 if [ $grade -gt 90 ];then echo &#34;">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-27T09:51:59+08:00">
    <meta property="article:modified_time" content="2024-03-27T09:51:59+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Shell脚本之流程控制语句</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>条件测试语句</h2> 
<h3>格式</h3> 
<p>格式1：test  条件表达式</p> 
<p>格式2：[  条件表达式  ]</p> 
<h3>类型</h3> 
<h4>文件测试</h4> 
<pre><code>常用的测试操作符
-d：测试是否为目录（Directory）
-e：测试目录或文件是否存在（Exist）
-f：测试是否为文件（File）
-r：测试当前用户是否有权限读取（Read）
-w：测试当前用户是否有权限写入（Write）
-x：测试当前用户是否有权限执行（eXcute）</code></pre> 
<h4> 整数值比较</h4> 
<pre><code>常用的测试操作符
-eq：等于（Equal）
-ne：不等于（Not Equal）
-gt：大于（Greater Than）
-lt：小于（Lesser Than）
-le：小于或等于（Lesser or Equal）
-ge：大于或等于（Greater or Equal）</code></pre> 
<h4>字符串比较</h4> 
<pre><code>常用的测试操作符
=：字符串内容相同
!=：字符串内容不同，! 号表示相反的意思
-z：字符串内容为空</code></pre> 
<h4>逻辑测试</h4> 
<pre><code>常用的测试操作符
-a或&amp;&amp;：逻辑与，“而且”的意思
-o或||：逻辑或，“或者”的意思
!：逻辑否
</code></pre> 
<h2>if条件语句</h2> 
<h3>格式：</h3> 
<h4>单分支</h4> 
<pre><code>if  条件测试操作  
    then   命令序列
fi</code></pre> 
<h4>多分支</h4> 
<pre><code>if  条件测试操作
    then   命令序列1
    else   命令序列2
fi
</code></pre> 
<h3>案例：判断学生成绩</h3> 
<pre><code># if 语句可以直接对命令状态进行判断，就省去了获取$?这一步！
  # 如果第一个条件符合就不再向下匹配
#!/bin/bash
  # this check grade shell
  grade=$1
  if [ $grade -gt 90 ];then
    echo "Is's very good!"
  elif [ $grade -gt 70 ];then
    echo "Is's is good!"
  elif [ $grade -ge 60 ];then
    echo "pass"
  else
    echo "no pass"
  fi
</code></pre> 
<h2>for循环语句</h2> 
<h3>格式：</h3> 
<pre><code>for 变量名 in 取值列表
do
　 命令序列
done
</code></pre> 
<h3>案例：添加用户</h3> 
<p>编写user.txt，写入要添加的用户名称，再利用for循环添加用户</p> 
<pre><code>#!/bin/bash
USERS=`cat ~/user.txt`
echo "文件中的用户有：" $USERS
for u in $USERS
do
 if [ `cat /etc/passwd | grep $u` ];then
        echo $u"用户已存在"
        echo""
else
        echo "开始新增用户 $u ":
        echo ""
        useradd $u &amp;&gt; /dev/null
        echo "123456" | passwd --stdin $u $&gt; /dev/null
fi
done
</code></pre> 
<h2>while循环语句</h2> 
<h3>格式：</h3> 
<pre><code>while 条件测试操作
do
    命令序列
done
</code></pre> 
<h3> 案例：添加用户stu1~stu20</h3> 
<pre><code>#!/bin/bash
PREFIX="stu"
i=1
while ((i&lt;=20))
do
    useradd ${PREFIX}$i
    echo "123456" | passwd --stdin ${PREFIX}$i &amp;&gt; /dev/null
    let i++
done</code></pre> 
<h2 style="background-color:transparent;">综合案例：</h2> 
<p><strong>猜商品价格游戏；通过变量RANDOM获得随机数；提示用户猜测并记录次数，猜中后退出循环</strong></p> 
<pre><code>#!/bin/bash
a=$(expr ${RANDOM} % 1000)
i=0
while true
do
  read -p "猜猜看我想的是哪个数，范围在0~999。" shu
  let i++
  if [ $shu -eq $a ];then
      if [ $i -lt 10 ];then
        echo "太强了，你猜了$i 次就猜中了，可惜没得奖励。"
      else
        echo "猜了$i 次才猜中，你还差的远呢"
      fi
    break
  elif [ $shu -lt $a ];then
        if [ $(expr $a - $shu) -le 5 ] ;then
          echo "虽然数小了，但已经很近了，你在想想"
        else
          echo "不好意思，猜的太小了"
        fi
  else
if [ $(expr $shu - $a) -le 5 ];then
         echo "虽然数大了，但已经很近了，你在考虑考虑"
       else
         echo "不好意思，猜大了，数再小点"
       fi
  fi
done</code></pre> 
<h2><img alt="" height="351" src="https://images2.imgbox.com/2b/8c/nz2NNYNO_o.png" width="1189"></h2> 
<h2>case语句</h2> 
<h3>格式：</h3> 
<pre><code>case  变量值  in
模式1)
    命令序列1
    ;;
模式2)
    命令序列2
    ;;
　……
* )
    默认命令序列
esac
</code></pre> 
<h3>案例：猜字符</h3> 
<pre><code>#!/bin/bash
read -p "请在键盘输入一个 字符 :" KEY
case $KEY in
[a-z]|[A-Z])
echo "这是字母"
;;
[0-9])
echo "这是数字"
;;
*)
echo "这是其他符号"
esac     </code></pre> 
<p><img alt="" height="124" src="https://images2.imgbox.com/62/c9/RnVRAcju_o.png" width="979"></p> 
<h3>编写系统服务脚本</h3> 
<p>使用start、stop、restart等参数来控制服务服务控制指令通过位置变量$1传入</p> 
<pre><code class="hljs">#!/bin/bash
case $1 in
        start)
           systemctl start vsftpd
          echo "开启 vsftpd"
        ;;
        stop)
          systemctl stop vsftpd
          echo "关闭 vsftpd"
        ;;
        status)
          systemctl status vsftpd
          echo "查询 vsftpd"
        ;;
        *)
	systemctl restart vsftpd
          echo "重启 vsftpd"
        ;;
esac</code></pre> 
<p><img alt="" height="146" src="https://images2.imgbox.com/a8/c4/WlhjkAU3_o.png" width="959"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9c50068a93a11ece974e162f2c8cb633/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于java多角色学生管理系统论文</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bd07b4b73282a9858f9cb1853d43f241/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Windows系统部署Net2FTP网站结合内网穿透轻松打造可公网访问个人云盘</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>