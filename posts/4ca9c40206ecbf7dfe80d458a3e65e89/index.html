<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>一篇文章入门postman接口测试 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/4ca9c40206ecbf7dfe80d458a3e65e89/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="一篇文章入门postman接口测试">
  <meta property="og:description" content="一、了解接口和接口测试 1、什么是接口? 电脑：USB，投影机(数据传输)
软件：统称APl,application,program,interface,微信提现和充值，支付宝支付，银联支付接口。(鉴权码：token,key,appkey)
2、接口包括：内部接口和外部接口 内部接口：开发人员自己开发的对自身系统提供的接口。
外部接口：开发系统调用外部的，微信，支付宝，其他的接口。
总结：接口就是软件提供给外部的一种服务。用于做数据传输。
3、软件为什么需要接口? 因为接口能够让内部的数据被外部进行修改。
4、我们为什么要做接口测试 ? (1)现在很多系统都是前后端分离，开发的进度不一样，需要把一开始开发出来的接口进行测试。
(2)基于安全考虑，前端有验证很容易绕过，直接请求接口，特别：身份证信息,银行卡，金钱交易。
(3)测试推崇的是测试左移，测试尽早的介入。
接口测试的本质：就是测试接口能否正常的交互数据，权限控制以及异常场景
5、接口测试的简介和分类 接口测试就是测试系统组件接口之间的一种测试。
分类:
测试外部接口：测试被测系统和外部系统之间的接口。(只需要测试正例即可)
测试内部接口：
1.内部接口只提供给内部系统使用。(预算系统，承保系统)(只需要测试正例即可)2.内部接口提供给外部系统使用。(测试必须非常全面，正例，各种异常场景，权限控制） 二、接口测试的流程以及用例的设计 1.拿到接口api文档(通过抓包工具获取),熟悉接口业务，接口地址，鉴权方式，入参码。
2.编写接口用例以及评审。
思路:
正例:输入正常入参，接口能够成功返回数据。
反例:
鉴权反例：鉴权码为空，鉴权码错误，鉴权码过期 参数反例：参数为空，参数类型异常，参数长度异常。 错误码覆盖：根据业务而定的。 其他错误场景：接口黑名单，接口调用次数限制，分页场景 3.编写用例和评审
4.使用接口测试工具Postman执行接口测试.
5.Postmain&#43;Newman&#43;Lenkins实现持续记成，并且输出测试报告并且发送邮件
三、接口返回数据和JSON详解 1、json格式:三组数据 {error_code:0,msg:&#34;提现成功&#34;，data:[]} error code:错误码，0代表成功， codemsg:对错误码的中文说明 data:真正的返回的数据 2.html格式 &amp;lt;html&amp;gt; &amp;lt;title&amp;gt;&amp;lt;/title&amp;gt; &amp;lt;body&amp;gt; &amp;lt;error code&amp;gt;0&amp;lt;/error code&amp;gt; ...... &amp;lt;/body&amp;gt; &amp;lt;/html&amp;gt; 3.xml格式 [ &amp;lt;?xml?version=&#34;1.0&#34; encoding=&#34;utf-8&#34;&amp;gt; &amp;lt;error code&amp;gt;0&amp;lt;/error code&amp;gt; ...... &amp;lt;/xml&amp;gt; 推荐一个网页工具在线JSON校验格式化工具（Be JSON）https://www.bejson.com/
四、接口测试协议 1、webservice协议: 接口地址: http://......?wsdl
http://192.168.12.1:8080/addUser
http://192.168.12.1:8080/delUser">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-18T23:21:12+08:00">
    <meta property="article:modified_time" content="2024-02-18T23:21:12+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">一篇文章入门postman接口测试</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="text-align:justify;">一、了解接口和接口测试</h2> 
<h4 style="margin-left:.0001pt;text-align:justify;">1、什么是接口?</h4> 
<p style="margin-left:.0001pt;text-align:justify;">电脑：USB，投影机(数据传输)</p> 
<p style="margin-left:.0001pt;text-align:justify;">软件：统称APl,application,program,interface,微信提现和充值，支付宝支付，银联支付接口。(鉴权码：token,key,appkey)</p> 
<h4 style="margin-left:.0001pt;text-align:justify;">2、接口包括：内部接口和外部接口</h4> 
<p style="margin-left:.0001pt;text-align:justify;">内部接口：开发人员自己开发的对自身系统提供的接口。</p> 
<p style="margin-left:.0001pt;text-align:justify;">外部接口：开发系统调用外部的，微信，支付宝，其他的接口。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>总结：接口就是软件提供给外部的一种服务。用于做数据传输。</strong></p> 
<h4 style="margin-left:.0001pt;text-align:justify;">3、软件为什么需要接口?</h4> 
<p style="margin-left:.0001pt;text-align:justify;">因为接口能够让内部的数据被外部进行修改。</p> 
<h4 style="margin-left:.0001pt;text-align:justify;">4、我们为什么要做接口测试 ?</h4> 
<p style="margin-left:.0001pt;text-align:justify;">(1)现在很多系统都是前后端分离，开发的进度不一样，需要把一开始开发出来的接口进行测试。</p> 
<p style="margin-left:.0001pt;text-align:justify;">(2)基于安全考虑，前端有验证很容易绕过，直接请求接口，特别：身份证信息,银行卡，金钱交易。</p> 
<p style="margin-left:.0001pt;text-align:justify;">(3)测试推崇的是测试左移，测试尽早的介入。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#be191c;"><strong>接口测试的本质：就是测试接口能否正常的交互数据，权限控制以及异常场景</strong></span></p> 
<h4>5、接口测试的简介和分类</h4> 
<p>接口测试就是测试系统组件接口之间的一种测试。</p> 
<p><strong>分类:</strong><br> 测试外部接口：测试被测系统和外部系统之间的接口。(只需要测试正例即可)</p> 
<p><strong>测试内部接口：</strong></p> 
<ul><li>1.内部接口只提供给内部系统使用。(预算系统，承保系统)(只需要测试正例即可)</li><li>2.内部接口提供给外部系统使用。(测试必须非常全面，正例，各种异常场景，权限控制）</li></ul> 
<h2>二、接口测试的流程以及用例的设计</h2> 
<p>1.拿到接口api文档(通过抓包工具获取),熟悉接口业务，接口地址，鉴权方式，入参码。</p> 
<p>2.编写接口用例以及评审。<br> 思路:<br>         正例:输入正常入参，接口能够成功返回数据。</p> 
<p>        反例:</p> 
<ul><li>        鉴权反例：鉴权码为空，鉴权码错误，鉴权码过期</li><li>        参数反例：参数为空，参数类型异常，参数长度异常。</li><li>        错误码覆盖：根据业务而定的。</li><li>        其他错误场景：接口黑名单，接口调用次数限制，分页场景</li></ul> 
<p>3.编写用例和评审</p> 
<p>4.使用接口测试工具Postman执行接口测试.</p> 
<p>5.Postmain+Newman+Lenkins实现持续记成，并且输出测试报告并且发送邮件</p> 
<h2><strong>三、接口返回数据和JSON详解</strong></h2> 
<h3><strong>1、json格式:三组数据</strong></h3> 
<pre><code>{error_code:0,msg:"提现成功"，data:[]}

error code:错误码，0代表成功，

codemsg:对错误码的中文说明

data:真正的返回的数据</code></pre> 
<h3><strong>2.html格式</strong></h3> 
<pre><code class="language-html">&lt;html&gt;
&lt;title&gt;&lt;/title&gt;
&lt;body&gt;
&lt;error code&gt;0&lt;/error code&gt;

......
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<h3>3.xml格式</h3> 
<pre><code class="language-XML">[ &lt;?xml?version="1.0" encoding="utf-8"&gt;
&lt;error code&gt;0&lt;/error code&gt;

......
&lt;/xml&gt;</code></pre> 
<p><br><a class="has-card" href="https://www.bejson.com/" rel="nofollow" title="推荐一个网页工具在线JSON校验格式化工具（Be JSON）"><span class="link-card-box"><span class="link-title">推荐一个网页工具在线JSON校验格式化工具（Be JSON）</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/ef/86/XwXkKt1h_o.png" alt="icon-default.png?t=N7T8">https://www.bejson.com/</span></span></a></p> 
<h2>四、接口测试协议</h2> 
<h3>1、webservice协议:</h3> 
<p>接口地址: http://......?wsdl<br> http://192.168.12.1:8080/addUser<br> http://192.168.12.1:8080/delUser<br> http://192.168.12.1:8080/updUser<br> http://192.168.12.1:8080/selUser<br> soap协议，wsdl<br><strong>re</strong><strong>stful规则：get获取数据，post提交数据，put修改数据,delete删除数据</strong></p> 
<h3>2.dubbo协议:</h3> 
<p>接口地址dubbo://...</p> 
<p>适用于少量数据的传输。大并发。</p> 
<h3>3.http协议:</h3> 
<p>接口地址:http://   80%</p> 
<ul><li> <p>https=http+ssl安全传输协议          端口：443</p> </li><li>http：    端口80</li></ul> 
<blockquote> 
 <p><span style="color:#be191c;"><strong>什么是http协议?</strong></span></p> 
 <p style="margin-left:0px;text-align:left;">http是超文本传输协议，主要用于浏览器和服务器之间交互数据，交互有两个部分：</p> 
 <p style="margin-left:0;text-align:left;">请求：get,post,put,delete<br> 响应：1XX信息，2XX成功，3XX重定向(跳转不传值)，4XX客户端错误，5XX服务</p> 
 <p style="margin-left:0;text-align:left;"><a href="http://t.csdnimg.cn/QD4C7" rel="nofollow" title="http和https协议详情请看这篇文章">http和https协议详情请看这篇文章</a></p> 
</blockquote> 
<h2 style="margin-left:0px;text-align:left;">五、Postman的简介，安装，注册。</h2> 
<h3 style="margin-left:0px;text-align:left;">1.客户端安装</h3> 
<p style="margin-left:0px;text-align:left;">官网地址：</p> 
<p style="margin-left:0;text-align:left;"><a class="has-card" href="https://www.postman.com/downloads/" rel="nofollow" title="Download Postman | Get Started for Free"><span class="link-card-box"><span class="link-title">Download Postman | Get Started for Free</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/ef/1f/spF1xiIy_o.png" alt="icon-default.png?t=N7T8">https://www.postman.com/downloads/</span></span></a>注册和登录Postman。</p> 
<h3 style="margin-left:0px;text-align:left;">2.Postman的界面介绍</h3> 
<p style="margin-left:0;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/85/e5/ttTP8P9Y_o.png" width="1200"></p> 
<ul><li style="margin-left:0px;text-align:left;"><strong>Home   主页</strong></li><li style="margin-left:0px;text-align:left;"><strong>workspaces 工作空间</strong></li><li style="margin-left:0px;text-align:left;"><strong>Collections 集合，项目集合</strong></li><li style="margin-left:0px;text-align:left;"><strong>Apis  api文档</strong></li><li style="margin-left:0px;text-align:left;"><strong>EnViromments  环境变量，全局变量Mock Server虚拟服务器。</strong></li><li style="margin-left:0px;text-align:left;"><strong>Monitors  监听器</strong></li><li style="margin-left:0px;text-align:left;"><strong>History  历史记录</strong></li></ul> 
<h2 style="margin-left:0px;text-align:left;">六、Postman执行接口测试</h2> 
<h3>（一）页面展示</h3> 
<p><img alt="" height="989" src="https://images2.imgbox.com/2b/25/HyFVnEl1_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/ba/8b/etXyLMLv_o.png" width="1200"></p> 
<h3 style="margin-left:0px;text-align:left;">（二）页面详解</h3> 
<p><span style="color:#e6b223;"><strong>每个功能按钮建议根据介绍自己动手点击尝试操作，就不分别展示了</strong></span></p> 
<h4 style="margin-left:0px;text-align:left;">1.请求页签</h4> 
<blockquote> 
 <p style="margin-left:0px;text-align:left;"><strong>Params：get请求传参</strong></p> 
 <p style="margin-left:0px;text-align:left;"><strong>authorization：鉴权</strong></p> 
 <p style="margin-left:0px;text-align:left;"><strong>headers：请求头</strong></p> 
 <p style="margin-left:0px;text-align:left;"><strong>Body：post请求传参</strong></p> 
 <p style="margin-left:0px;text-align:left;">        form-data：既可以传键值对参数也可以传文件</p> 
 <p style="margin-left:0px;text-align:left;">        x-www-from-urlencoded：只能够传键值对参数</p> 
 <p style="margin-left:0px;text-align:left;">        raw ：json ,text,xml,html ,javascrip</p> 
 <p style="margin-left:0px;text-align:left;">        binary：把文件以二进制的方式传参。</p> 
 <p style="margin-left:0px;text-align:left;"><strong>pre-request-script：请求之前的脚本。</strong></p> 
 <p style="margin-left:0px;text-align:left;"><strong>tests：请求之后的断言</strong></p> 
 <p style="margin-left:0px;text-align:left;"><strong>cookies：用于管理cookie信息。</strong></p> 
</blockquote> 
<h4 style="margin-left:0px;text-align:left;">2.响应页签：</h4> 
<blockquote> 
 <p style="margin-left:0px;text-align:left;"><strong>Body：接口返回的数据</strong></p> 
 <p style="margin-left:0px;text-align:left;">        Pretty：以Json，html，XML.…不同的格式查看返回的数据</p> 
 <p style="margin-left:0px;text-align:left;">        Raw：以文本的方式查看返回的数据。</p> 
 <p style="margin-left:0px;text-align:left;">        PreView：以网页的方式查看返回的教据。</p> 
 <p style="margin-left:0px;text-align:left;"><strong>Cookies：响应的Cookie信息</strong></p> 
 <p style="margin-left:0px;text-align:left;"><strong>Headers：响应头</strong></p> 
 <p style="margin-left:0px;text-align:left;"><strong>Test Results：断言的结果</strong></p> 
 <p style="margin-left:0px;text-align:left;"><strong>200：状态码</strong></p> 
 <p style="margin-left:0px;text-align:left;"><strong>OK：状态信息</strong></p> 
 <p style="margin-left:0px;text-align:left;"><strong>58MS： 响应的时间</strong></p> 
 <p style="margin-left:0px;text-align:left;"><strong>7.12KB：响应的字节数</strong></p> 
</blockquote> 
<blockquote> 
 <p style="margin-left:0px;text-align:left;"><span style="color:#e6b223;">经过前面的操作,发现了几个问题:</span></p> 
 <p style="margin-left:0px;text-align:left;"><span style="color:#e6b223;">1.接口需要手动关联</span></p> 
 <p style="margin-left:0px;text-align:left;"><span style="color:#e6b223;">2.每次发送请求都需要修改参数，而参数需要手动修改</span></p> 
 <p style="margin-left:0px;text-align:left;"><span style="color:#e6b223;">下面本文就用一个实操的案例来解决这些问题，并且介绍剩下的知识点</span></p> 
 <p style="margin-left:0px;text-align:left;"><span style="color:#0d0016;">首先，我们需要一个微信公众平台的测试号，获取鉴权码。</span></p> 
 <p style="margin-left:0px;text-align:left;">微信公众平台API文档如下链接：</p> 
 <p style="margin-left:0px;text-align:left;"><a href="https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/Get_access_token.html" rel="nofollow" title="微信开放文档">微信开放文档</a></p> 
 <p style="margin-left:0px;text-align:left;">下面的操作会用到微信公众平台提供的测试接口，如果想自己动手实操的小伙伴可以根据上述步骤申请测试号。</p> 
 <p style="margin-left:0px;text-align:left;">第一步，打开微信公众平台网址<code>https://mp.weixin.qq.com/</code>，找到开发文档，如下图所示：<br><img alt="" height="1137" src="https://images2.imgbox.com/c7/1d/Sln5mO6v_o.png" width="1200"></p> 
 <p style="margin-left:0px;text-align:left;">第二步，找到接口测试号申请，进入微信公众账号测试号申请系统，如下图所示：</p> 
 <p style="margin-left:0px;text-align:left;"><img alt="" height="587" src="https://images2.imgbox.com/91/fb/7Wibb0Vl_o.png" width="1200"></p> 
 <p style="margin-left:0px;text-align:left;">最后，微信扫一扫，获取自己微信号的appID和appsecret，下面的操作都需要用到这个鉴权码</p> 
 <p style="margin-left:0px;text-align:left;">如下图所示：<br><img alt="" height="437" src="https://images2.imgbox.com/62/94/CzuhPszI_o.png" width="1122"></p> 
</blockquote> 
<h2 style="margin-left:0px;text-align:left;">七、Postman的环境变量以及全局变量</h2> 
<p style="margin-left:0px;text-align:left;">环境变量：环境变量就是全局变量教据</p> 
<p style="margin-left:0px;text-align:left;">全局变量：全局变量是能够在任何接口里面访问的变量</p> 
<p style="margin-left:0px;text-align:left;">获取环境变量和全局变量的值通过：<span style="color:#be191c;"><strong>{<!-- -->{变量名}}</strong></span></p> 
<p style="margin-left:0px;text-align:left;">实操演示:</p> 
<blockquote> 
 <p style="margin-left:0px;text-align:left;">第一步：设置环境变量</p> 
 <p style="margin-left:0px;text-align:left;">注意：变量名必须一致,每个环境设置完都要保存</p> 
 <p style="margin-left:0px;text-align:left;"><img alt="" height="653" src="https://images2.imgbox.com/c7/45/DG5ozA6y_o.png" width="1200"></p> 
 <p style="margin-left:0px;text-align:left;">第二步：在写接口地址的时候通过<strong><span style="color:#be191c;">{<!-- -->{变量名}}</span></strong>的方式来取得环境变量的值</p> 
 <p style="margin-left:0px;text-align:left;">注意：执行前要选择对应的环境</p> 
 <p style="margin-left:0px;text-align:left;"><img alt="" height="761" src="https://images2.imgbox.com/0f/d0/nVMgilJn_o.png" width="1190"></p> 
</blockquote> 
<h2 style="margin-left:0px;text-align:left;">八、接口关联</h2> 
<h3>1.json提取器实现接口关联</h3> 
<pre><code class="language-python">//第一个接口的操作:

console.log(responseBody);

//使用json提取器提取access_token的值

//吧返回的字符串格式的数据转换成对象的形式,通过一个变量来接收

var result = JSON.parse(responseBody);

console.log(result.access_token);

//把access_token设置为全局变量

pm.globals.set("access_token", "result.access_token");

//第二个接口的操作:

使用{<!-- -->{变量名}}获取

{<!-- -->{access_token}}</code></pre> 
<p><img alt="" height="755" src="https://images2.imgbox.com/6d/d4/5jn1WAtJ_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/ef/ee/WalMPPht_o.png" width="1200"></p> 
<p><img alt="" height="1179" src="https://images2.imgbox.com/a6/96/deeN7PB6_o.png" width="1200"></p> 
<h3>2.使用正则表达式提取器实现接口关联</h3> 
<pre><code class="language-python">第一个接口的操作:

//使用正则表达式提取器实现接口关联,match匹配

var result = responseBody.match(new RegExp('"access_token":"(.*?)"'));

console.log(result[1]);

//设置为全局变量

pm.globals.set("access_token", "result[1]");

第二个接口的操作:

使用{<!-- -->{变量名}}获取

{<!-- -->{access_token}}</code></pre> 
<p><img alt="" height="1011" src="https://images2.imgbox.com/d7/3a/7E8cjQSp_o.png" width="949"></p> 
<h2>九、Postman内置动态参数以及自定义动态参数</h2> 
<p><span style="color:#e6b223;">解决了需要手动修改参数的问题</span></p> 
<h3><a name="t13"></a>1.Postman 内置动态参数</h3> 
<p>{<!-- -->{$timestamp}}    生成当前时间的时间戳<br> {<!-- -->{$randomInt}}    生成0-1000之间的随机数<br> {<!-- -->{$guid}}        生成随机GUID字符串</p> 
<p><img alt="" height="1110" src="https://images2.imgbox.com/29/6e/NAkeFa6K_o.png" width="1200"></p> 
<h3>2.自定义动态参数</h3> 
<pre><code class="language-python">第一个接口的操作:

//手动获得时间戳

var  times = Date.now();

//设置为全局变量

pm.globals.set("times",times);

第二个接口的操作:

使用{<!-- -->{变量名}}获取

{<!-- -->{times}}</code></pre> 
<p><img alt="" height="765" src="https://images2.imgbox.com/e3/98/Es69mbwK_o.png" width="888"></p> 
<h2>十、根据上文知识点实现业务闭环操作</h2> 
<p>接下来我们结合以上内容简单的实现一个业务闭环案例【实现增删改查的闭环】</p> 
<p>上文的操作中我们已经创建了:1.获取token的值接口 和 2.创建标签接口</p> 
<p>接下来我们再创建几个接口</p> 
<p>查看api文档可知,【3.辑标签接口】需要用到【2.创建标签接口】创建出的便签id，所以需要对【2.创建标签接口】进行修改，在test中设置标签id的全局变量</p> 
<pre><code class="language-python">//获得的创建的标签ID

var tag_id = responseBody.match(new RegExp('"id":(.*?),'));

console.log(tag_id[1]);

//把标签id设置为全局变量

pm.globals.set("tag_id", tag_id[1]);</code></pre> 
<p><img alt="" height="1137" src="https://images2.imgbox.com/03/8c/RbpaBUCZ_o.png" width="1200"></p> 
<h4>3.编辑标签接口</h4> 
<h4><img alt="" height="428" src="https://images2.imgbox.com/75/8c/YXBHye79_o.png" width="864"></h4> 
<h4>4.获取已经创建的标签接口</h4> 
<p><img alt="" height="528" src="https://images2.imgbox.com/bc/1b/8Yv85AiS_o.png" width="796"></p> 
<h4>5.删除标签接口</h4> 
<p><img alt="" height="466" src="https://images2.imgbox.com/df/38/NCMGVuMP_o.png" width="747"></p> 
<p>创建完成之后，我们依次执行查看效果</p> 
<h4><strong>业务闭环效果演示</strong></h4> 
<h4><img alt="" height="1200" src="https://images2.imgbox.com/20/45/c12uFqUz_o.gif" width="1200"></h4> 
<h2 style="margin-left:0px;text-align:left;">十一、Postman断言</h2> 
<p><img alt="" height="783" src="https://images2.imgbox.com/c9/28/B9i9Sypx_o.png" width="1200"></p> 
<ul><li style="margin-left:0px;text-align:left;"> <h3>常用的断言：</h3> </li><li style="margin-left:0px;text-align:left;">Status code:Code is 200 检査返回的状态码是否为200</li><li style="margin-left:0px;text-align:left;">Response body:Contains string 检查响应中包括指定字符串</li><li style="margin-left:0px;text-align:left;">Response body:Json value check 检查响应中其中json的值</li><li style="margin-left:0px;text-align:left;">Response body:is equal to a string 检查响应等于一个字符串</li><li style="margin-left:0px;text-align:left;">Response headers:Content-Type...检查是否包含响应头</li><li style="margin-left:0px;text-align:left;">Content-TypeResponse time is less than 200ms:检查请求耗时小于200ms</li></ul> 
<h3 style="margin-left:0px;text-align:left;">实操：</h3> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/d8/b7/nwqkTHdK_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/57/c4/pd4lpFGg_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;"><span style="color:#be191c;"><strong>注意:</strong></span></p> 
<p style="margin-left:0px;text-align:left;">如果使用了内置的动态参数暂时是无法使用断言的</p> 
<p style="margin-left:0px;text-align:left;">在断言中获取自定义动态参数【全局变量】的方式:</p> 
<p style="margin-left:0px;text-align:left;">1.pm.globals.get("变量名")</p> 
<p style="margin-left:0px;text-align:left;">2.globals["变量名"]</p> 
<p style="margin-left:0px;text-align:left;">3.globals.times</p> 
<h4 style="margin-left:0px;text-align:left;">效果展示：</h4> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/c6/78/vwGi1MXT_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="812" src="https://images2.imgbox.com/1a/0a/4Mz4KxYO_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="668" src="https://images2.imgbox.com/0e/a6/ZgUDNOIE_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;">其他断言自行尝试吧</p> 
<h3 style="margin-left:0px;text-align:left;">全局断言</h3> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/b7/96/rHg8YPTm_o.png" width="1200"></p> 
<ul><li style="margin-left:0px;text-align:left;"> <h2></h2> </li></ul> 
<p style="margin-left:0px;text-align:left;"></p> 
<h2 style="margin-left:0px;text-align:left;">十二、上传文件的接口</h2> 
<p>注意：那个文件最好存放在postmain的执行路径下，防止出现问题【批量上传的时候会出错】</p> 
<p><img alt="" height="1091" src="https://images2.imgbox.com/53/f6/8xxQSMf8_o.png" width="1200"></p> 
<h2 style="margin-left:0px;text-align:left;">十三、postmain批量运行用例</h2> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/e3/95/9UqXsuYY_o.png" width="1200"><img alt="" height="1200" src="https://images2.imgbox.com/cd/cf/gpLyy96P_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;"></p> 
<h2 style="margin-left:0px;text-align:left;">十四、postmain数据驱动之CSV文件和JSON文件的处理</h2> 
<p style="margin-left:0px;text-align:left;">接口测试的时候除了执行正例，还需要执行反例</p> 
<h3 style="margin-left:0px;text-align:left;">CSV文件</h3> 
<p style="margin-left:0px;text-align:left;">1、新建一个csv文件</p> 
<p style="margin-left:0px;text-align:left;">2、查看反例相对应的报错返回码</p> 
<p style="margin-left:0px;text-align:left;">这里的反例是：grant_type，appid，secret分别为空</p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="639" src="https://images2.imgbox.com/cc/b8/nsFUJJet_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;">3、编写csv文件</p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="527" src="https://images2.imgbox.com/91/61/PpFQGENQ_o.png" width="1081"></p> 
<p style="margin-left:0px;text-align:left;">4、修改，params和断言</p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="689" src="https://images2.imgbox.com/43/5c/n7TmIgLi_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="1001" src="https://images2.imgbox.com/98/a4/rjoRo0gE_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;">5、导入csv文件，执行用例，查看结果</p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="807" src="https://images2.imgbox.com/c1/74/FWIHLciu_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="737" src="https://images2.imgbox.com/cc/7d/d4KebLDa_o.png" width="1200"></p> 
<h3 style="margin-left:0px;text-align:left;">JSON文件</h3> 
<p style="margin-left:0px;text-align:left;">创建一个.json的文件</p> 
<p style="margin-left:0px;text-align:left;">注意：按照json的key:value的形式写好,注意最外层的[  ]  别忘了</p> 
<p style="margin-left:0px;text-align:left;">其他操作和csv文件的一样.</p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="737" src="https://images2.imgbox.com/00/b9/CXDhUCqp_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;"></p> 
<ul><li style="margin-left:0px;text-align:left;"> <h2>十五、测试必须带请求头的接口</h2> </li><li style="margin-left:0px;text-align:left;">发送请求,返回的响应是一个页面的这种,通常是需要带请求头取访问的接口</li><li style="margin-left:0px;text-align:left;"> <h3>操作：</h3> </li><li style="margin-left:0px;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/72/69/7wJy4Dwx_o.png" width="1200"></li><li style="margin-left:0px;text-align:left;"><li style="margin-left:0px;text-align:left;">通常使用fidder抓包，复制需要请求头</li><li style="margin-left:0px;text-align:left;"></ul> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="351" src="https://images2.imgbox.com/81/cb/Gfri0Sz5_o.png" width="1200"></p> 
<h3 style="margin-left:0px;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/28/b0/aqlIxkWx_o.gif" width="1200">常见的请求头:</h3> 
<ul><li style="margin-left:0px;text-align:left;">Host：请求的主机地址</li><li style="margin-left:0px;text-align:left;">Connection： 连接方式</li><li style="margin-left:0px;text-align:left;">Accept ：客户端接收到的数据格式</li><li style="margin-left:0px;text-align:left;">XRequested-with ：异步请求</li><li style="margin-left:0px;text-align:left;">User-Agent：客户端的用户类型</li><li style="margin-left:0px;text-align:left;">Referer：来源</li><li style="margin-left:0px;text-align:left;">Cookie：Cookie信息   </li><li style="margin-left:0px;text-align:left;">Content-Type ：请求内容的格式</li></ul> 
<p style="margin-left:0px;text-align:left;"><span style="color:#be191c;"><strong>注意：如果不知道是哪个请求头，就把所有请求头复制过来，挨个试！！</strong></span></p> 
<h2 style="margin-left:0px;text-align:left;">十六、Mock Service服务器</h2> 
<p>mock模拟</p> 
<p>在前后端分离的项目中,后端的接口还没开发完成,前端的业务需要调用后端的接口,这种情况一般使用 mock service服务器模拟后端接口</p> 
<p>1.创建Mock Service服务器</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/b6/ad/hNiSfjhK_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="1067" src="https://images2.imgbox.com/57/58/oKNYcANN_o.png" width="789"></p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="1132" src="https://images2.imgbox.com/62/2e/2yqUpEiV_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;">如果想修改返回值,可以直接修改</p> 
<p style="margin-left:0px;text-align:left;">举个栗子:  把之前设置的 success 修改成 {"error_code":0,msg:"返回成功",data:[]}</p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/8f/20/0i1w0lTL_o.png" width="1200"></p> 
<p style="margin-left:0px;text-align:left;">也可以在网页上测试一下</p> 
<p style="margin-left:0px;text-align:left;">服务端地址 + 自己设置的路径 </p> 
<p style="margin-left:0px;text-align:left;"><a href="https://eb090e8b-7c68-4325-8a76-ef5c90bf3a75.mock.pstmn.io" rel="nofollow" title="https://eb090e8b-7c68-4325-8a76-ef5c90bf3a75.mock.pstmn.io">https://eb090e8b-7c68-4325-8a76-ef5c90bf3a75.mock.pstmn.io</a>/test</p> 
<p style="margin-left:0px;text-align:left;"><img alt="" height="183" src="https://images2.imgbox.com/a3/84/L94p9IoO_o.png" width="1200"></p> 
<h2 style="margin-left:0px;text-align:left;">十七、Postman的Cookie鉴权</h2> 
<h3 style="margin-left:0px;text-align:left;">1、什么是cookie ?</h3> 
<p style="margin-left:0px;text-align:left;">cookie是一小段文本，格式key=value.</p> 
<h3 style="margin-left:0px;text-align:left;">2、cookie鉴权的原理</h3> 
<p style="margin-left:0px;text-align:left;">1.当客户端第一次访问服务器的时候,那么服务器就会生成Cookie信息，并且在响应头的set-cookie里面把牛成的cookie信息发送给客户端<br> 2.当客户端第2-N次访问服务器的时候,那么客户端就会在请求头的cookie带上cookie信息，从而实现鉴权。</p> 
<h3 style="margin-left:0px;text-align:left;">3、cookie的分类</h3> 
<p style="margin-left:0px;text-align:left;">会话cookie:保存在内存，当浏览器关闭之后就会目动化清除cookie。持久cookie:保存在硬盘，浏览器关闭后不会清除，只有当失效时间到了才会自动清除</p> 
<p style="margin-left:0px;text-align:left;">由于个人信息问题,这部分不做演示,一般可以用一个访问的接口和一个登录的接口来测试</p> 
<blockquote> 
 <p style="margin-left:0px;text-align:left;">1.在访问接口中获得token(Cookie),做法和上文写的一样,核心在获得Cookie(token),</p> 
 <p style="margin-left:0px;text-align:left;">断言脚本可参考如下:</p> 
 <pre><code class="language-python">//使用正则表达式提取器获取token

var result = responseBody.match(new RegExp('name="csrf_token" value="(.*?)"'));

console.log(result);

//设置为全局变量

pm.globals.set("csrf_token", result[1]);</code></pre> 
 <p>2.其他操作参考接口关联,传输数据的做法,把csrf_token,传给登录接口就行了.</p> 
</blockquote> 
<hr> 
<h2>感谢支持，未完待续~~~~~~~~~~~~~~</h2>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4832cad9cf14fed0103c2c2213e8533b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Docker部署nginx</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/16163976467d2ae6fb570a743a4ca672/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【React】使用lodash的debounce未生效</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>