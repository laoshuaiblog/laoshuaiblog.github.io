<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python 柱状图的实现 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/d8422cfa7e1b7508b5018d601d5da8dc/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="Python 柱状图的实现">
  <meta property="og:description" content="文章目录 1.通过Bar来构建基础柱状图：2.基础的时间配置动态图表：3.动态柱状图的绘制：Python技术资源分享1、Python所有方向的学习路线2、学习软件3、入门学习视频4、实战案例5、清华编程大佬出品《漫画看学Python》6、Python副业兼职与全职路线 1.通过Bar来构建基础柱状图： （如以下代码）
from pyecharts.charts import Bar from pyecharts.options import * # 构建柱状图对象 bar = Bar() # 添加x轴数据 bar.add_xaxis([&#34;中国&#34;, &#34;美国&#34;, &#34;英国&#34;]) # 添加y轴数据 bar.add_yaxis([&#34;GDP&#34;,[30, 20, 10]]) # 绘图 bar.render(&#34;基础柱状图.html&#34;) 运行结果：
从以上代码中可得出要构建一个基础的柱状图首先要导入pyecharts中的bar模块，接着是构建柱状图的对象，然后再分别给x和y轴添加上数据，最后再绘图即可。使用bar.reversal_axis()就可以实现x和y轴的反转了，因为我们这个柱状图不是从下往上去看的，而是从左往右去看的。然后反转之后可以通过使用labelOpts模块去把数据（10，20，30）放到最右边。
2.基础的时间配置动态图表： （1）Time line()-时间线：时间线就是创建一个x轴，轴上每一个点就是一个图表对象。如下面的图所示：
它是由点1变动到点2的，并以此来实现动态的图表。
from pyecharts.charts import Bar, Timeline from pyecharts.options import LabelOpts # 构建柱状图对象 bar1 = Bar() # 添加x轴数据 bar1.add_xaxis([&#34;中国&#34;, &#34;美国&#34;, &#34;英国&#34;]) # 添加y轴数据 bar1.add_yaxis(&#34;GDP&#34;, [10, 20, 10], label_opts=LabelOpts(position=&#34;right&#34;)) # 反转x和y的轴 bar1.reversal_axis() bar2 = Bar() bar2.add_xaxis([&#34;中国&#34;, &#34;">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-05T18:02:14+08:00">
    <meta property="article:modified_time" content="2024-01-05T18:02:14+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python 柱状图的实现</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1Bar_10" rel="nofollow">1.通过Bar来构建基础柱状图：</a></li><li><a href="#2_31" rel="nofollow">2.基础的时间配置动态图表：</a></li><li><a href="#3_88" rel="nofollow">3.动态柱状图的绘制：</a></li><li><ul><li><ul><li><a href="#Python_182" rel="nofollow">Python技术资源分享</a></li><li><ul><li><a href="#1Python_190" rel="nofollow">1、Python所有方向的学习路线</a></li><li><a href="#2_196" rel="nofollow">2、学习软件</a></li><li><a href="#3_204" rel="nofollow">3、入门学习视频</a></li><li><a href="#4_210" rel="nofollow">4、实战案例</a></li><li><a href="#5Python_216" rel="nofollow">5、清华编程大佬出品《漫画看学Python》</a></li><li><a href="#6Python_221" rel="nofollow">6、Python副业兼职与全职路线</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="1Bar_10"></a>1.通过Bar来构建基础柱状图：</h2> 
<p>（如以下代码）</p> 
<pre><code>from pyecharts.charts import Bar
from pyecharts.options import *
# 构建柱状图对象
bar = Bar()
# 添加x轴数据
bar.add_xaxis(["中国", "美国", "英国"])
# 添加y轴数据
bar.add_yaxis(["GDP",[30, 20, 10]])
# 绘图
bar.render("基础柱状图.html")

</code></pre> 
<p>运行结果：</p> 
<p><img src="https://images2.imgbox.com/01/b8/5GIdDDu0_o.png" alt="image.png"> 从以上代码中可得出要构建一个基础的柱状图首先要导入pyecharts中的bar模块，接着是构建柱状图的对象，然后再分别给x和y轴添加上数据，最后再绘图即可。使用bar.reversal_axis()就可以实现x和y轴的反转了，因为我们这个柱状图不是从下往上去看的，而是从左往右去看的。然后反转之后可以通过使用labelOpts模块去把数据（10，20，30）放到最右边。</p> 
<h2><a id="2_31"></a>2.基础的时间配置动态图表：</h2> 
<p>（1）Time line()-时间线：时间线就是创建一个x轴，轴上每一个点就是一个图表对象。如下面的图所示：</p> 
<p><img src="https://images2.imgbox.com/e9/0e/EVrCJ1Ef_o.png" alt="Screenshot_20231106_185533.jpg"> 它是由点1变动到点2的，并以此来实现动态的图表。</p> 
<pre><code>from pyecharts.charts import Bar, Timeline
from pyecharts.options import LabelOpts
# 构建柱状图对象
bar1 = Bar()
# 添加x轴数据
bar1.add_xaxis(["中国", "美国", "英国"])
# 添加y轴数据
bar1.add_yaxis("GDP", [10, 20, 10], label_opts=LabelOpts(position="right"))
# 反转x和y的轴
bar1.reversal_axis()
bar2 = Bar()
bar2.add_xaxis(["中国", "美国", "英国"])
bar2.add_yaxis("GDP", [30, 20, 10], label_opts=LabelOpts(position="right"))
bar2.reversal_axis()
bar3 = Bar()
bar3.add_xaxis(["中国", "美国", "英国"])
bar3.add_yaxis("GDP", [50, 40, 80], label_opts=LabelOpts(position="right"))
bar3.reversal_axis()
bar4 = Bar()
bar4.add_xaxis(["中国", "美国", "英国"])
bar4.add_yaxis("GDP", [70, 60, 60], label_opts=LabelOpts(position="right"))
bar4.reversal_axis()
bar5 = Bar()
bar5.add_xaxis(["中国", "美国", "英国"])
bar5.add_yaxis("GDP", [90, 80, 50], label_opts=LabelOpts(position="right"))
bar5.reversal_axis()
bar6 = Bar()
bar6.add_xaxis(["中国", "美国", "英国"])
bar6.add_yaxis("GDP", [100, 55, 10], label_opts=LabelOpts(position="right"))
bar6.reversal_axis()
# 构建时间对象
timeline = Timeline()
# 在时间轴上添加点
timeline.add(bar1, "点1")
timeline.add(bar2, "点2")
timeline.add(bar3, "点3")
timeline.add(bar4, "点4")
timeline.add(bar5, "点5")
timeline.add(bar6, "点6")
# 用时间对象来绘图而不是用bar对象来绘图了
timeline.render("基础柱状图.html")

</code></pre> 
<p>从上面的代码中我们可以得知要创建一个时间轴首先要导入Timeline模块，然后也是构建一个时间对象，接着把创建的所有点（即这里的bar1,bar2,bar3等）逐个添加到时间轴上。最后用时间对象来绘图而不是bar对象，因为如果你用bar对象来绘图的话就只能绘出一个柱状图了，而这里的每一个点就是一个柱状图。</p> 
<p>（2）数据的自动播放：</p> 
<p><img src="https://images2.imgbox.com/83/bd/b3MpcTbu_o.png" alt="Screenshot_20231106_193457_edit_800146858024461.jpg"> 我们可以通过增加一个schema的方法去设置播放。如上表中。</p> 
<h2><a id="3_88"></a>3.动态柱状图的绘制：</h2> 
<p>（1）列表的sort方法并配合lambda匿名函数完成列表排序 在之后的数据处理中，需要对列表进行排序，并指定排序规则。</p> 
<pre><code># 如下嵌套列表，要求对外层列表进行排序，排序的一居室内层列表的第二个元素数字
# 在这里我们以前学的sorted函数就无法适用了，可以使用列表的sort方法
# 准备一个列表
my_list = [["a", 33], ["b", 55], ["c", 11]]
#定义排序方法
def choose_sort_key(element):
    return element[1]
# 将列表中的元素转入choose_sort_key函数中，用来确定按索引来排序
my_list.sort(key=choose_sort_key,reverse=True)
print(my_list)

</code></pre> 
<p>从上面的代码中我们可以知道列表sort的使用方法：列表名.sort(key=可依据的函数名，reverse=True/Flase 第七行的参数key是要求传入一个函数，表示将列表的每一个元素都传入函数中，返回排序的依据；而参数reverse，指的是是否反转排序结果，True表示降序，False表示升序。</p> 
<p>配合lambda匿名函数：使用方法：列表名.sort(key=lambad 函数当中的形参：函数当中的形参[下标], reverse=True/False。</p> 
<p>（2）所以要构建一个动态的数据首先要准备好需要的json模块的数据，然后以只读方式打开数据文件接着把数据存放到字典中里面可嵌套列表，接着按照某个特定的元素下标去把数据进行排序（使用sort方法），然后创建时间线对象和设置时间线自动播放，最后绘图即可。 如以下动态柱状图代码：</p> 
<pre><code>from pyecharts.options import *
from pyecharts.globals import *
# 打开文件，注意encoding的数据类型有可能不一定是UTF-8
f = open("1960-2019全球GDP数据。text", "r", encoding="UTF-8")
# 由于数据是按行分布的，所以要用readlines来按行读取
data_lines = f.readlines()
f.close()
# 由于第一行数据是没有用的，所以利用pop来进行将其删除
data.lines.pop(0)
timeline = Timeline({"theme": ThemeType.LIGHT})     # 设置动态图的主题
# 创建一个空的字典
data_dict = {}
# 对每一个key值的字典赋空
for i in list(range(1960,2020)):
    data_dict[i] = []
# 按行来对数据进行处理
for line in data_lines:
    year = int(line.split(",")[0])      # 读取的出来year是字符串格式，需要将其转化为整数格式
    country = line.split(",")[1]        # 取出国家
    gdp = float(line.split(",")[2])     # 有的GDP数据是以科学计数法的形式出现的，为了统一全部转化为浮点型
    # 这里是排除异常的操作
    try:
        data_dict[year].append([country, gdp])
    except KeyError:
        data_dict[year] = []
        data_dict[year].append([country, gdp])
sorted_year_list = sorted(data_dict.keys())     # 取出字典所有的key值，按照升序排序，keys()可完成这项操作
# 按照1960年份来用for循环来取出每年的GDP前八的国家
for year in sorted_year_list:
    data_dict[year].sort(key=lambad element:element[1], reverse = True)         # sort函数的使用，配合匿名函数lambad
    year_data = data_dicted[year][0:8]      # 列表的切片处理
    # 创建存储x, y轴数据的列表
    x_data = []
    y_data = []
    for country_gdp in year_data:
        x_data.append(country_gdp[0])
        y_data.append(country_gdp[1]/1000000)
    bar = Bar       # 创建柱状图对象
    # 为了使GDP高的国家排在最上面，直接将输入的数据反转
    x_data.reverse()
    y_data.reverse()
    bar.add_xaxis(x_data)
    bar.add._yaxis("GDP", y_data, label_opts = LabelOpts(position = "right"))
    bar,reversal_axis()     # 将柱状图横过来
# 全局选项，设置标题
    bar.set_global_opts(
        title_opts = TitleOpts(title = f"{year}年全球前八GDP数据")
    )
# 添加时间线
timeline.add_schema(
play_interval=1000,               # 自动播放时间间隔，单位为毫秒，这里就是1秒
    is_timeline_show=True,            # 是否在播放的时候显示时间线
    is_auto_play=True,                # 是否自动播放
    is_loop_play=True                 # 是否循环播放
)
timeline.render("1960-2019全球GDP前八的国家.html")


</code></pre> 
<p>如运行结果：</p> 
<p><img src="https://images2.imgbox.com/46/8a/UoffdhZg_o.png" alt="Screenshot_20231108_222301_edit_911599667026411.jpg"></p> 
<hr> 
<h4><a id="Python_182"></a>Python技术资源分享</h4> 
<p>小编是一名Python开发工程师，自己整理了一套 <strong>【最新的Python系统学习教程】</strong>，包括<strong>从基础的python脚本到web开发、爬虫、数据分析、数据可视化、机器学习等。</strong></p> 
<p><strong>保存图片微信扫描</strong>下方CSDN官方认证二维码免费领取【<code>保证100%免费</code>】</p> 
<center> 
 <img src="https://images2.imgbox.com/27/bd/r3colwLY_o.png"> 
 <center> 
 </center> 
</center> 
<p><strong>如果你是准备学习Python或者正在学习，下面这些你应该能用得上：</strong></p> 
<h5><a id="1Python_190"></a>1、Python所有方向的学习路线</h5> 
<p>Python所有方向路线就是把Python常用的技术点做整理，形成各个领域的知识点汇总，它的用处就在于，你可以按照上面的知识点去找对应的学习资源，保证自己学得较为全面。</p> 
<p><img src="https://images2.imgbox.com/34/75/lwWTzkTi_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2_196"></a>2、学习软件</h5> 
<p>工欲善其事必先利其器。学习Python常用的开发软件都在这里了，给大家节省了很多时间。</p> 
<p><img src="https://images2.imgbox.com/e7/f8/p4XkZ0Nf_o.jpg" alt="在这里插入图片描述"></p> 
<h5><a id="3_204"></a>3、入门学习视频</h5> 
<p>我们在看视频学习的时候，不能光动眼动脑不动手，比较科学的学习方法是在理解之后运用它们，这时候练手项目就很适合了。</p> 
<p><img src="https://images2.imgbox.com/19/bd/MUAxeIZH_o.png" alt="img"></p> 
<h5><a id="4_210"></a>4、实战案例</h5> 
<p>光学理论是没用的，要学会跟着一起敲，要动手实操，才能将自己的所学运用到实际当中去，这时候可以搞点实战案例来学习。</p> 
<p><img src="https://images2.imgbox.com/70/5a/AZcDBIKl_o.png" alt="img"></p> 
<h5><a id="5Python_216"></a>5、清华编程大佬出品《漫画看学Python》</h5> 
<p>用通俗易懂的漫画，来教你学习Python，让你更容易记住，并且不会枯燥乏味。</p> 
<p><img src="https://images2.imgbox.com/47/f6/Gv8fXWRJ_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="6Python_221"></a>6、Python副业兼职与全职路线</h5> 
<p><img src="https://images2.imgbox.com/46/7a/AIMfHVJO_o.png" alt="在这里插入图片描述"><br> <strong>这份完整版的Python全套学习资料已经上传CSDN，朋友们如果需要可以微信扫描下方CSDN官方认证二维码免费领取【<code>保证100%免费</code>】</strong></p> 
<blockquote> 
 <p>👉<a href="https://mp.weixin.qq.com/s/ksyyyFFfvfytk3J2hkzQiQ" rel="nofollow"><font color="red">CSDN大礼包：</font>《Python入门资料&amp;实战源码&amp;安装工具】免费领取</a><font color="green">（<strong>安全链接，放心点击</strong>）</font></p> 
</blockquote> 
<center> 
 <img src="https://images2.imgbox.com/dd/30/ipQ8Quct_o.png"> 
 <center> 
 </center> 
</center>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2e2c6207e47a910d77d59a38dcc805f7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python速度大比拼：与主流编程语言的速度对决</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4a6ac23d377397d00cf53a68e5c57f08/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">R进阶绘图--散点箱线图&#43;显著性 / 组间差异比较 / ggpubr包</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>