<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>批量打印-----jsPDF将图片转为pdf，并合并pdf - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/7416a216ee77758baf0b51df8e3ba9e3/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="批量打印-----jsPDF将图片转为pdf，并合并pdf">
  <meta property="og:description" content="安装依赖并引入
import jsPDF from &#39;jspdf&#39;; import { PDFDocument, } from &#39;pdf-lib&#39;; 注意一、
使用jspdf将图片（jpg/jpeg/png/bmp）转pdf（记为pdfA），得到的pdf（pdfA）和需要合并的pdf(记为pdfB)类型不一致，需要将pdfA转为pdfB类型，才能合并，使用arraybuffer转，具体如下
// pdf--pdfA--是使用jspdf将图片生成的pdf // file--pdfB--是合并pdf需要的pdf格式 const jsPdfBytes = pdf.output(&#39;arraybuffer&#39;); const file = await PDFDocument.load(jsPdfBytes); 注意二、
jspdf 可转pdf的图片类型有jpg、jpeg、png、bpm，
不支持 tif 和 tiff 图片类型
.tif和.tiff格式的文件需要通过安装依赖
“tiff.js”: “^1.0.0”,
也是使用arrayBuffer，将图片格式转为base64，（jpg/jpeg格式，然后将该格式通过jspdf转为pdf文件）
if(x.FILE_TYPE == &#39;.tif&#39; || x.FILE_TYPE == &#39;.tiff&#39; ){ const response = await fetch(imgUrl); const buffer = await response.arrayBuffer(); const Tiff = require(&#34;tiff.js&#34;); const tiff = new Tiff({ buffer }); imgUrl = tiff.">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-08-14T16:23:32+08:00">
    <meta property="article:modified_time" content="2023-08-14T16:23:32+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">批量打印-----jsPDF将图片转为pdf，并合并pdf</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>安装依赖并引入</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> jsPDF <span class="token keyword">from</span> <span class="token string">'jspdf'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> PDFDocument<span class="token punctuation">,</span>  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pdf-lib'</span><span class="token punctuation">;</span>
</code></pre> 
<p>注意一、<br> 使用jspdf将图片（jpg/jpeg/png/bmp）转pdf（记为pdfA），得到的pdf（pdfA）和需要合并的pdf(记为pdfB)类型不一致，需要将pdfA转为pdfB类型，才能合并，使用arraybuffer转，具体如下</p> 
<pre><code class="prism language-java"><span class="token comment">// pdf--pdfA--是使用jspdf将图片生成的pdf</span>
<span class="token comment">// file--pdfB--是合并pdf需要的pdf格式</span>
<span class="token keyword">const</span> jsPdfBytes <span class="token operator">=</span> pdf<span class="token punctuation">.</span><span class="token function">output</span><span class="token punctuation">(</span>'arraybuffer'<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> file <span class="token operator">=</span> await <span class="token class-name">PDFDocument</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>jsPdfBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>注意二、<br> jspdf 可转pdf的图片类型有jpg、jpeg、png、bpm，<br> 不支持 tif 和 tiff 图片类型</p> 
<p>.tif和.tiff格式的文件需要通过安装依赖<br> “tiff.js”: “^1.0.0”,<br> 也是使用arrayBuffer，将图片格式转为base64，（jpg/jpeg格式，然后将该格式通过jspdf转为pdf文件）</p> 
<pre><code class="prism language-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token constant">FILE_TYPE</span> <span class="token operator">==</span> <span class="token string">'.tif'</span> <span class="token operator">||</span> x<span class="token punctuation">.</span><span class="token constant">FILE_TYPE</span> <span class="token operator">==</span> <span class="token string">'.tiff'</span> <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>imgUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">const</span> buffer <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">arrayBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">const</span> Tiff <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"tiff.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">const</span> tiff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tiff</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> buffer <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     imgUrl <span class="token operator">=</span> tiff<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>注意三、<br> async/await 和 new Promise 控制异步任务顺序执行，执行完imgToPdf()方法，再执行合并pdf 方法</p> 
<p>注意四、<br> jspdf 将图片转为pdf，注意图片大小的自适应，可以通过设置图片的最大宽度来控制图片自适应的大小<br> const imageWidth = 100;</p> 
<p>注意五、<br> 因为异步任务执行可能导致批量选择文件的顺序与实际获得的文件顺序不一致，所以获取到的this.pdfFileArr，需要通过id 调整为正确的pdf文件打印顺序</p> 
<p>图片转pdf代码：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">async</span> <span class="token function">imgToPdf</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> promises <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      
      arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
          <span class="token comment">//jsPdf 仅支持JPG/JPEG/PNG/BMP格式,不支持tif</span>
          <span class="token keyword">let</span> id <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token constant">ID</span>
          <span class="token keyword">let</span> imgUrl <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token constant">FILE</span><span class="token punctuation">)</span>
          <span class="token comment">//如果是tif或者tiff文件，需要转化后再进行 图片转pdf操作</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token constant">FILE_TYPE</span> <span class="token operator">==</span> <span class="token string">'.tif'</span> <span class="token operator">||</span> x<span class="token punctuation">.</span><span class="token constant">FILE_TYPE</span> <span class="token operator">==</span> <span class="token string">'.tiff'</span> <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>imgUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> buffer <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">arrayBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> Tiff <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"tiff.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> tiff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tiff</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> buffer <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            imgUrl <span class="token operator">=</span> tiff<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">const</span> pdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">jsPDF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//添加header</span>
          <span class="token comment">//pdf.text('PDF Header', 10, 10);</span>
          <span class="token comment">// 将图片绘制到pdf中</span>
          <span class="token keyword">const</span> imageWidth <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">// 设定图片的最大宽度</span>
          <span class="token keyword">const</span> imageHeight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 设置为 0，将根据宽度等比例计算高度</span>

          <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          img<span class="token punctuation">.</span>src <span class="token operator">=</span> imgUrl
          
          <span class="token keyword">let</span> finalWidth <span class="token operator">=</span> imageWidth<span class="token punctuation">;</span>
          <span class="token keyword">let</span> finalHeight <span class="token operator">=</span> imageHeight<span class="token punctuation">;</span>

          img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">const</span> width <span class="token operator">=</span> img<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
            <span class="token keyword">const</span> height <span class="token operator">=</span> img<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
            
            <span class="token comment">// 计算图片适应 PDF 页面的尺寸</span>
            <span class="token keyword">const</span> aspectRatio <span class="token operator">=</span> width <span class="token operator">/</span> height<span class="token punctuation">;</span>
            
            <span class="token keyword">if</span> <span class="token punctuation">(</span>finalHeight <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
              finalHeight <span class="token operator">=</span> finalWidth <span class="token operator">/</span> aspectRatio<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>finalWidth <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
              finalWidth <span class="token operator">=</span> finalHeight <span class="token operator">*</span> aspectRatio<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token comment">// 添加图片到 PDF</span>
          <span class="token comment">//pdf.addImage(imgUrl, 'JPEG', 10, 10, finalWidth, finalHeight, null, 'SLOW')</span>
          <span class="token comment">//图片居中显示</span>
          pdf<span class="token punctuation">.</span><span class="token function">addImage</span><span class="token punctuation">(</span>imgUrl<span class="token punctuation">,</span> <span class="token string">'JPEG'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>pdf<span class="token punctuation">.</span>internal<span class="token punctuation">.</span>pageSize<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> finalWidth<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> finalWidth<span class="token punctuation">,</span> finalHeight<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'SLOW'</span><span class="token punctuation">)</span>



          <span class="token keyword">const</span> jsPdfBytes <span class="token operator">=</span> pdf<span class="token punctuation">.</span><span class="token function">output</span><span class="token punctuation">(</span><span class="token string">'arraybuffer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token keyword">await</span> PDFDocument<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>jsPdfBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
          <span class="token comment">//const blob = new Blob([file], { type: 'application/PDF' })</span>
        
          <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token constant">ID</span><span class="token operator">:</span> id<span class="token punctuation">,</span>
            <span class="token constant">FILE</span><span class="token operator">:</span> file
          <span class="token punctuation">}</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"执行了------imgToPdf"</span><span class="token punctuation">)</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>pdfFileArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>loadLoading <span class="token operator">=</span> <span class="token boolean">false</span>
          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'错误信息为：'</span><span class="token operator">+</span>error<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        promises<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>promise<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>合并pdf代码</p> 
<pre><code class="prism language-javascript"><span class="token keyword">async</span> <span class="token function">mergePdf</span><span class="token punctuation">(</span><span class="token parameter">sortList</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'最终需要合并的pdf数组'</span><span class="token punctuation">,</span> sortList<span class="token punctuation">)</span>
      <span class="token keyword">let</span> files <span class="token operator">=</span> sortList
      <span class="token comment">// 创建一个新的PDF文档</span>
      <span class="token keyword">const</span> mergedPdf <span class="token operator">=</span> <span class="token keyword">await</span> PDFDocument<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 遍历选择的每个文件</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> files<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token comment">/**
		这里为.pdf 文件的遍历操作
		通过FileReader 读取.pdf文件，转为合并pdf所需要的pdf类型
        const file = files[i];
        const url = window.URL.createObjectURL(file)
        const reader = new FileReader();
        // 读取文件内容
        const fileContents = await new Promise((resolve, reject) =&gt; {
          reader.onload = function (event) {
            resolve(event.target.result);
          };
          reader.onerror = function (event) {
            reject(new Error("文件读取错误。"));
          };
          reader.readAsArrayBuffer(file); //blob
        });
        // 将PDF文件添加到合并的PDF文档中
        const pdf = await PDFDocument.load(fileContents);

        console.log("合并pdf---", pdf)
        **/</span>

        <span class="token keyword">const</span> pdf <span class="token operator">=</span> files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> copiedPages <span class="token operator">=</span> <span class="token keyword">await</span> mergedPdf<span class="token punctuation">.</span><span class="token function">copyPages</span><span class="token punctuation">(</span>
          pdf<span class="token punctuation">,</span>
          pdf<span class="token punctuation">.</span><span class="token function">getPageIndices</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        copiedPages<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          mergedPdf<span class="token punctuation">.</span><span class="token function">addPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        
      <span class="token punctuation">}</span>

      <span class="token keyword">const</span> uint8Array <span class="token operator">=</span> <span class="token keyword">await</span> mergedPdf<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> mergeBuffer <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>uint8Array<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> url <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>mergeBuffer<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'application/pdf;charset=utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>mergePdfUrl <span class="token operator">=</span> url

      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"pdf合并完成"</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"新合并的pdf--"</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"新合并的pdf--"</span><span class="token punctuation">,</span> mergedPdf<span class="token punctuation">)</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>将获得的pdf文件url给iframe即可预览，iframe 自带toolbar工具栏打印</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>iframe ref<span class="token operator">=</span><span class="token string">"printPdf"</span>  id<span class="token operator">=</span><span class="token string">"printIframe"</span> 
            style<span class="token operator">=</span><span class="token string">"overflow:hidden;filter: Chroma(Color=white);border: none;width: 100%; height: 100%"</span>
            <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"item.url + '#toolbar=0'"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>iframe<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> #view<span class="token operator">=</span>FitH<span class="token punctuation">,</span>top <span class="token operator">--</span><span class="token operator">&gt;</span>
</code></pre> 
<p>如果自己编写打印接口，可以通过id获取到该iframe，<br> 调起 contentWindow.print() 即可打印该dom元素</p> 
<pre><code class="prism language-javascript">document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'printIframe'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bfe115242251db2d6c81b369b52df898/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Spring Security权限框架】SpringBoot整合Spring Security实现权限控制</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/005e7e5f8fd68e22cecf9208fead0408/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">I2C_GetFlagStatus()函数返回值说明，IIC的标志位</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>