<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>clickhouse的SQL参考——（五）system、set和权限相关 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/188bb5e6f9b8ca8c731d19573148a757/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="clickhouse的SQL参考——（五）system、set和权限相关">
  <meta property="og:description" content="参考资料 https://clickhouse.tech/docs/en/sql-reference/statements
版本:v20.11
目录 SYSTEM语句
RELOAD EMBEDDED DICTIONARIES
RELOAD DICTIONARIES
RELOAD DICTIONARY
DROP DNS CACHE
DROP MARK CACHE
DROP REPLICA
DROP UNCOMPRESSED CACHE
DROP COMPILED EXPRESSION CACHE
FLUSH LOGS
RELOAD CONFIG
SHUTDOWN
KILL
Managing Distributed Tables
STOP DISTRIBUTED SENDS
FLUSH DISTRIBUTED
START DISTRIBUTED SENDS
Managing MergeTree Tables
STOP MERGES
START MERGES
STOP TTL MERGES
START TTL MERGES
STOP MOVES
START MOVES
Managing ReplicatedMergeTree Tables
STOP FETCHES
START FETCHES
STOP REPLICATED SENDS">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-12-01T10:31:28+08:00">
    <meta property="article:modified_time" content="2020-12-01T10:31:28+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">clickhouse的SQL参考——（五）system、set和权限相关</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 id="%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</h3> 
<p><a href="https://clickhouse.tech/docs/en/sql-reference/statements" rel="nofollow">https://clickhouse.tech/docs/en/sql-reference/statements</a></p> 
<p>版本:v20.11</p> 
<p id="main-toc"> </p> 
<h3><strong>目录</strong></h3> 
<p id="SYSTEM%E8%AF%AD%E5%8F%A5-toc" style="margin-left:0px;"><a href="#SYSTEM%E8%AF%AD%E5%8F%A5" rel="nofollow">SYSTEM语句</a></p> 
<p id="query_language-system-reload-emdedded-dictionaries-toc" style="margin-left:40px;"><a href="#query_language-system-reload-emdedded-dictionaries" rel="nofollow">RELOAD EMBEDDED DICTIONARIES</a></p> 
<p id="query_language-system-reload-dictionaries-toc" style="margin-left:40px;"><a href="#query_language-system-reload-dictionaries" rel="nofollow">RELOAD DICTIONARIES</a></p> 
<p id="query_language-system-reload-dictionary-toc" style="margin-left:40px;"><a href="#query_language-system-reload-dictionary" rel="nofollow">RELOAD DICTIONARY</a></p> 
<p id="query_language-system-drop-dns-cache-toc" style="margin-left:40px;"><a href="#query_language-system-drop-dns-cache" rel="nofollow">DROP DNS CACHE</a></p> 
<p id="query_language-system-drop-mark-cache-toc" style="margin-left:40px;"><a href="#query_language-system-drop-mark-cache" rel="nofollow">DROP MARK CACHE</a></p> 
<p id="query_language-system-drop-replica-toc" style="margin-left:40px;"><a href="#query_language-system-drop-replica" rel="nofollow">DROP REPLICA</a></p> 
<p id="query_language-system-drop-uncompressed-cache-toc" style="margin-left:40px;"><a href="#query_language-system-drop-uncompressed-cache" rel="nofollow">DROP UNCOMPRESSED CACHE</a></p> 
<p id="query_language-system-drop-compiled-expression-cache-toc" style="margin-left:40px;"><a href="#query_language-system-drop-compiled-expression-cache" rel="nofollow">DROP COMPILED EXPRESSION CACHE</a></p> 
<p id="query_language-system-flush_logs-toc" style="margin-left:40px;"><a href="#query_language-system-flush_logs" rel="nofollow">FLUSH LOGS</a></p> 
<p id="query_language-system-reload-config-toc" style="margin-left:40px;"><a href="#query_language-system-reload-config" rel="nofollow">RELOAD CONFIG</a></p> 
<p id="query_language-system-shutdown-toc" style="margin-left:40px;"><a href="#query_language-system-shutdown" rel="nofollow">SHUTDOWN</a></p> 
<p id="query_language-system-kill-toc" style="margin-left:40px;"><a href="#query_language-system-kill" rel="nofollow">KILL</a></p> 
<p id="query-language-system-distributed-toc" style="margin-left:40px;"><a href="#query-language-system-distributed" rel="nofollow">Managing Distributed Tables</a></p> 
<p id="query_language-system-stop-distributed-sends-toc" style="margin-left:80px;"><a href="#query_language-system-stop-distributed-sends" rel="nofollow">STOP DISTRIBUTED SENDS</a></p> 
<p id="query_language-system-flush-distributed-toc" style="margin-left:80px;"><a href="#query_language-system-flush-distributed" rel="nofollow">FLUSH DISTRIBUTED</a></p> 
<p id="query_language-system-start-distributed-sends-toc" style="margin-left:80px;"><a href="#query_language-system-start-distributed-sends" rel="nofollow">START DISTRIBUTED SENDS</a></p> 
<p id="query-language-system-mergetree-toc" style="margin-left:40px;"><a href="#query-language-system-mergetree" rel="nofollow">Managing MergeTree Tables</a></p> 
<p id="query_language-system-stop-merges-toc" style="margin-left:80px;"><a href="#query_language-system-stop-merges" rel="nofollow">STOP MERGES</a></p> 
<p id="query_language-system-start-merges-toc" style="margin-left:80px;"><a href="#query_language-system-start-merges" rel="nofollow">START MERGES</a></p> 
<p id="query_language-stop-ttl-merges-toc" style="margin-left:80px;"><a href="#query_language-stop-ttl-merges" rel="nofollow">STOP TTL MERGES</a></p> 
<p id="query_language-start-ttl-merges-toc" style="margin-left:80px;"><a href="#query_language-start-ttl-merges" rel="nofollow">START TTL MERGES</a></p> 
<p id="query_language-stop-moves-toc" style="margin-left:80px;"><a href="#query_language-stop-moves" rel="nofollow">STOP MOVES</a></p> 
<p id="query_language-start-moves-toc" style="margin-left:80px;"><a href="#query_language-start-moves" rel="nofollow">START MOVES</a></p> 
<p id="query-language-system-replicated-toc" style="margin-left:40px;"><a href="#query-language-system-replicated" rel="nofollow">Managing ReplicatedMergeTree Tables</a></p> 
<p id="query_language-system-stop-fetches-toc" style="margin-left:80px;"><a href="#query_language-system-stop-fetches" rel="nofollow">STOP FETCHES</a></p> 
<p id="query_language-system-start-fetches-toc" style="margin-left:80px;"><a href="#query_language-system-start-fetches" rel="nofollow">START FETCHES</a></p> 
<p id="query_language-system-start-replicated-sends-toc" style="margin-left:80px;"><a href="#query_language-system-start-replicated-sends" rel="nofollow">STOP REPLICATED SENDS</a></p> 
<p id="START%20REPLICATED%20SENDS-toc" style="margin-left:80px;"><a href="#START%20REPLICATED%20SENDS" rel="nofollow">START REPLICATED SENDS</a></p> 
<p id="query_language-system-stop-replication-queues-toc" style="margin-left:80px;"><a href="#query_language-system-stop-replication-queues" rel="nofollow">STOP REPLICATION QUEUES</a></p> 
<p id="query_language-system-start-replication-queues-toc" style="margin-left:80px;"><a href="#query_language-system-start-replication-queues" rel="nofollow">START REPLICATION QUEUES</a></p> 
<p id="query_language-system-sync-replica-toc" style="margin-left:80px;"><a href="#query_language-system-sync-replica" rel="nofollow">SYNC REPLICA</a></p> 
<p id="query_language-system-restart-replica-toc" style="margin-left:80px;"><a href="#query_language-system-restart-replica" rel="nofollow">RESTART REPLICA</a></p> 
<p id="query_language-system-restart-replicas-toc" style="margin-left:80px;"><a href="#query_language-system-restart-replicas" rel="nofollow">RESTART REPLICAS</a></p> 
<p id="grant-toc" style="margin-left:0px;"><a href="#grant" rel="nofollow">GRANT语句</a></p> 
<p id="%E6%8E%88%E4%BA%88%E6%9D%83%E9%99%90%E8%AF%AD%E6%B3%95-toc" style="margin-left:40px;"><a href="#%E6%8E%88%E4%BA%88%E6%9D%83%E9%99%90%E8%AF%AD%E6%B3%95" rel="nofollow">授予权限语法</a></p> 
<p id="%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2%E8%AF%AD%E6%B3%95-toc" style="margin-left:40px;"><a href="#%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2%E8%AF%AD%E6%B3%95" rel="nofollow">分配角色语法</a></p> 
<p id="%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-toc" style="margin-left:40px;"><a href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" rel="nofollow">使用方法</a></p> 
<p id="%E6%9D%83%E9%99%90-toc" style="margin-left:40px;"><a href="#%E6%9D%83%E9%99%90" rel="nofollow">权限</a></p> 
<p id="grant-select-toc" style="margin-left:80px;"><a href="#grant-select" rel="nofollow">SELECT</a></p> 
<p id="grant-insert-toc" style="margin-left:80px;"><a href="#grant-insert" rel="nofollow">INSERT</a></p> 
<p id="grant-alter-toc" style="margin-left:80px;"><a href="#grant-alter" rel="nofollow">ALTER</a></p> 
<p id="grant-create-toc" style="margin-left:80px;"><a href="#grant-create" rel="nofollow">CREATE</a></p> 
<p id="grant-drop-toc" style="margin-left:80px;"><a href="#grant-drop" rel="nofollow">DROP</a></p> 
<p id="TRUNCATE-toc" style="margin-left:80px;"><a href="#TRUNCATE" rel="nofollow">TRUNCATE</a></p> 
<p id="grant-optimize-toc" style="margin-left:80px;"><a href="#grant-optimize" rel="nofollow">OPTIMIZE</a></p> 
<p id="grant-show-toc" style="margin-left:80px;"><a href="#grant-show" rel="nofollow">SHOW</a></p> 
<p id="grant-kill-query-toc" style="margin-left:80px;"><a href="#grant-kill-query" rel="nofollow">KILL QUERY</a></p> 
<p id="ACCESS%20MANAGEMENT-toc" style="margin-left:80px;"><a href="#ACCESS%20MANAGEMENT" rel="nofollow">ACCESS MANAGEMENT</a></p> 
<p id="SYSTEM-toc" style="margin-left:80px;"><a href="#SYSTEM" rel="nofollow">SYSTEM</a></p> 
<p id="INTROSPECTION-toc" style="margin-left:80px;"><a href="#INTROSPECTION" rel="nofollow">INTROSPECTION</a></p> 
<p id="SOURCES-toc" style="margin-left:80px;"><a href="#SOURCES" rel="nofollow">SOURCES</a></p> 
<p id="dictGet-toc" style="margin-left:80px;"><a href="#dictGet" rel="nofollow">dictGet</a></p> 
<p id="ALL-toc" style="margin-left:80px;"><a href="#ALL" rel="nofollow">ALL</a></p> 
<p id="grant-none-toc" style="margin-left:80px;"><a href="#grant-none" rel="nofollow">NONE</a></p> 
<p id="admin-option-privilege-toc" style="margin-left:80px;"><a href="#admin-option-privilege" rel="nofollow">ADMIN OPTION</a></p> 
<p id="revoke-toc" style="margin-left:0px;"><a href="#revoke" rel="nofollow">REVOKE语句</a></p> 
<p id="%E8%AF%AD%E6%B3%95-toc" style="margin-left:40px;"><a href="#%E8%AF%AD%E6%B3%95" rel="nofollow">语法</a></p> 
<p id="%E6%8F%8F%E8%BF%B0-toc" style="margin-left:40px;"><a href="#%E6%8F%8F%E8%BF%B0" rel="nofollow">描述</a></p> 
<p id="%E9%83%A8%E5%88%86%E6%92%A4%E9%94%80-toc" style="margin-left:80px;"><a href="#%E9%83%A8%E5%88%86%E6%92%A4%E9%94%80" rel="nofollow">部分撤销</a></p> 
<p id="%E4%B8%BE%E4%BE%8B-toc" style="margin-left:40px;"><a href="#%E4%B8%BE%E4%BE%8B" rel="nofollow">举例</a></p> 
<p id="misc_operations-optimize-toc" style="margin-left:0px;"><a href="#misc_operations-optimize" rel="nofollow">OPTIMIZE语句</a></p> 
<p id="query-set-toc" style="margin-left:0px;"><a href="#query-set" rel="nofollow">SET语句</a></p> 
<p id="set-role-statement-toc" style="margin-left:0px;"><a href="#set-role-statement" rel="nofollow">SET ROLE语句</a></p> 
<p id="set-default-role-statement-toc" style="margin-left:40px;"><a href="#set-default-role-statement" rel="nofollow">SET DEFAULT ROLE</a></p> 
<p style="margin-left:40px;"><a href="#%E4%B8%BE%E4%BE%8B" rel="nofollow">举例</a></p> 
<hr id="hr-toc"> 
<p> </p> 
<h2 id="SYSTEM%E8%AF%AD%E5%8F%A5">SYSTEM语句</h2> 
<p>以下查询语句均以SYSTEM开头，格式为SYSTEM [相关语句]。</p> 
<h3 id="query_language-system-reload-emdedded-dictionaries">RELOAD EMBEDDED DICTIONARIES</h3> 
<p>重新加载所有内部词典（<a href="https://clickhouse.tech/docs/en/sql-reference/dictionaries/internal-dicts/" rel="nofollow">Internal dictionaries</a>.）。</p> 
<p>默认情况下，内部字典是禁用的。</p> 
<p>始终返回OK， 无论内部字典更新的结果如何。</p> 
<h3 id="query_language-system-reload-dictionaries">RELOAD DICTIONARIES</h3> 
<p>重新加载之前已成功加载的所有词典。</p> 
<p>默认情况下，字典是延迟加载的（请参阅 <a href="https://clickhouse.tech/docs/en/operations/server-configuration-parameters/settings/#server_configuration_parameters-dictionaries_lazy_load" rel="nofollow">dictionaries_lazy_load</a>），因此，它们不是在启动时自动加载的，而是在第一次访问时通过dictGet函数或从ENGINE = Dictionary的表中使用SELECT查询时进行初始化的。 </p> 
<p>SYSTEM RELOAD DICTIONARIES查询重新加载此类字典（LOADED）。</p> 
<p>始终返回OK。 不管字典更新的结果如何。</p> 
<h3 id="query_language-system-reload-dictionary">RELOAD DICTIONARY</h3> 
<p>完全重载字典dictionary_name，而不管字典的状态如何（LOADED / NOT_LOADED / FAILED）。</p> 
<p>始终返回OK。 不管字典更新的结果如何。</p> 
<p>可以通过查询system.dictionaries表来检查字典的状态。</p> 
<pre><code class="language-sql">SELECT name, status FROM system.dictionaries;
</code></pre> 
<h3 id="query_language-system-drop-dns-cache">DROP DNS CACHE</h3> 
<p>重置ClickHouse的内部DNS缓存。 有时（对于旧的ClickHouse版本），在更改基础结构（更改其他ClickHouse服务器或词典使用的服务器的IP地址）时，必须使用此命令。</p> 
<p>有关更方便的（自动）缓存管理，请参阅disable_internal_dns_cache，dns_cache_update_period参数。</p> 
<h3 id="query_language-system-drop-mark-cache">DROP MARK CACHE</h3> 
<p>重置标记缓存。 用于ClickHouse的开发和性能测试。</p> 
<h3 id="query_language-system-drop-replica">DROP REPLICA</h3> 
<p>可以使用以下语法删除死副本：</p> 
<pre><code class="language-sql">--删除database.table表的'replica_name'副本的元数据。
SYSTEM DROP REPLICA 'replica_name' FROM TABLE database.table;

--对数据库中所有复制的表执行相同的操作。
SYSTEM DROP REPLICA 'replica_name' FROM DATABASE database;

--对本地服务器上所有复制的表执行相同的操作。
SYSTEM DROP REPLICA 'replica_name';

--当删除表的所有其他副本时，可用于删除无效副本的元数据。 
--它要求显式指定表路径。 它必须与创建表时传递给ReplicatedMergeTree引擎的第一个参数的路径相同。
SYSTEM DROP REPLICA 'replica_name' FROM ZKPATH '/path/to/table/in/zk';
</code></pre> 
<p>查询将删除ZooKeeper中的副本路径。 当副本已失效并且DROP TABLE无法将其元数据从ZooKeeper中删除时，这将非常有用，因为不再有此类表。 它只会删除不活动/过时的副本，而不能删除本地副本，请为此使用DROP TABLE。 DROP REPLICA不会删除任何表，也不会从磁盘上删除任何数据或元数据。</p> 
<h3 id="query_language-system-drop-uncompressed-cache">DROP UNCOMPRESSED CACHE</h3> 
<p>重置未压缩的数据缓存。 用于ClickHouse的开发和性能测试。</p> 
<p>对于管理未压缩的数据高速缓存参数，请使用以下设置，服务器级别的设置uncompressed_cache_size，查询/用户/配置文件级别的设置use_uncompressed_cache</p> 
<h3 id="query_language-system-drop-compiled-expression-cache">DROP COMPILED EXPRESSION CACHE</h3> 
<p>重置编译的表达式缓存。 用于ClickHouse的开发和性能测试。</p> 
<p>当query/user/profile开启编译选项时，编译表达式缓存会被使用。</p> 
<h3 id="query_language-system-flush_logs">FLUSH LOGS</h3> 
<p>将日志消息的缓冲区刷新到系统表（例如system.query_log）。 允许您调试时不等待7.5秒。</p> 
<p>即使消息队列为空，也会创建系统表。</p> 
<h3 id="query_language-system-reload-config">RELOAD CONFIG</h3> 
<p>重新加载ClickHouse配置。 当配置存储在ZooKeeper中时使用。</p> 
<h3 id="query_language-system-shutdown">SHUTDOWN</h3> 
<p>正常关闭clickhouse服务器。</p> 
<p>类似于service clickhouse-server stop、kill {$pid_clickhouse-server}</p> 
<h3 id="query_language-system-kill">KILL</h3> 
<p>中止ClickHouse进程（像是kill -9 {$ pid_clickhouse-server}）</p> 
<h3 id="query-language-system-distributed">Managing Distributed Tables</h3> 
<p>ClickHouse可以管理分布式表。 当用户将数据插入这些表中时，ClickHouse首先创建应发送到集群节点的数据队列，然后异步发送。 </p> 
<p>您可以使用STOP DISTRIBUTED SENDS，FLUSH DISTRIBUTED和START DISTRIBUTED SENDS查询来管理队列处理。</p> 
<p>您还可以使用insert_distributed_sync设置同步插入分布式数据。</p> 
<h4 id="query_language-system-stop-distributed-sends">STOP DISTRIBUTED SENDS</h4> 
<p>将数据插入分布式表时，禁用后台数据分发。</p> 
<pre><code class="language-sql">SYSTEM STOP DISTRIBUTED SENDS [db.]&lt;distributed_table_name&gt;
</code></pre> 
<h4 id="query_language-system-flush-distributed">FLUSH DISTRIBUTED</h4> 
<p>强制ClickHouse将数据同步发送到群集节点。</p> 
<p>如果有节点不可用，ClickHouse会引发异常并停止查询执行。</p> 
<p>在所有节点都重新联机后，您可以重试查询直到成功。</p> 
<pre><code class="language-sql">SYSTEM FLUSH DISTRIBUTED [db.]&lt;distributed_table_name&gt;
</code></pre> 
<h4 id="query_language-system-start-distributed-sends">START DISTRIBUTED SENDS</h4> 
<p>将数据插入分布式表中时启用后台数据分发。</p> 
<pre><code class="language-sql">SYSTEM START DISTRIBUTED SENDS [db.]&lt;distributed_table_name&gt;
</code></pre> 
<h3 id="query-language-system-mergetree">Managing MergeTree Tables</h3> 
<p>ClickHouse可以管理MergeTree表中的后台进程。</p> 
<h4 id="query_language-system-stop-merges">STOP MERGES</h4> 
<p>停止MergeTree系列中表的后台合并：</p> 
<pre><code class="language-sql">SYSTEM STOP MERGES [[db.]merge_tree_family_table_name]
</code></pre> 
<p>即使之前已停止所有MergeTree表的合并，DETACH / ATTACH TABLE查询也会启动该表的后台合并。</p> 
<h4 id="query_language-system-start-merges">START MERGES</h4> 
<p>启动MergeTree系列中表的后台合并：</p> 
<pre><code class="language-sql">SYSTEM START MERGES [[db.]merge_tree_family_table_name]
</code></pre> 
<h4 id="query_language-stop-ttl-merges">STOP TTL MERGES</h4> 
<p>根据TTL表达式，停止后台删除MergeTree系列表中的旧数据：</p> 
<p>返回OK，即使表不存在或表没有使用MergeTree引擎。</p> 
<p>数据库不存在时返回错误。</p> 
<pre><code class="language-sql">SYSTEM START TTL MERGES [[db.]merge_tree_family_table_name]
</code></pre> 
<h4 id="query_language-start-ttl-merges">START TTL MERGES</h4> 
<p>根据TTL表达式，开始后台删除MergeTree系列表中的旧数据：</p> 
<p>返回OK，即使表不存在或表没有使用MergeTree引擎。</p> 
<p>数据库不存在时返回错误。</p> 
<pre><code class="language-sql">SYSTEM START TTL MERGES [[db.]merge_tree_family_table_name]
</code></pre> 
<h4 id="query_language-stop-moves">STOP MOVES</h4> 
<p>根据带有TO VOLUME或TO DISK子句的TTL表表达式，停止后台移动MergeTree系列表中的数据：</p> 
<p>返回OK，即使表不存在或表没有使用MergeTree引擎。</p> 
<p>数据库不存在时返回错误。</p> 
<pre><code class="language-sql">SYSTEM STOP MOVES [[db.]merge_tree_family_table_name]
</code></pre> 
<h4 id="query_language-start-moves">START MOVES</h4> 
<p>根据带有TO VOLUME或TO DISK子句的TTL表表达式，开启后台移动MergeTree系列表中的数据：</p> 
<p>返回OK，即使表不存在或表没有使用MergeTree引擎。</p> 
<p>数据库不存在时返回错误。</p> 
<pre><code class="language-sql">SYSTEM STOP MOVES [[db.]merge_tree_family_table_name]
</code></pre> 
<h3 id="query-language-system-replicated">Managing ReplicatedMergeTree Tables</h3> 
<p>ClickHouse可以管理ReplicatedMergeTree表中的与后台复制相关的进程。</p> 
<h4 id="query_language-system-stop-fetches">STOP FETCHES</h4> 
<p>停止对已经插入表中的数据的后台提取，用于ReplicatedMergeTree家族。</p> 
<p>返回OK，即使表和数据库都不存在。</p> 
<pre><code class="language-sql">SYSTEM STOP FETCHES [[db.]replicated_merge_tree_family_table_name]
</code></pre> 
<h4 id="query_language-system-start-fetches">START FETCHES</h4> 
<p>开启对已经插入表中的数据的后台提取，用于ReplicatedMergeTree家族。</p> 
<p>返回OK，即使表和数据库都不存在。</p> 
<pre><code class="language-sql">SYSTEM START FETCHES [[db.]replicated_merge_tree_family_table_name]
</code></pre> 
<h4 id="query_language-system-start-replicated-sends">STOP REPLICATED SENDS</h4> 
<p>停止后台将插入到表中的新数据发送到群集中的其他副本，用于ReplicatedMergeTree家族。</p> 
<pre><code class="language-sql">SYSTEM STOP REPLICATED SENDS [[db.]replicated_merge_tree_family_table_name]
</code></pre> 
<h4 id="START%20REPLICATED%20SENDS">START REPLICATED SENDS</h4> 
<p>开启后台将插入到表中的新数据发送到群集中的其他副本，用于ReplicatedMergeTree家族。</p> 
<pre><code class="language-sql">SYSTEM START REPLICATED SENDS [[db.]replicated_merge_tree_family_table_name]
</code></pre> 
<h4 id="query_language-system-stop-replication-queues">STOP REPLICATION QUEUES</h4> 
<p>停止从ZooKeeper集群中获取任务列表，用于ReplicatedMergeTree家族。</p> 
<p>可能的后台任务类型：merges, fetches, mutation，带有 ON CLUSTER 的DDL语句。</p> 
<pre><code class="language-sql">SYSTEM STOP REPLICATION QUEUES [[db.]replicated_merge_tree_family_table_name]
</code></pre> 
<h4 id="query_language-system-start-replication-queues">START REPLICATION QUEUES</h4> 
<p>开启从ZooKeeper集群中获取任务列表，用于ReplicatedMergeTree家族。</p> 
<p>可能的后台任务类型：merges, fetches, mutation，带有 ON CLUSTER 的DDL语句。</p> 
<pre><code class="language-sql">SYSTEM START REPLICATION QUEUES [[db.]replicated_merge_tree_family_table_name]
</code></pre> 
<h4 id="query_language-system-sync-replica">SYNC REPLICA</h4> 
<p>等待ReplicatedMergeTree表与集群中的其他副本同步。</p> 
<p>如果当前未对该表进行提取操作，则将一直运行到receive_timeout。</p> 
<pre><code class="language-sql">SYSTEM SYNC REPLICA [db.]replicated_merge_tree_family_table_name
</code></pre> 
<h4 id="query_language-system-restart-replica">RESTART REPLICA</h4> 
<p>重新初始化ReplicatedMergeTree表的Zookeeper会话状态，会将当前状态与Zookeeper比较直到true，并在需要时将任务添加到Zookeeper队列中</p> 
<p> 基于ZooKeeper日期的初始化复制队列与ATTACH TABLE语句的方式相同。短时间内该表将无法进行任何操作。</p> 
<pre><code class="language-sql">SYSTEM RESTART REPLICA [db.]replicated_merge_tree_family_table_name
</code></pre> 
<h4 id="query_language-system-restart-replicas">RESTART REPLICAS</h4> 
<p>重新初始化所有ReplicatedMergeTree表的Zookeeper会话状态，会将当前状态与Zookeeper比较直到true，并在需要时将任务添加到Zookeeper队列中。</p> 
<p> </p> 
<h2 id="grant">GRANT语句</h2> 
<p>向ClickHouse用户帐户或角色授予特权。将角色分配给用户帐户或其他角色。</p> 
<p>要撤消特权，请使用REVOKE语句。 可以使用SHOW GRANTS语句列出授予的特权。</p> 
<h3 id="%E6%8E%88%E4%BA%88%E6%9D%83%E9%99%90%E8%AF%AD%E6%B3%95">授予权限语法</h3> 
<pre><code class="language-sql">GRANT [ON CLUSTER cluster_name] privilege[(column_name [,...])] [,...] ON {db.table|db.*|*.*|table|*} TO {user | role | CURRENT_USER} [,...] [WITH GRANT OPTION]</code></pre> 
<ul><li><code>privilege</code> — 权限类型</li><li><code>role</code> — ClickHouse 用户角色</li><li><code>user</code> — ClickHouse 用户账户</li></ul> 
<p>WITH GRANT OPTION子句向用户或角色授予执行GRANT查询的权限。 用户可以授予与他们相同或更少范围的特权。</p> 
<h3 id="%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2%E8%AF%AD%E6%B3%95">分配角色语法</h3> 
<pre><code class="language-sql">GRANT [ON CLUSTER cluster_name] role [,...] TO {user | another_role | CURRENT_USER} [,...] [WITH ADMIN OPTION]
</code></pre> 
<ul><li><code>role</code> — ClickHouse用户角色。</li><li><code>user</code> — ClickHouse用户账户。</li></ul> 
<p>WITH ADMIN OPTION子句向用户或角色授予ADMIN OPTION特权。</p> 
<h3 id="%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">使用方法</h3> 
<p>要使用GRANT，您的帐户必须具有GRANT OPTION特权。 您只能在帐户权限范围内授予权限。</p> 
<pre><code class="language-sql">--管理员通过查询授予了john帐户特权
GRANT SELECT(x,y) ON db.table TO john WITH GRANT OPTION
</code></pre> 
<p>这意味着john有权执行：</p> 
<ul><li><code>SELECT x,y FROM db.table</code>.</li><li><code>SELECT x FROM db.table</code>.</li><li><code>SELECT y FROM db.table</code>.</li></ul> 
<p>john无法执行SELECT z FROM db.table.，SELECT * FROM db.table也不可用。在处理此查询时，ClickHouse不会返回任何数据，即使x和y也是如此。唯一的例外是如果表仅包含x和y列。在这种情况下，ClickHouse将返回所有数据。</p> 
<p>john还具有GRANT OPTION特权，因此它可以向其他用户授予相同或较小范围的特权。</p> 
<p>指定特权后，可以使用星号（*）代替表或数据库名称。例如，GRANT SELECT ON db.* TO john 允许join执行在db数据库全表上的SELECT查询。</p> 
<p>另外，您可以省略数据库名称。 在这种情况下，将为当前数据库授予特权。 例如，GRANT SELECT ON * TO john授予当前数据库中所有表的SELECT特权，GRANT SELECT ON mytable TO john授予当前数据库中的mytable表的SELECT特权。</p> 
<p>始终允许访问系统数据库（因为该数据库用于处理查询）。</p> 
<p>您可以在一个查询中为多个帐户授予多个特权。例如，GRANT SELECT, INSERT ON *.* TO john, robin ，允许帐户john和robin对服务器上所有数据库中的所有表执行INSERT和SELECT查询。</p> 
<h3 id="%E6%9D%83%E9%99%90">权限</h3> 
<p>特权是执行特定类型查询的权限。</p> 
<p>特权具有层次结构。 一组允许的查询取决于特权范围。</p> 
<p>特权等级：</p> 
<ul><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-select" rel="nofollow">SELECT</a></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-insert" rel="nofollow">INSERT</a></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-alter" rel="nofollow">ALTER</a> 
  <ul><li><code>ALTER TABLE</code> 
    <ul><li><code>ALTER UPDATE</code></li><li><code>ALTER DELETE</code></li><li><code>ALTER COLUMN</code> 
      <ul><li><code>ALTER ADD COLUMN</code></li><li><code>ALTER DROP COLUMN</code></li><li><code>ALTER MODIFY COLUMN</code></li><li><code>ALTER COMMENT COLUMN</code></li><li><code>ALTER CLEAR COLUMN</code></li><li><code>ALTER RENAME COLUMN</code></li></ul></li><li><code>ALTER INDEX</code> 
      <ul><li><code>ALTER ORDER BY</code></li><li><code>ALTER SAMPLE BY</code></li><li><code>ALTER ADD INDEX</code></li><li><code>ALTER DROP INDEX</code></li><li><code>ALTER MATERIALIZE INDEX</code></li><li><code>ALTER CLEAR INDEX</code></li></ul></li><li><code>ALTER CONSTRAINT</code> 
      <ul><li><code>ALTER ADD CONSTRAINT</code></li><li><code>ALTER DROP CONSTRAINT</code></li></ul></li><li><code>ALTER TTL</code></li><li><code>ALTER MATERIALIZE TTL</code></li><li><code>ALTER SETTINGS</code></li><li><code>ALTER MOVE PARTITION</code></li><li><code>ALTER FETCH PARTITION</code></li><li><code>ALTER FREEZE PARTITION</code></li></ul></li><li><code>ALTER VIEW</code> 
    <ul><li><code>ALTER VIEW REFRESH</code></li><li><code>ALTER VIEW MODIFY QUERY</code></li></ul></li></ul></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-create" rel="nofollow">CREATE</a> 
  <ul><li><code>CREATE DATABASE</code></li><li><code>CREATE TABLE</code></li><li><code>CREATE VIEW</code></li><li><code>CREATE DICTIONARY</code></li><li><code>CREATE TEMPORARY TABLE</code></li></ul></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-drop" rel="nofollow">DROP</a> 
  <ul><li><code>DROP DATABASE</code></li><li><code>DROP TABLE</code></li><li><code>DROP VIEW</code></li><li><code>DROP DICTIONARY</code></li></ul></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-truncate" rel="nofollow">TRUNCATE</a></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-optimize" rel="nofollow">OPTIMIZE</a></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-show" rel="nofollow">SHOW</a> 
  <ul><li><code>SHOW DATABASES</code></li><li><code>SHOW TABLES</code></li><li><code>SHOW COLUMNS</code></li><li><code>SHOW DICTIONARIES</code></li></ul></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-kill-query" rel="nofollow">KILL QUERY</a></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-access-management" rel="nofollow">ACCESS MANAGEMENT</a> 
  <ul><li><code>CREATE USER</code></li><li><code>ALTER USER</code></li><li><code>DROP USER</code></li><li><code>CREATE ROLE</code></li><li><code>ALTER ROLE</code></li><li><code>DROP ROLE</code></li><li><code>CREATE ROW POLICY</code></li><li><code>ALTER ROW POLICY</code></li><li><code>DROP ROW POLICY</code></li><li><code>CREATE QUOTA</code></li><li><code>ALTER QUOTA</code></li><li><code>DROP QUOTA</code></li><li><code>CREATE SETTINGS PROFILE</code></li><li><code>ALTER SETTINGS PROFILE</code></li><li><code>DROP SETTINGS PROFILE</code></li><li><code>SHOW ACCESS</code> 
    <ul><li><code>SHOW_USERS</code></li><li><code>SHOW_ROLES</code></li><li><code>SHOW_ROW_POLICIES</code></li><li><code>SHOW_QUOTAS</code></li><li><code>SHOW_SETTINGS_PROFILES</code></li></ul></li><li><code>ROLE ADMIN</code></li></ul></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-system" rel="nofollow">SYSTEM</a> 
  <ul><li><code>SYSTEM SHUTDOWN</code></li><li><code>SYSTEM DROP CACHE</code> 
    <ul><li><code>SYSTEM DROP DNS CACHE</code></li><li><code>SYSTEM DROP MARK CACHE</code></li><li><code>SYSTEM DROP UNCOMPRESSED CACHE</code></li></ul></li><li><code>SYSTEM RELOAD</code> 
    <ul><li><code>SYSTEM RELOAD CONFIG</code></li><li><code>SYSTEM RELOAD DICTIONARY</code></li><li><code>SYSTEM RELOAD EMBEDDED DICTIONARIES</code></li></ul></li><li><code>SYSTEM MERGES</code></li><li><code>SYSTEM TTL MERGES</code></li><li><code>SYSTEM FETCHES</code></li><li><code>SYSTEM MOVES</code></li><li><code>SYSTEM SENDS</code> 
    <ul><li><code>SYSTEM DISTRIBUTED SENDS</code></li><li><code>SYSTEM REPLICATED SENDS</code></li></ul></li><li><code>SYSTEM REPLICATION QUEUES</code></li><li><code>SYSTEM SYNC REPLICA</code></li><li><code>SYSTEM RESTART REPLICA</code></li><li><code>SYSTEM FLUSH</code> 
    <ul><li><code>SYSTEM FLUSH DISTRIBUTED</code></li><li><code>SYSTEM FLUSH LOGS</code></li></ul></li></ul></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-introspection" rel="nofollow">INTROSPECTION</a> 
  <ul><li><code>addressToLine</code></li><li><code>addressToSymbol</code></li><li><code>demangle</code></li></ul></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-sources" rel="nofollow">SOURCES</a> 
  <ul><li><code>FILE</code></li><li><code>URL</code></li><li><code>REMOTE</code></li><li><code>YSQL</code></li><li><code>ODBC</code></li><li><code>JDBC</code></li><li><code>HDFS</code></li><li><code>S3</code></li></ul></li><li><a href="https://clickhouse.tech/docs/en/sql-reference/statements/grant/#grant-dictget" rel="nofollow">dictGet</a></li></ul> 
<p>有关如何处理此层次结构的示例：</p> 
<ul><li>ALTER特权包括所有其他ALTER *特权。</li><li>ALTER CONSTRAINT包括ALTER ADD CONSTRAINT和ALTER DROP CONSTRAINT特权。</li></ul> 
<p>级别（从低到高）：</p> 
<ul><li><code>COLUMN</code> — 可以授予列，表，数据库或全局权限。</li><li><code>TABLE</code> — 可以授予表，数据库或全局权限。</li><li><code>VIEW</code> — 可以授予视图，数据库或全局权限。</li><li><code>DICTIONARY</code> — 可以为字典，数据库或全局授予特权。</li><li><code>DATABASE</code> —可以授予数据库权限或全局权限。</li><li><code>GLOBAL</code> —只能手语全局特权。</li><li><code>GROUP</code> — 分组不同级别的特权。 授予GROUP级别特权时，仅授予该组中与所使用语法相对应的特权。</li></ul> 
<p>允许的语法示例：</p> 
<ul><li><code>GRANT SELECT(x) ON db.table TO user</code></li><li><code>GRANT SELECT ON db.* TO user</code></li></ul> 
<p><code>不允许的语法示例：</code></p> 
<ul><li><code>GRANT CREATE USER(x) ON db.table TO user</code></li><li><code>GRANT CREATE USER ON db.* TO user</code></li></ul> 
<p><code>特殊特权ALL将所有特权授予用户帐户或角色。</code></p> 
<p><code>默认情况下，用户帐户或角色没有特权。</code></p> 
<p><code>如果用户或角色没有特权，则显示为“NONE”特权。</code></p> 
<p>一些查询的实现需要一系列的特权。</p> 
<p>例如，要执行RENAME查询，您需要以下特权：SELECT，CREATE TABLE，INSERT和DROP TABLE。</p> 
<h4 id="grant-select">SELECT</h4> 
<p>允许执行SELECT查询。</p> 
<p>特权级别：COLUMN。</p> 
<p>授予此特权的用户可以在指定表和数据库中的指定列列表上执行SELECT查询。 如果用户包括其他列，则指定查询将不返回任何数据。</p> 
<pre><code class="language-sql">--john无法执行SELECT z FROM db.table.，SELECT * FROM db.table也不可用。
--在处理此查询时，ClickHouse不会返回任何数据，即使x和y也是如此。
--唯一的例外是如果表仅包含x和y列。在这种情况下，ClickHouse将返回所有数据。
GRANT SELECT(x,y) ON db.table TO john
</code></pre> 
<h4 id="grant-insert">INSERT</h4> 
<p>允许执行INSERT查询。</p> 
<p>特权级别：COLUMN。</p> 
<p>授予此特权的用户可以在指定表和数据库中的指定列列表上执行INSERT查询。 如果用户包括其他列，则在指定的查询中不会插入任何数据。</p> 
<pre><code class="language-sql">--授予的特权允许john将数据插入db.table中的x与y列。
GRANT INSERT(x,y) ON db.table TO john
</code></pre> 
<h4 id="grant-alter">ALTER</h4> 
<p>允许根据以下特权层次执行ALTER查询：</p> 
<p><code>ALTER</code>. Level: <code>COLUMN</code>.</p> 
<ul><li><code>ALTER TABLE</code>. Level: <code>GROUP</code> 
  <ul><li><code>ALTER UPDATE</code>. Level: <code>COLUMN</code>. Aliases: <code>UPDATE</code></li><li><code>ALTER DELETE</code>. Level: <code>COLUMN</code>. Aliases: <code>DELETE</code></li><li><code>ALTER COLUMN</code>. Level: <code>GROUP</code> 
    <ul><li><code>ALTER ADD COLUMN</code>. Level: <code>COLUMN</code>. Aliases: <code>ADD COLUMN</code></li><li><code>ALTER DROP COLUMN</code>. Level: <code>COLUMN</code>. Aliases: <code>DROP COLUMN</code></li><li><code>ALTER MODIFY COLUMN</code>. Level: <code>COLUMN</code>. Aliases: <code>MODIFY COLUMN</code></li><li><code>ALTER COMMENT COLUMN</code>. Level: <code>COLUMN</code>. Aliases: <code>COMMENT COLUMN</code></li><li><code>ALTER CLEAR COLUMN</code>. Level: <code>COLUMN</code>. Aliases: <code>CLEAR COLUMN</code></li><li><code>ALTER RENAME COLUMN</code>. Level: <code>COLUMN</code>. Aliases: <code>RENAME COLUMN</code></li></ul></li><li><code>ALTER INDEX</code>. Level: <code>GROUP</code>. Aliases: <code>INDEX</code> 
    <ul><li><code>ALTER ORDER BY</code>. Level: <code>TABLE</code>. Aliases: <code>ALTER MODIFY ORDER BY</code>, <code>MODIFY ORDER BY</code></li><li><code>ALTER SAMPLE BY</code>. Level: <code>TABLE</code>. Aliases: <code>ALTER MODIFY SAMPLE BY</code>, <code>MODIFY SAMPLE BY</code></li><li><code>ALTER ADD INDEX</code>. Level: <code>TABLE</code>. Aliases: <code>ADD INDEX</code></li><li><code>ALTER DROP INDEX</code>. Level: <code>TABLE</code>. Aliases: <code>DROP INDEX</code></li><li><code>ALTER MATERIALIZE INDEX</code>. Level: <code>TABLE</code>. Aliases: <code>MATERIALIZE INDEX</code></li><li><code>ALTER CLEAR INDEX</code>. Level: <code>TABLE</code>. Aliases: <code>CLEAR INDEX</code></li></ul></li><li><code>ALTER CONSTRAINT</code>. Level: <code>GROUP</code>. Aliases: <code>CONSTRAINT</code> 
    <ul><li><code>ALTER ADD CONSTRAINT</code>. Level: <code>TABLE</code>. Aliases: <code>ADD CONSTRAINT</code></li><li><code>ALTER DROP CONSTRAINT</code>. Level: <code>TABLE</code>. Aliases: <code>DROP CONSTRAINT</code></li></ul></li><li><code>ALTER TTL</code>. Level: <code>TABLE</code>. Aliases: <code>ALTER MODIFY TTL</code>, <code>MODIFY TTL</code></li><li><code>ALTER MATERIALIZE TTL</code>. Level: <code>TABLE</code>. Aliases: <code>MATERIALIZE TTL</code></li><li><code>ALTER SETTINGS</code>. Level: <code>TABLE</code>. Aliases: <code>ALTER SETTING</code>, <code>ALTER MODIFY SETTING</code>, <code>MODIFY SETTING</code></li><li><code>ALTER MOVE PARTITION</code>. Level: <code>TABLE</code>. Aliases: <code>ALTER MOVE PART</code>, <code>MOVE PARTITION</code>, <code>MOVE PART</code></li><li><code>ALTER FETCH PARTITION</code>. Level: <code>TABLE</code>. Aliases: <code>FETCH PARTITION</code></li><li><code>ALTER FREEZE PARTITION</code>. Level: <code>TABLE</code>. Aliases: <code>FREEZE PARTITION</code></li></ul></li><li><code>ALTER VIEW</code> Level: <code>GROUP</code> 
  <ul><li><code>ALTER VIEW REFRESH</code>. Level: <code>VIEW</code>. Aliases: <code>ALTER LIVE VIEW REFRESH</code>, <code>REFRESH VIEW</code></li><li><code>ALTER VIEW MODIFY QUERY</code>. Level: <code>VIEW</code>. Aliases: <code>ALTER TABLE MODIFY QUERY</code></li></ul></li></ul> 
<p>有关如何处理此层次结构的示例：</p> 
<ul><li>ALTER特权包括所有其他ALTER *特权。</li><li>ALTER CONSTRAINT包括ALTER ADD CONSTRAINT和ALTER DROP CONSTRAINT特权。</li></ul> 
<p>注意：</p> 
<ul><li>MODIFY SETTING特权允许修改表引擎设置。它不会影响设置或服务器配置参数。</li><li>ATTACH操作需要CREATE特权。</li><li>DETACH操作需要DROP特权。</li><li>要通过KILL MUTATION查询停止突变，您需要具有启动此突变的特权。 例如，如果要停止ALTER UPDATE查询，则需要ALTER UPDATE，ALTER TABLE或ALTER特权。</li></ul> 
<h4 id="grant-create">CREATE</h4> 
<p>允许根据以下特权层次执行CREATE和ATTACH DDL查询：</p> 
<p><code>CREATE</code>. Level: <code>GROUP</code></p> 
<ul><li><code>CREATE DATABASE</code>. Level: <code>DATABASE</code></li><li><code>CREATE TABLE</code>. Level: <code>TABLE</code></li><li><code>CREATE VIEW</code>. Level: <code>VIEW</code></li><li><code>CREATE DICTIONARY</code>. Level: <code>DICTIONARY</code></li><li><code>CREATE TEMPORARY TABLE</code>. Level: <code>GLOBAL</code></li></ul> 
<p>注意：</p> 
<ul><li>要删除创建的表，用户需要DROP。</li></ul> 
<h4 id="grant-drop">DROP</h4> 
<p>允许根据以下特权层次执行DROP和DETACH查询：</p> 
<p><code>DROP</code>. Level:</p> 
<ul><li><code>DROP DATABASE</code>. Level: <code>DATABASE</code></li><li><code>DROP TABLE</code>. Level: <code>TABLE</code></li><li><code>DROP VIEW</code>. Level: <code>VIEW</code></li><li><code>DROP DICTIONARY</code>. Level: <code>DICTIONARY</code></li></ul> 
<h4 id="TRUNCATE">TRUNCATE</h4> 
<p>允许执行TRUNCATE查询。</p> 
<p>特权级别：TABLE。</p> 
<h4 id="grant-optimize">OPTIMIZE</h4> 
<p>允许执行OPTIMIZE TABLE查询。</p> 
<p>特权级别：TABLE。</p> 
<h4 id="grant-show">SHOW</h4> 
<p>允许根据以下特权层次结构执行SHOW，DESCRIBE，USE和EXISTS查询：</p> 
<p><code>SHOW</code>. Level: <code>GROUP</code></p> 
<ul><li><code>SHOW DATABASES</code>. Level: <code>DATABASE</code>. Allows to execute <code>SHOW DATABASES</code>, <code>SHOW CREATE DATABASE</code>, <code>USE &lt;database&gt;</code> queries.</li><li><code>SHOW TABLES</code>. Level: <code>TABLE</code>. Allows to execute <code>SHOW TABLES</code>, <code>EXISTS &lt;table&gt;</code>, <code>CHECK &lt;table&gt;</code> queries.</li><li><code>SHOW COLUMNS</code>. Level: <code>COLUMN</code>. Allows to execute <code>SHOW CREATE TABLE</code>, <code>DESCRIBE</code> queries.</li><li><code>SHOW DICTIONARIES</code>. Level: <code>DICTIONARY</code>. Allows to execute <code>SHOW DICTIONARIES</code>, <code>SHOW CREATE DICTIONARY</code>, <code>EXISTS &lt;dictionary&gt;</code> queries.</li></ul> 
<p>注意：</p> 
<p>如果用户具有与指定的表，字典或数据库有关的任何其他特权，则该用户具有SHOW特权。</p> 
<h4 id="grant-kill-query">KILL QUERY</h4> 
<p>允许根据以下特权层次执行KILL查询：</p> 
<p>特权级别：GLOBAL。</p> 
<p>注意：</p> 
<p>KILL QUERY特权允许一个用户杀死其他用户的查询。</p> 
<h4 id="ACCESS%20MANAGEMENT">ACCESS MANAGEMENT</h4> 
<p>允许用户执行管理用户，角色和行策略的查询。</p> 
<p><code>ACCESS MANAGEMENT</code>. Level: <code>GROUP</code></p> 
<ul><li><code>CREATE USER</code>. Level: <code>GLOBAL</code></li><li><code>ALTER USER</code>. Level: <code>GLOBAL</code></li><li><code>DROP USER</code>. Level: <code>GLOBAL</code></li><li><code>CREATE ROLE</code>. Level: <code>GLOBAL</code></li><li><code>ALTER ROLE</code>. Level: <code>GLOBAL</code></li><li><code>DROP ROLE</code>. Level: <code>GLOBAL</code></li><li><code>ROLE ADMIN</code>. Level: <code>GLOBAL</code></li><li><code>CREATE ROW POLICY</code>. Level: <code>GLOBAL</code>. Aliases: <code>CREATE POLICY</code></li><li><code>ALTER ROW POLICY</code>. Level: <code>GLOBAL</code>. Aliases: <code>ALTER POLICY</code></li><li><code>DROP ROW POLICY</code>. Level: <code>GLOBAL</code>. Aliases: <code>DROP POLICY</code></li><li><code>CREATE QUOTA</code>. Level: <code>GLOBAL</code></li><li><code>ALTER QUOTA</code>. Level: <code>GLOBAL</code></li><li><code>DROP QUOTA</code>. Level: <code>GLOBAL</code></li><li><code>CREATE SETTINGS PROFILE</code>. Level: <code>GLOBAL</code>. Aliases: <code>CREATE PROFILE</code></li><li><code>ALTER SETTINGS PROFILE</code>. Level: <code>GLOBAL</code>. Aliases: <code>ALTER PROFILE</code></li><li><code>DROP SETTINGS PROFILE</code>. Level: <code>GLOBAL</code>. Aliases: <code>DROP PROFILE</code></li><li><code>SHOW ACCESS</code>. Level: <code>GROUP</code> 
  <ul><li><code>SHOW_USERS</code>. Level: <code>GLOBAL</code>. Aliases: <code>SHOW CREATE USER</code></li><li><code>SHOW_ROLES</code>. Level: <code>GLOBAL</code>. Aliases: <code>SHOW CREATE ROLE</code></li><li><code>SHOW_ROW_POLICIES</code>. Level: <code>GLOBAL</code>. Aliases: <code>SHOW POLICIES</code>, <code>SHOW CREATE ROW POLICY</code>, <code>SHOW CREATE POLICY</code></li><li><code>SHOW_QUOTAS</code>. Level: <code>GLOBAL</code>. Aliases: <code>SHOW CREATE QUOTA</code></li><li><code>SHOW_SETTINGS_PROFILES</code>. Level: <code>GLOBAL</code>. Aliases: <code>SHOW PROFILES</code>, <code>SHOW CREATE SETTINGS PROFILE</code>, <code>SHOW CREATE PROFILE</code></li></ul></li></ul> 
<p><code>ROLE ADMIN特权允许用户分配和撤消任何角色，包括未使用admin选项分配给用户的角色。</code></p> 
<h4 id="SYSTEM">SYSTEM</h4> 
<p>允许用户根据以下特权层次执行SYSTEM查询。</p> 
<p><code>SYSTEM</code>. Level: <code>GROUP</code></p> 
<ul><li><code>SYSTEM SHUTDOWN</code>. Level: <code>GLOBAL</code>. Aliases: <code>SYSTEM KILL</code>, <code>SHUTDOWN</code></li><li><code>SYSTEM DROP CACHE</code>. Aliases: <code>DROP CACHE</code> 
  <ul><li><code>SYSTEM DROP DNS CACHE</code>. Level: <code>GLOBAL</code>. Aliases: <code>SYSTEM DROP DNS</code>, <code>DROP DNS CACHE</code>, <code>DROP DNS</code></li><li><code>SYSTEM DROP MARK CACHE</code>. Level: <code>GLOBAL</code>. Aliases: <code>SYSTEM DROP MARK</code>, <code>DROP MARK CACHE</code>, <code>DROP MARKS</code></li><li><code>SYSTEM DROP UNCOMPRESSED CACHE</code>. Level: <code>GLOBAL</code>. Aliases: <code>SYSTEM DROP UNCOMPRESSED</code>, <code>DROP UNCOMPRESSED CACHE</code>, <code>DROP UNCOMPRESSED</code></li></ul></li><li><code>SYSTEM RELOAD</code>. Level: <code>GROUP</code> 
  <ul><li><code>SYSTEM RELOAD CONFIG</code>. Level: <code>GLOBAL</code>. Aliases: <code>RELOAD CONFIG</code></li><li><code>SYSTEM RELOAD DICTIONARY</code>. Level: <code>GLOBAL</code>. Aliases: <code>SYSTEM RELOAD DICTIONARIES</code>, <code>RELOAD DICTIONARY</code>, <code>RELOAD DICTIONARIES</code></li><li><code>SYSTEM RELOAD EMBEDDED DICTIONARIES</code>. Level: <code>GLOBAL</code>. Aliases: R<code>ELOAD EMBEDDED DICTIONARIES</code></li></ul></li><li><code>SYSTEM MERGES</code>. Level: <code>TABLE</code>. Aliases: <code>SYSTEM STOP MERGES</code>, <code>SYSTEM START MERGES</code>, <code>STOP MERGES</code>, <code>START MERGES</code></li><li><code>SYSTEM TTL MERGES</code>. Level: <code>TABLE</code>. Aliases: <code>SYSTEM STOP TTL MERGES</code>, <code>SYSTEM START TTL MERGES</code>, <code>STOP TTL MERGES</code>, <code>START TTL MERGES</code></li><li><code>SYSTEM FETCHES</code>. Level: <code>TABLE</code>. Aliases: <code>SYSTEM STOP FETCHES</code>, <code>SYSTEM START FETCHES</code>, <code>STOP FETCHES</code>, <code>START FETCHES</code></li><li><code>SYSTEM MOVES</code>. Level: <code>TABLE</code>. Aliases: <code>SYSTEM STOP MOVES</code>, <code>SYSTEM START MOVES</code>, <code>STOP MOVES</code>, <code>START MOVES</code></li><li><code>SYSTEM SENDS</code>. Level: <code>GROUP</code>. Aliases: <code>SYSTEM STOP SENDS</code>, <code>SYSTEM START SENDS</code>, <code>STOP SENDS</code>, <code>START SENDS</code> 
  <ul><li><code>SYSTEM DISTRIBUTED SENDS</code>. Level: <code>TABLE</code>. Aliases: <code>SYSTEM STOP DISTRIBUTED SENDS</code>, <code>SYSTEM START DISTRIBUTED SENDS</code>, <code>STOP DISTRIBUTED SENDS</code>, <code>START DISTRIBUTED SENDS</code></li><li><code>SYSTEM REPLICATED SENDS</code>. Level: <code>TABLE</code>. Aliases: <code>SYSTEM STOP REPLICATED SENDS</code>, <code>SYSTEM START REPLICATED SENDS</code>, <code>STOP REPLICATED SENDS</code>, <code>START REPLICATED SENDS</code></li></ul></li><li><code>SYSTEM REPLICATION QUEUES</code>. Level: <code>TABLE</code>. Aliases: <code>SYSTEM STOP REPLICATION QUEUES</code>, <code>SYSTEM START REPLICATION QUEUES</code>, <code>STOP REPLICATION QUEUES</code>, <code>START REPLICATION QUEUES</code></li><li><code>SYSTEM SYNC REPLICA</code>. Level: <code>TABLE</code>. Aliases: <code>SYNC REPLICA</code></li><li><code>SYSTEM RESTART REPLICA</code>. Level: <code>TABLE</code>. Aliases: <code>RESTART REPLICA</code></li><li><code>SYSTEM FLUSH</code>. Level: <code>GROUP</code> 
  <ul><li><code>SYSTEM FLUSH DISTRIBUTED</code>. Level: <code>TABLE</code>. Aliases: <code>FLUSH DISTRIBUTED</code></li><li><code>SYSTEM FLUSH LOGS</code>. Level: <code>GLOBAL</code>. Aliases: <code>FLUSH LOGS</code></li></ul></li></ul> 
<p><code>SYSTEM RELOAD EMBEDDED DICTIONARIES特权由SYSTEM RELOAD DICTIONARY ON *。*特权隐式授予。</code></p> 
<h4 id="INTROSPECTION">INTROSPECTION</h4> 
<p>允许使用自省功能。</p> 
<p><code>INTROSPECTION</code>. Level: <code>GROUP</code>. Aliases: <code>INTROSPECTION FUNCTIONS</code></p> 
<ul><li><code>addressToLine</code>. Level: <code>GLOBAL</code></li><li><code>addressToSymbol</code>. Level: <code>GLOBAL</code></li><li><code>demangle</code>. Level: <code>GLOBAL</code></li></ul> 
<h4 id="SOURCES">SOURCES</h4> 
<p>允许使用外部数据源。 适用于表引擎和表函数。</p> 
<p><code>SOURCES</code>. Level: <code>GROUP</code></p> 
<ul><li><code>FILE</code>. Level: <code>GLOBAL</code></li><li><code>URL</code>. Level: <code>GLOBAL</code></li><li><code>REMOTE</code>. Level: <code>GLOBAL</code></li><li><code>YSQL</code>. Level: <code>GLOBAL</code></li><li><code>ODBC</code>. Level: <code>GLOBAL</code></li><li><code>JDBC</code>. Level: <code>GLOBAL</code></li><li><code>HDFS</code>. Level: <code>GLOBAL</code></li><li><code>S3</code>. Level: <code>GLOBAL</code></li></ul> 
<p><code>SOURCES特权允许使用所有源。 您也可以分别为每个来源授予特权。 要使用源，您需要其他特权。</code></p> 
<p><code>举例：</code></p> 
<ul><li><code>要使用MySQL表引擎创建表，您需要CREATE TABLE (ON db.table_name) 和MYSQL特权。</code></li><li><code>要使用mysql表功能，您需要CREATE TEMPORARY TABLE和MYSQL特权。</code></li></ul> 
<h4 id="dictGet">dictGet</h4> 
<p>允许用户执行dictGet，dictHas，dictGetHierarchy和dictIsIn函数。</p> 
<p>特权级别：DICTIONARY.</p> 
<ul><li><code>dictGet</code>. Aliases: <code>dictHas</code>, <code>dictGetHierarchy</code>, <code>dictIsIn</code></li></ul> 
<p>举例：</p> 
<ul><li><code>GRANT dictGet ON mydb.mydictionary TO john</code></li><li><code>GRANT dictGet ON mydictionary TO john</code></li></ul> 
<h4 id="ALL">ALL</h4> 
<p>将受监管实体的所有特权授予用户帐户或角色。</p> 
<h4 id="grant-none">NONE</h4> 
<p>不授予任何特权。</p> 
<h4 id="admin-option-privilege">ADMIN OPTION</h4> 
<p>ADMIN OPTION特权允许用户将其角色授予其他用户。</p> 
<p> </p> 
<h2 id="revoke">REVOKE语句</h2> 
<p>撤消用户或角色的特权。</p> 
<h3 id="%E8%AF%AD%E6%B3%95">语法</h3> 
<pre><code class="language-sql">--撤销用户的特权
REVOKE [ON CLUSTER cluster_name] privilege[(column_name [,...])] [,...] ON {db.table|db.*|*.*|table|*} FROM {user | CURRENT_USER} [,...] | ALL | ALL EXCEPT {user | CURRENT_USER} [,...]

--撤消用户角色
REVOKE [ON CLUSTER cluster_name] [ADMIN OPTION FOR] role [,...] FROM {user | role | CURRENT_USER} [,...] | ALL | ALL EXCEPT {user_name | role_name | CURRENT_USER} [,...]</code></pre> 
<h3 id="%E6%8F%8F%E8%BF%B0">描述</h3> 
<p>要撤消某些特权，可以使用比计划撤消范围更广的特权。</p> 
<p>例如，如果用户具有SELECT（x，y）特权，则管理员可以执行REVOKE SELECT（x，y）...或REVOKE SELECT * ...，甚至是REVOKE ALL PRIVILEGES ...查询来撤销此操作 特权。</p> 
<h4 id="%E9%83%A8%E5%88%86%E6%92%A4%E9%94%80">部分撤销</h4> 
<p>您可以撤消部分特权。 例如，如果用户具有SELECT *.* 特权，则可以从中撤消从某些表或数据库读取数据的特权。</p> 
<h3 id="%E4%B8%BE%E4%BE%8B">举例</h3> 
<pre><code class="language-sql">--授予john用户帐户特权，以便从所有数据库中进行选择，但accounts帐户除外：
GRANT SELECT ON *.* TO john;
REVOKE SELECT ON accounts.* FROM john;

--授予mira用户帐户特权，使其可以从accounts.staff表的所有列中进行SELECT,除了wage
GRANT SELECT ON accounts.staff TO mira;
REVOKE SELECT(wage) ON accounts.staff FROM mira;
</code></pre> 
<h2 id="misc_operations-optimize">OPTIMIZE语句</h2> 
<pre><code class="language-sql">OPTIMIZE TABLE [db.]name [ON CLUSTER cluster] [PARTITION partition | PARTITION ID 'partition_id'] [FINAL] [DEDUPLICATE]
</code></pre> 
<p>该查询尝试使用MergeTree系列中的表引擎，对表的未计划合并的数据部分合并。</p> 
<p>MaterializedView和Buffer引擎也支持OPTMIZE查询。 不支持其他表引擎。</p> 
<p>当OPTIMIZE 用于ReplicatedMergeTree表引擎，clickhouse创建一个任务并等待在所有节点上运行（如果启用了Replication_alter_partitions_sync设置）</p> 
<ul><li>如果OPTIMIZE由于任何原因未执行合并，则不会通知客户。 要启用通知，请使用optimize_throw_if_noop设置。</li><li>如果指定PARTITION，则仅优化指定的分区。<a href="https://clickhouse.tech/docs/en/sql-reference/statements/alter/#alter-how-to-specify-part-expr" rel="nofollow">How to set partition expression</a>.</li><li>如果指定FINAL，则即使所有数据已经在一个部分中，也会执行优化。</li><li>如果指定DEDUPLICATE，则将对完全相同的行进行重复数据删除（比较所有列），仅支持MergeTree引擎。</li></ul> 
<p>OPTIMIZE无法修复“Too many parts”错误。</p> 
<h2 id="query-set">SET语句</h2> 
<pre><code class="language-sql">SET param = value
SET profile = 'profile-name-from-the-settings-file'
</code></pre> 
<p>为当前会话的参数设置分配值。 您不能以这种方式更改服务器设置。</p> 
<p>您还可以在单个查询中设置来自指定设置配置文件的所有值。</p> 
<h2 id="set-role-statement">SET ROLE语句</h2> 
<p>为当前用户激活角色。</p> 
<pre><code class="language-sql">SET ROLE {DEFAULT | NONE | role [,...] | ALL | ALL EXCEPT role [,...]}
</code></pre> 
<h3 id="set-default-role-statement">SET DEFAULT ROLE</h3> 
<p>为用户设置默认角色。</p> 
<p>默认角色在用户登录时自动激活。 您只能将以前授予的角色设置为默认值。 如果未将角色授予用户，则ClickHouse会引发异常。</p> 
<pre><code class="language-sql">SET DEFAULT ROLE {NONE | role [,...] | ALL | ALL EXCEPT role [,...]} TO {user|CURRENT_USER} [,...]
</code></pre> 
<h3>举例</h3> 
<pre><code class="language-sql">--为用户设置多个默认角色：
SET DEFAULT ROLE role1, role2, ... TO user

--将所有角色默认授予给用户：
SET DEFAULT ROLE ALL TO user

--从用户清除默认角色：
SET DEFAULT ROLE NONE TO user

--将除了一些角色外的所有角色默认授予给用户：
SET DEFAULT ROLE ALL EXCEPT role1, role2 TO user</code></pre> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b6d051aa320484f6fcec954f978770be/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">handleRequest()参数报错</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/45fd58e8b0003107eb33aa297bb7b1eb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python爬取qq好友_利用Python爬取QQ好友空间数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>