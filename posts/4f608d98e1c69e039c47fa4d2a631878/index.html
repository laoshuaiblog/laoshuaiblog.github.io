<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>c语言-＞自定义类型联合体和枚举类型 - 老帅的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://laoshuaiblog.github.io/posts/4f608d98e1c69e039c47fa4d2a631878/">
  <meta property="og:site_name" content="老帅的博客">
  <meta property="og:title" content="c语言-＞自定义类型联合体和枚举类型">
  <meta property="og:description" content="系列文章目录 文章目录 前言 ✅作者简介：大家好，我是橘橙黄又青，一个想要与大家共同进步的男人😉😉
🍎个人主页：橘橙黄又青_C语言,函数,指针-CSDN博客
目的：学习联合体和枚举类型的声明联合体的特点和大小，枚举类型的有点和使用。
1. 联合体类型的声明 像结构体⼀样，联合体也是由⼀个或者多个成员构成，这些成员可以不同的类型。 但是编译器只为最⼤的成员分配⾜够的内存空间。联合体的特点是所有成员共⽤同⼀块内存空间 。所 以联合体也叫：共⽤体。 给联合体其中⼀个成员赋值，其他成员的值也跟着变化。 #include &amp;lt;stdio.h&amp;gt; //联合类型的声明 union Un { char c; int i; }; int main() { //联合变量的定义 union Un un = {0}; //计算连个变量的⼤⼩ printf(&#34;%d\n&#34;, sizeof(un)); return 0; } 输出结果：
4
为什么是4呢？接下来我们来了看
1.2 联合体的特点 联合的成员是共⽤同⼀块内存空间的，这样⼀个联合变量的⼤⼩，⾄少是最⼤成员的⼤⼩（因为联合 ⾄少得有能⼒保存最⼤的那个成员）。 我们来看两个例子你就知道了 案例1： //代码1 #include &amp;lt;stdio.h&amp;gt; //联合类型的声明 union Un { char c; int i; }; int main() { //联合变量的定义 union Un un = {0}; // 下⾯输出的结果是⼀样的吗？ printf(&#34;">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-12T09:57:13+08:00">
    <meta property="article:modified_time" content="2023-12-12T09:57:13+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="老帅的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">老帅的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">c语言-＞自定义类型联合体和枚举类型</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><a id="_0"></a>系列文章目录</h2> 
<p></p> 
<p></p> 
<div> 
 <h4>文章目录</h4> 
</div> 
<p></p> 
<hr> 
<h2><a id="_12"></a>前言</h2> 
<p><img alt="" height="732" src="https://images2.imgbox.com/78/40/RyI7EC0p_o.jpg" width="550"></p> 
<p>✅作者简介：大家好，我是橘橙黄又青，一个想要与大家共同进步的男人😉😉</p> 
<p>🍎个人主页：<a href="https://blog.csdn.net/chendemingxxx?spm=1011.2266.3001.5343" title="橘橙黄又青_C语言,函数,指针-CSDN博客">橘橙黄又青_C语言,函数,指针-CSDN博客</a></p> 
<p><strong>目的：学习联合体和枚举类型的声明联合体的特点和大小，枚举类型的有点和使用。</strong></p> 
<h2><span style="color:#1456f0;">1. </span><span style="color:#1f2329;">联合体类型的声明</span></h2> 
<div> 
 <span style="color:#1f2329;">像结构体⼀样，联合体也是由⼀个或者多个成员构成，这些成员可以不同的类型。 </span> 
</div> 
<div> 
 <strong><span style="color:#fe2c24;">但是编译器只为最⼤的成员分配⾜够的内存空间。联合体的特点是所有成员共⽤同⼀块内存空间</span></strong> 
 <span style="color:#1f2329;">。所 以联合体也叫：<strong>共⽤体</strong>。</span> 
</div> 
<div> 
 <span style="color:#fe2c24;">给联合体其中⼀个成员赋值，其他成员的值也跟着变化。</span> 
</div> 
<div> 
 <pre><code class="language-cpp">#include &lt;stdio.h&gt;
//联合类型的声明
union Un
{
     char c;
     int i;
};
int main()
{
     //联合变量的定义
     union Un un = {0};
     //计算连个变量的⼤⼩
     printf("%d\n", sizeof(un));
 
     return 0;
}</code></pre> 
 <p>输出结果：</p> 
 <blockquote> 
  <p>4</p> 
 </blockquote> 
</div> 
<p>为什么是4呢？接下来我们来了看</p> 
<h3> <span style="color:#1456f0;">1.2 </span><span style="color:#1f2329;">联合体的特点 </span></h3> 
<p></p> 
<div> 
 <strong><span style="color:#fe2c24;">联合的成员是共⽤同⼀块内存空间的，这样⼀个联合变量的⼤⼩，⾄少是最⼤成员的⼤⼩（因为联合 ⾄少得有能⼒保存最⼤的那个成员）。</span></strong> 
</div> 
<div></div> 
<div> 
 <span style="color:#0d0016;">我们来看两个例子你就知道了</span> 
</div> 
<div> 
 <span style="color:#0d0016;">案例1：</span> 
</div> 
<div> 
 <pre><code class="language-cpp">//代码1
#include &lt;stdio.h&gt;
//联合类型的声明
union Un
{
     char c;
     int i;
};
int main()
{
     //联合变量的定义
     union Un un = {0};
     // 下⾯输出的结果是⼀样的吗？
     printf("%p\n", &amp;(un.i));
     printf("%p\n", &amp;(un.c));
     printf("%p\n", &amp;un);
     return 0;
}</code></pre> 
 <p></p> 
 <p>输出结果：</p> 
 <p><img alt="" height="344" src="https://images2.imgbox.com/cf/f2/VtkV8Px0_o.png" width="1096"></p> 
 <p>可以看到，说明他们是公用一块空间的，看图解析：</p> 
 <p><img alt="" height="593" src="https://images2.imgbox.com/b5/55/lR6DSVBl_o.png" width="1064"></p> 
 <p>案例2：</p> 
 <pre><code class="language-cpp">//代码2
#include &lt;stdio.h&gt;
//联合类型的声明
union Un
{
     char c;
     int i;
};
int main()
{
     //联合变量的定义
     union Un un = {0};
     un.i = 0x11223344;
     un.c = 0x55;
     printf("%x\n", un.i);
     return 0;
}</code></pre> 
 <p></p> 
 <p>输出结果：</p> 
 <p><img alt="" height="274" src="https://images2.imgbox.com/b0/08/OKe9HoZD_o.png" width="1194"></p> 
 <p>这又是怎么回事呢？分析：</p> 
 <p><img alt="" height="619" src="https://images2.imgbox.com/5f/e9/cuSfW90g_o.png" width="1200"></p> 
 <p>也可以这样理解：</p> 
 <p>假如，案例1的输出结果为：</p> 
 <pre><code class="language-cpp">001AF85C
001AF85C
001AF85C</code></pre> 
 <p></p> 
 <div> 
  <span style="color:#1f2329;">代码1输出的三个地址⼀模⼀样，代码2的输出，我们发现将i的第4个字节的内容修改为55了。 </span> 
 </div> 
 <div> 
  <span style="color:#1f2329;">我们仔细分析就可以画出，un的内存布局图。</span> 
 </div> 
 <div> 
  <img alt="" height="291" src="https://images2.imgbox.com/c7/7c/aR1UAW0F_o.png" width="950"> 
 </div> 
 <div> 
  <h3><span style="color:#1456f0;">1.3 </span><span style="color:#1f2329;">相同成员的结构体和联合体对⽐</span></h3> 
  <p><span style="color:#1f2329;">结构体代码1：</span></p> 
  <p><img alt="" height="261" src="https://images2.imgbox.com/73/32/PY7slH3P_o.png" width="700"></p> 
  <p>联合体代码2：</p> 
  <p><img alt="" height="394" src="https://images2.imgbox.com/4a/47/g7EiL3jb_o.png" width="928"></p> 
  <div> 
   <strong><span style="color:#fe2c24;">结构体和联合体的内存对⽐：</span></strong> 
  </div> 
  <div> 
   <img alt="" height="583" src="https://images2.imgbox.com/f4/67/ZmmeOONN_o.png" width="1200"> 
  </div> 
  <div> 
   <h3><strong><span style="color:#fe2c24;">1.4 联合体⼤⼩的计算</span></strong></h3> 
  </div> 
  <blockquote> 
   <div> 
    <div> 
     <span style="color:#1456f0;">• </span> 
     <span style="color:#1f2329;">联合的⼤⼩⾄少是最⼤成员的⼤⼩。 </span> 
    </div> 
    <div> 
     <span style="color:#1456f0;">• </span> 
     <span style="color:#1f2329;">当最⼤成员⼤⼩不是最⼤对⻬数的整数倍的时候，就要对⻬到最⼤对⻬数的整数倍。</span> 
    </div> 
   </div> 
  </blockquote> 
 </div> 
</div> 
<p>怎么理解呢？来看看一个例子：</p> 
<pre><code class="language-cpp">#include &lt;stdio.h&gt;
union Un1
{
     char c[5];
     int i;
};
union Un2
{
     short c[7];
     int i;
};
int main()
{
     //下⾯输出的结果是什么？
     printf("%d\n", sizeof(union Un1));
     printf("%d\n", sizeof(union Un2));
     return 0;
}</code></pre> 
<p>输出结果：</p> 
<p><img alt="" height="362" src="https://images2.imgbox.com/6a/7e/iYjAYtxU_o.png" width="1027"></p> 
<p>怎么算，来看这里：</p> 
<p><img alt="" height="1083" src="https://images2.imgbox.com/63/68/Fdm1Svu4_o.png" width="1200"></p> 
<div> 
 <span style="color:#1f2329;"><strong>使⽤联合体是可以节省空间的</strong>，举例： </span> 
</div> 
<div></div> 
<div> 
 <span style="color:#1f2329;">⽐如，我们要搞⼀个活动，要上线⼀个礼品兑换单，礼品兑换单中有三种商品：图书、杯⼦、衬衫。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">每⼀种商品都有：库存量、价格、商品类型和商品类型相关的其他信息。 </span> 
</div> 
<div> 
 <span style="color:#646a73;">图书：书名、作者、⻚数 </span> 
</div> 
<div> 
 <span style="color:#646a73;">杯⼦：设计 </span> 
</div> 
<div> 
 <span style="color:#646a73;">衬衫：设计、可选颜⾊、可选尺⼨ </span> 
</div> 
<div> 
 <span style="color:#1f2329;">那我们不耐⼼思考，直接写出⼀下结构：</span> 
</div> 
<div> 
 <pre><code class="language-cpp">struct gift_list
{
     //公共属性
     int stock_number;//库存量
     double price; //定价
     int item_type;//商品类型
 
     //特殊属性
     char title[20];//书名
     char author[20];//作者
     int num_pages;//⻚数
 
     char design[30];//设计
     int colors;//颜⾊
     int sizes;//尺⼨
};</code></pre> 
 <div> 
  <span style="color:#1f2329;">上述的结构其实设计的很简单，⽤起来也⽅便，但是结构的设计中包含了所有礼品的各种属性，这样 使得结构体的⼤⼩就会偏⼤，⽐较浪费内存。因为对于礼品兑换单中的商品来说，只有部分属性信息 是常⽤的。⽐如： </span> 
 </div> 
 <div> 
  <span style="color:#1f2329;">商品是图书，就不需要design、colors、sizes。 </span> 
 </div> 
 <div> 
  <span style="color:#1f2329;">所以我们就可以把公共属性单独写出来，剩余属于各种商品本⾝的属性使⽤联合体起来，这样就可以 介绍所需的内存空间，⼀定程度上节省了内存。</span> 
 </div> 
 <div> 
  <span style="color:#1f2329;">代码展示：</span> 
 </div> 
 <div> 
  <pre><code class="language-cpp">struct gift_list
{
     int stock_number;//库存量
     double price; //定价
     int item_type;//商品类型
 
     union{//公用一块空间，节省空间
         struct
         {
             char title[20];//书名
             char author[20];//作者
             int num_pages;//⻚数
         }book;
         struct
         {
             char design[30];//设计
         }mug;
         struct
         {
             char design[30];//设计
             int colors;//颜⾊
             int sizes;//尺⼨
         }shirt;
     }item;
};</code></pre> 
  <h3><span style="color:#1456f0;">1.5 </span><span style="color:#1f2329;">联合的⼀个练习</span></h3> 
  <div> 
   <span style="color:#1f2329;">写⼀个程序，判断当前机器是⼤端？还是⼩端？</span> 
  </div> 
  <div> 
   <pre><code class="language-cpp">int check_sys()
{
     union
     {
         int i;
         char c;
     }un;
     un.i = 1;
     return un.c;//返回1是⼩端，返回0是⼤端
}</code></pre> 
   <p>还有一个非常牛逼的代码，当我看到的时候，我都震惊了，这也太6了，来看：</p> 
   <pre><code class="language-cpp">#include&lt;stdio.h&gt;
int check_sys() {
    union
    {
        int x;
        char a;
    }Un;
    Un.x = 1;// 计算机储存方式 00 00 00 01如果是小端逆顺序。
    return (Un.a);
}
int main()
{

    int ret = check_sys();
    if (ret == 1) {
        puts("小端");
    }
    else {
        puts("大端");
    }
	return 0;
}</code></pre> 
   <p></p> 
   <p>输出结果：<img alt="" height="290" src="https://images2.imgbox.com/d7/b9/ezPujzgo_o.png" width="742"></p> 
  </div> 
 </div> 
</div> 
<h2><span style="color:#1456f0;">2. </span><span style="color:#1f2329;">枚举类型 </span> </h2> 
<div> 
 <span style="color:#1456f0;">2.1 </span> 
 <span style="color:#1f2329;">枚举类型的声明 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">枚举顾名思义就是⼀⼀列举。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">把可能的取值⼀⼀列举。</span> 
</div> 
<div> 
 <span style="color:#1f2329;">比如：</span> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#646a73;">1.⼀周的星期⼀到星期⽇是有限的7天，可以⼀⼀列举 </span> 
  </div> 
  <div> 
   <span style="color:#646a73;">2.性别有：男、⼥、保密，也可以⼀⼀列举 </span> 
  </div> 
  <div> 
   <span style="color:#646a73;">3.⽉份有12个⽉，也可以⼀⼀列举 </span> 
  </div> 
  <div> 
   <span style="color:#646a73;">4.三原⾊，也是可以意义列举</span> 
  </div> 
 </div> 
</blockquote> 
<p> <span style="color:#1f2329;">这些数据的表⽰就可以使⽤枚举了</span></p> 
<pre><code class="language-cpp">enum Day//星期
{
     Mon,
     Tues,
     Wed,
     Thur,
     Fri,
     Sat,
     Sun
};
enum Sex//性别
{
     MALE,
     FEMALE,
     SECRET
}；
enum Color//颜⾊
{
     RED,
     GREEN,
     BLUE
};</code></pre> 
<div> 
 <span style="color:#1f2329;">以上定义的 </span> 
 <span style="color:#1f2329;">enum Day </span> 
 <span style="color:#1f2329;">， </span> 
 <span style="color:#1f2329;">enum Sex </span> 
 <span style="color:#1f2329;">， </span> 
 <span style="color:#1f2329;">enum Color </span> 
 <span style="color:#1f2329;">都是枚举类型。</span> 
</div> 
<div> 
 <span style="color:#1f2329;">{}中的内容是枚举类型的可能取值，也叫 </span> 
 <span style="color:#fe2c24;"><strong>枚举常量</strong></span> 
 <span style="color:#1f2329;"> 。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">这些可能取值都是有值的，默认从0开始，依次递增1，当然在声明枚举类型的时候也可以赋初值。</span> 
</div> 
<div> 
 <pre><code class="language-cpp">enum Color//颜⾊
{
     RED=2,
     GREEN=4,
     BLUE=8
};</code></pre> 
 <h3><span style="color:#1456f0;">2.2 </span><span style="color:#1f2329;">枚举类型的优点 </span></h3> 
 <blockquote> 
  <p></p> 
  <div> 
   <span style="color:#1456f0;">1. </span> 
   <span style="color:#1f2329;">增加代码的可读性和可维护性 </span> 
  </div> 
  <div> 
   <span style="color:#1456f0;">2. </span> 
   <span style="color:#1f2329;">和#define定义的标识符⽐较枚举有类型检查，更加严谨。 </span> 
  </div> 
  <div> 
   <span style="color:#1456f0;">3. </span> 
   <span style="color:#1f2329;">便于调试，预处理阶段会删除 </span> 
   <span style="color:#1f2329;">#define </span> 
   <span style="color:#1f2329;">定义的符号 </span> 
  </div> 
  <div> 
   <span style="color:#1456f0;">4. </span> 
   <span style="color:#1f2329;">使⽤⽅便，⼀次可以定义多个常量 </span> 
  </div> 
  <div> 
   <span style="color:#1456f0;">5. </span> 
   <span style="color:#1f2329;">枚举常量是遵循作⽤域规则的，枚举声明在函数内，只能在函数内使⽤ </span> 
  </div> 
 </blockquote> 
</div> 
<h3><span style="color:#1456f0;">2.3 </span><span style="color:#1f2329;">枚举类型的使⽤</span> </h3> 
<pre><code class="language-cpp">enum Color//颜⾊
{
     RED=1,
     GREEN=2,
     BLUE=4
};
enum Color clr = GREEN;//使⽤枚举常量给枚举变量赋值</code></pre> 
<div> 
 <span style="color:#1f2329;">那是否可以拿整数给枚举变量赋值呢？在C语⾔中是可以的，但是在C++是不⾏的，C++的类型检查⽐ 较严格。</span> 
</div> 
<div></div> 
<div> 
 <span style="color:#1f2329;">好了今天就到这里了，都看到这里了，点一个赞吧，谢谢。</span> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6b67269c0796fe3a240c2a4889d20ce5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">2023最新最全【Android Studio 】下载及安装和【Gradle配置】零基础入门到精通</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/68d93edee81008a18ce1400ada5c91e4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【java学习】面向切面编程（AOP，Aspect Orient Programming）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 老帅的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>